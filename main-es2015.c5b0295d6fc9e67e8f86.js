(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+lvF":function(t,e,n){t.exports=n("VTer")("native-function-to-string",Function.toString)},"+rLv":function(t,e,n){var r=n("dyZX").document;t.exports=r&&r.documentElement},"/kWe":function(t,e){t.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}},0:function(t,e,n){t.exports=n("zUnb")},"0/R4":function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},"0YWM":function(t,e,n){var r=n("EemH"),i=n("OP3Y"),o=n("aagx"),s=n("XKFU"),a=n("0/R4"),l=n("y3w9");s(s.S,"Reflect",{get:function t(e,n){var s,u,c=arguments.length<3?e:arguments[2];return l(e)===c?e[n]:(s=r.f(e,n))?o(s,"value")?s.value:void 0!==s.get?s.get.call(c):void 0:a(u=i(e))?t(u,n,c):void 0}})},"0eLh":function(t,e,n){const r=n("3wIk"),i=n("vwDW"),{ANY:o}=i,s=n("ex/Z"),a=n("MpxT"),l=n("7sNm"),u=n("JCZO"),c=n("bdwG"),h=n("Dknc");t.exports=(t,e,n,f)=>{let d,p,g,m,y;switch(t=new r(t,f),e=new s(e,f),n){case">":d=l,p=c,g=u,m=">",y=">=";break;case"<":d=u,p=h,g=l,m="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(t,e,f))return!1;for(let r=0;r<e.set.length;++r){let n=null,s=null;if(e.set[r].forEach(t=>{t.semver===o&&(t=new i(">=0.0.0")),n=n||t,s=s||t,d(t.semver,n.semver,f)?n=t:g(t.semver,s.semver,f)&&(s=t)}),n.operator===m||n.operator===y)return!1;if((!s.operator||s.operator===m)&&p(t,s.semver))return!1;if(s.operator===y&&g(t,s.semver))return!1}return!0}},"18Y9":function(t,e,n){const r=n("ex/Z");t.exports=(t,e,n)=>(t=new r(t,n),e=new r(e,n),t.intersects(e))},"1TsA":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},"27OZ":function(t,e,n){const r=n("iEBQ");t.exports=(t,e)=>t.sort((t,n)=>r(n,t,e))},"2OiF":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"2wtF":function(t,e,n){const r=n("0eLh");t.exports=(t,e,n)=>r(t,e,"<",n)},"3Lyj":function(t,e,n){var r=n("KroJ");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},"3cPs":function(t,e,n){const r=n("IsDc");t.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n("/kWe").SEMVER_SPEC_VERSION,SemVer:n("3wIk"),compareIdentifiers:n("KHQI").compareIdentifiers,rcompareIdentifiers:n("KHQI").rcompareIdentifiers,parse:n("Ybu3"),valid:n("gqzR"),clean:n("oBeb"),inc:n("eQf7"),diff:n("Yn5A"),major:n("Br5v"),minor:n("YJ14"),patch:n("LJ9E"),prerelease:n("O9TA"),compare:n("8GxW"),rcompare:n("oh0K"),compareLoose:n("8YLp"),compareBuild:n("iEBQ"),sort:n("lYj8"),rsort:n("27OZ"),gt:n("7sNm"),lt:n("JCZO"),eq:n("xfvg"),neq:n("dtu/"),gte:n("Dknc"),lte:n("bdwG"),cmp:n("VMJL"),coerce:n("eXNJ"),Comparator:n("vwDW"),Range:n("ex/Z"),satisfies:n("MpxT"),toComparators:n("j0pM"),maxSatisfying:n("d43V"),minSatisfying:n("ygsx"),minVersion:n("lkeM"),validRange:n("zv5s"),outside:n("0eLh"),gtr:n("VmpX"),ltr:n("2wtF"),intersects:n("18Y9"),simplifyRange:n("v6YA"),subset:n("I9dd")}},"3wIk":function(t,e,n){const r=n("DXxi"),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=n("/kWe"),{re:s,t:a}=n("IsDc"),l=n("4S+G"),{compareIdentifiers:u}=n("KHQI");class c{constructor(t,e){if(e=l(e),t instanceof c){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid Version: ${t}`);if(t.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=n[4]?n[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<o)return e}return t}):[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(r("SemVer.compare",this.version,this.options,t),!(t instanceof c)){if("string"==typeof t&&t===this.version)return 0;t=new c(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof c||(t=new c(t,this.options)),u(this.major,t.major)||u(this.minor,t.minor)||u(this.patch,t.patch)}comparePre(t){if(t instanceof c||(t=new c(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],i=t.prerelease[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++e)}compareBuild(t){t instanceof c||(t=new c(t,this.options));let e=0;do{const n=this.build[e],i=t.build[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++e)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let t=this.prerelease.length;for(;--t>=0;)"number"==typeof this.prerelease[t]&&(this.prerelease[t]++,t=-2);-1===t&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}}t.exports=c},"3xty":function(t,e,n){var r=n("XKFU"),i=n("2OiF"),o=n("y3w9"),s=(n("dyZX").Reflect||{}).apply,a=Function.apply;r(r.S+r.F*!n("eeVq")(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var r=i(t),l=o(n);return s?s(r,e,l):a.call(r,e,l)}})},"45Tv":function(t,e,n){var r=n("N6cJ"),i=n("y3w9"),o=n("OP3Y"),s=r.has,a=r.get,l=r.key,u=function(t,e,n){if(s(t,e,n))return a(t,e,n);var r=o(e);return null!==r?u(t,r,n):void 0};r.exp({getMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:l(arguments[2]))}})},"49D4":function(t,e,n){var r=n("N6cJ"),i=n("y3w9"),o=r.key,s=r.set;r.exp({defineMetadata:function(t,e,n,r){s(t,e,i(n),o(r))}})},"4LiD":function(t,e,n){"use strict";var r=n("dyZX"),i=n("XKFU"),o=n("KroJ"),s=n("3Lyj"),a=n("Z6vF"),l=n("SlkY"),u=n("9gX7"),c=n("0/R4"),h=n("eeVq"),f=n("XMVh"),d=n("fyDq"),p=n("Xbzi");t.exports=function(t,e,n,g,m,y){var v=r[t],b=v,_=m?"set":"add",x=b&&b.prototype,w={},k=function(t){var e=x[t];o(x,t,"delete"==t||"has"==t?function(t){return!(y&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(y||x.forEach&&!h(function(){(new b).entries().next()}))){var E=new b,S=E[_](y?{}:-0,1)!=E,O=h(function(){E.has(1)}),C=f(function(t){new b(t)}),A=!y&&h(function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)});C||((b=e(function(e,n){u(e,b,t);var r=p(new v,e,b);return null!=n&&l(n,m,r[_],r),r})).prototype=x,x.constructor=b),(O||A)&&(k("delete"),k("has"),m&&k("get")),(A||S)&&k(_),y&&x.clear&&delete x.clear}else b=g.getConstructor(e,t,m,_),s(b.prototype,n),a.NEED=!0;return d(b,t),w[t]=b,i(i.G+i.W+i.F*(b!=v),w),y||g.setStrong(b,t,m),b}},"4R4u":function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"4S+G":function(t,e){const n=["includePrerelease","loose","rtl"];t.exports=t=>t?"object"!=typeof t?{loose:!0}:n.filter(e=>t[e]).reduce((t,e)=>(t[e]=!0,t),{}):{}},"694e":function(t,e,n){var r=n("EemH"),i=n("XKFU"),o=n("y3w9");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},"6FMO":function(t,e,n){var r=n("0/R4"),i=n("EWmC"),o=n("K0xU")("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},"7Dlh":function(t,e,n){var r=n("N6cJ"),i=n("y3w9"),o=r.has,s=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},"7sNm":function(t,e,n){const r=n("8GxW");t.exports=(t,e,n)=>r(t,e,n)>0},"8GxW":function(t,e,n){const r=n("3wIk");t.exports=(t,e,n)=>new r(t,n).compare(new r(e,n))},"8MEG":function(t,e,n){"use strict";var r=n("2OiF"),i=n("0/R4"),o=n("MfQN"),s=[].slice,a={},l=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("F,a","return new F("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=s.call(arguments,1),a=function(){var r=n.concat(s.call(arguments));return this instanceof a?l(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(a.prototype=e.prototype),a}},"8YLp":function(t,e,n){const r=n("8GxW");t.exports=(t,e)=>r(t,e,!0)},"9AAn":function(t,e,n){"use strict";var r=n("wmvG"),i=n("s5qY");t.exports=n("4LiD")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},"9gX7":function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},"9rMk":function(t,e,n){var r=n("XKFU");r(r.S,"Reflect",{has:function(t,e){return e in t}})},"9x6x":function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var n,r="boolean"==typeof e.cycles&&e.cycles,i=e.cmp&&(n=e.cmp,function(t){return function(e,r){return n({key:e,value:t[e]},{key:r,value:t[r]})}}),o=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var n,s;if(Array.isArray(e)){for(s="[",n=0;n<e.length;n++)n&&(s+=","),s+=t(e[n])||"null";return s+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=o.push(e)-1,l=Object.keys(e).sort(i&&i(e));for(s="",n=0;n<l.length;n++){var u=l[n],c=t(e[u]);c&&(s&&(s+=","),s+=JSON.stringify(u)+":"+c)}return o.splice(a,1),"{"+s+"}"}}(t)}},Afnz:function(t,e,n){"use strict";var r=n("LQAc"),i=n("XKFU"),o=n("KroJ"),s=n("Mukb"),a=n("hPIQ"),l=n("QaDb"),u=n("fyDq"),c=n("OP3Y"),h=n("K0xU")("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,p,g,m,y){l(n,e,p);var v,b,_,x=function(t){if(!f&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",k="values"==g,E=!1,S=t.prototype,O=S[h]||S["@@iterator"]||g&&S[g],C=O||x(g),A=g?k?x("entries"):C:void 0,D="Array"==e&&S.entries||O;if(D&&(_=c(D.call(new t)))!==Object.prototype&&_.next&&(u(_,w,!0),r||"function"==typeof _[h]||s(_,h,d)),k&&O&&"values"!==O.name&&(E=!0,C=function(){return O.call(this)}),r&&!y||!f&&!E&&S[h]||s(S,h,C),a[e]=C,a[w]=d,g)if(v={values:k?C:x("values"),keys:m?C:x("keys"),entries:A},y)for(b in v)b in S||o(S,b,v[b]);else i(i.P+i.F*(f||E),e,v);return v}},BqfV:function(t,e,n){var r=n("N6cJ"),i=n("y3w9"),o=r.get,s=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},Br5v:function(t,e,n){const r=n("3wIk");t.exports=(t,e)=>new r(t,e).major},CkkT:function(t,e,n){var r=n("m0Pp"),i=n("Ymqv"),o=n("S/j/"),s=n("ne8i"),a=n("zRwo");t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,c=4==t,h=6==t,f=5==t||h,d=e||a;return function(e,a,p){for(var g,m,y=o(e),v=i(y),b=r(a,p,3),_=s(v.length),x=0,w=n?d(e,_):l?d(e,0):void 0;_>x;x++)if((f||x in v)&&(m=b(g=v[x],x,y),t))if(n)w[x]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:w.push(g)}else if(c)return!1;return h?-1:u||c?c:w}}},DVgA:function(t,e,n){var r=n("zhAb"),i=n("4R4u");t.exports=Object.keys||function(t){return r(t,i)}},DXxi:function(t,e){const n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};t.exports=n},Dknc:function(t,e,n){const r=n("8GxW");t.exports=(t,e,n)=>r(t,e,n)>=0},EK0E:function(t,e,n){"use strict";var r,i=n("dyZX"),o=n("CkkT")(0),s=n("KroJ"),a=n("Z6vF"),l=n("czNK"),u=n("ZD67"),c=n("0/R4"),h=n("s5qY"),f=n("s5qY"),d=!i.ActiveXObject&&"ActiveXObject"in i,p=a.getWeak,g=Object.isExtensible,m=u.ufstore,y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(t){if(c(t)){var e=p(t);return!0===e?m(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(h(this,"WeakMap"),t,e)}},b=t.exports=n("4LiD")("WeakMap",y,v,u,!0,!0);f&&d&&(l((r=u.getConstructor(y,"WeakMap")).prototype,v),a.NEED=!0,o(["delete","has","get","set"],function(t){var e=b.prototype,n=e[t];s(e,t,function(e,i){if(c(e)&&!g(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)})}))},EWmC:function(t,e,n){var r=n("LZWt");t.exports=Array.isArray||function(t){return"Array"==r(t)}},EemH:function(t,e,n){var r=n("UqcF"),i=n("RjD/"),o=n("aCFj"),s=n("apmT"),a=n("aagx"),l=n("xpql"),u=Object.getOwnPropertyDescriptor;e.f=n("nh4g")?u:function(t,e){if(t=o(t),e=s(e,!0),l)try{return u(t,e)}catch(n){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},FJW5:function(t,e,n){var r=n("hswa"),i=n("y3w9"),o=n("DVgA");t.exports=n("nh4g")?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,l=0;a>l;)r.f(t,n=s[l++],e[n]);return t}},FZcq:function(t,e,n){n("49D4"),n("zq+C"),n("45Tv"),n("uAtd"),n("BqfV"),n("fN/3"),n("iW+S"),n("7Dlh"),n("Opxb"),t.exports=n("g3g5").Reflect},H6hf:function(t,e,n){var r=n("y3w9");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(s){var o=t.return;throw void 0!==o&&r(o.call(t)),s}}},HwNo:function(t,e,n){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},HyWp:function(t,e,n){"use strict";const r=n("XPeR"),i=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),h=Symbol("lruList"),f=Symbol("cache"),d=Symbol("updateAgeOnGet"),p=()=>1,g=(t,e,n)=>{const r=t[f].get(e);if(r){const e=r.value;if(m(t,e)){if(v(t,r),!t[a])return}else n&&(t[d]&&(r.value.now=Date.now()),t[h].unshiftNode(r));return e.value}},m=(t,e)=>{if(!e||!e.maxAge&&!t[l])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[l]&&n>t[l]},y=t=>{if(t[o]>t[i])for(let e=t[h].tail;t[o]>t[i]&&null!==e;){const n=e.prev;v(t,e),e=n}},v=(t,e)=>{if(e){const n=e.value;t[u]&&t[u](n.key,n.value),t[o]-=n.length,t[f].delete(n.key),t[h].removeNode(e)}};class b{constructor(t,e,n,r,i){this.key=t,this.value=e,this.length=n,this.now=r,this.maxAge=i||0}}const _=(t,e,n,r)=>{let i=n.value;m(t,i)&&(v(t,n),t[a]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};t.exports=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[i]=t.max||1/0;const e=t.length||p;if(this[s]="function"!=typeof e?p:e,this[a]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[l]=t.maxAge||0,this[u]=t.dispose,this[c]=t.noDisposeOnSet||!1,this[d]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[i]=t||1/0,y(this)}get max(){return this[i]}set allowStale(t){this[a]=!!t}get allowStale(){return this[a]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[l]=t,y(this)}get maxAge(){return this[l]}set lengthCalculator(t){"function"!=typeof t&&(t=p),t!==this[s]&&(this[s]=t,this[o]=0,this[h].forEach(t=>{t.length=this[s](t.value,t.key),this[o]+=t.length})),y(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[h].length}rforEach(t,e){e=e||this;for(let n=this[h].tail;null!==n;){const r=n.prev;_(this,t,n,e),n=r}}forEach(t,e){e=e||this;for(let n=this[h].head;null!==n;){const r=n.next;_(this,t,n,e),n=r}}keys(){return this[h].toArray().map(t=>t.key)}values(){return this[h].toArray().map(t=>t.value)}reset(){this[u]&&this[h]&&this[h].length&&this[h].forEach(t=>this[u](t.key,t.value)),this[f]=new Map,this[h]=new r,this[o]=0}dump(){return this[h].map(t=>!m(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[h]}set(t,e,n){if((n=n||this[l])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,a=this[s](e,t);if(this[f].has(t)){if(a>this[i])return v(this,this[f].get(t)),!1;const s=this[f].get(t).value;return this[u]&&(this[c]||this[u](t,s.value)),s.now=r,s.maxAge=n,s.value=e,this[o]+=a-s.length,s.length=a,this.get(t),y(this),!0}const d=new b(t,e,a,r,n);return d.length>this[i]?(this[u]&&this[u](t,e),!1):(this[o]+=d.length,this[h].unshift(d),this[f].set(t,this[h].head),y(this),!0)}has(t){if(!this[f].has(t))return!1;const e=this[f].get(t).value;return!m(this,e)}get(t){return g(this,t,!0)}peek(t){return g(this,t,!1)}pop(){const t=this[h].tail;return t?(v(this,t),t.value):null}del(t){v(this,this[f].get(t))}load(t){this.reset();const e=Date.now();for(let n=t.length-1;n>=0;n--){const r=t[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const t=i-e;t>0&&this.set(r.k,r.v,t)}}}prune(){this[f].forEach((t,e)=>g(this,e,!1))}}},I5cv:function(t,e,n){var r=n("XKFU"),i=n("Kuth"),o=n("2OiF"),s=n("y3w9"),a=n("0/R4"),l=n("eeVq"),u=n("8MEG"),c=(n("dyZX").Reflect||{}).construct,h=l(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),f=!l(function(){c(function(){})});r(r.S+r.F*(h||f),"Reflect",{construct:function(t,e){o(t),s(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!h)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(u.apply(t,r))}var l=n.prototype,d=i(a(l)?l:Object.prototype),p=Function.apply.call(t,d,e);return a(p)?p:d}})},"I8a+":function(t,e,n){var r=n("LZWt"),i=n("K0xU")("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},I9dd:function(t,e,n){const r=n("ex/Z"),{ANY:i}=n("vwDW"),o=n("MpxT"),s=n("8GxW"),a=(t,e,n)=>{if(t===e)return!0;if(1===t.length&&t[0].semver===i)return 1===e.length&&e[0].semver===i;const r=new Set;let a,c,h,f,d,p,g;for(const i of t)">"===i.operator||">="===i.operator?a=l(a,i,n):"<"===i.operator||"<="===i.operator?c=u(c,i,n):r.add(i.semver);if(r.size>1)return null;if(a&&c){if(h=s(a.semver,c.semver,n),h>0)return null;if(0===h&&(">="!==a.operator||"<="!==c.operator))return null}for(const i of r){if(a&&!o(i,String(a),n))return null;if(c&&!o(i,String(c),n))return null;for(const t of e)if(!o(i,String(t),n))return!1;return!0}for(const i of e){if(g=g||">"===i.operator||">="===i.operator,p=p||"<"===i.operator||"<="===i.operator,a)if(">"===i.operator||">="===i.operator){if(f=l(a,i,n),f===i&&f!==a)return!1}else if(">="===a.operator&&!o(a.semver,String(i),n))return!1;if(c)if("<"===i.operator||"<="===i.operator){if(d=u(c,i,n),d===i&&d!==c)return!1}else if("<="===c.operator&&!o(c.semver,String(i),n))return!1;if(!i.operator&&(c||a)&&0!==h)return!1}return!(a&&p&&!c&&0!==h||c&&g&&!a&&0!==h)},l=(t,e,n)=>{if(!t)return e;const r=s(t.semver,e.semver,n);return r>0?t:r<0||">"===e.operator&&">="===t.operator?e:t},u=(t,e,n)=>{if(!t)return e;const r=s(t.semver,e.semver,n);return r<0?t:r>0||"<"===e.operator&&"<="===t.operator?e:t};t.exports=(t,e,n)=>{if(t===e)return!0;t=new r(t,n),e=new r(e,n);let i=!1;t:for(const r of t.set){for(const t of e.set){const e=a(r,t,n);if(i=i||null!==e,e)continue t}if(i)return!1}return!0}},IlFx:function(t,e,n){var r=n("XKFU"),i=n("y3w9"),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},IsDc:function(t,e,n){const{MAX_SAFE_COMPONENT_LENGTH:r}=n("/kWe"),i=n("DXxi"),o=(e=t.exports={}).re=[],s=e.src=[],a=e.t={};let l=0;const u=(t,e,n)=>{const r=l++;i(r,e),a[t]=r,s[r]=e,o[r]=new RegExp(e,n?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`),u("FULL",`^${s[a.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`),u("LOOSE",`^${s[a.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`),u("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),u("COERCERTL",s[a.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",u("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",u("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0.0.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},Iw71:function(t,e,n){var r=n("0/R4"),i=n("dyZX").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},"J+6e":function(t,e,n){var r=n("I8a+"),i=n("K0xU")("iterator"),o=n("hPIQ");t.exports=n("g3g5").getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},JBAE:function(t,e,n){var r=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var e,n,r;try{e=Map}catch(a){e=function(){}}try{n=Set}catch(a){n=function(){}}try{r=Promise}catch(a){r=function(){}}function i(o,a,l,u,c){"object"==typeof a&&(l=a.depth,u=a.prototype,c=a.includeNonEnumerable,a=a.circular);var h=[],f=[],d="undefined"!=typeof Buffer;return void 0===a&&(a=!0),void 0===l&&(l=1/0),function o(l,p){if(null===l)return null;if(0===p)return l;var g,m;if("object"!=typeof l)return l;if(t(l,e))g=new e;else if(t(l,n))g=new n;else if(t(l,r))g=new r(function(t,e){l.then(function(e){t(o(e,p-1))},function(t){e(o(t,p-1))})});else if(i.__isArray(l))g=[];else if(i.__isRegExp(l))g=new RegExp(l.source,s(l)),l.lastIndex&&(g.lastIndex=l.lastIndex);else if(i.__isDate(l))g=new Date(l.getTime());else{if(d&&Buffer.isBuffer(l))return g=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(g),g;t(l,Error)?g=Object.create(l):void 0===u?(m=Object.getPrototypeOf(l),g=Object.create(m)):(g=Object.create(u),m=u)}if(a){var y=h.indexOf(l);if(-1!=y)return f[y];h.push(l),f.push(g)}for(var v in t(l,e)&&l.forEach(function(t,e){var n=o(e,p-1),r=o(t,p-1);g.set(n,r)}),t(l,n)&&l.forEach(function(t){var e=o(t,p-1);g.add(e)}),l){var b;m&&(b=Object.getOwnPropertyDescriptor(m,v)),b&&null==b.set||(g[v]=o(l[v],p-1))}if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(l);for(v=0;v<_.length;v++){var x=_[v];(!(k=Object.getOwnPropertyDescriptor(l,x))||k.enumerable||c)&&(g[x]=o(l[x],p-1),k.enumerable||Object.defineProperty(g,x,{enumerable:!1}))}}if(c){var w=Object.getOwnPropertyNames(l);for(v=0;v<w.length;v++){var k,E=w[v];(k=Object.getOwnPropertyDescriptor(l,E))&&k.enumerable||(g[E]=o(l[E],p-1),Object.defineProperty(g,E,{enumerable:!1}))}}return g}(o,l)}function o(t){return Object.prototype.toString.call(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return i.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},i.__objToStr=o,i.__isDate=function(t){return"object"==typeof t&&"[object Date]"===o(t)},i.__isArray=function(t){return"object"==typeof t&&"[object Array]"===o(t)},i.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===o(t)},i.__getRegExpFlags=s,i}();t.exports&&(t.exports=r)},JCZO:function(t,e,n){const r=n("8GxW");t.exports=(t,e,n)=>r(t,e,n)<0},JiEa:function(t,e){e.f=Object.getOwnPropertySymbols},K0xU:function(t,e,n){var r=n("VTer")("wks"),i=n("ylqs"),o=n("dyZX").Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},KHQI:function(t,e){const n=/^[0-9]+$/,r=(t,e)=>{const r=n.test(t),i=n.test(e);return r&&i&&(t=+t,e=+e),t===e?0:r&&!i?-1:i&&!r?1:t<e?-1:1};t.exports={compareIdentifiers:r,rcompareIdentifiers:(t,e)=>r(e,t)}},KroJ:function(t,e,n){var r=n("dyZX"),i=n("Mukb"),o=n("aagx"),s=n("ylqs")("src"),a=n("+lvF"),l=(""+a).split("toString");n("g3g5").inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||i(n,s,t[e]?""+t[e]:l.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},Kuth:function(t,e,n){var r=n("y3w9"),i=n("FJW5"),o=n("4R4u"),s=n("YTvA")("IE_PROTO"),a=function(){},l=function(){var t,e=n("Iw71")("iframe"),r=o.length;for(e.style.display="none",n("+rLv").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;r--;)delete l.prototype[o[r]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=l(),void 0===e?n:i(n,e)}},LJ9E:function(t,e,n){const r=n("3wIk");t.exports=(t,e)=>new r(t,e).patch},LQAc:function(t,e){t.exports=!1},LTTk:function(t,e,n){var r=n("XKFU"),i=n("OP3Y"),o=n("y3w9");r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},LZWt:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},M6Qj:function(t,e,n){var r=n("hPIQ"),i=n("K0xU")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},MfQN:function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},MpxT:function(t,e,n){const r=n("ex/Z");t.exports=(t,e,n)=>{try{e=new r(e,n)}catch(i){return!1}return e.test(t)}},Mukb:function(t,e,n){var r=n("hswa"),i=n("RjD/");t.exports=n("nh4g")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},N6cJ:function(t,e,n){var r=n("9AAn"),i=n("XKFU"),o=n("VTer")("metadata"),s=o.store||(o.store=new(n("EK0E"))),a=function(t,e,n){var i=s.get(t);if(!i){if(!n)return;s.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o};t.exports={store:s,map:a,has:function(t,e,n){var r=a(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=a(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){a(n,r,!0).set(t,e)},keys:function(t,e){var n=a(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){i(i.S,"Reflect",t)}}},O9TA:function(t,e,n){const r=n("Ybu3");t.exports=(t,e)=>{const n=r(t,e);return n&&n.prerelease.length?n.prerelease:null}},OP3Y:function(t,e,n){var r=n("aagx"),i=n("S/j/"),o=n("YTvA")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},Opxb:function(t,e,n){var r=n("N6cJ"),i=n("y3w9"),o=n("2OiF"),s=r.key,a=r.set;r.exp({metadata:function(t,e){return function(n,r){a(t,e,(void 0!==r?i:o)(n),s(r))}}})},Q3ne:function(t,e,n){var r=n("SlkY");t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},QaDb:function(t,e,n){"use strict";var r=n("Kuth"),i=n("RjD/"),o=n("fyDq"),s={};n("Mukb")(s,n("K0xU")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},RYi7:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},"RjD/":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"S/j/":function(t,e,n){var r=n("vhPU");t.exports=function(t){return Object(r(t))}},SlkY:function(t,e,n){var r=n("m0Pp"),i=n("H6hf"),o=n("M6Qj"),s=n("y3w9"),a=n("ne8i"),l=n("J+6e"),u={},c={};(e=t.exports=function(t,e,n,h,f){var d,p,g,m,y=f?function(){return t}:l(t),v=r(n,h,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(d=a(t.length);d>b;b++)if((m=e?v(s(p=t[b])[0],p[1]):v(t[b]))===u||m===c)return m}else for(g=y.call(t);!(p=g.next()).done;)if((m=i(g,v,p.value,e))===u||m===c)return m}).BREAK=u,e.RETURN=c},T39b:function(t,e,n){"use strict";var r=n("wmvG"),i=n("s5qY");t.exports=n("4LiD")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},UqcF:function(t,e){e.f={}.propertyIsEnumerable},VMJL:function(t,e,n){const r=n("xfvg"),i=n("dtu/"),o=n("7sNm"),s=n("Dknc"),a=n("JCZO"),l=n("bdwG");t.exports=(t,e,n,u)=>{switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t===n;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return r(t,n,u);case"!=":return i(t,n,u);case">":return o(t,n,u);case">=":return s(t,n,u);case"<":return a(t,n,u);case"<=":return l(t,n,u);default:throw new TypeError(`Invalid operator: ${e}`)}}},VTer:function(t,e,n){var r=n("g3g5"),i=n("dyZX"),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("LQAc")?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},VbrY:function(t,e,n){n("3xty"),n("I5cv"),n("iMoV"),n("uhZd"),n("f/aN"),n("0YWM"),n("694e"),n("LTTk"),n("9rMk"),n("IlFx"),n("xpiv"),n("oZ/O"),n("klPD"),n("knU9"),t.exports=n("g3g5").Reflect},VmpX:function(t,e,n){const r=n("0eLh");t.exports=(t,e,n)=>r(t,e,">",n)},XKFU:function(t,e,n){var r=n("dyZX"),i=n("g3g5"),o=n("Mukb"),s=n("KroJ"),a=n("m0Pp"),l=function(t,e,n){var u,c,h,f,d=t&l.F,p=t&l.G,g=t&l.P,m=t&l.B,y=p?r:t&l.S?r[e]||(r[e]={}):(r[e]||{}).prototype,v=p?i:i[e]||(i[e]={}),b=v.prototype||(v.prototype={});for(u in p&&(n=e),n)h=((c=!d&&y&&void 0!==y[u])?y:n)[u],f=m&&c?a(h,r):g&&"function"==typeof h?a(Function.call,h):h,y&&s(y,u,h,t&l.U),v[u]!=h&&o(v,u,f),g&&b[u]!=h&&(b[u]=h)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},XMVh:function(t,e,n){var r=n("K0xU")("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(s){}return n}},XPeR:function(t,e,n){"use strict";function r(t){var e=this;if(e instanceof r||(e=new r),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)e.push(arguments[n]);return e}function i(t,e,n){var r=e===t.head?new a(n,null,e,t):new a(n,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function o(t,e){t.tail=new a(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function s(t,e){t.head=new a(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function a(t,e,n,r){if(!(this instanceof a))return new a(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}t.exports=r,r.Node=a,r.create=r,r.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},r.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},r.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},r.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},r.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)s(this,arguments[t]);return this.length},r.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},r.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},r.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},r.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},r.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},r.prototype.map=function(t,e){e=e||this;for(var n=new r,i=this.head;null!==i;)n.push(t.call(e,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(t,e){e=e||this;for(var n=new r,i=this.tail;null!==i;)n.push(t.call(e,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=t(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=t(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},r.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},r.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,o=this.head;null!==o&&i<t;i++)o=o.next;for(;null!==o&&i<e;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,o=this.tail;null!==o&&i>e;i--)o=o.prev;for(;null!==o&&i>t;i--,o=o.prev)n.push(o.value);return n},r.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,o=this.head;null!==o&&r<t;r++)o=o.next;var s=[];for(r=0;o&&r<e;r++)s.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),r=0;r<n.length;r++)o=i(this,o,n[r]);return s},r.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{n("HwNo")(r)}catch(l){}},Xbzi:function(t,e,n){var r=n("0/R4"),i=n("i5dc").set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},YJ14:function(t,e,n){const r=n("3wIk");t.exports=(t,e)=>new r(t,e).minor},YTvA:function(t,e,n){var r=n("VTer")("keys"),i=n("ylqs");t.exports=function(t){return r[t]||(r[t]=i(t))}},Ybu3:function(t,e,n){const{MAX_LENGTH:r}=n("/kWe"),{re:i,t:o}=n("IsDc"),s=n("3wIk"),a=n("4S+G");t.exports=(t,e)=>{if(e=a(e),t instanceof s)return t;if("string"!=typeof t)return null;if(t.length>r)return null;if(!(e.loose?i[o.LOOSE]:i[o.FULL]).test(t))return null;try{return new s(t,e)}catch(n){return null}}},Ymqv:function(t,e,n){var r=n("LZWt");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},Yn5A:function(t,e,n){const r=n("Ybu3"),i=n("xfvg");t.exports=(t,e)=>{if(i(t,e))return null;{const n=r(t),i=r(e),o=n.prerelease.length||i.prerelease.length,s=o?"pre":"",a=o?"prerelease":"";for(const t in n)if(("major"===t||"minor"===t||"patch"===t)&&n[t]!==i[t])return s+t;return a}}},Z6vF:function(t,e,n){var r=n("ylqs")("meta"),i=n("0/R4"),o=n("aagx"),s=n("hswa").f,a=0,l=Object.isExtensible||function(){return!0},u=!n("eeVq")(function(){return l(Object.preventExtensions({}))}),c=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return u&&h.NEED&&l(t)&&!o(t,r)&&c(t),t}}},ZD67:function(t,e,n){"use strict";var r=n("3Lyj"),i=n("Z6vF").getWeak,o=n("y3w9"),s=n("0/R4"),a=n("9gX7"),l=n("SlkY"),u=n("CkkT"),c=n("aagx"),h=n("s5qY"),f=u(5),d=u(6),p=0,g=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},y=function(t,e){return f(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var n=y(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var u=t(function(t,r){a(t,u,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=r&&l(r,n,t[o],t)});return r(u.prototype,{delete:function(t){if(!s(t))return!1;var n=i(t);return!0===n?g(h(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!s(t))return!1;var n=i(t);return!0===n?g(h(this,e)).has(t):n&&c(n,this._i)}}),u},def:function(t,e,n){var r=i(o(e),!0);return!0===r?g(t).set(e,n):r[t._i]=n,t},ufstore:g}},ZYJ9:function(t,e,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,e){var n,i,o;return e=e||{},n=JSON.stringify([1],void 0,void 0===e.indent?2:e.indent).slice(2,-3),i=""===n?1/0:void 0===e.maxLength?80:e.maxLength,o=e.replacer,function t(e,s,a){var l,u,c,h,f,d,p,g,m,y,v,b;if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0===(v=JSON.stringify(e,o)))return v;if(v.length<=(p=i-s.length-a)&&(m=v.replace(r,function(t,e){return e||t+" "})).length<=p)return m;if(null!=o&&(e=JSON.parse(v),o=void 0),"object"==typeof e&&null!==e){if(g=s+n,c=[],u=0,Array.isArray(e))for(y="[",l="]",p=e.length;u<p;u++)c.push(t(e[u],g,u===p-1?0:1)||"null");else for(y="{",l="}",p=(d=Object.keys(e)).length;u<p;u++)h=d[u],f=JSON.stringify(h)+": ",void 0!==(b=t(e[h],g,f.length+(u===p-1?0:1)))&&c.push(f+b);if(c.length>0)return[y,n+c.join(",\n"+g),l].join("\n"+s)}return v}(t,"",0)}},aCFj:function(t,e,n){var r=n("Ymqv"),i=n("vhPU");t.exports=function(t){return r(i(t))}},aUsF:function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n}},aagx:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},apmT:function(t,e,n){var r=n("0/R4");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},bdwG:function(t,e,n){const r=n("8GxW");t.exports=(t,e,n)=>r(t,e,n)<=0},czNK:function(t,e,n){"use strict";var r=n("nh4g"),i=n("DVgA"),o=n("JiEa"),s=n("UqcF"),a=n("S/j/"),l=n("Ymqv"),u=Object.assign;t.exports=!u||n("eeVq")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,h=o.f,f=s.f;u>c;)for(var d,p=l(arguments[c++]),g=h?i(p).concat(h(p)):i(p),m=g.length,y=0;m>y;)d=g[y++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:u},"d/Gc":function(t,e,n){var r=n("RYi7"),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},d43V:function(t,e,n){const r=n("3wIk"),i=n("ex/Z");t.exports=(t,e,n)=>{let o=null,s=null,a=null;try{a=new i(e,n)}catch(l){return null}return t.forEach(t=>{a.test(t)&&(o&&-1!==s.compare(t)||(o=t,s=new r(o,n)))}),o}},"dtu/":function(t,e,n){const r=n("8GxW");t.exports=(t,e,n)=>0!==r(t,e,n)},dyZX:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},eQf7:function(t,e,n){const r=n("3wIk");t.exports=(t,e,n,i)=>{"string"==typeof n&&(i=n,n=void 0);try{return new r(t,n).inc(e,i).version}catch(o){return null}}},eXNJ:function(t,e,n){const r=n("3wIk"),i=n("Ybu3"),{re:o,t:s}=n("IsDc");t.exports=(t,e)=>{if(t instanceof r)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let n=null;if((e=e||{}).rtl){let e;for(;(e=o[s.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)n&&e.index+e[0].length===n.index+n[0].length||(n=e),o[s.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;o[s.COERCERTL].lastIndex=-1}else n=t.match(o[s.COERCE]);return null===n?null:i(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)}},eeVq:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},elZq:function(t,e,n){"use strict";var r=n("dyZX"),i=n("hswa"),o=n("nh4g"),s=n("K0xU")("species");t.exports=function(t){var e=r[t];o&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},"ex/Z":function(t,e,n){class r{constructor(t,e){if(e=o(e),t instanceof r)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new r(t.raw,e);if(t instanceof s)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(t=>this.parseRange(t.trim())).filter(t=>t.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter(t=>!p(t[0])),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();const e=`parseRange:${Object.keys(this.options).join(",")}:${t}`,n=i.get(e);if(n)return n;const r=this.options.loose;t=t.replace(r?u[c.HYPHENRANGELOOSE]:u[c.HYPHENRANGE],C(this.options.includePrerelease)),a("hyphen replace",t),t=t.replace(u[c.COMPARATORTRIM],h),a("comparator trim",t,u[c.COMPARATORTRIM]),t=(t=(t=t.replace(u[c.TILDETRIM],f)).replace(u[c.CARETTRIM],d)).split(/\s+/).join(" ");const o=r?u[c.COMPARATORLOOSE]:u[c.COMPARATOR],l=t.split(" ").map(t=>y(t,this.options)).join(" ").split(/\s+/).map(t=>O(t,this.options)).filter(this.options.loose?t=>!!t.match(o):()=>!0).map(t=>new s(t,this.options)),g=new Map;for(const i of l){if(p(i))return[i];g.set(i.value,i)}g.size>1&&g.has("")&&g.delete("");const m=[...g.values()];return i.set(e,m),m}intersects(t,e){if(!(t instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>m(n,e)&&t.set.some(t=>m(t,e)&&n.every(n=>t.every(t=>n.intersects(t,e)))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new l(t,this.options)}catch(e){return!1}for(let n=0;n<this.set.length;n++)if(A(this.set[n],t,this.options))return!0;return!1}}t.exports=r;const i=new(n("HyWp"))({max:1e3}),o=n("4S+G"),s=n("vwDW"),a=n("DXxi"),l=n("3wIk"),{re:u,t:c,comparatorTrimReplace:h,tildeTrimReplace:f,caretTrimReplace:d}=n("IsDc"),p=t=>"<0.0.0-0"===t.value,g=t=>""===t.value,m=(t,e)=>{let n=!0;const r=t.slice();let i=r.pop();for(;n&&r.length;)n=r.every(t=>i.intersects(t,e)),i=r.pop();return n},y=(t,e)=>(a("comp",t,e),t=x(t,e),a("caret",t),t=b(t,e),a("tildes",t),t=k(t,e),a("xrange",t),t=S(t,e),a("stars",t),t),v=t=>!t||"x"===t.toLowerCase()||"*"===t,b=(t,e)=>t.trim().split(/\s+/).map(t=>_(t,e)).join(" "),_=(t,e)=>t.replace(e.loose?u[c.TILDELOOSE]:u[c.TILDE],(e,n,r,i,o)=>{let s;return a("tilde",t,e,n,r,i,o),v(n)?s="":v(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:v(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,a("tilde return",s),s}),x=(t,e)=>t.trim().split(/\s+/).map(t=>w(t,e)).join(" "),w=(t,e)=>{a("caret",t,e);const n=e.includePrerelease?"-0":"";return t.replace(e.loose?u[c.CARETLOOSE]:u[c.CARET],(e,r,i,o,s)=>{let l;return a("caret",t,e,r,i,o,s),v(r)?l="":v(i)?l=`>=${r}.0.0${n} <${+r+1}.0.0-0`:v(o)?l="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:s?(a("replaceCaret pr",s),l="0"===r?"0"===i?`>=${r}.${i}.${o}-${s} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${s} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${s} <${+r+1}.0.0-0`):(a("no pr"),l="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),a("caret return",l),l})},k=(t,e)=>(a("replaceXRanges",t,e),t.split(/\s+/).map(t=>E(t,e)).join(" ")),E=(t,e)=>(t=t.trim()).replace(e.loose?u[c.XRANGELOOSE]:u[c.XRANGE],(n,r,i,o,s,l)=>{a("xRange",t,n,r,i,o,s,l);const u=v(i),c=u||v(o),h=c||v(s);return"="===r&&h&&(r=""),l=e.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(c&&(o=0),s=0,">"===r?(r=">=",c?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",c?i=+i+1:o=+o+1),"<"===r&&(l="-0"),n=`${r+i}.${o}.${s}${l}`):c?n=`>=${i}.0.0${l} <${+i+1}.0.0-0`:h&&(n=`>=${i}.${o}.0${l} <${i}.${+o+1}.0-0`),a("xRange return",n),n}),S=(t,e)=>(a("replaceStars",t,e),t.trim().replace(u[c.STAR],"")),O=(t,e)=>(a("replaceGTE0",t,e),t.trim().replace(u[e.includePrerelease?c.GTE0PRE:c.GTE0],"")),C=t=>(e,n,r,i,o,s,a,l,u,c,h,f,d)=>`${n=v(r)?"":v(i)?`>=${r}.0.0${t?"-0":""}`:v(o)?`>=${r}.${i}.0${t?"-0":""}`:s?`>=${n}`:`>=${n}${t?"-0":""}`} ${l=v(u)?"":v(c)?`<${+u+1}.0.0-0`:v(h)?`<${u}.${+c+1}.0-0`:f?`<=${u}.${c}.${h}-${f}`:t?`<${u}.${c}.${+h+1}-0`:`<=${l}`}`.trim(),A=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let n=0;n<t.length;n++)if(a(t[n].semver),t[n].semver!==s.ANY&&t[n].semver.prerelease.length>0){const r=t[n].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}},"f/aN":function(t,e,n){"use strict";var r=n("XKFU"),i=n("y3w9"),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n("QaDb")(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},"fN/3":function(t,e,n){var r=n("N6cJ"),i=n("y3w9"),o=r.keys,s=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:s(arguments[1]))}})},fyDq:function(t,e,n){var r=n("hswa").f,i=n("aagx"),o=n("K0xU")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},g3g5:function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},gqzR:function(t,e,n){const r=n("Ybu3");t.exports=(t,e)=>{const n=r(t,e);return n?n.version:null}},"hN/g":function(t,e,n){"use strict";n.r(e),n("VbrY"),n("FZcq"),n("pDpN")},hPIQ:function(t,e){t.exports={}},hswa:function(t,e,n){var r=n("y3w9"),i=n("xpql"),o=n("apmT"),s=Object.defineProperty;e.f=n("nh4g")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},i5dc:function(t,e,n){var r=n("0/R4"),i=n("y3w9"),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n("m0Pp")(Function.call,n("EemH").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},iEBQ:function(t,e,n){const r=n("3wIk");t.exports=(t,e,n)=>{const i=new r(t,n),o=new r(e,n);return i.compare(o)||i.compareBuild(o)}},iMoV:function(t,e,n){var r=n("hswa"),i=n("XKFU"),o=n("y3w9"),s=n("apmT");i(i.S+i.F*n("eeVq")(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=s(e,!0),o(n);try{return r.f(t,e,n),!0}catch(i){return!1}}})},"iW+S":function(t,e,n){var r=n("N6cJ"),i=n("y3w9"),o=n("OP3Y"),s=r.has,a=r.key,l=function(t,e,n){if(s(t,e,n))return!0;var r=o(e);return null!==r&&l(t,r,n)};r.exp({hasMetadata:function(t,e){return l(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},j0pM:function(t,e,n){const r=n("ex/Z");t.exports=(t,e)=>new r(t,e).set.map(t=>t.map(t=>t.value).join(" ").trim().split(" "))},kJMx:function(t,e,n){var r=n("zhAb"),i=n("4R4u").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},klPD:function(t,e,n){var r=n("hswa"),i=n("EemH"),o=n("OP3Y"),s=n("aagx"),a=n("XKFU"),l=n("RjD/"),u=n("y3w9"),c=n("0/R4");a(a.S,"Reflect",{set:function t(e,n,a){var h,f,d=arguments.length<4?e:arguments[3],p=i.f(u(e),n);if(!p){if(c(f=o(e)))return t(f,n,a,d);p=l(0)}if(s(p,"value")){if(!1===p.writable||!c(d))return!1;if(h=i.f(d,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=a,r.f(d,n,h)}else r.f(d,n,l(0,a));return!0}return void 0!==p.set&&(p.set.call(d,a),!0)}})},knU9:function(t,e,n){var r=n("XKFU"),i=n("i5dc");i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(n){return!1}}})},lYj8:function(t,e,n){const r=n("iEBQ");t.exports=(t,e)=>t.sort((t,n)=>r(t,n,e))},lkeM:function(t,e,n){const r=n("3wIk"),i=n("ex/Z"),o=n("7sNm");t.exports=(t,e)=>{t=new i(t,e);let n=new r("0.0.0");if(t.test(n))return n;if(n=new r("0.0.0-0"),t.test(n))return n;n=null;for(let i=0;i<t.set.length;++i){let e=null;t.set[i].forEach(t=>{const n=new r(t.semver.version);switch(t.operator){case">":0===n.prerelease.length?n.patch++:n.prerelease.push(0),n.raw=n.format();case"":case">=":e&&!o(n,e)||(e=n);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}}),!e||n&&!o(n,e)||(n=e)}return n&&t.test(n)?n:null}},m0Pp:function(t,e,n){var r=n("2OiF");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},mQtv:function(t,e,n){var r=n("kJMx"),i=n("JiEa"),o=n("y3w9"),s=n("dyZX").Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},ne8i:function(t,e,n){var r=n("RYi7"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},nh4g:function(t,e,n){t.exports=!n("eeVq")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},oBeb:function(t,e,n){const r=n("Ybu3");t.exports=(t,e)=>{const n=r(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null}},"oZ/O":function(t,e,n){var r=n("XKFU"),i=n("y3w9"),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(e){return!1}}})},oh0K:function(t,e,n){const r=n("8GxW");t.exports=(t,e,n)=>r(e,t,n)},pDpN:function(t,e,n){"use strict";!function(t){const e=t.performance;function n(t){e&&e.mark&&e.mark(t)}function r(t,n){e&&e.measure&&e.measure(t,n)}n("Zone");const i=t.__Zone_symbol_prefix||"__zone_symbol__";function o(t){return i+t}const s=!0===t[o("forceDuplicateZoneCheck")];if(t.Zone){if(s||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}class a{constructor(t,e){this._parent=t,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new u(this,this._parent&&this._parent._zoneDelegate,e)}static assertZonePatched(){if(t.Promise!==D.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=a.current;for(;t.parent;)t=t.parent;return t}static get current(){return M.zone}static get currentTask(){return F}static __load_patch(e,i,o=!1){if(D.hasOwnProperty(e)){if(!o&&s)throw Error("Already loaded patch: "+e)}else if(!t["__Zone_disable_"+e]){const o="Zone:"+e;n(o),D[e]=i(t,a,T),r(o,o)}}get parent(){return this._parent}get name(){return this._name}get(t){const e=this.getZoneWith(t);if(e)return e._properties[t]}getZoneWith(t){let e=this;for(;e;){if(e._properties.hasOwnProperty(t))return e;e=e._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,e){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const n=this._zoneDelegate.intercept(this,t,e),r=this;return function(){return r.runGuarded(n,this,arguments,e)}}run(t,e,n,r){M={parent:M,zone:this};try{return this._zoneDelegate.invoke(this,t,e,n,r)}finally{M=M.parent}}runGuarded(t,e=null,n,r){M={parent:M,zone:this};try{try{return this._zoneDelegate.invoke(this,t,e,n,r)}catch(i){if(this._zoneDelegate.handleError(this,i))throw i}}finally{M=M.parent}}runTask(t,e,n){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||b).name+"; Execution: "+this.name+")");if(t.state===_&&(t.type===A||t.type===C))return;const r=t.state!=k;r&&t._transitionTo(k,w),t.runCount++;const i=F;F=t,M={parent:M,zone:this};try{t.type==C&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,e,n)}catch(o){if(this._zoneDelegate.handleError(this,o))throw o}}finally{t.state!==_&&t.state!==S&&(t.type==A||t.data&&t.data.isPeriodic?r&&t._transitionTo(w,k):(t.runCount=0,this._updateTaskCount(t,-1),r&&t._transitionTo(_,k,_))),M=M.parent,F=i}}scheduleTask(t){if(t.zone&&t.zone!==this){let e=this;for(;e;){if(e===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);e=e.parent}}t._transitionTo(x,_);const e=[];t._zoneDelegates=e,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(n){throw t._transitionTo(S,x,_),this._zoneDelegate.handleError(this,n),n}return t._zoneDelegates===e&&this._updateTaskCount(t,1),t.state==x&&t._transitionTo(w,x),t}scheduleMicroTask(t,e,n,r){return this.scheduleTask(new c(O,t,e,n,r,void 0))}scheduleMacroTask(t,e,n,r,i){return this.scheduleTask(new c(C,t,e,n,r,i))}scheduleEventTask(t,e,n,r,i){return this.scheduleTask(new c(A,t,e,n,r,i))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||b).name+"; Execution: "+this.name+")");t._transitionTo(E,w,k);try{this._zoneDelegate.cancelTask(this,t)}catch(e){throw t._transitionTo(S,E),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(t,-1),t._transitionTo(_,E),t.runCount=0,t}_updateTaskCount(t,e){const n=t._zoneDelegates;-1==e&&(t._zoneDelegates=null);for(let r=0;r<n.length;r++)n[r]._updateTaskCount(t.type,e)}}a.__symbol__=o;const l={name:"",onHasTask:(t,e,n,r)=>t.hasTask(n,r),onScheduleTask:(t,e,n,r)=>t.scheduleTask(n,r),onInvokeTask:(t,e,n,r,i,o)=>t.invokeTask(n,r,i,o),onCancelTask:(t,e,n,r)=>t.cancelTask(n,r)};class u{constructor(t,e,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=t,this._parentDelegate=e,this._forkZS=n&&(n&&n.onFork?n:e._forkZS),this._forkDlgt=n&&(n.onFork?e:e._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:e._forkCurrZone),this._interceptZS=n&&(n.onIntercept?n:e._interceptZS),this._interceptDlgt=n&&(n.onIntercept?e:e._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:e._interceptCurrZone),this._invokeZS=n&&(n.onInvoke?n:e._invokeZS),this._invokeDlgt=n&&(n.onInvoke?e:e._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:e._invokeCurrZone),this._handleErrorZS=n&&(n.onHandleError?n:e._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?e:e._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:e._handleErrorCurrZone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:e._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?e:e._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:e._scheduleTaskCurrZone),this._invokeTaskZS=n&&(n.onInvokeTask?n:e._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?e:e._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:e._invokeTaskCurrZone),this._cancelTaskZS=n&&(n.onCancelTask?n:e._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?e:e._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:e._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=n&&n.onHasTask;(r||e&&e._hasTaskZS)&&(this._hasTaskZS=r?n:l,this._hasTaskDlgt=e,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=t,n.onScheduleTask||(this._scheduleTaskZS=l,this._scheduleTaskDlgt=e,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=l,this._invokeTaskDlgt=e,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=l,this._cancelTaskDlgt=e,this._cancelTaskCurrZone=this.zone))}fork(t,e){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,t,e):new a(t,e)}intercept(t,e,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,t,e,n):e}invoke(t,e,n,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,t,e,n,r,i):e.apply(n,r)}handleError(t,e){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,t,e)}scheduleTask(t,e){let n=e;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,t,e),n||(n=e);else if(e.scheduleFn)e.scheduleFn(e);else{if(e.type!=O)throw new Error("Task is missing scheduleFn.");y(e)}return n}invokeTask(t,e,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,t,e,n,r):e.callback.apply(n,r)}cancelTask(t,e){let n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,t,e);else{if(!e.cancelFn)throw Error("Task is not cancelable");n=e.cancelFn(e)}return n}hasTask(t,e){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,t,e)}catch(n){this.handleError(t,n)}}_updateTaskCount(t,e){const n=this._taskCounts,r=n[t],i=n[t]=r+e;if(i<0)throw new Error("More tasks executed then were scheduled.");0!=r&&0!=i||this.hasTask(this.zone,{microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:t})}}class c{constructor(e,n,r,i,o,s){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=e,this.source=n,this.data=i,this.scheduleFn=o,this.cancelFn=s,!r)throw new Error("callback is not defined");this.callback=r;const a=this;this.invoke=e===A&&i&&i.useG?c.invokeTask:function(){return c.invokeTask.call(t,a,this,arguments)}}static invokeTask(t,e,n){t||(t=this),j++;try{return t.runCount++,t.zone.runTask(t,e,n)}finally{1==j&&v(),j--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(_,x)}_transitionTo(t,e,n){if(this._state!==e&&this._state!==n)throw new Error(`${this.type} '${this.source}': can not transition to '${t}', expecting state '${e}'${n?" or '"+n+"'":""}, was '${this._state}'.`);this._state=t,t==_&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const h=o("setTimeout"),f=o("Promise"),d=o("then");let p,g=[],m=!1;function y(e){if(0===j&&0===g.length)if(p||t[f]&&(p=t[f].resolve(0)),p){let t=p[d];t||(t=p.then),t.call(p,v)}else t[h](v,0);e&&g.push(e)}function v(){if(!m){for(m=!0;g.length;){const e=g;g=[];for(let n=0;n<e.length;n++){const r=e[n];try{r.zone.runTask(r,null,null)}catch(t){T.onUnhandledError(t)}}}T.microtaskDrainDone(),m=!1}}const b={name:"NO ZONE"},_="notScheduled",x="scheduling",w="scheduled",k="running",E="canceling",S="unknown",O="microTask",C="macroTask",A="eventTask",D={},T={symbol:o,currentZoneFrame:()=>M,onUnhandledError:P,microtaskDrainDone:P,scheduleMicroTask:y,showUncaughtError:()=>!a[o("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:P,patchMethod:()=>P,bindArguments:()=>[],patchThen:()=>P,patchMacroTask:()=>P,patchEventPrototype:()=>P,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>P,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>P,wrapWithCurrentZone:()=>P,filterProperties:()=>[],attachOriginToPatched:()=>P,_redefineProperty:()=>P,patchCallbacks:()=>P};let M={parent:null,zone:new a(null,null)},F=null,j=0;function P(){}r("Zone","Zone"),t.Zone=a}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const r=Object.getOwnPropertyDescriptor,i=Object.defineProperty,o=Object.getPrototypeOf,s=Object.create,a=Array.prototype.slice,l=Zone.__symbol__("addEventListener"),u=Zone.__symbol__("removeEventListener"),c=Zone.__symbol__("");function h(t,e){return Zone.current.wrap(t,e)}function f(t,e,n,r,i){return Zone.current.scheduleMacroTask(t,e,n,r,i)}const d=Zone.__symbol__,p="undefined"!=typeof window,g=p?window:void 0,m=p&&g||"object"==typeof self&&self||global,y=[null];function v(t,e){for(let n=t.length-1;n>=0;n--)"function"==typeof t[n]&&(t[n]=h(t[n],e+"_"+n));return t}function b(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const _="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,x=!("nw"in m)&&void 0!==m.process&&"[object process]"==={}.toString.call(m.process),w=!x&&!_&&!(!p||!g.HTMLElement),k=void 0!==m.process&&"[object process]"==={}.toString.call(m.process)&&!_&&!(!p||!g.HTMLElement),E={},S=function(t){if(!(t=t||m.event))return;let e=E[t.type];e||(e=E[t.type]=d("ON_PROPERTY"+t.type));const n=this||t.target||m,r=n[e];let i;if(w&&n===g&&"error"===t.type){const e=t;i=r&&r.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===i&&t.preventDefault()}else i=r&&r.apply(this,arguments),null==i||i||t.preventDefault();return i};function O(t,e,n){let o=r(t,e);if(!o&&n&&r(n,e)&&(o={enumerable:!0,configurable:!0}),!o||!o.configurable)return;const s=d("on"+e+"patched");if(t.hasOwnProperty(s)&&t[s])return;delete o.writable,delete o.value;const a=o.get,l=o.set,u=e.substr(2);let c=E[u];c||(c=E[u]=d("ON_PROPERTY"+u)),o.set=function(e){let n=this;n||t!==m||(n=m),n&&(n[c]&&n.removeEventListener(u,S),l&&l.apply(n,y),"function"==typeof e?(n[c]=e,n.addEventListener(u,S,!1)):n[c]=null)},o.get=function(){let n=this;if(n||t!==m||(n=m),!n)return null;const r=n[c];if(r)return r;if(a){let t=a&&a.call(this);if(t)return o.set.call(this,t),"function"==typeof n.removeAttribute&&n.removeAttribute(e),t}return null},i(t,e,o),t[s]=!0}function C(t,e,n){if(e)for(let r=0;r<e.length;r++)O(t,"on"+e[r],n);else{const e=[];for(const n in t)"on"==n.substr(0,2)&&e.push(n);for(let r=0;r<e.length;r++)O(t,e[r],n)}}const A=d("originalInstance");function D(t){const e=m[t];if(!e)return;m[d(t)]=e,m[t]=function(){const n=v(arguments,t);switch(n.length){case 0:this[A]=new e;break;case 1:this[A]=new e(n[0]);break;case 2:this[A]=new e(n[0],n[1]);break;case 3:this[A]=new e(n[0],n[1],n[2]);break;case 4:this[A]=new e(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},F(m[t],e);const n=new e(function(){});let r;for(r in n)"XMLHttpRequest"===t&&"responseBlob"===r||function(e){"function"==typeof n[e]?m[t].prototype[e]=function(){return this[A][e].apply(this[A],arguments)}:i(m[t].prototype,e,{set:function(n){"function"==typeof n?(this[A][e]=h(n,t+"."+e),F(this[A][e],n)):this[A][e]=n},get:function(){return this[A][e]}})}(r);for(r in e)"prototype"!==r&&e.hasOwnProperty(r)&&(m[t][r]=e[r])}function T(t,e,n){let i=t;for(;i&&!i.hasOwnProperty(e);)i=o(i);!i&&t[e]&&(i=t);const s=d(e);let a=null;if(i&&(!(a=i[s])||!i.hasOwnProperty(s))&&(a=i[s]=i[e],b(i&&r(i,e)))){const t=n(a,s,e);i[e]=function(){return t(this,arguments)},F(i[e],a)}return a}function M(t,e,n){let r=null;function i(t){const e=t.data;return e.args[e.cbIdx]=function(){t.invoke.apply(this,arguments)},r.apply(e.target,e.args),t}r=T(t,e,t=>function(e,r){const o=n(e,r);return o.cbIdx>=0&&"function"==typeof r[o.cbIdx]?f(o.name,r[o.cbIdx],o,i):t.apply(e,r)})}function F(t,e){t[d("OriginalDelegate")]=e}let j=!1,P=!1;function N(){try{const t=g.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}function R(){if(j)return P;j=!0;try{const t=g.navigator.userAgent;-1===t.indexOf("MSIE ")&&-1===t.indexOf("Trident/")&&-1===t.indexOf("Edge/")||(P=!0)}catch(t){}return P}Zone.__load_patch("ZoneAwarePromise",(t,e,n)=>{const r=Object.getOwnPropertyDescriptor,i=Object.defineProperty,o=n.symbol,s=[],a=!0===t[o("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],l=o("Promise"),u=o("then");n.onUnhandledError=t=>{if(n.showUncaughtError()){const e=t&&t.rejection;e?console.error("Unhandled Promise rejection:",e instanceof Error?e.message:e,"; Zone:",t.zone.name,"; Task:",t.task&&t.task.source,"; Value:",e,e instanceof Error?e.stack:void 0):console.error(t)}},n.microtaskDrainDone=()=>{for(;s.length;){const e=s.shift();try{e.zone.runGuarded(()=>{if(e.throwOriginal)throw e.rejection;throw e})}catch(t){h(t)}}};const c=o("unhandledPromiseRejectionHandler");function h(t){n.onUnhandledError(t);try{const n=e[c];"function"==typeof n&&n.call(this,t)}catch(r){}}function f(t){return t&&t.then}function d(t){return t}function p(t){return C.reject(t)}const g=o("state"),m=o("value"),y=o("finally"),v=o("parentPromiseValue"),b=o("parentPromiseState");function _(t,e){return n=>{try{w(t,e,n)}catch(r){w(t,!1,r)}}}const x=o("currentTaskTrace");function w(t,r,o){const l=function(){let t=!1;return function(e){return function(){t||(t=!0,e.apply(null,arguments))}}}();if(t===o)throw new TypeError("Promise resolved with itself");if(null===t[g]){let h=null;try{"object"!=typeof o&&"function"!=typeof o||(h=o&&o.then)}catch(c){return l(()=>{w(t,!1,c)})(),t}if(!1!==r&&o instanceof C&&o.hasOwnProperty(g)&&o.hasOwnProperty(m)&&null!==o[g])E(o),w(t,o[g],o[m]);else if(!1!==r&&"function"==typeof h)try{h.call(o,l(_(t,r)),l(_(t,!1)))}catch(c){l(()=>{w(t,!1,c)})()}else{t[g]=r;const l=t[m];if(t[m]=o,t[y]===y&&!0===r&&(t[g]=t[b],t[m]=t[v]),!1===r&&o instanceof Error){const t=e.currentTask&&e.currentTask.data&&e.currentTask.data.__creationTrace__;t&&i(o,x,{configurable:!0,enumerable:!1,writable:!0,value:t})}for(let e=0;e<l.length;)S(t,l[e++],l[e++],l[e++],l[e++]);if(0==l.length&&0==r){t[g]=0;let r=o;try{throw new Error("Uncaught (in promise): "+((u=o)&&u.toString===Object.prototype.toString?(u.constructor&&u.constructor.name||"")+": "+JSON.stringify(u):u?u.toString():Object.prototype.toString.call(u))+(o&&o.stack?"\n"+o.stack:""))}catch(c){r=c}a&&(r.throwOriginal=!0),r.rejection=o,r.promise=t,r.zone=e.current,r.task=e.currentTask,s.push(r),n.scheduleMicroTask()}}}var u;return t}const k=o("rejectionHandledHandler");function E(t){if(0===t[g]){try{const n=e[k];n&&"function"==typeof n&&n.call(this,{rejection:t[m],promise:t})}catch(n){}t[g]=!1;for(let e=0;e<s.length;e++)t===s[e].promise&&s.splice(e,1)}}function S(t,e,n,r,i){E(t);const o=t[g],s=o?"function"==typeof r?r:d:"function"==typeof i?i:p;e.scheduleMicroTask("Promise.then",()=>{try{const r=t[m],i=!!n&&y===n[y];i&&(n[v]=r,n[b]=o);const a=e.run(s,void 0,i&&s!==p&&s!==d?[]:[r]);w(n,!0,a)}catch(r){w(n,!1,r)}},n)}const O=function(){};class C{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(t){return w(new this(null),!0,t)}static reject(t){return w(new this(null),!1,t)}static race(t){let e,n,r=new this((t,r)=>{e=t,n=r});function i(t){e(t)}function o(t){n(t)}for(let s of t)f(s)||(s=this.resolve(s)),s.then(i,o);return r}static all(t){return C.allWithCallback(t)}static allSettled(t){return(this&&this.prototype instanceof C?this:C).allWithCallback(t,{thenCallback:t=>({status:"fulfilled",value:t}),errorCallback:t=>({status:"rejected",reason:t})})}static allWithCallback(t,e){let n,r,i=new this((t,e)=>{n=t,r=e}),o=2,s=0;const a=[];for(let u of t){f(u)||(u=this.resolve(u));const t=s;try{u.then(r=>{a[t]=e?e.thenCallback(r):r,o--,0===o&&n(a)},i=>{e?(a[t]=e.errorCallback(i),o--,0===o&&n(a)):r(i)})}catch(l){r(l)}o++,s++}return o-=2,0===o&&n(a),i}constructor(t){const e=this;if(!(e instanceof C))throw new Error("Must be an instanceof Promise.");e[g]=null,e[m]=[];try{t&&t(_(e,!0),_(e,!1))}catch(n){w(e,!1,n)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return C}then(t,n){let r=this.constructor[Symbol.species];r&&"function"==typeof r||(r=this.constructor||C);const i=new r(O),o=e.current;return null==this[g]?this[m].push(o,i,t,n):S(this,o,i,t,n),i}catch(t){return this.then(null,t)}finally(t){let n=this.constructor[Symbol.species];n&&"function"==typeof n||(n=C);const r=new n(O);r[y]=y;const i=e.current;return null==this[g]?this[m].push(i,r,t,t):S(this,i,r,t,t),r}}C.resolve=C.resolve,C.reject=C.reject,C.race=C.race,C.all=C.all;const A=t[l]=t.Promise;t.Promise=C;const D=o("thenPatched");function M(t){const e=t.prototype,n=r(e,"then");if(n&&(!1===n.writable||!n.configurable))return;const i=e.then;e[u]=i,t.prototype.then=function(t,e){return new C((t,e)=>{i.call(this,t,e)}).then(t,e)},t[D]=!0}return n.patchThen=M,A&&(M(A),T(t,"fetch",t=>{return e=t,function(t,n){let r=e.apply(t,n);if(r instanceof C)return r;let i=r.constructor;return i[D]||M(i),r};var e})),Promise[e.__symbol__("uncaughtPromiseErrors")]=s,C}),Zone.__load_patch("toString",t=>{const e=Function.prototype.toString,n=d("OriginalDelegate"),r=d("Promise"),i=d("Error"),o=function(){if("function"==typeof this){const o=this[n];if(o)return"function"==typeof o?e.call(o):Object.prototype.toString.call(o);if(this===Promise){const n=t[r];if(n)return e.call(n)}if(this===Error){const n=t[i];if(n)return e.call(n)}}return e.call(this)};o[n]=e,Function.prototype.toString=o;const s=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":s.call(this)}});let $=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){$=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(ct){$=!1}const I={useG:!0},z={},L={},U=new RegExp("^"+c+"(\\w+)(true|false)$"),B=d("propagationStopped");function q(t,e){const n=(e?e(t):t)+"false",r=(e?e(t):t)+"true",i=c+n,o=c+r;z[t]={},z[t].false=i,z[t].true=o}function V(t,e,n){const r=n&&n.add||"addEventListener",i=n&&n.rm||"removeEventListener",s=n&&n.listeners||"eventListeners",a=n&&n.rmAll||"removeAllListeners",l=d(r),u="."+r+":",h=function(t,e,n){if(t.isRemoved)return;const r=t.callback;"object"==typeof r&&r.handleEvent&&(t.callback=t=>r.handleEvent(t),t.originalDelegate=r),t.invoke(t,e,[n]);const o=t.options;o&&"object"==typeof o&&o.once&&e[i].call(e,n.type,t.originalDelegate?t.originalDelegate:t.callback,o)},f=function(e){if(!(e=e||t.event))return;const n=this||e.target||t,r=n[z[e.type].false];if(r)if(1===r.length)h(r[0],n,e);else{const t=r.slice();for(let r=0;r<t.length&&(!e||!0!==e[B]);r++)h(t[r],n,e)}},p=function(e){if(!(e=e||t.event))return;const n=this||e.target||t,r=n[z[e.type].true];if(r)if(1===r.length)h(r[0],n,e);else{const t=r.slice();for(let r=0;r<t.length&&(!e||!0!==e[B]);r++)h(t[r],n,e)}};function g(e,n){if(!e)return!1;let h=!0;n&&void 0!==n.useG&&(h=n.useG);const g=n&&n.vh;let m=!0;n&&void 0!==n.chkDup&&(m=n.chkDup);let y=!1;n&&void 0!==n.rt&&(y=n.rt);let v=e;for(;v&&!v.hasOwnProperty(r);)v=o(v);if(!v&&e[r]&&(v=e),!v)return!1;if(v[l])return!1;const b=n&&n.eventNameToString,_={},w=v[l]=v[r],k=v[d(i)]=v[i],E=v[d(s)]=v[s],S=v[d(a)]=v[a];let O;function C(t,e){return!$&&"object"==typeof t&&t?!!t.capture:$&&e?"boolean"==typeof t?{capture:t,passive:!0}:t?"object"==typeof t&&!1!==t.passive?Object.assign(Object.assign({},t),{passive:!0}):t:{passive:!0}:t}n&&n.prepend&&(O=v[d(n.prepend)]=v[n.prepend]);const A=h?function(t){if(!_.isExisting)return w.call(_.target,_.eventName,_.capture?p:f,_.options)}:function(t){return w.call(_.target,_.eventName,t.invoke,_.options)},D=h?function(t){if(!t.isRemoved){const e=z[t.eventName];let n;e&&(n=e[t.capture?"true":"false"]);const r=n&&t.target[n];if(r)for(let i=0;i<r.length;i++)if(r[i]===t){r.splice(i,1),t.isRemoved=!0,0===r.length&&(t.allRemoved=!0,t.target[n]=null);break}}if(t.allRemoved)return k.call(t.target,t.eventName,t.capture?p:f,t.options)}:function(t){return k.call(t.target,t.eventName,t.invoke,t.options)},T=n&&n.diff?n.diff:function(t,e){const n=typeof e;return"function"===n&&t.callback===e||"object"===n&&t.originalDelegate===e},M=Zone[d("UNPATCHED_EVENTS")],j=t[d("PASSIVE_EVENTS")],P=function(e,r,i,o,s=!1,a=!1){return function(){const l=this||t;let u=arguments[0];n&&n.transferEventName&&(u=n.transferEventName(u));let c=arguments[1];if(!c)return e.apply(this,arguments);if(x&&"uncaughtException"===u)return e.apply(this,arguments);let f=!1;if("function"!=typeof c){if(!c.handleEvent)return e.apply(this,arguments);f=!0}if(g&&!g(e,c,l,arguments))return;const d=$&&!!j&&-1!==j.indexOf(u),p=C(arguments[2],d);if(M)for(let t=0;t<M.length;t++)if(u===M[t])return d?e.call(l,u,c,p):e.apply(this,arguments);const y=!!p&&("boolean"==typeof p||p.capture),v=!(!p||"object"!=typeof p)&&p.once,w=Zone.current;let k=z[u];k||(q(u,b),k=z[u]);const E=k[y?"true":"false"];let S,O=l[E],A=!1;if(O){if(A=!0,m)for(let t=0;t<O.length;t++)if(T(O[t],c))return}else O=l[E]=[];const D=l.constructor.name,F=L[D];F&&(S=F[u]),S||(S=D+r+(b?b(u):u)),_.options=p,v&&(_.options.once=!1),_.target=l,_.capture=y,_.eventName=u,_.isExisting=A;const P=h?I:void 0;P&&(P.taskData=_);const N=w.scheduleEventTask(S,c,P,i,o);return _.target=null,P&&(P.taskData=null),v&&(p.once=!0),($||"boolean"!=typeof N.options)&&(N.options=p),N.target=l,N.capture=y,N.eventName=u,f&&(N.originalDelegate=c),a?O.unshift(N):O.push(N),s?l:void 0}};return v[r]=P(w,u,A,D,y),O&&(v.prependListener=P(O,".prependListener:",function(t){return O.call(_.target,_.eventName,t.invoke,_.options)},D,y,!0)),v[i]=function(){const e=this||t;let r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));const i=arguments[2],o=!!i&&("boolean"==typeof i||i.capture),s=arguments[1];if(!s)return k.apply(this,arguments);if(g&&!g(k,s,e,arguments))return;const a=z[r];let l;a&&(l=a[o?"true":"false"]);const u=l&&e[l];if(u)for(let t=0;t<u.length;t++){const n=u[t];if(T(n,s))return u.splice(t,1),n.isRemoved=!0,0===u.length&&(n.allRemoved=!0,e[l]=null,"string"==typeof r)&&(e[c+"ON_PROPERTY"+r]=null),n.zone.cancelTask(n),y?e:void 0}return k.apply(this,arguments)},v[s]=function(){const e=this||t;let r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));const i=[],o=H(e,b?b(r):r);for(let t=0;t<o.length;t++){const e=o[t];i.push(e.originalDelegate?e.originalDelegate:e.callback)}return i},v[a]=function(){const e=this||t;let r=arguments[0];if(r){n&&n.transferEventName&&(r=n.transferEventName(r));const t=z[r];if(t){const n=e[t.false],o=e[t.true];if(n){const t=n.slice();for(let e=0;e<t.length;e++){const n=t[e];this[i].call(this,r,n.originalDelegate?n.originalDelegate:n.callback,n.options)}}if(o){const t=o.slice();for(let e=0;e<t.length;e++){const n=t[e];this[i].call(this,r,n.originalDelegate?n.originalDelegate:n.callback,n.options)}}}}else{const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=U.exec(t[e]);let r=n&&n[1];r&&"removeListener"!==r&&this[a].call(this,r)}this[a].call(this,"removeListener")}if(y)return this},F(v[r],w),F(v[i],k),S&&F(v[a],S),E&&F(v[s],E),!0}let m=[];for(let o=0;o<e.length;o++)m[o]=g(e[o],n);return m}function H(t,e){if(!e){const n=[];for(let r in t){const i=U.exec(r);let o=i&&i[1];if(o&&(!e||o===e)){const e=t[r];if(e)for(let t=0;t<e.length;t++)n.push(e[t])}}return n}let n=z[e];n||(q(e),n=z[e]);const r=t[n.false],i=t[n.true];return r?i?r.concat(i):r.slice():i?i.slice():[]}function W(t,e){const n=t.Event;n&&n.prototype&&e.patchMethod(n.prototype,"stopImmediatePropagation",t=>function(e,n){e[B]=!0,t&&t.apply(e,n)})}function G(t,e,n,r,i){const o=Zone.__symbol__(r);if(e[o])return;const s=e[o]=e[r];e[r]=function(o,a,l){return a&&a.prototype&&i.forEach(function(e){const i=`${n}.${r}::`+e,o=a.prototype;if(o.hasOwnProperty(e)){const n=t.ObjectGetOwnPropertyDescriptor(o,e);n&&n.value?(n.value=t.wrapWithCurrentZone(n.value,i),t._redefineProperty(a.prototype,e,n)):o[e]&&(o[e]=t.wrapWithCurrentZone(o[e],i))}else o[e]&&(o[e]=t.wrapWithCurrentZone(o[e],i))}),s.call(e,o,a,l)},t.attachOriginToPatched(e[r],s)}const Z=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],Y=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],X=["load"],Q=["blur","error","focus","load","resize","scroll","messageerror"],K=["bounce","finish","start"],J=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],tt=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],et=["close","error","open","message"],nt=["error","message"],rt=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Z,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function it(t,e,n){if(!n||0===n.length)return e;const r=n.filter(e=>e.target===t);if(!r||0===r.length)return e;const i=r[0].ignoreProperties;return e.filter(t=>-1===i.indexOf(t))}function ot(t,e,n,r){t&&C(t,it(t,e,n),r)}function st(t,e){if(x&&!k)return;if(Zone[t.symbol("patchEvents")])return;const n="undefined"!=typeof WebSocket,r=e.__Zone_ignore_on_properties;if(w){const t=window,e=N()?[{target:t,ignoreProperties:["error"]}]:[];ot(t,rt.concat(["messageerror"]),r?r.concat(e):r,o(t)),ot(Document.prototype,rt,r),void 0!==t.SVGElement&&ot(t.SVGElement.prototype,rt,r),ot(Element.prototype,rt,r),ot(HTMLElement.prototype,rt,r),ot(HTMLMediaElement.prototype,Y,r),ot(HTMLFrameSetElement.prototype,Z.concat(Q),r),ot(HTMLBodyElement.prototype,Z.concat(Q),r),ot(HTMLFrameElement.prototype,X,r),ot(HTMLIFrameElement.prototype,X,r);const n=t.HTMLMarqueeElement;n&&ot(n.prototype,K,r);const i=t.Worker;i&&ot(i.prototype,nt,r)}const i=e.XMLHttpRequest;i&&ot(i.prototype,J,r);const s=e.XMLHttpRequestEventTarget;s&&ot(s&&s.prototype,J,r),"undefined"!=typeof IDBIndex&&(ot(IDBIndex.prototype,tt,r),ot(IDBRequest.prototype,tt,r),ot(IDBOpenDBRequest.prototype,tt,r),ot(IDBDatabase.prototype,tt,r),ot(IDBTransaction.prototype,tt,r),ot(IDBCursor.prototype,tt,r)),n&&ot(WebSocket.prototype,et,r)}Zone.__load_patch("util",(t,e,n)=>{n.patchOnProperties=C,n.patchMethod=T,n.bindArguments=v,n.patchMacroTask=M;const o=e.__symbol__("BLACK_LISTED_EVENTS"),l=e.__symbol__("UNPATCHED_EVENTS");t[l]&&(t[o]=t[l]),t[o]&&(e[o]=e[l]=t[o]),n.patchEventPrototype=W,n.patchEventTarget=V,n.isIEOrEdge=R,n.ObjectDefineProperty=i,n.ObjectGetOwnPropertyDescriptor=r,n.ObjectCreate=s,n.ArraySlice=a,n.patchClass=D,n.wrapWithCurrentZone=h,n.filterProperties=it,n.attachOriginToPatched=F,n._redefineProperty=Object.defineProperty,n.patchCallbacks=G,n.getGlobalObjects=()=>({globalSources:L,zoneSymbolEventNames:z,eventNames:rt,isBrowser:w,isMix:k,isNode:x,TRUE_STR:"true",FALSE_STR:"false",ZONE_SYMBOL_PREFIX:c,ADD_EVENT_LISTENER_STR:"addEventListener",REMOVE_EVENT_LISTENER_STR:"removeEventListener"})});const at=d("zoneTask");function lt(t,e,n,r){let i=null,o=null;n+=r;const s={};function a(e){const n=e.data;return n.args[0]=function(){return e.invoke.apply(this,arguments)},n.handleId=i.apply(t,n.args),e}function l(e){return o.call(t,e.data.handleId)}i=T(t,e+=r,n=>function(i,o){if("function"==typeof o[0]){const t={isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?o[1]||0:void 0,args:o},n=o[0];o[0]=function(){try{return n.apply(this,arguments)}finally{t.isPeriodic||("number"==typeof t.handleId?delete s[t.handleId]:t.handleId&&(t.handleId[at]=null))}};const i=f(e,o[0],t,a,l);if(!i)return i;const u=i.data.handleId;return"number"==typeof u?s[u]=i:u&&(u[at]=i),u&&u.ref&&u.unref&&"function"==typeof u.ref&&"function"==typeof u.unref&&(i.ref=u.ref.bind(u),i.unref=u.unref.bind(u)),"number"==typeof u||u?u:i}return n.apply(t,o)}),o=T(t,n,e=>function(n,r){const i=r[0];let o;"number"==typeof i?o=s[i]:(o=i&&i[at],o||(o=i)),o&&"string"==typeof o.type?"notScheduled"!==o.state&&(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&("number"==typeof i?delete s[i]:i&&(i[at]=null),o.zone.cancelTask(o)):e.apply(t,r)})}function ut(t,e){if(Zone[e.symbol("patchEventTarget")])return;const{eventNames:n,zoneSymbolEventNames:r,TRUE_STR:i,FALSE_STR:o,ZONE_SYMBOL_PREFIX:s}=e.getGlobalObjects();for(let l=0;l<n.length;l++){const t=n[l],e=s+(t+o),a=s+(t+i);r[t]={},r[t][o]=e,r[t][i]=a}const a=t.EventTarget;return a&&a.prototype?(e.patchEventTarget(t,[a&&a.prototype]),!0):void 0}Zone.__load_patch("legacy",t=>{const e=t[Zone.__symbol__("legacyPatch")];e&&e()}),Zone.__load_patch("queueMicrotask",(t,e,n)=>{n.patchMethod(t,"queueMicrotask",t=>function(t,n){e.current.scheduleMicroTask("queueMicrotask",n[0])})}),Zone.__load_patch("timers",t=>{lt(t,"set","clear","Timeout"),lt(t,"set","clear","Interval"),lt(t,"set","clear","Immediate")}),Zone.__load_patch("requestAnimationFrame",t=>{lt(t,"request","cancel","AnimationFrame"),lt(t,"mozRequest","mozCancel","AnimationFrame"),lt(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(t,e)=>{const n=["alert","prompt","confirm"];for(let r=0;r<n.length;r++)T(t,n[r],(n,r,i)=>function(r,o){return e.current.run(n,t,o,i)})}),Zone.__load_patch("EventTarget",(t,e,n)=>{!function(t,e){e.patchEventPrototype(t,e)}(t,n),ut(t,n);const r=t.XMLHttpRequestEventTarget;r&&r.prototype&&n.patchEventTarget(t,[r.prototype])}),Zone.__load_patch("MutationObserver",(t,e,n)=>{D("MutationObserver"),D("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(t,e,n)=>{D("IntersectionObserver")}),Zone.__load_patch("FileReader",(t,e,n)=>{D("FileReader")}),Zone.__load_patch("on_property",(t,e,n)=>{st(n,t)}),Zone.__load_patch("customElements",(t,e,n)=>{!function(t,e){const{isBrowser:n,isMix:r}=e.getGlobalObjects();(n||r)&&t.customElements&&"customElements"in t&&e.patchCallbacks(e,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,n)}),Zone.__load_patch("XHR",(t,e)=>{!function(t){const c=t.XMLHttpRequest;if(!c)return;const h=c.prototype;let p=h[l],g=h[u];if(!p){const e=t.XMLHttpRequestEventTarget;if(e){const t=e.prototype;p=t[l],g=t[u]}}function m(t){const r=t.data,s=r.target;s[o]=!1,s[a]=!1;const c=s[i];p||(p=s[l],g=s[u]),c&&g.call(s,"readystatechange",c);const h=s[i]=()=>{if(s.readyState===s.DONE)if(!r.aborted&&s[o]&&"scheduled"===t.state){const n=s[e.__symbol__("loadfalse")];if(0!==s.status&&n&&n.length>0){const i=t.invoke;t.invoke=function(){const n=s[e.__symbol__("loadfalse")];for(let e=0;e<n.length;e++)n[e]===t&&n.splice(e,1);r.aborted||"scheduled"!==t.state||i.call(t)},n.push(t)}else t.invoke()}else r.aborted||!1!==s[o]||(s[a]=!0)};return p.call(s,"readystatechange",h),s[n]||(s[n]=t),w.apply(s,r.args),s[o]=!0,t}function y(){}function v(t){const e=t.data;return e.aborted=!0,k.apply(e.target,e.args)}const b=T(h,"open",()=>function(t,e){return t[r]=0==e[2],t[s]=e[1],b.apply(t,e)}),_=d("fetchTaskAborting"),x=d("fetchTaskScheduling"),w=T(h,"send",()=>function(t,n){if(!0===e.current[x])return w.apply(t,n);if(t[r])return w.apply(t,n);{const e={target:t,url:t[s],isPeriodic:!1,args:n,aborted:!1},r=f("XMLHttpRequest.send",y,e,m,v);t&&!0===t[a]&&!e.aborted&&"scheduled"===r.state&&r.invoke()}}),k=T(h,"abort",()=>function(t,r){const i=t[n];if(i&&"string"==typeof i.type){if(null==i.cancelFn||i.data&&i.data.aborted)return;i.zone.cancelTask(i)}else if(!0===e.current[_])return k.apply(t,r)})}(t);const n=d("xhrTask"),r=d("xhrSync"),i=d("xhrListener"),o=d("xhrScheduled"),s=d("xhrURL"),a=d("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&function(t,e){const n=t.constructor.name;for(let i=0;i<e.length;i++){const o=e[i],s=t[o];if(s){if(!b(r(t,o)))continue;t[o]=(t=>{const e=function(){return t.apply(this,v(arguments,n+"."+o))};return F(e,t),e})(s)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(t,e)=>{function n(e){return function(n){H(t,e).forEach(r=>{const i=t.PromiseRejectionEvent;if(i){const t=new i(e,{promise:n.promise,reason:n.rejection});r.invoke(t)}})}}t.PromiseRejectionEvent&&(e[d("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),e[d("rejectionHandledHandler")]=n("rejectionhandled"))})},qHvB:function(t){t.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"5.0.0","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"files":["bin","build","src","vega-lite*","tsconfig.json"],"scripts":{"changelog":"conventional-changelog -p angular -r 2","prebuild":"yarn clean:build","build":"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"yarn clean:build && rimraf site/data/* && rimraf examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","clean:build":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rimraf build/src","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:cover":"jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && rimraf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch":"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"jest --watch test/"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/core":"^7.13.1","@babel/preset-env":"^7.13.5","@babel/preset-typescript":"^7.13.0","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^17.1.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.0","@types/chai":"^4.2.15","@types/d3":"^6.3.0","@types/jest":"^26.0.20","@types/mkdirp":"^1.0.1","@types/pako":"^1.0.1","@typescript-eslint/eslint-plugin":"^4.15.2","@typescript-eslint/parser":"^4.15.2","ajv":"^7.1.1","ajv-formats":"^1.5.1","chai":"^4.3.0","cheerio":"^1.0.0-rc.5","conventional-changelog-cli":"^2.1.1","d3":"^6.5.0","eslint":"^7.20.0","eslint-config-prettier":"^8.0.0","eslint-plugin-jest":"^24.1.5","eslint-plugin-prettier":"^3.3.1","gh-pages":"^3.1.0","highlight.js":"^10.6.0","jest":"^26.6.3","jest-dev-server":"^4.4.0","mkdirp":"^1.0.4","pako":"^2.0.3","prettier":"^2.2.1","puppeteer":"^7.1.0","rollup":"^2.39.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2","serve":"^11.3.2","terser":"^5.6.0","ts-json-schema-generator":"^0.86.1","typescript":"~4.2.2","vega-cli":"^5.19.1","vega-datasets":"~2.2.0","vega-embed":"^6.15.1","vega-tooltip":"^0.25.0","yaml-front-matter":"^4.1.1"},"dependencies":{"@types/clone":"~2.1.0","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0","tslib":"~2.1.0","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-util":"~1.16.0","yargs":"~16.2.0"},"peerDependencies":{"vega":"^5.19.1"},"jest":{"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false,"setupFiles":["./test/jest.overrides.ts"]}}')},s5qY:function(t,e,n){var r=n("0/R4");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},uAtd:function(t,e,n){var r=n("T39b"),i=n("Q3ne"),o=n("N6cJ"),s=n("y3w9"),a=n("OP3Y"),l=o.keys,u=o.key,c=function(t,e){var n=l(t,e),o=a(t);if(null===o)return n;var s=c(o,e);return s.length?n.length?i(new r(n.concat(s))):s:n};o.exp({getMetadataKeys:function(t){return c(s(t),arguments.length<2?void 0:u(arguments[1]))}})},uhZd:function(t,e,n){var r=n("XKFU"),i=n("EemH").f,o=n("y3w9");r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},v6YA:function(t,e,n){const r=n("MpxT"),i=n("8GxW");t.exports=(t,e,n)=>{const o=[];let s=null,a=null;const l=t.sort((t,e)=>i(t,e,n));for(const i of l)r(i,e,n)?(a=i,s||(s=i)):(a&&o.push([s,a]),a=null,s=null);s&&o.push([s,null]);const u=[];for(const[r,i]of o)u.push(r===i?r:i||r!==l[0]?i?r===l[0]?`<=${i}`:`${r} - ${i}`:`>=${r}`:"*");const c=u.join(" || "),h="string"==typeof e.raw?e.raw:String(e);return c.length<h.length?c:e}},vhPU:function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},vwDW:function(t,e,n){const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(t,e){if(e=o(e),t instanceof i){if(t.loose===!!e.loose)return t;t=t.value}u("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.value=this.semver===r?"":this.operator+this.semver.version,u("comp",this)}parse(t){const e=t.match(this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR]);if(!e)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==e[1]?e[1]:"","="===this.operator&&(this.operator=""),this.semver=e[2]?new c(e[2],this.options.loose):r}toString(){return this.value}test(t){if(u("Comparator.test",t,this.options.loose),this.semver===r||t===r)return!0;if("string"==typeof t)try{t=new c(t,this.options)}catch(e){return!1}return l(t,this.operator,this.semver,this.options)}intersects(t,e){if(!(t instanceof i))throw new TypeError("a Comparator is required");if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return""===this.value||new h(t.value,e).test(this.value);if(""===t.operator)return""===t.value||new h(this.value,e).test(t.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),o=this.semver.version===t.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),a=l(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),u=l(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return n||r||o&&s||a||u}}t.exports=i;const o=n("4S+G"),{re:s,t:a}=n("IsDc"),l=n("VMJL"),u=n("DXxi"),c=n("3wIk"),h=n("ex/Z")},w2a5:function(t,e,n){var r=n("aCFj"),i=n("ne8i"),o=n("d/Gc");t.exports=function(t){return function(e,n,s){var a,l=r(e),u=i(l.length),c=o(s,u);if(t&&n!=n){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},wmvG:function(t,e,n){"use strict";var r=n("hswa").f,i=n("Kuth"),o=n("3Lyj"),s=n("m0Pp"),a=n("9gX7"),l=n("SlkY"),u=n("Afnz"),c=n("1TsA"),h=n("elZq"),f=n("nh4g"),d=n("Z6vF").fastKey,p=n("s5qY"),g=f?"_s":"size",m=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var c=t(function(t,r){a(t,c,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[g]=0,null!=r&&l(r,n,t[u],t)});return o(c.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var n=p(this,e),r=m(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(t){p(this,e);for(var n,r=s(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(p(this,e),t)}}),f&&r(c.prototype,"size",{get:function(){return p(this,e)[g]}}),c},def:function(t,e,n){var r,i,o=m(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[g]++,"F"!==i&&(t._i[i]=o)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))},n?"entries":"values",!n,!0),h(e)}}},xfvg:function(t,e,n){const r=n("8GxW");t.exports=(t,e,n)=>0===r(t,e,n)},xpiv:function(t,e,n){var r=n("XKFU");r(r.S,"Reflect",{ownKeys:n("mQtv")})},xpql:function(t,e,n){t.exports=!n("nh4g")&&!n("eeVq")(function(){return 7!=Object.defineProperty(n("Iw71")("div"),"a",{get:function(){return 7}}).a})},y3w9:function(t,e,n){var r=n("0/R4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},ygsx:function(t,e,n){const r=n("3wIk"),i=n("ex/Z");t.exports=(t,e,n)=>{let o=null,s=null,a=null;try{a=new i(e,n)}catch(l){return null}return t.forEach(t=>{a.test(t)&&(o&&1!==s.compare(t)||(o=t,s=new r(o,n)))}),o}},ylqs:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},zRwo:function(t,e,n){var r=n("6FMO");t.exports=function(t,e){return new(r(t))(e)}},zUnb:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"JsonPatchError",function(){return wm}),n.d(r,"deepClone",function(){return km}),n.d(r,"getValueByPointer",function(){return Om}),n.d(r,"applyOperation",function(){return Cm}),n.d(r,"applyPatch",function(){return Am}),n.d(r,"applyReducer",function(){return Dm}),n.d(r,"validator",function(){return Tm}),n.d(r,"validate",function(){return Mm}),n.d(r,"_areEquals",function(){return Fm});var i={};n.r(i),n.d(i,"unobserve",function(){return Rm}),n.d(i,"observe",function(){return $m}),n.d(i,"generate",function(){return Im}),n.d(i,"compare",function(){return Lm});var o={};n.r(o),n.d(o,"aggregate",function(){return eS}),n.d(o,"bin",function(){return nS}),n.d(o,"collect",function(){return iS}),n.d(o,"compare",function(){return oS}),n.d(o,"countpattern",function(){return aS}),n.d(o,"cross",function(){return lS}),n.d(o,"density",function(){return hS}),n.d(o,"dotbin",function(){return gS}),n.d(o,"expression",function(){return mS}),n.d(o,"extent",function(){return vS}),n.d(o,"facet",function(){return _S}),n.d(o,"field",function(){return xS}),n.d(o,"filter",function(){return kS}),n.d(o,"flatten",function(){return ES}),n.d(o,"fold",function(){return SS}),n.d(o,"formula",function(){return OS}),n.d(o,"generate",function(){return CS}),n.d(o,"impute",function(){return TS}),n.d(o,"joinaggregate",function(){return MS}),n.d(o,"kde",function(){return FS}),n.d(o,"key",function(){return jS}),n.d(o,"load",function(){return NS}),n.d(o,"lookup",function(){return $S}),n.d(o,"multiextent",function(){return IS}),n.d(o,"multivalues",function(){return LS}),n.d(o,"params",function(){return BS}),n.d(o,"pivot",function(){return qS}),n.d(o,"prefacet",function(){return VS}),n.d(o,"project",function(){return HS}),n.d(o,"proxy",function(){return WS}),n.d(o,"quantile",function(){return GS}),n.d(o,"relay",function(){return ZS}),n.d(o,"sample",function(){return YS}),n.d(o,"sequence",function(){return XS}),n.d(o,"sieve",function(){return QS}),n.d(o,"subflow",function(){return bS}),n.d(o,"timeunit",function(){return KS}),n.d(o,"tupleindex",function(){return tO}),n.d(o,"values",function(){return eO}),n.d(o,"window",function(){return sO});var s={};n.r(s),n.d(s,"interpolate",function(){return MA}),n.d(s,"interpolateArray",function(){return kA}),n.d(s,"interpolateBasis",function(){return hA}),n.d(s,"interpolateBasisClosed",function(){return fA}),n.d(s,"interpolateDate",function(){return SA}),n.d(s,"interpolateDiscrete",function(){return mD}),n.d(s,"interpolateHue",function(){return yD}),n.d(s,"interpolateNumber",function(){return OA}),n.d(s,"interpolateNumberArray",function(){return xA}),n.d(s,"interpolateObject",function(){return CA}),n.d(s,"interpolateRound",function(){return FA}),n.d(s,"interpolateString",function(){return TA}),n.d(s,"interpolateTransformCss",function(){return wD}),n.d(s,"interpolateTransformSvg",function(){return kD}),n.d(s,"interpolateZoom",function(){return SD}),n.d(s,"interpolateRgb",function(){return yA}),n.d(s,"interpolateRgbBasis",function(){return bA}),n.d(s,"interpolateRgbBasisClosed",function(){return _A}),n.d(s,"interpolateHsl",function(){return CD}),n.d(s,"interpolateHslLong",function(){return AD}),n.d(s,"interpolateLab",function(){return BD}),n.d(s,"interpolateHcl",function(){return VD}),n.d(s,"interpolateHclLong",function(){return HD}),n.d(s,"interpolateCubehelix",function(){return eT}),n.d(s,"interpolateCubehelixLong",function(){return nT}),n.d(s,"piecewise",function(){return fD}),n.d(s,"quantize",function(){return rT});var a={};n.r(a),n.d(a,"bound",function(){return bN}),n.d(a,"identifier",function(){return xN}),n.d(a,"mark",function(){return wN}),n.d(a,"overlap",function(){return kN}),n.d(a,"render",function(){return TN}),n.d(a,"viewlayout",function(){return QN});var l={};n.r(l),n.d(l,"axisticks",function(){return JN}),n.d(l,"datajoin",function(){return tR}),n.d(l,"encode",function(){return nR}),n.d(l,"legendentries",function(){return rR}),n.d(l,"linkpath",function(){return lR}),n.d(l,"pie",function(){return dR}),n.d(l,"scale",function(){return mR}),n.d(l,"sortitems",function(){return _R}),n.d(l,"stack",function(){return wR});var u={};n.r(u),n.d(u,"contour",function(){return Yz}),n.d(u,"geojson",function(){return Xz}),n.d(u,"geopath",function(){return Qz}),n.d(u,"geopoint",function(){return Kz}),n.d(u,"geoshape",function(){return Jz}),n.d(u,"graticule",function(){return tL}),n.d(u,"heatmap",function(){return eL}),n.d(u,"isocontour",function(){return zz}),n.d(u,"kde2d",function(){return Wz}),n.d(u,"projection",function(){return rL});var c={};n.r(c),n.d(c,"force",function(){return XL});var h={};n.r(h),n.d(h,"nest",function(){return YU}),n.d(h,"pack",function(){return eB}),n.d(h,"partition",function(){return rB}),n.d(h,"stratify",function(){return iB}),n.d(h,"tree",function(){return aB}),n.d(h,"treelinks",function(){return lB}),n.d(h,"treemap",function(){return hB});var f={};n.r(f),n.d(f,"label",function(){return AB});var d={};n.r(d),n.d(d,"loess",function(){return TB}),n.d(d,"regression",function(){return FB});var p={};n.r(p),n.d(p,"voronoi",function(){return tq});var g={};n.r(g),n.d(g,"wordcloud",function(){return fq});var m={};n.r(m),n.d(m,"crossfilter",function(){return bq}),n.d(m,"resolvefilter",function(){return _q});var y={};n.r(y),n.d(y,"Debug",function(){return cy}),n.d(y,"Error",function(){return ay}),n.d(y,"Info",function(){return uy}),n.d(y,"None",function(){return sy}),n.d(y,"Warn",function(){return ly}),n.d(y,"accessor",function(){return Vm}),n.d(y,"accessorFields",function(){return Wm}),n.d(y,"accessorName",function(){return Hm}),n.d(y,"array",function(){return $y}),n.d(y,"ascending",function(){return Uy}),n.d(y,"clampRange",function(){return Iy}),n.d(y,"compare",function(){return Ly}),n.d(y,"constant",function(){return Hy}),n.d(y,"debounce",function(){return Wy}),n.d(y,"error",function(){return Xm}),n.d(y,"extend",function(){return Gy}),n.d(y,"extent",function(){return Zy}),n.d(y,"extentIndex",function(){return Yy}),n.d(y,"falsy",function(){return iy}),n.d(y,"fastmap",function(){return Jy}),n.d(y,"field",function(){return Km}),n.d(y,"flush",function(){return tv}),n.d(y,"hasOwnProperty",function(){return Qy}),n.d(y,"id",function(){return Jm}),n.d(y,"identity",function(){return ty}),n.d(y,"inherits",function(){return ev}),n.d(y,"inrange",function(){return nv}),n.d(y,"isArray",function(){return fy}),n.d(y,"isBoolean",function(){return rv}),n.d(y,"isDate",function(){return iv}),n.d(y,"isFunction",function(){return zy}),n.d(y,"isIterable",function(){return ov}),n.d(y,"isNumber",function(){return sv}),n.d(y,"isObject",function(){return dy}),n.d(y,"isRegExp",function(){return av}),n.d(y,"isString",function(){return lv}),n.d(y,"key",function(){return uv}),n.d(y,"lerp",function(){return cv}),n.d(y,"logger",function(){return hy}),n.d(y,"lruCache",function(){return hv}),n.d(y,"merge",function(){return fv}),n.d(y,"mergeConfig",function(){return gy}),n.d(y,"one",function(){return ny}),n.d(y,"pad",function(){return pv}),n.d(y,"panLinear",function(){return Oy}),n.d(y,"panLog",function(){return Cy}),n.d(y,"panPow",function(){return Ay}),n.d(y,"panSymlog",function(){return Dy}),n.d(y,"peek",function(){return vy}),n.d(y,"quarter",function(){return Ny}),n.d(y,"repeat",function(){return dv}),n.d(y,"span",function(){return gv}),n.d(y,"splitAccessPath",function(){return Qm}),n.d(y,"stringValue",function(){return mv}),n.d(y,"toBoolean",function(){return yv}),n.d(y,"toDate",function(){return bv}),n.d(y,"toNumber",function(){return by}),n.d(y,"toSet",function(){return xv}),n.d(y,"toString",function(){return _v}),n.d(y,"truncate",function(){return wv}),n.d(y,"truthy",function(){return ry}),n.d(y,"utcquarter",function(){return Ry}),n.d(y,"visitArray",function(){return kv}),n.d(y,"writeConfig",function(){return my}),n.d(y,"zero",function(){return ey}),n.d(y,"zoomLinear",function(){return My}),n.d(y,"zoomLog",function(){return Fy}),n.d(y,"zoomPow",function(){return jy}),n.d(y,"zoomSymlog",function(){return Py}),n.d(y,"Dataflow",function(){return Mk}),n.d(y,"EventStream",function(){return yk}),n.d(y,"MultiPulse",function(){return Ck}),n.d(y,"Operator",function(){return pk}),n.d(y,"Parameters",function(){return hk}),n.d(y,"Pulse",function(){return kk}),n.d(y,"Transform",function(){return jk}),n.d(y,"changeset",function(){return ck}),n.d(y,"definition",function(){return Nk}),n.d(y,"ingest",function(){return ik}),n.d(y,"isTuple",function(){return ek}),n.d(y,"transform",function(){return Rk}),n.d(y,"transforms",function(){return Pk}),n.d(y,"tupleid",function(){return nk}),n.d(y,"bandwidthNRD",function(){return Zk}),n.d(y,"bin",function(){return Yk}),n.d(y,"bootstrapCI",function(){return Kk}),n.d(y,"cumulativeLogNormal",function(){return dE}),n.d(y,"cumulativeNormal",function(){return aE}),n.d(y,"cumulativeUniform",function(){return bE}),n.d(y,"densityLogNormal",function(){return fE}),n.d(y,"densityNormal",function(){return sE}),n.d(y,"densityUniform",function(){return vE}),n.d(y,"dotbin",function(){return Jk}),n.d(y,"quantileLogNormal",function(){return pE}),n.d(y,"quantileNormal",function(){return lE}),n.d(y,"quantileUniform",function(){return _E}),n.d(y,"quantiles",function(){return Wk}),n.d(y,"quartiles",function(){return Gk}),n.d(y,"random",function(){return Xk}),n.d(y,"randomInteger",function(){return eE}),n.d(y,"randomKDE",function(){return cE}),n.d(y,"randomLCG",function(){return tE}),n.d(y,"randomLogNormal",function(){return gE}),n.d(y,"randomMixture",function(){return mE}),n.d(y,"randomNormal",function(){return uE}),n.d(y,"randomUniform",function(){return xE}),n.d(y,"regressionExp",function(){return AE}),n.d(y,"regressionLinear",function(){return OE}),n.d(y,"regressionLoess",function(){return jE}),n.d(y,"regressionLog",function(){return CE}),n.d(y,"regressionPoly",function(){return ME}),n.d(y,"regressionPow",function(){return DE}),n.d(y,"regressionQuad",function(){return TE}),n.d(y,"sampleCurve",function(){return $E}),n.d(y,"sampleLogNormal",function(){return hE}),n.d(y,"sampleNormal",function(){return oE}),n.d(y,"sampleUniform",function(){return yE}),n.d(y,"setRandom",function(){return Qk}),n.d(y,"DATE",function(){return l_}),n.d(y,"DAY",function(){return u_}),n.d(y,"DAYOFYEAR",function(){return c_}),n.d(y,"HOURS",function(){return h_}),n.d(y,"MILLISECONDS",function(){return p_}),n.d(y,"MINUTES",function(){return f_}),n.d(y,"MONTH",function(){return s_}),n.d(y,"QUARTER",function(){return o_}),n.d(y,"SECONDS",function(){return d_}),n.d(y,"TIME_UNITS",function(){return g_}),n.d(y,"WEEK",function(){return a_}),n.d(y,"YEAR",function(){return i_}),n.d(y,"dayofyear",function(){return w_}),n.d(y,"timeBin",function(){return sx}),n.d(y,"timeFloor",function(){return I_}),n.d(y,"timeInterval",function(){return V_}),n.d(y,"timeOffset",function(){return G_}),n.d(y,"timeSequence",function(){return X_}),n.d(y,"timeUnitSpecifier",function(){return b_}),n.d(y,"timeUnits",function(){return y_}),n.d(y,"utcFloor",function(){return U_}),n.d(y,"utcInterval",function(){return H_}),n.d(y,"utcOffset",function(){return Z_}),n.d(y,"utcSequence",function(){return Q_}),n.d(y,"utcdayofyear",function(){return A_}),n.d(y,"utcweek",function(){return D_}),n.d(y,"week",function(){return k_}),n.d(y,"loader",function(){return Xw}),n.d(y,"read",function(){return Yw}),n.d(y,"inferType",function(){return $v}),n.d(y,"inferTypes",function(){return Iv}),n.d(y,"typeParsers",function(){return Pv}),n.d(y,"format",function(){return rb}),n.d(y,"formats",function(){return ib}),n.d(y,"responseType",function(){return ob}),n.d(y,"Bounds",function(){return YM}),n.d(y,"CanvasHandler",function(){return mP}),n.d(y,"CanvasRenderer",function(){return xP}),n.d(y,"Gradient",function(){return rM}),n.d(y,"GroupItem",function(){return QM}),n.d(y,"Handler",function(){return oP}),n.d(y,"Item",function(){return XM}),n.d(y,"Marks",function(){return qj}),n.d(y,"RenderType",function(){return nN}),n.d(y,"Renderer",function(){return aP}),n.d(y,"ResourceLoader",function(){return KM}),n.d(y,"SVGHandler",function(){return kP}),n.d(y,"SVGRenderer",function(){return UP}),n.d(y,"SVGStringRenderer",function(){return eN}),n.d(y,"Scenegraph",function(){return Qj}),n.d(y,"boundClip",function(){return cN}),n.d(y,"boundContext",function(){return bF}),n.d(y,"boundItem",function(){return Vj}),n.d(y,"boundMark",function(){return Wj}),n.d(y,"boundStroke",function(){return eF}),n.d(y,"domChild",function(){return eP}),n.d(y,"domClear",function(){return nP}),n.d(y,"domCreate",function(){return Jj}),n.d(y,"domFind",function(){return tP}),n.d(y,"font",function(){return $j}),n.d(y,"fontFamily",function(){return Rj}),n.d(y,"fontSize",function(){return Mj}),n.d(y,"intersect",function(){return oN}),n.d(y,"intersectBoxLine",function(){return TF}),n.d(y,"intersectPath",function(){return OF}),n.d(y,"intersectPoint",function(){return CF}),n.d(y,"intersectRule",function(){return DF}),n.d(y,"lineHeight",function(){return Fj}),n.d(y,"markup",function(){return PP}),n.d(y,"multiLineOffset",function(){return Pj}),n.d(y,"pathCurves",function(){return oM}),n.d(y,"pathEqual",function(){return fN}),n.d(y,"pathParse",function(){return lM}),n.d(y,"pathRectangle",function(){return MM}),n.d(y,"pathRender",function(){return bM}),n.d(y,"pathSymbols",function(){return kM}),n.d(y,"pathTrail",function(){return FM}),n.d(y,"point",function(){return iP}),n.d(y,"renderModule",function(){return iN}),n.d(y,"resetSVGClipId",function(){return GM}),n.d(y,"resetSVGDefIds",function(){return dN}),n.d(y,"sceneEqual",function(){return hN}),n.d(y,"sceneFromJSON",function(){return Yj}),n.d(y,"scenePickVisit",function(){return UF}),n.d(y,"sceneToJSON",function(){return Zj}),n.d(y,"sceneVisit",function(){return LF}),n.d(y,"sceneZOrder",function(){return zF}),n.d(y,"serializeXML",function(){return NP}),n.d(y,"textMetrics",function(){return Sj}),n.d(y,"interpolate",function(){return TT}),n.d(y,"interpolateColors",function(){return CT}),n.d(y,"interpolateRange",function(){return OT}),n.d(y,"quantizeInterpolator",function(){return AT}),n.d(y,"scale",function(){return mT}),n.d(y,"scheme",function(){return PT}),n.d(y,"projection",function(){return Cz}),n.d(y,"View",function(){return iG}),n.d(y,"defaultLocale",function(){return Gw}),n.d(y,"formatLocale",function(){return zw}),n.d(y,"locale",function(){return Ww}),n.d(y,"resetDefaultLocale",function(){return Zw}),n.d(y,"timeFormatLocale",function(){return Vw}),n.d(y,"expressionFunction",function(){return fW}),n.d(y,"parse",function(){return EX}),n.d(y,"runtimeContext",function(){return wW}),n.d(y,"version",function(){return SX});var v={};n.r(v),n.d(v,"invalidSpec",function(){return iJ}),n.d(v,"FIT_NON_SINGLE",function(){return oJ}),n.d(v,"containerSizeNonSingle",function(){return sJ}),n.d(v,"containerSizeNotCompatibleWithAutosize",function(){return aJ}),n.d(v,"droppingFit",function(){return lJ}),n.d(v,"unknownField",function(){return uJ}),n.d(v,"cannotProjectOnChannelWithoutField",function(){return cJ}),n.d(v,"cannotProjectAggregate",function(){return hJ}),n.d(v,"nearestNotSupportForContinuous",function(){return fJ}),n.d(v,"selectionNotSupported",function(){return dJ}),n.d(v,"selectionNotFound",function(){return pJ}),n.d(v,"SCALE_BINDINGS_CONTINUOUS",function(){return gJ}),n.d(v,"LEGEND_BINDINGS_MUST_HAVE_PROJECTION",function(){return mJ}),n.d(v,"cannotLookupVariableParameter",function(){return yJ}),n.d(v,"noSameUnitLookup",function(){return vJ}),n.d(v,"NEEDS_SAME_SELECTION",function(){return bJ}),n.d(v,"INTERVAL_INITIALIZED_WITH_X_Y",function(){return _J}),n.d(v,"noSuchRepeatedValue",function(){return xJ}),n.d(v,"columnsNotSupportByRowCol",function(){return wJ}),n.d(v,"CONCAT_CANNOT_SHARE_AXIS",function(){return kJ}),n.d(v,"unrecognizedParse",function(){return EJ}),n.d(v,"differentParse",function(){return SJ}),n.d(v,"ADD_SAME_CHILD_TWICE",function(){return OJ}),n.d(v,"invalidTransformIgnored",function(){return CJ}),n.d(v,"NO_FIELDS_NEEDS_AS",function(){return AJ}),n.d(v,"customFormatTypeNotAllowed",function(){return DJ}),n.d(v,"projectionOverridden",function(){return TJ}),n.d(v,"REPLACE_ANGLE_WITH_THETA",function(){return MJ}),n.d(v,"primitiveChannelDef",function(){return FJ}),n.d(v,"invalidFieldType",function(){return jJ}),n.d(v,"invalidFieldTypeForCountAggregate",function(){return PJ}),n.d(v,"invalidAggregate",function(){return NJ}),n.d(v,"missingFieldType",function(){return RJ}),n.d(v,"droppingColor",function(){return $J}),n.d(v,"relativeBandSizeNotSupported",function(){return IJ}),n.d(v,"emptyFieldDef",function(){return zJ}),n.d(v,"LINE_WITH_VARYING_SIZE",function(){return LJ}),n.d(v,"incompatibleChannel",function(){return UJ}),n.d(v,"invalidEncodingChannel",function(){return BJ}),n.d(v,"channelShouldBeDiscrete",function(){return qJ}),n.d(v,"channelShouldBeDiscreteOrDiscretizing",function(){return VJ}),n.d(v,"facetChannelDropped",function(){return HJ}),n.d(v,"discreteChannelCannotEncode",function(){return WJ}),n.d(v,"rangeMarkAlignmentCannotBeExpression",function(){return GJ}),n.d(v,"lineWithRange",function(){return ZJ}),n.d(v,"orientOverridden",function(){return YJ}),n.d(v,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",function(){return XJ}),n.d(v,"cannotUseScalePropertyWithNonColor",function(){return QJ}),n.d(v,"cannotUseRelativeBandSizeWithNonBandScale",function(){return KJ}),n.d(v,"unaggregateDomainHasNoEffectForRawField",function(){return JJ}),n.d(v,"unaggregateDomainWithNonSharedDomainOp",function(){return t0}),n.d(v,"unaggregatedDomainWithLogScale",function(){return e0}),n.d(v,"cannotApplySizeToNonOrientedMark",function(){return n0}),n.d(v,"scaleTypeNotWorkWithChannel",function(){return r0}),n.d(v,"scaleTypeNotWorkWithFieldDef",function(){return i0}),n.d(v,"scalePropertyNotWorkWithScaleType",function(){return o0}),n.d(v,"scaleTypeNotWorkWithMark",function(){return s0}),n.d(v,"stepDropped",function(){return a0}),n.d(v,"mergeConflictingProperty",function(){return l0}),n.d(v,"mergeConflictingDomainProperty",function(){return u0}),n.d(v,"independentScaleMeansIndependentGuide",function(){return c0}),n.d(v,"domainSortDropped",function(){return h0}),n.d(v,"MORE_THAN_ONE_SORT",function(){return f0}),n.d(v,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",function(){return d0}),n.d(v,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",function(){return p0}),n.d(v,"FACETED_INDEPENDENT_SAME_SOURCE",function(){return g0}),n.d(v,"INVALID_CHANNEL_FOR_AXIS",function(){return m0}),n.d(v,"cannotStackRangedMark",function(){return y0}),n.d(v,"cannotStackNonLinearScale",function(){return v0}),n.d(v,"stackNonSummativeAggregate",function(){return b0}),n.d(v,"invalidTimeUnit",function(){return _0}),n.d(v,"droppedDay",function(){return x0}),n.d(v,"errorBarCenterAndExtentAreNotNeeded",function(){return w0}),n.d(v,"errorBarCenterIsUsedWithWrongExtent",function(){return k0}),n.d(v,"errorBarContinuousAxisHasCustomizedAggregate",function(){return E0}),n.d(v,"errorBand1DNotSupport",function(){return S0}),n.d(v,"channelRequiredForBinned",function(){return O0}),n.d(v,"channelShouldNotBeUsedForBinned",function(){return C0}),n.d(v,"domainRequiredForThresholdScale",function(){return A0});var b={};n.r(b),n.d(b,"version",function(){return Ett}),n.d(b,"compile",function(){return ktt}),n.d(b,"normalize",function(){return M6}),n.d(b,"deepEqual",function(){return IX}),n.d(b,"duplicate",function(){return zX}),n.d(b,"pick",function(){return LX}),n.d(b,"omit",function(){return UX}),n.d(b,"stringify",function(){return BX}),n.d(b,"hash",function(){return qX}),n.d(b,"isNullOrFalse",function(){return VX}),n.d(b,"contains",function(){return HX}),n.d(b,"some",function(){return WX}),n.d(b,"every",function(){return GX}),n.d(b,"mergeDeep",function(){return ZX}),n.d(b,"unique",function(){return XX}),n.d(b,"isEqual",function(){return QX}),n.d(b,"setEqual",function(){return KX}),n.d(b,"hasIntersection",function(){return JX}),n.d(b,"prefixGenerator",function(){return tQ}),n.d(b,"fieldIntersection",function(){return eQ}),n.d(b,"isEmpty",function(){return nQ}),n.d(b,"keys",function(){return rQ}),n.d(b,"vals",function(){return iQ}),n.d(b,"entries",function(){return oQ}),n.d(b,"isBoolean",function(){return sQ}),n.d(b,"varName",function(){return aQ}),n.d(b,"logicalExpr",function(){return lQ}),n.d(b,"deleteNestedProperty",function(){return uQ}),n.d(b,"titleCase",function(){return cQ}),n.d(b,"accessPathWithDatum",function(){return hQ}),n.d(b,"flatAccessWithDatum",function(){return fQ}),n.d(b,"replacePathInField",function(){return pQ}),n.d(b,"replaceAll",function(){return gQ}),n.d(b,"removePathFromField",function(){return mQ}),n.d(b,"accessPathDepth",function(){return yQ}),n.d(b,"getFirstDefined",function(){return vQ}),n.d(b,"uniqueId",function(){return _Q}),n.d(b,"resetIdCounter",function(){return xQ}),n.d(b,"internalField",function(){return wQ}),n.d(b,"isInternalField",function(){return kQ}),n.d(b,"normalizeAngle",function(){return EQ}),n.d(b,"isNumeric",function(){return SQ});var _={};function x(t){return"function"==typeof t}n.r(_),n.d(_,"dark",function(){return Ott}),n.d(_,"excel",function(){return Ctt}),n.d(_,"fivethirtyeight",function(){return Att}),n.d(_,"ggplot2",function(){return Dtt}),n.d(_,"googlecharts",function(){return $tt}),n.d(_,"latimes",function(){return Ftt}),n.d(_,"quartz",function(){return jtt}),n.d(_,"urbaninstitute",function(){return Rtt}),n.d(_,"version",function(){return Itt}),n.d(_,"vox",function(){return Ptt});let w=!1;const k={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else w&&console.log("RxJS: Back to a better error behavior. Thank you. <3");w=t},get useDeprecatedSynchronousErrorHandling(){return w}};function E(t){setTimeout(()=>{throw t},0)}const S={closed:!0,next(t){},error(t){if(k.useDeprecatedSynchronousErrorHandling)throw t;E(t)},complete(){}},O=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function C(t){return null!==t&&"object"==typeof t}const A=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let D=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(x(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(s){e=s instanceof A?T(s.errors):[s]}}if(O(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(C(n))try{n.unsubscribe()}catch(s){e=e||[],s instanceof A?e=e.concat(T(s.errors)):e.push(s)}}}if(e)throw new A(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function T(t){return t.reduce((t,e)=>t.concat(e instanceof A?e.errors:e),[])}const M=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class F extends D{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=S;break;case 1:if(!t){this.destination=S;break}if("object"==typeof t){t instanceof F?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new j(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new j(this,t,e,n)}}[M](){return this}static create(t,e,n){const r=new F(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class j extends F{constructor(t,e,n,r){let i;super(),this._parentSubscriber=t;let o=this;x(e)?i=e:e&&(i=e.next,n=e.error,r=e.complete,e!==S&&(o=Object.create(e),x(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=n,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;k.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=k;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):E(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;E(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);k.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),k.useDeprecatedSynchronousErrorHandling)throw n;E(n)}}__tryOrSetError(t,e,n){if(!k.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return k.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(E(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const P=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function N(t){return t}let R=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof F)return t;if(t[M])return t[M]()}return t||e||n?new F(t,e,n):new F(S)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||k.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),k.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){k.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof F?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=$(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[P](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?N:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=$(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function $(t){if(t||(t=k.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const I=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class z extends D{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class L extends F{constructor(t){super(t),this.destination=t}}let U=(()=>{class t extends R{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[M](){return new L(this)}lift(t){const e=new B(this,this);return e.operator=t,e}next(t){if(this.closed)throw new I;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new I;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new I;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new I;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new I;return this.hasError?(t.error(this.thrownError),D.EMPTY):this.isStopped?(t.complete(),D.EMPTY):(this.observers.push(t),new z(this,t))}asObservable(){const t=new R;return t.source=this,t}}return t.create=(t,e)=>new B(t,e),t})();class B extends U{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):D.EMPTY}}function q(t){return t&&"function"==typeof t.schedule}function V(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new H(t,e))}}class H{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new W(t,this.project,this.thisArg))}}class W extends F{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const G=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function Z(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const Y=Z(),X=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Q(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const K=t=>{if(t&&"function"==typeof t[P])return r=t,t=>{const e=r[P]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(X(t))return G(t);if(Q(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,E),t);if(t&&"function"==typeof t[Y])return e=t,t=>{const n=e[Y]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=C(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function J(t,e){return new R(n=>{const r=new D;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function tt(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[P]}(t))return function(t,e){return new R(n=>{const r=new D;return r.add(e.schedule(()=>{const i=t[P]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Q(t))return function(t,e){return new R(n=>{const r=new D;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(X(t))return J(t,e);if(function(t){return t&&"function"==typeof t[Y]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new R(n=>{const r=new D;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[Y](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof R?t:new R(K(t))}class et extends F{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class nt extends F{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function rt(t,e){if(!e.closed)return t instanceof R?t.subscribe(e):K(t)(e)}function it(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(it((n,r)=>tt(t(n,r)).pipe(V((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new ot(t,n)))}class ot{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new st(t,this.project,this.concurrent))}}class st extends nt{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new et(this),n=this.destination;n.add(e);const r=rt(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function at(t=Number.POSITIVE_INFINITY){return it(N,t)}function lt(t,e){return e?J(t,e):new R(G(t))}function ut(){return function(t){return t.lift(new ct(t))}}class ct{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new ht(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class ht extends F{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class ft extends R{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new D,t.add(this.source.subscribe(new pt(this.getSubject(),this))),t.closed&&(this._connection=null,t=D.EMPTY)),t}refCount(){return ut()(this)}}const dt=(()=>{const t=ft.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class pt extends L{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function gt(){return new U}function mt(t){for(let e in t)if(t[e]===mt)return e;throw Error("Could not find renamed property on target object.")}function yt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function vt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(vt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function bt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const _t=mt({__forward_ref__:mt});function xt(t){return t.__forward_ref__=xt,t.toString=function(){return vt(this())},t}function wt(t){return kt(t)?t():t}function kt(t){return"function"==typeof t&&t.hasOwnProperty(_t)&&t.__forward_ref__===xt}class Et extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function St(t){return"string"==typeof t?t:null==t?"":String(t)}function Ot(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():St(t)}function Ct(t,e){const n=e?` in ${e}`:"";throw new Et("201",`No provider for ${Ot(t)} found${n}`)}function At(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function Tt(t){return Mt(t,jt)||Mt(t,Nt)}function Mt(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ft(t){return t&&(t.hasOwnProperty(Pt)||t.hasOwnProperty(Rt))?t[Pt]:null}const jt=mt({"\u0275prov":mt}),Pt=mt({"\u0275inj":mt}),Nt=mt({ngInjectableDef:mt}),Rt=mt({ngInjectorDef:mt});var $t=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let It;function zt(t){const e=It;return It=t,e}function Lt(t,e,n){const r=Tt(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&$t.Optional?null:void 0!==e?e:void Ct(vt(t),"Injector")}function Ut(t){return{toString:t}.toString()}var Bt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),qt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Vt="undefined"!=typeof globalThis&&globalThis,Ht="undefined"!=typeof window&&window,Wt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt="undefined"!=typeof global&&global,Zt=Vt||Gt||Ht||Wt,Yt={},Xt=[],Qt=mt({"\u0275cmp":mt}),Kt=mt({"\u0275dir":mt}),Jt=mt({"\u0275pipe":mt}),te=mt({"\u0275mod":mt}),ee=mt({"\u0275loc":mt}),ne=mt({"\u0275fac":mt}),re=mt({__NG_ELEMENT_ID__:mt});let ie=0;function oe(t){return Ut(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Bt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Xt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||qt.Emulated,id:"c",styles:t.styles||Xt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=ie++,n.inputs=ce(t.inputs,e),n.outputs=ce(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(se):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(ae):null,n})}function se(t){return fe(t)||function(t){return t[Kt]||null}(t)}function ae(t){return function(t){return t[Jt]||null}(t)}const le={};function ue(t){const e={type:t.type,bootstrap:t.bootstrap||Xt,declarations:t.declarations||Xt,imports:t.imports||Xt,exports:t.exports||Xt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&Ut(()=>{le[t.id]=t.type}),e}function ce(t,e){if(null==t)return Yt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const he=oe;function fe(t){return t[Qt]||null}function de(t,e){const n=t[te]||null;if(!n&&!0===e)throw new Error(`Type ${vt(t)} does not have '\u0275mod' property.`);return n}function pe(t){return Array.isArray(t)&&"object"==typeof t[1]}function ge(t){return Array.isArray(t)&&!0===t[1]}function me(t){return 0!=(8&t.flags)}function ye(t){return 2==(2&t.flags)}function ve(t){return 1==(1&t.flags)}function be(t){return null!==t.template}function _e(t,e){return t.hasOwnProperty(ne)?t[ne]:null}class xe{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function we(){return ke}function ke(t){return t.type.prototype.ngOnChanges&&(t.setInput=Se),Ee}function Ee(){const t=Oe(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Yt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Se(t,e,n,r){const i=Oe(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Yt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],l=s[a];o[a]=new xe(l&&l.currentValue,e,s===Yt),t[r]=e}function Oe(t){return t.__ngSimpleChanges__||null}let Ce;function Ae(t){return!!t.listen}we.ngInherit=!0;const De={createRenderer:(t,e)=>void 0!==Ce?Ce:"undefined"!=typeof document?document:void 0};function Te(t){for(;Array.isArray(t);)t=t[0];return t}function Me(t,e){return Te(e[t])}function Fe(t,e){return Te(e[t.index])}function je(t,e){return t.data[e]}function Pe(t,e){return t[e]}function Ne(t,e){const n=e[t];return pe(n)?n:n[0]}function Re(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function $e(t){return 4==(4&t[2])}function Ie(t){return 128==(128&t[2])}function ze(t,e){return null==e?null:t[e]}function Le(t){t[18]=0}function Ue(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Be={lFrame:cn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qe(){return Be.bindingsEnabled}function Ve(){return Be.lFrame.lView}function He(){return Be.lFrame.tView}function We(t){Be.lFrame.contextLView=t}function Ge(){let t=Ze();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ze(){return Be.lFrame.currentTNode}function Ye(t,e){const n=Be.lFrame;n.currentTNode=t,n.isParent=e}function Xe(){return Be.lFrame.isParent}function Qe(){Be.lFrame.isParent=!1}function Ke(){return Be.isInCheckNoChangesMode}function Je(t){Be.isInCheckNoChangesMode=t}function tn(){return Be.lFrame.bindingIndex++}function en(t,e){const n=Be.lFrame;n.bindingIndex=n.bindingRootIndex=t,nn(e)}function nn(t){Be.lFrame.currentDirectiveIndex=t}function rn(){return Be.lFrame.currentQueryIndex}function on(t){Be.lFrame.currentQueryIndex=t}function sn(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function an(t,e,n){if(n&$t.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&$t.Host||(r=sn(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Be.lFrame=un();return r.currentTNode=e,r.lView=t,!0}function ln(t){const e=un(),n=t[1];Be.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function un(){const t=Be.lFrame,e=null===t?null:t.child;return null===e?cn(t):e}function cn(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function hn(){const t=Be.lFrame;return Be.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const fn=hn;function dn(){const t=hn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pn(){return Be.lFrame.selectedIndex}function gn(t){Be.lFrame.selectedIndex=t}function mn(){const t=Be.lFrame;return je(t.tView,t.selectedIndex)}function yn(){Be.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function vn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function bn(t,e,n){wn(t,e,3,n)}function _n(t,e,n,r){(3&t[2])===n&&wn(t,e,n,r)}function xn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function wn(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(kn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function kn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class En{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Sn(t,e,n){const r=Ae(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=n[++i];Cn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function On(t){return 3===t||4===t||6===t}function Cn(t){return 64===t.charCodeAt(0)}function An(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Dn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Dn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Tn(t){return-1!==t}function Mn(t){return 32767&t}function Fn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let jn=!0;function Pn(t){const e=jn;return jn=t,e}let Nn=0;function Rn(t,e){const n=In(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,$n(r.data,t),$n(e,null),$n(r.blueprint,null));const i=zn(t,e),o=t.injectorIndex;if(Tn(i)){const t=Mn(i),n=Fn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function $n(t,e){t.push(0,0,0,0,0,0,0,0,e)}function In(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function zn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Ln(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(re)&&(r=n[re]),null==r&&(r=n[re]=Nn++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Un(t,e,n){if(n&$t.Optional)return t;Ct(e,"NodeInjector")}function Bn(t,e,n,r){if(n&$t.Optional&&void 0===r&&(r=null),0==(n&($t.Self|$t.Host))){const i=t[9],o=zt(void 0);try{return i?i.get(e,r,n&$t.Optional):Lt(e,r,n&$t.Optional)}finally{zt(o)}}return Un(r,e,n)}function qn(t,e,n,r=$t.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(re)?t[re]:void 0;return"number"==typeof e?e>=0?255&e:Hn:e}(n);if("function"==typeof o){if(!an(e,t,r))return r&$t.Host?Un(i,n,r):Bn(e,n,r,i);try{const t=o();if(null!=t||r&$t.Optional)return t;Ct(n)}finally{fn()}}else if("number"==typeof o){let i=null,s=In(t,e),a=-1,l=r&$t.Host?e[16][6]:null;for((-1===s||r&$t.SkipSelf)&&(a=-1===s?zn(t,e):e[s+8],-1!==a&&Xn(r,!1)?(i=e[1],s=Mn(a),e=Fn(a,e)):s=-1);-1!==s;){const t=e[1];if(Yn(o,s,t.data)){const t=Wn(s,e,n,i,r,l);if(t!==Vn)return t}a=e[s+8],-1!==a&&Xn(r,e[1].data[s+8]===l)&&Yn(o,s,e)?(i=t,s=Mn(a),e=Fn(a,e)):s=-1}}}return Bn(e,n,r,i)}const Vn={};function Hn(){return new Qn(Ge(),Ve())}function Wn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],l=Gn(a,s,n,null==r?ye(a)&&jn:r!=s&&0!=(3&a.type),i&$t.Host&&o===a);return null!==l?Zn(e,s,l,a):Vn}function Gn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,u=o>>20,c=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<c;h++){const t=s[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(i){const t=s[l];if(t&&be(t)&&t.type===n)return l}return null}function Zn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof En){const s=i;s.resolving&&function(t,e){throw new Et("200",`Circular dependency in DI detected for ${t}`)}(Ot(o[n]));const a=Pn(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?zt(s.injectImpl):null;an(t,r,$t.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=ke(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==l&&zt(l),Pn(a),s.resolving=!1,fn()}}return i}function Yn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Xn(t,e){return!(t&$t.Self||t&$t.Host&&e)}class Qn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return qn(this._tNode,this._lView,t,void 0,e)}}function Kn(t){const e=t;if(kt(t))return()=>{const t=Kn(wt(e));return t?t():null};let n=_e(e);if(null===n){const t=Ft(e);n=t&&t.factory}return n||null}function Jn(t){return Ut(()=>{const e=t.prototype.constructor,n=e[ne]||Kn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[ne]||Kn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function tr(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(On(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ge(),t)}function er(t,e,n){return Ut(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class nr{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=At({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rr=new nr("AnalyzeForEntryComponents"),ir=Function;function or(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),or(r,e)):e!==t&&e.push(r)}return e}function sr(t,e){t.forEach(t=>Array.isArray(t)?sr(t,e):e(t))}function ar(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function lr(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ur(t,e,n){let r=hr(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function cr(t,e){const n=hr(t,e);if(n>=0)return t[1|n]}function hr(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const fr={},dr=/\n/gm,pr=mt({provide:String,useValue:mt});let gr;function mr(t){const e=gr;return gr=t,e}function yr(t,e=$t.Default){if(void 0===gr)throw new Error("inject() must be called from an injection context");return null===gr?Lt(t,void 0,e):gr.get(t,e&$t.Optional?null:void 0,e)}function vr(t,e=$t.Default){return(It||yr)(wt(t),e)}function br(t){const e=[];for(let n=0;n<t.length;n++){const r=wt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=$t.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(vr(t,n))}else e.push(vr(r))}return e}function _r(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const xr=_r(er("Inject",t=>({token:t})),-1),wr=_r(er("Optional"),8),kr=_r(er("SkipSelf"),4);class Er{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Sr(t){return t instanceof Er?t.changingThisBreaksApplicationSecurity:t}const Or=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Cr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Ar=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Dr(t){const e=function(){const t=Ve();return t&&t[12]}();return e?e.sanitize(Ar.URL,t)||"":function(t,e){const n=function(t){return t instanceof Er&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}(t,"URL")?Sr(t):(n=St(t),(n=String(n)).match(Or)||n.match(Cr)?n:"unsafe:"+n);var n}function Tr(t){return t.ngDebugContext}function Mr(t){return t.ngOriginalError}function Fr(t,...e){t.error(...e)}class jr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Fr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Tr(t)?Tr(t):this._findContext(Mr(t)):null}_findOriginalError(t){let e=Mr(t);for(;e&&Mr(e);)e=Mr(e);return e}}function Pr(t,e){t.__ngContext__=e}const Nr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Zt))();function Rr(t){return t instanceof Function?t():t}var $r=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Ir(t,e){return(void 0)(t,e)}function zr(t){const e=t[3];return ge(e)?e[3]:e}function Lr(t){return Br(t[13])}function Ur(t){return Br(t[4])}function Br(t){for(;null!==t&&!ge(t);)t=t[4];return t}function qr(t,e,n,r,i){if(null!=r){let o,s=!1;ge(r)?o=r:pe(r)&&(s=!0,r=r[0]);const a=Te(r);0===t&&null!==n?null==i?Xr(e,n,a):Yr(e,n,a,i||null,!0):1===t&&null!==n?Yr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Kr(t,e);r&&function(t,e,n,r){Ae(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Te(n)&&qr(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];ii(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Vr(t,e,n){return Ae(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Hr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ue(i,-1)),n.splice(r,1)}function Wr(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Hr(o,r),e>0&&(t[n-1][4]=r[4]);const s=lr(t,10+e);ii(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Gr(t,e){if(!(256&e[2])){const n=e[11];Ae(n)&&n.destroyNode&&ii(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Zr(t[1],t);for(;e;){let n=null;if(pe(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)pe(e)&&Zr(e[1],e),e=e[3];null===e&&(e=t),pe(e)&&Zr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Zr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof En)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Te(e[t]),a=r[i=n[o+2]],l=n[o+3];"boolean"==typeof l?s.removeEventListener(n[o],a,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ae(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ge(e[3])){n!==e[3]&&Hr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Yr(t,e,n,r,i){Ae(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Xr(t,e,n){Ae(t)?t.appendChild(e,n):e.appendChild(n)}function Qr(t,e,n,r,i){null!==r?Yr(t,e,n,r,i):Xr(t,e,n)}function Kr(t,e){return Ae(t)?t.parentNode(e):e.parentNode}function Jr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===qt.None||e===qt.Emulated)return null}return Fe(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Fe(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Qr(o,i,n[a],s,!1);else Qr(o,i,n,s,!1)}function ti(t,e){if(null!==e){const n=e.type;if(3&n)return Fe(e,t);if(4&n)return ni(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ti(t,n);{const n=t[e.index];return ge(n)?ni(-1,n):Te(n)}}if(32&n)return Ir(e,t)()||Te(t[e.index]);{const n=ei(t,e);return null!==n?Array.isArray(n)?n[0]:ti(zr(t[16]),n):ti(t,e.next)}}return null}function ei(t,e){return null!==e?t[16][6].projection[e.projection]:null}function ni(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ti(t,r)}return e[7]}function ri(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&Pr(Te(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)ri(t,e,n.child,r,i,o,!1),qr(e,t,i,a,o);else if(32&l){const s=Ir(n,r);let l;for(;l=s();)qr(e,t,i,l,o);qr(e,t,i,a,o)}else 16&l?oi(t,e,r,n,i,o):qr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ii(t,e,n,r,i,o){ri(n,r,t.firstChild,e,i,o,!1)}function oi(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)qr(e,t,i,a[l],o);else ri(t,e,a,s[3],i,o,!0)}function si(t,e,n){Ae(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ai(t,e,n){Ae(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function li(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function ui(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==li(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ci(t){return 4===t.type&&"ng-template"!==t.value}function hi(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function fi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(On(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!hi(t,l,n)||""===l&&1===e.length){if(di(r))return!1;s=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!ui(t.attrs,u,n)){if(di(r))return!1;s=!0}continue}const c=pi(8&r?"class":l,i,ci(t),n);if(-1===c){if(di(r))return!1;s=!0;continue}if(""!==u){let t;t=c>o?"":i[c+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==li(e,u,0)||2&r&&u!==t){if(di(r))return!1;s=!0}}}}else{if(!s&&!di(r)&&!di(l))return!1;if(s&&di(l))continue;s=!1,r=l|1&r}}return di(r)||s}function di(t){return 0==(1&t)}function pi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function gi(t,e,n=!1){for(let r=0;r<e.length;r++)if(fi(t,e[r],n))return!0;return!1}function mi(t,e){return t?":not("+e.trim()+")":e}function yi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||di(s)||(e+=mi(o,i),i=""),r=s,o=o||!di(r);n++}return""!==i&&(e+=mi(o,i)),e}const vi={};function bi(t){_i(He(),Ve(),pn()+t,Ke())}function _i(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&bn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&_n(e,r,0,n)}gn(n)}function xi(t,e){return t<<17|e<<2}function wi(t){return t>>17&32767}function ki(t){return 2|t}function Ei(t){return(131068&t)>>2}function Si(t,e){return-131069&t|e<<2}function Oi(t){return 1|t}function Ci(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];on(i),n.contentQueries(2,e[o],o)}}}function Ai(t,e,n,r,i,o,s,a,l,u){const c=e.blueprint.slice();return c[0]=i,c[2]=140|r,Le(c),c[3]=c[15]=t,c[8]=n,c[10]=s||t&&t[10],c[11]=a||t&&t[11],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=o,c[16]=2==e.type?t[16]:c,c}function Di(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Ze(),s=Xe(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Be.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Be.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Ye(o,!0),o}function Ti(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Mi(t,e,n){ln(e);try{const r=t.viewQuery;null!==r&&ao(1,r,n);const i=t.template;null!==i&&Pi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ci(t,e),t.staticViewQueries&&ao(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)no(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,dn()}}function Fi(t,e,n,r){const i=e[2];if(256==(256&i))return;ln(e);const o=Ke();try{Le(e),Be.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Pi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&bn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&_n(e,n,0,null),xn(e,0)}if(function(t){for(let e=Lr(t);null!==e;e=Ur(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ue(r,1),n[2]|=1024}}}(e),function(t){for(let e=Lr(t);null!==e;e=Ur(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Ie(n)&&Fi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ci(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&bn(e,n)}else{const n=t.contentHooks;null!==n&&_n(e,n,1),xn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)gn(~r);else{const i=r,o=n[++t],s=n[++t];en(o,i),s(2,e[i])}}}finally{gn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)to(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&ao(2,l,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&bn(e,n)}else{const n=t.viewHooks;null!==n&&_n(e,n,2),xn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ue(e[3],-1))}finally{dn()}}function ji(t,e,n,r){const i=e[10],o=!Ke(),s=$e(e);try{o&&!s&&i.begin&&i.begin(),s&&Mi(t,e,r),Fi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Pi(t,e,n,r,i){const o=pn();try{gn(-1),2&r&&e.length>20&&_i(t,e,20,Ke()),n(r,i)}finally{gn(o)}}function Ni(t,e,n){if(me(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ri(t,e,n){qe()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Rn(n,e),Pr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=be(r);o&&Xi(e,n,r);const l=Zn(e,t,a,n);Pr(l,e),null!==s&&Qi(0,a-i,l,r,0,s),o&&(Ne(n.index,e)[8]=l)}}(t,e,n,Fe(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Be.lFrame.currentDirectiveIndex;try{gn(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];nn(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Hi(r,i)}}finally{gn(-1),nn(s)}}(t,e,n))}function $i(t,e,n=Fe){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ii(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=zi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function zi(t,e,n,r,i,o,s,a,l,u){const c=20+r,h=c+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:vi);return n}(c,h),d="function"==typeof u?u():u;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:d,incompleteFirstPass:!1}}function Li(t,e,n,r){const i=uo(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&co(t).push(r,i.length-1))}function Ui(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Bi(t,e,n,r,i,o,s,a){const l=Fe(e,n);let u,c=e.inputs;var h;!a&&null!=c&&(u=c[r])?(fo(t,n,u,r,i),ye(e)&&function(t,e){const n=Ne(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Ae(o)?o.setProperty(l,r,i):Cn(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function qi(t,e,n,r){let i=!1;if(qe()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];gi(n,s.selectors,!1)&&(i||(i=[]),Ln(Rn(n,e),t,s.type),be(s)?(Wi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Zi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,l=Ti(t,e,o.length,null);for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=An(n.mergedAttrs,u.hostAttrs),Yi(t,n,e,l,u),Gi(l,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const c=u.type.prototype;!r&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!c.ngOnChanges&&!c.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=r[l],n=t.inputs,u=null===i||ci(e)?null:Ki(n,i);o.push(u),s=Ui(n,l,s),a=Ui(t.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Et("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=An(n.mergedAttrs,n.attrs),i}function Vi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Hi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Wi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Gi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;be(e)&&(n[""]=t)}}function Zi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Yi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=_e(i.type)),s=new En(o,be(i),null);t.blueprint[r]=s,n[r]=s,Vi(t,e,0,r,Ti(t,n,i.hostVars,vi),i)}function Xi(t,e,n){const r=Fe(e,t),i=Ii(n),o=t[10],s=ro(t,Ai(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Qi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ki(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ji(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function to(t,e){const n=Ne(e,t);if(Ie(n)){const t=n[1];80&n[2]?Fi(t,n,t.template,n[8]):n[5]>0&&eo(n)}}function eo(t){for(let n=Lr(t);null!==n;n=Ur(n))for(let t=10;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Fi(t,e,t.template,e[8])}else e[5]>0&&eo(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ne(e[n],t);Ie(r)&&r[5]>0&&eo(r)}}function no(t,e){const n=Ne(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Mi(r,n,n[8])}function ro(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function io(t){for(;t;){t[2]|=64;const e=zr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function oo(t,e,n){const r=e[10];r.begin&&r.begin();try{Fi(t,e,t.template,n)}catch(i){throw ho(e,i),i}finally{r.end&&r.end()}}function so(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Re(n),i=r[1];ji(i,r,i.template,n)}}(t[8])}function ao(t,e,n){on(0),e(t,n)}const lo=(()=>Promise.resolve(null))();function uo(t){return t[7]||(t[7]=[])}function co(t){return t.cleanup||(t.cleanup=[])}function ho(t,e){const n=t[9],r=n?n.get(jr,null):null;r&&r.handleError(e)}function fo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=e[s],u=t.data[s];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function po(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=bt(i,t):2==o&&(r=bt(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const go=new nr("INJECTOR",-1);class mo{get(t,e=fr){if(e===fr){const e=new Error(`NullInjectorError: No provider for ${vt(t)}!`);throw e.name="NullInjectorError",e}return e}}const yo=new nr("Set Injector scope."),vo={},bo={},_o=[];let xo;function wo(){return void 0===xo&&(xo=new mo),xo}function ko(t,e=null,n=null,r){return new Eo(t,n,e||wo(),r)}class Eo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&sr(e,n=>this.processProvider(n,t,e)),sr([t],t=>this.processInjectorType(t,[],i)),this.records.set(go,Co(void 0,this));const o=this.records.get(yo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:vt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=fr,n=$t.Default){this.assertNotDestroyed();const r=mr(this);try{if(!(n&$t.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof nr)&&Tt(t);e=n&&this.injectableDefInScope(n)?Co(So(t),vo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&$t.Self?wo():this.parent).get(t,e=n&$t.Optional&&e===fr?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(vt(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=vt(e);if(Array.isArray(e))i=e.map(vt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):vt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(dr,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{mr(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(vt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=wt(t)))return!1;let r=Ft(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=Ft(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{sr(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];sr(r,t=>this.processProvider(t,n,r||_o))}}this.injectorDefTypes.add(o),this.records.set(o,Co(r.factory,vo));const a=r.providers;if(null!=a&&!s){const e=t;sr(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Do(t=wt(t))?t:wt(t&&t.provide);const i=function(t,e,n){return Ao(t)?Co(void 0,t.useValue):Co(Oo(t),vo)}(t);if(Do(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Co(void 0,vo,!0),e.factory=()=>br(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===vo&&(e.value=bo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function So(t){const e=Tt(t),n=null!==e?e.factory:_e(t);if(null!==n)return n;const r=Ft(t);if(null!==r)return r.factory;if(t instanceof nr)throw new Error(`Token ${vt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${vt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[jt]||t[Nt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Oo(t,e,n){let r;if(Do(t)){const e=wt(t);return _e(e)||So(e)}if(Ao(t))r=()=>wt(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...br(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>vr(wt(t.useExisting));else{const e=wt(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return _e(e)||So(e);r=()=>new e(...br(t.deps))}var i;return r}function Co(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ao(t){return null!==t&&"object"==typeof t&&pr in t}function Do(t){return"function"==typeof t}const To=function(t,e,n){return function(t,e=null,n=null,r){const i=ko(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Mo=(()=>{class t{static create(t,e){return Array.isArray(t)?To(t,e,""):To(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=fr,t.NULL=new mo,t.\u0275prov=At({token:t,providedIn:"any",factory:()=>vr(go)}),t.__NG_ELEMENT_ID__=-1,t})();function Fo(t,e){vn(Re(t)[1],Ge())}function jo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(be(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Po(t.inputs),e.declaredInputs=Po(t.declaredInputs),e.outputs=Po(t.outputs);const n=i.hostBindings;n&&$o(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&No(t,o),s&&Ro(t,s),yt(t.inputs,i.inputs),yt(t.declaredInputs,i.declaredInputs),yt(t.outputs,i.outputs),be(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===jo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=An(i.hostAttrs,n=An(n,i.hostAttrs))}}(r)}function Po(t){return t===Yt?{}:t===Xt?[]:t}function No(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ro(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function $o(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Io=null;function zo(){if(!Io){const t=Zt.Symbol;if(t&&t.iterator)Io=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Io=n)}}}return Io}class Lo{constructor(t){this.wrapped=t}static wrap(t){return new Lo(t)}static unwrap(t){return Lo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Lo}}function Uo(t){return!!Bo(t)&&(Array.isArray(t)||!(t instanceof Map)&&zo()in t)}function Bo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function qo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Vo(t,e,n,r){const i=Ve();return qo(i,tn(),e)&&(He(),function(t,e,n,r,i,o){const s=Fe(t,e);!function(t,e,n,r,i,o,s){if(null==o)Ae(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?St(o):s(o,r||"",i);Ae(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(mn(),i,t,e,n,r)),Vo}function Ho(t,e,n,r,i,o,s,a){const l=Ve(),u=He(),c=t+20,h=u.firstCreatePass?function(t,e,n,r,i,o,s,a,l){const u=e.consts,c=Di(e,t,4,s||null,ze(u,a));qi(e,n,c,ze(u,l)),vn(e,c);const h=c.tViews=zi(2,c,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,n,r,i,o,s):u.data[c];Ye(h,!1);const f=l[11].createComment("");Jr(u,l,f,h),Pr(f,l),ro(l,l[c]=Ji(f,l,f,h)),ve(h)&&Ri(u,l,h),null!=s&&$i(l,h,a)}function Wo(t){return Pe(Be.lFrame.contextLView,20+t)}function Go(t,e=$t.Default){const n=Ve();return null===n?vr(t,e):qn(Ge(),n,wt(t),e)}function Zo(t,e,n){const r=Ve();return qo(r,tn(),e)&&Bi(He(),mn(),r,t,e,r[11],n,!1),Zo}function Yo(t,e,n,r,i){const o=i?"class":"style";fo(t,n,e.inputs[o],o,r)}function Xo(t,e,n,r){const i=Ve(),o=He(),s=20+t,a=i[11],l=i[s]=Vr(a,e,Be.lFrame.currentNamespace),u=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,l=Di(e,t,2,i,ze(a,o));return qi(e,n,l,ze(a,s)),null!==l.attrs&&po(l,l.attrs,!1),null!==l.mergedAttrs&&po(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,i,0,e,n,r):o.data[s];Ye(u,!0);const c=u.mergedAttrs;null!==c&&Sn(a,l,c);const h=u.classes;null!==h&&ai(a,l,h);const f=u.styles;null!==f&&si(a,l,f),64!=(64&u.flags)&&Jr(o,i,l,u),0===Be.lFrame.elementDepthCount&&Pr(l,i),Be.lFrame.elementDepthCount++,ve(u)&&(Ri(o,i,u),Ni(o,u,i)),null!==r&&$i(i,u)}function Qo(){let t=Ge();Xe()?Qe():(t=t.parent,Ye(t,!1));const e=t;Be.lFrame.elementDepthCount--;const n=He();n.firstCreatePass&&(vn(n,t),me(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Yo(n,e,Ve(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Yo(n,e,Ve(),e.stylesWithoutHost,!1)}function Ko(t,e,n,r){Xo(t,e,n,r),Qo()}function Jo(t,e,n){const r=Ve(),i=He(),o=t+20,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=ze(o,r),a=Di(e,t,8,"ng-container",s);return null!==s&&po(a,s,!0),qi(e,n,a,ze(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Ye(s,!0);const a=r[o]=r[11].createComment("");Jr(i,r,a,s),Pr(a,r),ve(s)&&(Ri(i,r,s),Ni(i,s,r)),null!=n&&$i(r,s)}function ts(){let t=Ge();const e=He();Xe()?Qe():(t=t.parent,Ye(t,!1)),e.firstCreatePass&&(vn(e,t),me(t)&&e.queries.elementEnd(t))}function es(){return Ve()}function ns(t){return!!t&&"function"==typeof t.then}const rs=function(t){return!!t&&"function"==typeof t.subscribe};function is(t,e,n=!1,r){const i=Ve(),o=He(),s=Ge();return function(t,e,n,r,i,o,s=!1,a){const l=ve(r),u=t.firstCreatePass&&co(t),c=uo(e);let h=!0;if(3&r.type){const f=Fe(r,e),d=a?a(f):Yt,p=d.target||f,g=c.length,m=a?t=>a(Te(t[r.index])).target:r.index;if(Ae(n)){let s=null;if(!a&&l&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ss(r,e,o,!1);const t=n.listen(d.name||p,i,o);c.push(o,t),u&&u.push(i,m,g,g+1)}}else o=ss(r,e,o,!0),p.addEventListener(i,o,s),c.push(o),u&&u.push(i,m,g,s)}else o=ss(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=c.length;c.push(o,t),u&&u.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),is}function os(t,e,n){try{return!1!==e(n)}catch(r){return ho(t,r),!1}}function ss(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Ne(t.index,e):e;0==(32&e[2])&&io(s);let a=os(e,n,o),l=i.__ngNextListenerFn__;for(;l;)a=os(e,l,o)&&a,l=l.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function as(t=1){return function(t){return(Be.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Be.lFrame.contextLView))[8]}(t)}const ls=[];function us(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?wi(o):Ei(o),l=!1;for(;0!==a&&(!1===l||s);){const n=t[a+1];cs(t[a],e)&&(l=!0,t[a+1]=r?Oi(n):ki(n)),a=r?wi(n):Ei(n)}l&&(t[n+1]=r?ki(o):Oi(o))}function cs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&hr(t,e)>=0}function hs(t,e,n){return ds(t,e,n,!1),hs}function fs(t,e){return ds(t,e,null,!0),fs}function ds(t,e,n,r){const i=Ve(),o=He(),s=function(t){const e=Be.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[pn()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(t.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Be.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=gs(n=ps(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ps(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ei(r))return t[wi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ps(null,t,e,n[1],r),n=gs(n,e.attrs,r),function(t,e,n,r){t[wi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=gs(r,t[o].hostAttrs,n);return gs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=wi(s),l=Ei(s);t[r]=n;let u,c=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||hr(t,u)>0)&&(c=!0)}else u=n;if(i)if(0!==l){const e=wi(t[a+1]);t[r+1]=xi(e,a),0!==e&&(t[e+1]=Si(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=xi(a,0),0!==a&&(t[a+1]=Si(t[a+1],r)),a=r;else t[r+1]=xi(l,0),0===a?a=r:t[l+1]=Si(t[l+1],r),l=r;c&&(t[r+1]=ki(t[r+1])),us(t,u,r,!0),us(t,u,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&hr(o,e)>=0&&(n[r+1]=Oi(n[r+1]))}(e,u,t,r,o),s=xi(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==vi&&qo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const l=t.data,u=l[a+1];ys(1==(1&u)?ms(l,e,n,i,Ei(u),s):void 0)||(ys(o)||function(t){return 2==(2&t)}(u)&&(o=ms(l,null,n,i,a,s)),function(t,e,n,r,i){const o=Ae(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:$r.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=$r.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Me(pn(),n),i,o))}(o,o.data[pn()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=vt(Sr(t)))),t}(e,n),r,s)}function ps(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=gs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function gs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ur(t,s,!!n||e[++o]))}return void 0===t?null:t}function ms(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),l=o?e[1]:e,u=null===l;let c=n[i+1];c===vi&&(c=u?ls:void 0);let h=u?cr(c,r):l===r?c:void 0;if(o&&!ys(h)&&(h=cr(e,r)),ys(h)&&(a=h,s))return a;const f=t[i+1];i=s?wi(f):Ei(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=cr(t,r))}return a}function ys(t){return void 0!==t}function vs(t,e=""){const n=Ve(),r=He(),i=t+20,o=r.firstCreatePass?Di(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Ae(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Jr(r,n,s,o),Ye(o,!1)}function bs(t){return _s("",t,""),bs}function _s(t,e,n){const r=Ve(),i=function(t,e,n,r){return qo(t,tn(),n)?e+St(n)+r:vi}(r,t,e,n);return i!==vi&&function(t,e,n){const r=Me(e,t);!function(t,e,n){Ae(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,pn(),i),_s}function xs(t,e,n){const r=Ve();return qo(r,tn(),e)&&Bi(He(),mn(),r,t,e,r[11],n,!0),xs}var ws=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ks={};function Es(t){return t in ks||(ks[t]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[t]),ks[t]}var Ss=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let Os="en-US";function Cs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Os=t.toLowerCase().replace(/_/g,"-"))}function As(t,e,n,r,i){if(t=wt(t),Array.isArray(t))for(let o=0;o<t.length;o++)As(t[o],e,n,r,i);else{const o=He(),s=Ve();let a=Do(t)?t:wt(t.provide),l=Oo(t);const u=Ge(),c=1048575&u.providerIndexes,h=u.directiveStart,f=u.providerIndexes>>20;if(Do(t)||!t.multi){const r=new En(l,i,Go),d=Ms(a,e,i?c:c+f,h);-1===d?(Ln(Rn(u,s),o,a),Ds(o,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Ms(a,e,c+f,h),p=Ms(a,e,c,c+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Ln(Rn(u,s),o,a);const c=function(t,e,n,r,i){const o=new En(t,n,Go);return o.multi=[],o.index=e,o.componentProviders=0,Ts(o,i,r&&!n),o}(i?js:Fs,n.length,i,r,l);!i&&m&&(n[p].providerFactory=c),Ds(o,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(c),s.push(c)}else Ds(o,t,d>-1?d:p,Ts(n[i?p:d],l,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Ds(t,e,n,r){const i=Do(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ts(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ms(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Fs(t,e,n,r){return Ps(this.multi,[])}function js(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Zn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ps(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ps(i,o);return o}function Ps(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ns(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=He();if(r.firstCreatePass){const i=be(t);As(n,r.data,r.blueprint,i,!0),As(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Rs{}class $s{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${vt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Is=(()=>{class t{}return t.NULL=new $s,t})();function zs(...t){}function Ls(t,e){return new Bs(Fe(t,e))}const Us=function(){return Ls(Ge(),Ve())};let Bs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Us,t})();function qs(t){return t instanceof Bs?t.nativeElement:t}class Vs{}let Hs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ws(),t})();const Ws=function(){const t=Ve(),e=Ne(Ge().index,t);return function(t){return t[11]}(pe(e)?e:t)};let Gs=(()=>{class t{}return t.\u0275prov=At({token:t,providedIn:"root",factory:()=>null}),t})();class Zs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ys=new Zs("11.2.3");class Xs{constructor(){}supports(t){return Uo(t)}create(t){return new Ks(t)}}const Qs=(t,e)=>e;class Ks{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Qs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<na(n,r,i)?e:n,s=na(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Uo(t))throw new Error(`Error trying to diff '${vt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[zo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Js(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ea),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ea),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Js{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ta{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ea{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ta,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function na(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ra{constructor(){}supports(t){return t instanceof Map||Bo(t)}create(){return new ia}}class ia{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Bo(t)))throw new Error(`Error trying to diff '${vt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new oa(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class oa{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sa(){return new aa([new Xs])}let aa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||sa()),deps:[[t,new kr,new wr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=At({token:t,providedIn:"root",factory:sa}),t})();function la(){return new ua([new ra])}let ua=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||la()),deps:[[t,new kr,new wr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=At({token:t,providedIn:"root",factory:la}),t})();function ca(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Te(o)),ge(o))for(let t=10;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ca(e[1],e,n,r)}const s=n.type;if(8&s)ca(t,e,n.child,r);else if(32&s){const t=Ir(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=ei(e,n);if(Array.isArray(t))r.push(...t);else{const n=zr(e[16]);ca(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ha{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ca(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ge(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Wr(t,n),lr(e,n))}this._attachedToViewContainer=!1}Gr(this._lView[1],this._lView)}onDestroy(t){Li(this._lView[1],this._lView,null,t)}markForCheck(){io(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){oo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Je(!0);try{oo(t,e,n)}finally{Je(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ii(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class fa extends ha{constructor(t){super(t),this._view=t}detectChanges(){so(this._view)}checkNoChanges(){!function(t){Je(!0);try{so(t)}finally{Je(!1)}}(this._view)}get context(){return null}}const da=function(t=!1){return function(t,e,n){if(!n&&ye(t)){const n=Ne(t.index,e);return new ha(n,n)}return 47&t.type?new ha(e[16],e):null}(Ge(),Ve(),t)};let pa=(()=>{class t{}return t.__NG_ELEMENT_ID__=da,t.__ChangeDetectorRef__=!0,t})();const ga=[new ra],ma=new aa([new Xs]),ya=new ua(ga),va=function(){return wa(Ge(),Ve())};let ba=(()=>{class t{}return t.__NG_ELEMENT_ID__=va,t})();const _a=ba,xa=class extends _a{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ai(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Mi(e,n,t),new ha(n)}};function wa(t,e){return 4&t.type?new xa(e,t,Ls(t,e)):null}class ka{}class Ea{}const Sa=function(){return Ma(Ge(),Ve())};let Oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Sa,t})();const Ca=Oa,Aa=class extends Ca{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ls(this._hostTNode,this._hostLView)}get injector(){return new Qn(this._hostTNode,this._hostLView)}get parentInjector(){const t=zn(this._hostTNode,this._hostLView);if(Tn(t)){const e=Fn(t,this._hostLView),n=Mn(t);return new Qn(e[1].data[n+8],e)}return new Qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Da(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ka,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ge(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Aa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],ar(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=ni(i,o),a=n[11],l=Kr(a,o[7]);return null!==l&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,ii(t,r,n,1,i,o)}(r,o[6],a,n,l,s),t.attachToViewContainerRef(),ar(Ta(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Da(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Wr(this._lContainer,e);n&&(lr(Ta(this._lContainer),e),Gr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Wr(this._lContainer,e);return n&&null!=lr(Ta(this._lContainer),e)?new ha(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Da(t){return t[8]}function Ta(t){return t[8]||(t[8]=[])}function Ma(t,e){let n;const r=e[t.index];if(ge(r))n=r;else{let i;if(8&t.type)i=Te(r);else{const n=e[11];i=n.createComment("");const r=Fe(t,e);Yr(n,Kr(n,r),i,function(t,e){return Ae(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ji(r,e,i,t),ro(e,n)}return new Aa(n,t,e)}const Fa={};class ja extends Is{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=fe(t);return new Ra(e,this.ngModule)}}function Pa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Na=new nr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Nr});class Ra extends Rs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(yi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Pa(this.componentDef.inputs)}get outputs(){return Pa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Fa,i);return o!==Fa||r===Fa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Vs,De),s=i.get(Gs,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(Ae(t))return t.selectRootElement(e,n===qt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Vr(o.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),c=this.componentDef.onPush?576:528,h={components:[],scheduler:Nr,clean:lo,playerHandler:null,flags:0},f=zi(0,null,null,1,0,null,null,null,null,null),d=Ai(null,f,h,c,null,null,o,a,s,i);let p,g;ln(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Di(s,20,2,"#host",null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(po(a,l,!0),null!==t&&(Sn(i,t,l),null!==a.classes&&ai(i,t,a.classes),null!==a.styles&&si(i,t,a.styles)));const u=r.createRenderer(t,e),c=Ai(n,Ii(e),null,e.onPush?64:16,n[20],a,r,u,null,null);return s.firstCreatePass&&(Ln(Rn(a,n),s,e.type),Wi(s,a),Zi(a,n.length,1)),ro(n,c),n[20]=c}(u,this.componentDef,d,o,a);if(u)if(n)Sn(a,u,["ng-version",Ys.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!di(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Sn(a,u,t),e&&e.length>0&&ai(a,u,e.join(" "))}if(g=je(f,20),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ge();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Yi(t,r,e,Ti(t,e,1,null),n));const i=Zn(e,t,r.directiveStart,r);Pr(i,e);const o=Fe(r,e);return o&&Pr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ge();e.contentQueries(1,s,t.directiveStart)}const a=Ge();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(gn(a.index),Vi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Hi(e,s)),s}(t,this.componentDef,d,h,[Fo]),Mi(f,d,null)}finally{dn()}return new $a(this.componentType,p,Ls(g,d),d,g)}}class $a extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new fa(r),this.componentType=t}get injector(){return new Qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ia=new Map;class za extends ka{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ja(this);const n=de(t),r=t[ee]||null;r&&Cs(r),this._bootstrapComponents=Rr(n.bootstrap),this._r3Injector=ko(t,e,[{provide:ka,useValue:this},{provide:Is,useValue:this.componentFactoryResolver}],vt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Mo.THROW_IF_NOT_FOUND,n=$t.Default){return t===Mo||t===ka||t===go?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class La extends Ea{constructor(t){super(),this.moduleType=t,null!==de(t)&&function(t){const e=new Set;!function t(n){const r=de(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${vt(e)} vs ${vt(e.name)}`)}(i,Ia.get(i),n),Ia.set(i,n));const o=Rr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new za(this.moduleType,t)}}function Ua(t,e,n,r,i,o,s,a){const l=e+n;return function(t,e,n,r,i){const o=function(t,e,n,r){const i=qo(t,e,n);return qo(t,e+1,r)||i}(t,e,n,r);return qo(t,e+2,i)||o}(t,l,i,o,s)?function(t,e,n){return t[e]=n}(t,l+3,a?r.call(a,i,o,s):r(i,o,s)):function(t,e){const n=t[e];return n===vi?void 0:n}(t,l+3)}function Ba(t,e){const n=He();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Et("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=_e(r.type)),s=zt(Go);try{const t=Pn(!1),e=o();return Pn(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Ve(),i,e),e}finally{zt(s)}}function qa(t,e,n,r,i){const o=t+20,s=Ve(),a=Pe(s,o);return function(t,e){return Lo.isWrapped(e)&&(e=Lo.unwrap(e),t[Be.lFrame.bindingIndex]=vi),e}(s,function(t,e){return t[1].data[e].pure}(s,o)?Ua(s,function(){const t=Be.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,a.transform,n,r,i,a):a.transform(n,r,i))}const Va=class extends U{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,o=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return t instanceof D&&t.add(s),s}};function Ha(){return this._results[zo()]()}class Wa{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=zo(),n=Wa.prototype;n[e]||(n[e]=Ha)}get changes(){return this._changes||(this._changes=new Va)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const n=or(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ga{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ga(this.queryList)}setDirty(){this.queryList.setDirty()}}class Za{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Za(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==al(t,e).matches&&this.queries[e].setDirty()}}class Ya{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Xa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Xa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Qa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Qa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ka(e,i)),this.matchTNodeWithReadOption(t,e,Gn(e,t,i,!1,!1))}else n===ba?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Gn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Bs||r===Oa||r===ba&&4&e.type)this.addMatch(e.index,-2);else{const n=Gn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ka(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ja(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ls(t,e):4&t.type?wa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Bs?Ls(e,t):n===ba?wa(e,t):n===Oa?Ma(e,t):void 0}(t,e,r):Zn(t,t[1],n,e)}function tl(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ja(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function el(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=tl(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=10;t<s.length;t++){const e=s[t];e[17]===e[3]&&el(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];el(n[1],n,i,r)}}}}}return r}function nl(t){const e=Ve(),n=He(),r=rn();on(r+1);const i=al(n,r);if(t.dirty&&$e(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?el(n,e,r,[]):tl(n,e,i,r);t.reset(o,qs),t.notifyOnChanges()}return!0}return!1}function rl(t,e,n,r){const i=He();if(i.firstCreatePass){const o=Ge();sl(i,new Ya(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}ol(i,Ve(),n)}function il(){return t=Ve(),e=rn(),t[19].queries[e].queryList;var t,e}function ol(t,e,n){const r=new Wa(4==(4&n));Li(t,e,r,r.destroy),null===e[19]&&(e[19]=new Za),e[19].queries.push(new Ga(r))}function sl(t,e,n){null===t.queries&&(t.queries=new Xa),t.queries.track(new Qa(e,n))}function al(t,e){return t.queries.getByIndex(e)}const ll=new nr("Application Initializer");let ul=(()=>{class t{constructor(t){this.appInits=t,this.resolve=zs,this.reject=zs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();ns(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(vr(ll,8))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const cl=new nr("AppId"),hl={provide:cl,useFactory:function(){return`${fl()}${fl()}${fl()}`},deps:[]};function fl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const dl=new nr("Platform Initializer"),pl=new nr("Platform ID"),gl=new nr("appBootstrapListener");let ml=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const yl=new nr("LocaleId"),vl=new nr("DefaultCurrencyCode");class bl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const _l=function(t){return new La(t)},xl=_l,wl=function(t){return Promise.resolve(_l(t))},kl=function(t){const e=_l(t),n=Rr(de(t).declarations).reduce((t,e)=>{const n=fe(e);return n&&t.push(new Ra(n)),t},[]);return new bl(e,n)},El=kl,Sl=function(t){return Promise.resolve(kl(t))};let Ol=(()=>{class t{constructor(){this.compileModuleSync=xl,this.compileModuleAsync=wl,this.compileModuleAndAllComponentsSync=El,this.compileModuleAndAllComponentsAsync=Sl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const Cl=(()=>Promise.resolve(0))();function Al(t){"undefined"==typeof Zone?Cl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Dl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Va(!1),this.onMicrotaskEmpty=new Va(!1),this.onStable=new Va(!1),this.onError=new Va(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&e,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=Zt.requestAnimationFrame,e=Zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Zt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Fl(t),Ml(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Fl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return jl(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Pl(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return jl(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Pl(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Fl(t),Ml(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Dl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Tl,zs,zs);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Tl={};function Ml(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Fl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function jl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Pl(t){t._nesting--,Ml(t)}class Nl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Va,this.onMicrotaskEmpty=new Va,this.onStable=new Va,this.onError=new Va}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Rl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dl.assertNotInAngularZone(),Al(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Al(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(vr(Dl))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),$l=(()=>{class t{constructor(){this._applications=new Map,Ll.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ll.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();class Il{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let zl,Ll=new Il,Ul=!1;const Bl=new nr("AllowMultipleToken");class ql{constructor(t,e){this.name=t,this.token=e}}function Vl(t,e,n=[]){const r=`Platform: ${e}`,i=new nr(r);return(e=[])=>{let o=Hl();if(!o||o.injector.get(Bl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:yo,useValue:"platform"});!function(t){if(zl&&!zl.destroyed&&!zl.injector.get(Bl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");zl=t.get(Wl);const e=t.get(dl,null);e&&e.forEach(t=>t())}(Mo.create({providers:t,name:r}))}return function(t){const e=Hl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Hl(){return zl&&!zl.destroyed?zl:null}let Wl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Nl:("zone.js"===t?void 0:t)||new Dl({enableLongStackTrace:(Ul=!0,!0),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Dl,useValue:n}];return n.run(()=>{const e=Mo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(jr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Yl(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return ns(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ul);return t.runInitializers(),t.donePromise.then(()=>(Cs(i.injector.get(yl,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Gl({},e);return function(t,e,n){const r=new La(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Zl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${vt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(vr(Mo))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();function Gl(t,e){return Array.isArray(e)?e.reduce(Gl,t):Object.assign(Object.assign({},t),e)}let Zl=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new R(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),s=new R(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Dl.assertNotInAngularZone(),Al(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Dl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return q(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof R?t[0]:at(e)(lt(t,n))}(o,s.pipe(t=>{return ut()((e=gt,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,dt);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Rs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ka),i=n.create(Mo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Rl,null),a=s&&i.injector.get($l);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Yl(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Yl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(gl,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(vr(Dl),vr(Mo),vr(jr),vr(Is),vr(ul))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();function Yl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Xl{}class Ql{}const Kl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Jl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Kl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>tu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>tu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(vr(Ol),vr(Ql,8))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();function tu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const eu=Vl(null,"core",[{provide:pl,useValue:"unknown"},{provide:Wl,deps:[Mo]},{provide:$l,deps:[]},{provide:ml,deps:[]}]),nu=[{provide:Zl,useClass:Zl,deps:[Dl,Mo,jr,Is,ul]},{provide:Na,deps:[Dl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ul,useClass:ul,deps:[[new wr,ll]]},{provide:Ol,useClass:Ol,deps:[]},hl,{provide:aa,useFactory:function(){return ma},deps:[]},{provide:ua,useFactory:function(){return ya},deps:[]},{provide:yl,useFactory:function(t){return Cs(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new xr(yl),new wr,new kr]]},{provide:vl,useValue:"USD"}];let ru=(()=>{class t{constructor(t){}}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)(vr(Zl))},providers:nu}),t})(),iu=null;function ou(){return iu}const su=new nr("DocumentToken");let au=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({factory:lu,token:t,providedIn:"platform"}),t})();function lu(){return vr(cu)}const uu=new nr("Location Initialized");let cu=(()=>{class t extends au{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=ou().getLocation(),this._history=ou().getHistory()}getBaseHrefFromDOM(){return ou().getBaseHref(this._doc)}onPopState(t){ou().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){ou().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){hu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){hu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(vr(su))},t.\u0275prov=At({factory:fu,token:t,providedIn:"platform"}),t})();function hu(){return!!window.history.pushState}function fu(){return new cu(vr(su))}function du(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function pu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function gu(t){return t&&"?"!==t[0]?"?"+t:t}let mu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({factory:yu,token:t,providedIn:"root"}),t})();function yu(t){const e=vr(su).location;return new bu(vr(au),e&&e.origin||"")}const vu=new nr("appBaseHref");let bu=(()=>{class t extends mu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return du(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+gu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+gu(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+gu(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(vr(au),vr(vu,8))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),_u=(()=>{class t extends mu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=du(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+gu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+gu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(vr(au),vr(vu,8))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),xu=(()=>{class t{constructor(t,e){this._subject=new Va,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=pu(ku(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+gu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,ku(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(vr(mu),vr(au))},t.normalizeQueryParams=gu,t.joinWithSlash=du,t.stripTrailingSlash=pu,t.\u0275prov=At({factory:wu,token:t,providedIn:"root"}),t})();function wu(){return new xu(vr(mu),vr(au))}function ku(t){return t.replace(/\/index.html$/,"")}var Eu=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Su{}let Ou=(()=>{class t extends Su{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Es(e);if(n)return n;const r=e.split("-")[0];if(n=Es(r),n)return n;if("en"===r)return ws;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Ss.PluralCase]}(e||this.locale)(t)){case Eu.Zero:return"zero";case Eu.One:return"one";case Eu.Two:return"two";case Eu.Few:return"few";case Eu.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(vr(yl))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();function Cu(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class Au{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Du=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Au(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Tu(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new Tu(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Go(Oa),Go(ba),Go(aa))},t.\u0275dir=he({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Tu{constructor(t,e){this.record=t,this.view=e}}let Mu=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Fu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ju("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ju("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Go(Oa),Go(ba))},t.\u0275dir=he({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Fu{constructor(){this.$implicit=null,this.ngIf=null}}function ju(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${vt(e)}'.`)}class Pu{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Nu=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=he({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),Ru=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new Pu(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(Go(Oa),Go(ba),Go(Nu,1))},t.\u0275dir=he({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),$u=(()=>{class t{constructor(t,e,n){n._addDefault(new Pu(t,e))}}return t.\u0275fac=function(e){return new(e||t)(Go(Oa),Go(ba),Go(Nu,1))},t.\u0275dir=he({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),Iu=(()=>{class t{}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)},providers:[{provide:Su,useClass:Ou}]}),t})(),zu=(()=>{class t{}return t.\u0275prov=At({token:t,providedIn:"root",factory:()=>new Lu(vr(su),window)}),t})();class Lu{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Uu(this.window.history)||Uu(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Uu(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Bu extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Bu,iu||(iu=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Vu||(Vu=document.querySelector("base"),Vu)?Vu.getAttribute("href"):null;return null==e?null:(n=e,qu||(qu=document.createElement("a")),qu.setAttribute("href",n),"/"===qu.pathname.charAt(0)?qu.pathname:"/"+qu.pathname);var n}resetBaseElement(){Vu=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Cu(document.cookie,t)}}let qu,Vu=null;const Hu=new nr("TRANSITION_ID"),Wu=[{provide:ll,useFactory:function(t,e,n){return()=>{n.get(ul).donePromise.then(()=>{const n=ou();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Hu,su,Mo],multi:!0}];class Gu{static init(){!function(t){Ll=t}(new Gu)}addToWindow(t){Zt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Zt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Zt.getAllAngularRootElements=()=>t.getAllRootElements(),Zt.frameworkStabilizers||(Zt.frameworkStabilizers=[]),Zt.frameworkStabilizers.push(t=>{const e=Zt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?ou().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Zu=new nr("EventManagerPlugins");let Yu=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(vr(Zu),vr(Dl))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();class Xu{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=ou().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Qu=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),Ku=(()=>{class t extends Qu{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>ou().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(vr(su))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const Ju={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tc=/%COMP%/g;function ec(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ec(t,i,n):(i=i.replace(tc,t),n.push(i))}return n}function nc(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let rc=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ic(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case qt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new oc(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case qt.ShadowDom:return new sc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=ec(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(vr(Yu),vr(Ku),vr(cl))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();class ic{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Ju[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Ju[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Ju[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&($r.DashCase|$r.Important)?t.style.setProperty(e,n,r&$r.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&$r.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,nc(n)):this.eventManager.addEventListener(t,e,nc(n))}}class oc extends ic{constructor(t,e,n,r){super(t),this.component=n;const i=ec(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(tc,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(tc,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class sc extends ic{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=ec(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ac=(()=>{class t extends Xu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(vr(su))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const lc=["alt","control","meta","shift"],uc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hc={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let fc=(()=>{class t extends Xu{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ou().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(lc.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&cc.hasOwnProperty(e)&&(e=cc[e]))}return uc[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),lc.forEach(r=>{r!=n&&(0,hc[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(vr(su))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const dc=Vl(eu,"browser",[{provide:pl,useValue:"browser"},{provide:dl,useValue:function(){Bu.makeCurrent(),Gu.init()},multi:!0},{provide:su,useFactory:function(){return function(t){Ce=t}(document),document},deps:[]}]),pc=[[],{provide:yo,useValue:"root"},{provide:jr,useFactory:function(){return new jr},deps:[]},{provide:Zu,useClass:ac,multi:!0,deps:[su,Dl,pl]},{provide:Zu,useClass:fc,multi:!0,deps:[su]},[],{provide:rc,useClass:rc,deps:[Yu,Ku,cl]},{provide:Vs,useExisting:rc},{provide:Qu,useExisting:Ku},{provide:Ku,useClass:Ku,deps:[su]},{provide:Rl,useClass:Rl,deps:[Dl]},{provide:Yu,useClass:Yu,deps:[Zu,Dl]},[]];let gc=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:cl,useValue:e.appId},{provide:Hu,useExisting:cl},Wu]}}}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)(vr(t,12))},providers:pc,imports:[Iu,ru]}),t})();function mc(...t){let e=t[t.length-1];return q(e)?(t.pop(),J(t,e)):lt(t)}function yc(t,e){return it(t,e,1)}function vc(t,e){return function(n){return n.lift(new bc(t,e))}}"undefined"!=typeof window&&window,n("hN/g");class bc{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new _c(t,this.predicate,this.thisArg))}}class _c extends F{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class xc{}class wc{}class kc{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof kc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new kc;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof kc?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Ec{encodeKey(t){return Sc(t)}encodeValue(t){return Sc(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Sc(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Oc{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Ec,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Oc({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Cc(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Ac(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Dc(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Tc{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new kc),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Oc,this.urlWithParams=e}serializeBody(){return null===this.body?null:Cc(this.body)||Ac(this.body)||Dc(this.body)||"string"==typeof this.body?this.body:this.body instanceof Oc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Dc(this.body)?null:Ac(this.body)?this.body.type||null:Cc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Oc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new Tc(e,n,i,{params:l,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Mc=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Fc{constructor(t,e=200,n="OK"){this.headers=t.headers||new kc,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class jc extends Fc{constructor(t={}){super(t),this.type=Mc.ResponseHeader}clone(t={}){return new jc({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Pc extends Fc{constructor(t={}){super(t),this.type=Mc.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Pc({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Nc extends Fc{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Rc(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let $c=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Tc)r=t;else{let i,o;i=n.headers instanceof kc?n.headers:new kc(n.headers),n.params&&(o=n.params instanceof Oc?n.params:new Oc({fromObject:n.params})),r=new Tc(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=mc(r).pipe(yc(t=>this.handler.handle(t)));if(t instanceof Tc||"events"===n.observe)return i;const o=i.pipe(vc(t=>t instanceof Pc));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(V(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(V(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(V(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(V(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Oc).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Rc(n,e))}post(t,e,n={}){return this.request("POST",t,Rc(n,e))}put(t,e,n={}){return this.request("PUT",t,Rc(n,e))}}return t.\u0275fac=function(e){return new(e||t)(vr(xc))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();class Ic{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const zc=new nr("HTTP_INTERCEPTORS");let Lc=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const Uc=/^\)\]\}',?\n/;class Bc{}let qc=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),Vc=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new R(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new kc(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new jc({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),l=null;204!==i&&(l=void 0===n.response?n.responseText:n.response),0===i&&(i=l?200:0);let u=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(Uc,"");try{l=""!==l?JSON.parse(l):null}catch(c){l=t,u&&(u=!1,l={error:c,text:l})}}u?(e.next(new Pc({body:l,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Nc({error:l,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Nc({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let l=!1;const u=r=>{l||(e.next(o()),l=!0);let i={type:Mc.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},c=t=>{let n={type:Mc.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:Mc.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(vr(Bc))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const Hc=new nr("XSRF_COOKIE_NAME"),Wc=new nr("XSRF_HEADER_NAME");class Gc{}let Zc=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Cu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(vr(su),vr(pl),vr(Hc))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),Yc=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(vr(Gc),vr(Wc))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),Xc=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(zc,[]);this.chain=t.reduceRight((t,e)=>new Ic(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(vr(wc),vr(Mo))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),Qc=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Yc,useClass:Lc}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Hc,useValue:e.cookieName}:[],e.headerName?{provide:Wc,useValue:e.headerName}:[]]}}}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)},providers:[Yc,{provide:zc,useExisting:Yc,multi:!0},{provide:Gc,useClass:Zc},{provide:Hc,useValue:"XSRF-TOKEN"},{provide:Wc,useValue:"X-XSRF-TOKEN"}]}),t})(),Kc=(()=>{class t{}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)},providers:[$c,{provide:xc,useClass:Xc},Vc,{provide:wc,useExisting:Vc},qc,{provide:Bc,useExisting:qc}],imports:[[Qc.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();function Jc(t,e){return new R(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const l=tt(t[a]);let u=!1;n.add(l.subscribe({next:t=>{u||(u=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&u||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const th=new nr("NgValueAccessor"),eh={provide:th,useExisting:xt(()=>nh),multi:!0};let nh=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Go(Hs),Go(Bs))},t.\u0275dir=he({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&is("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[Ns([eh])]}),t})();const rh={provide:th,useExisting:xt(()=>oh),multi:!0},ih=new nr("CompositionEventMode");let oh=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=ou()?ou().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Go(Hs),Go(Bs),Go(ih,8))},t.\u0275dir=he({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&is("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[Ns([rh])]}),t})();function sh(t){return null==t||0===t.length}function ah(t){return null!=t&&"number"==typeof t.length}const lh=new nr("NgValidators"),uh=new nr("NgAsyncValidators"),ch=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class hh{static min(t){return e=>{if(sh(e.value)||sh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(sh(e.value)||sh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return sh(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return sh(t.value)||ch.test(t.value)?null:{email:!0}}static minLength(t){return e=>sh(e.value)||!ah(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>ah(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return hh.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(sh(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(fh);return 0==e.length?null:function(t){return ph(gh(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(fh);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(O(e))return Jc(e,null);if(C(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Jc(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Jc(t=1===t.length&&O(t[0])?t[0]:t,null).pipe(V(t=>e(...t)))}return Jc(t,null)}(gh(t,e).map(dh)).pipe(V(ph))}}}function fh(t){return null!=t}function dh(t){const e=ns(t)?tt(t):t;return rs(e),e}function ph(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function gh(t,e){return e.map(e=>e(t))}function mh(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function yh(t){return null!=t?hh.compose(mh(t)):null}function vh(t){return null!=t?hh.composeAsync(mh(t)):null}function bh(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function _h(t){return t._rawValidators}function xh(t){return t._rawAsyncValidators}let wh=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=yh(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=vh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=he({type:t}),t})(),kh=(()=>{class t extends wh{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Eh(e||t)},t.\u0275dir=he({type:t,features:[jo]}),t})();const Eh=Jn(kh);class Sh extends wh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Oh{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Ch=(()=>{class t extends Oh{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Go(Sh,2))},t.\u0275dir=he({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&fs("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[jo]}),t})(),Ah=(()=>{class t extends Oh{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Go(kh,10))},t.\u0275dir=he({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&fs("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[jo]}),t})();const Dh={provide:th,useExisting:xt(()=>Th),multi:!0};let Th=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Go(Hs),Go(Bs))},t.\u0275dir=he({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&is("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[Ns([Dh])]}),t})();const Mh={provide:th,useExisting:xt(()=>jh),multi:!0};let Fh=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),jh=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Sh),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(Go(Hs),Go(Bs),Go(Fh),Go(Mo))},t.\u0275dir=he({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&is("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ns([Mh])]}),t})();const Ph={provide:th,useExisting:xt(()=>Nh),multi:!0};let Nh=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Go(Hs),Go(Bs))},t.\u0275dir=he({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&is("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[Ns([Ph])]}),t})();const Rh={provide:th,useExisting:xt(()=>$h),multi:!0};let $h=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(Go(Hs),Go(Bs))},t.\u0275dir=he({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&is("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ns([Rh])]}),t})();const Ih={provide:th,useExisting:xt(()=>zh),multi:!0};let zh=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(Go(Hs),Go(Bs))},t.\u0275dir=he({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&is("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ns([Ih])]}),t})();function Lh(t,e){return[...e.path,t]}function Uh(t,e){Vh(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Wh(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Wh(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Bh(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Hh(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function qh(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Vh(t,e,n){const r=_h(t);null!==e.validator?t.setValidators(bh(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=xh(t);if(null!==e.asyncValidator?t.setAsyncValidators(bh(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();qh(e._rawValidators,n),qh(e._rawAsyncValidators,n)}}function Hh(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=_h(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=xh(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};qh(e._rawValidators,t),qh(e._rawAsyncValidators,t)}return r}function Wh(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Gh(t,e){Vh(t,e,!1)}function Zh(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const Yh=[nh,Nh,Th,$h,zh,jh];function Xh(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Qh(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{var e;t.constructor===oh?n=t:(e=t,Yh.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}function Kh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Jh(t){return(rf(t)?t.validators:t)||null}function tf(t){return Array.isArray(t)?yh(t):t||null}function ef(t,e){return(rf(e)?e.asyncValidators:t)||null}function nf(t){return Array.isArray(t)?vh(t):t||null}function rf(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class of{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=tf(this._rawValidators),this._composedAsyncValidatorFn=nf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=tf(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=nf(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const e=dh(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof af?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof lf&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Va,this.statusChanges=new Va}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){rf(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class sf extends of{constructor(t=null,e,n){super(Jh(e),ef(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Kh(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Kh(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class af extends of{constructor(t,e,n){super(Jh(e),ef(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof sf?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class lf extends of{constructor(t,e,n){super(Jh(e),ef(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof sf?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const uf={provide:kh,useExisting:xt(()=>hf)},cf=(()=>Promise.resolve(null))();let hf=(()=>{class t extends kh{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Va,this.form=new af({},yh(t),vh(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){cf.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Uh(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){cf.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Kh(this._directives,t)})}addFormGroup(t){cf.then(()=>{const e=this._findContainer(t.path),n=new af({});Gh(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){cf.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){cf.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Xh(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Go(lh,10),Go(uh,10))},t.\u0275dir=he({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&is("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ns([uf]),jo]}),t})();const ff={provide:Sh,useExisting:xt(()=>pf)},df=(()=>Promise.resolve(null))();let pf=(()=>{class t extends Sh{constructor(t,e,n,r){super(),this.control=new sf,this._registered=!1,this.update=new Va,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Qh(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Zh(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Lh(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Uh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){df.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;df.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Go(kh,9),Go(lh,10),Go(uh,10),Go(th,10))},t.\u0275dir=he({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ns([ff]),jo,we]}),t})(),gf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=he({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const mf=new nr("NgModelWithFormControlWarning"),yf={provide:kh,useExisting:xt(()=>vf)};let vf=(()=>{class t extends kh{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Va,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hh(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Uh(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Bh(t.control||null,t,!1),Kh(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Xh(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(Bh(t.control||null,t),e&&Uh(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);Gh(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return Hh(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Vh(this.form,this,!1),this._oldForm&&Hh(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(Go(lh,10),Go(uh,10))},t.\u0275dir=he({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&is("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ns([yf]),jo,we]}),t})();const bf={provide:Sh,useExisting:xt(()=>_f)};let _f=(()=>{class t extends Sh{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new Va,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Qh(0,r)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Zh(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Lh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(Go(kh,13),Go(lh,10),Go(uh,10),Go(th,10),Go(mf,8))},t.\u0275dir=he({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ns([bf]),jo,we]}),t._ngModelWarningSentOnce=!1,t})(),xf=(()=>{class t{}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)}}),t})(),wf=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new af(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new sf(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new lf(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof sf||t instanceof af||t instanceof lf?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),kf=(()=>{class t{}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)},providers:[Fh],imports:[xf]}),t})(),Ef=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:mf,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)},providers:[wf,Fh],imports:[xf]}),t})();class Sf extends U{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new I;return this._value}next(t){super.next(this._value=t)}}class Of extends F{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Cf extends F{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Af(t,e,n,r,i=new Cf(t,n,r)){if(!i.closed)return e instanceof R?e.subscribe(i):K(e)(i)}const Df={};class Tf{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Mf(t,this.resultSelector))}}class Mf extends Of{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Df),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Af(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Df?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ff=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function jf(...t){return at(1)(mc(...t))}const Pf=new R(t=>t.complete());function Nf(t){return t?function(t){return new R(e=>t.schedule(()=>e.complete()))}(t):Pf}function Rf(t){return new R(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?tt(n):Nf()).subscribe(e)})}function $f(t,e){return"function"==typeof e?n=>n.pipe($f((n,r)=>tt(t(n,r)).pipe(V((t,i)=>e(n,t,r,i))))):e=>e.lift(new If(t))}class If{constructor(t){this.project=t}call(t,e){return e.subscribe(new zf(t,this.project))}}class zf extends nt{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new et(this),r=this.destination;r.add(n),this.innerSubscription=rt(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Lf=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Uf(t){return e=>0===t?Nf():e.lift(new Bf(t))}class Bf{constructor(t){if(this.total=t,this.total<0)throw new Lf}call(t,e){return e.subscribe(new qf(t,this.total))}}class qf extends F{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Vf(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Hf(t,e,n))}}class Hf{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Wf(t,this.accumulator,this.seed,this.hasSeed))}}class Wf extends F{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Gf(t){return function(e){const n=new Zf(t),r=e.lift(n);return n.caught=r}}class Zf{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Yf(t,this.selector,this.caught))}}class Yf extends nt{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new et(this);this.add(r);const i=rt(n,r);i!==r&&this.add(i)}}}function Xf(t){return function(e){return 0===t?Nf():e.lift(new Qf(t))}}class Qf{constructor(t){if(this.total=t,this.total<0)throw new Lf}call(t,e){return e.subscribe(new Kf(t,this.total))}}class Kf extends F{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Jf(t=nd){return e=>e.lift(new td(t))}class td{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ed(t,this.errorFactory))}}class ed extends F{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function nd(){return new Ff}function rd(t=null){return e=>e.lift(new id(t))}class id{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new od(t,this.defaultValue))}}class od extends F{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function sd(t,e){const n=arguments.length>=2;return r=>r.pipe(t?vc((e,n)=>t(e,n,r)):N,Uf(1),n?rd(e):Jf(()=>new Ff))}function ad(){}function ld(t,e,n){return function(r){return r.lift(new ud(t,e,n))}}class ud{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new cd(t,this.nextOrObserver,this.error,this.complete))}}class cd extends F{constructor(t,e,n,r){super(t),this._tapNext=ad,this._tapError=ad,this._tapComplete=ad,this._tapError=n||ad,this._tapComplete=r||ad,x(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||ad,this._tapError=e.error||ad,this._tapComplete=e.complete||ad)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class hd{constructor(t){this.callback=t}call(t,e){return e.subscribe(new fd(t,this.callback))}}class fd extends F{constructor(t,e){super(t),this.add(new D(e))}}class dd{constructor(t,e){this.id=t,this.url=e}}class pd extends dd{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gd extends dd{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class md extends dd{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yd extends dd{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vd extends dd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bd extends dd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _d extends dd{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xd extends dd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wd extends dd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kd{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ed{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sd{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Od{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cd{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ad{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dd{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Td{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Md(t){return new Td(t)}function Fd(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function jd(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Pd(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Nd(t[i],e[i]))return!1;return!0}function Nd(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Rd(t){return Array.prototype.concat.apply([],t)}function $d(t){return t.length>0?t[t.length-1]:null}function Id(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function zd(t){return rs(t)?t:ns(t)?tt(Promise.resolve(t)):mc(t)}function Ld(t,e,n){return n?function(t,e){return Pd(t,e)}(t.queryParams,e.queryParams)&&Ud(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Nd(t[n],e[n]))}(t.queryParams,e.queryParams)&&Bd(t.root,e.root)}function Ud(t,e){if(!Gd(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ud(t.children[n],e.children[n]))return!1}return!0}function Bd(t,e){return qd(t,e,e.segments)}function qd(t,e,n){if(t.segments.length>n.length)return!!Gd(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Gd(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Bd(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Gd(t.segments,r)&&!!t.children.primary&&qd(t.children.primary,e,i)}}class Vd{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Md(this.queryParams)),this._queryParamMap}toString(){return Xd.serialize(this)}}class Hd{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Id(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qd(this)}}class Wd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Md(this.parameters)),this._parameterMap}toString(){return ip(this)}}function Gd(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Zd{}class Yd{parse(t){const e=new up(t);return new Vd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Kd(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${tp(e)}=${tp(t)}`).join("&"):`${tp(e)}=${tp(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Xd=new Yd;function Qd(t){return t.segments.map(t=>ip(t)).join("/")}function Kd(t,e){if(!t.hasChildren())return Qd(t);if(e){const e=t.children.primary?Kd(t.children.primary,!1):"",n=[];return Id(t.children,(t,e)=>{"primary"!==e&&n.push(`${e}:${Kd(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Id(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),Id(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>"primary"===n?[Kd(t.children.primary,!1)]:[`${n}:${Kd(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Qd(t)}/${e[0]}`:`${Qd(t)}/(${e.join("//")})`}}function Jd(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tp(t){return Jd(t).replace(/%3B/gi,";")}function ep(t){return Jd(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function np(t){return decodeURIComponent(t)}function rp(t){return np(t.replace(/\+/g,"%20"))}function ip(t){return`${ep(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${ep(t)}=${ep(e[t])}`).join("")}`;var e}const op=/^[^\/()?;=#]+/;function sp(t){const e=t.match(op);return e?e[0]:""}const ap=/^[^=?&#]+/,lp=/^[^?&#]+/;class up{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Hd([],{}):new Hd([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Hd(t,e)),n}parseSegment(){const t=sp(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Wd(np(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=sp(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=sp(this.remaining);t&&(n=t,this.capture(n))}t[np(e)]=np(n)}parseQueryParam(t){const e=function(t){const e=t.match(ap);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(lp);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=rp(e),i=rp(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=sp(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Hd([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class cp{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=hp(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=hp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=fp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return fp(t,this._root).map(t=>t.value)}}function hp(t,e){if(t===e.value)return e;for(const n of e.children){const e=hp(t,n);if(e)return e}return null}function fp(t,e){if(t===e.value)return[e];for(const n of e.children){const r=fp(t,n);if(r.length)return r.unshift(e),r}return[]}class dp{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function pp(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class gp extends cp{constructor(t,e){super(t),this.snapshot=e,xp(this,t)}toString(){return this.snapshot.toString()}}function mp(t,e){const n=function(t,e){const n=new bp([],{},{},"",{},"primary",e,null,t.root,-1,{});return new _p("",new dp(n,[]))}(t,e),r=new Sf([new Wd("",{})]),i=new Sf({}),o=new Sf({}),s=new Sf({}),a=new Sf(""),l=new yp(r,i,s,a,o,"primary",e,n.root);return l.snapshot=n.root,new gp(new dp(l,[]),n)}class yp{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(V(t=>Md(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(V(t=>Md(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vp(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class bp{constructor(t,e,n,r,i,o,s,a,l,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Md(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Md(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _p extends cp{constructor(t,e){super(e),this.url=t,xp(this,e)}toString(){return wp(this._root)}}function xp(t,e){e.value._routerState=t,e.children.forEach(e=>xp(t,e))}function wp(t){const e=t.children.length>0?` { ${t.children.map(wp).join(", ")} } `:"";return`${t.value}${e}`}function kp(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Pd(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Pd(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Pd(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Pd(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ep(t,e){var n,r;return Pd(t.params,e.params)&&Gd(n=t.url,r=e.url)&&n.every((t,e)=>Pd(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Ep(t.parent,e.parent))}function Sp(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Sp(t,e,r);return Sp(t,e)})}(t,e,n);return new dp(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Op(e,t),t}{const n=new yp(new Sf((r=e.value).url),new Sf(r.params),new Sf(r.queryParams),new Sf(r.fragment),new Sf(r.data),r.outlet,r.component,r),i=e.children.map(e=>Sp(t,e));return new dp(n,i)}}var r}function Op(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Op(t.children[n],e.children[n])}function Cp(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ap(t){return"object"==typeof t&&null!=t&&t.outlets}function Dp(t,e,n,r,i){let o={};return r&&Id(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Vd(n.root===t?e:Tp(n.root,t,e),o,i)}function Tp(t,e,n){const r={};return Id(t.children,(t,i)=>{r[i]=t===e?n:Tp(t,e,n)}),new Hd(t.segments,r)}class Mp{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Cp(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Ap);if(r&&r!==$d(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fp{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function jp(t,e,n){if(t||(t=new Hd([],{})),0===t.segments.length&&t.hasChildren())return Pp(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Ap(s))break;const a=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!Ip(a,l,e))return o;r+=2}else{if(!Ip(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Hd(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Hd(t.segments.slice(r.pathIndex),t.children),Pp(e,0,i)}return r.match&&0===i.length?new Hd(t.segments,{}):r.match&&!t.hasChildren()?Np(t,e,n):r.match?Pp(t,0,i):Np(t,e,n)}function Pp(t,e,n){if(0===n.length)return new Hd(t.segments,{});{const r=function(t){return Ap(t[0])?t[0].outlets:{primary:t}}(n),i={};return Id(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=jp(t.children[r],e,n))}),Id(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Hd(t.segments,i)}}function Np(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Ap(o)){const t=Rp(o.outlets);return new Hd(r,t)}if(0===i&&Cp(n[0])){r.push(new Wd(t.segments[e].path,$p(n[0]))),i++;continue}const s=Ap(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Cp(a)?(r.push(new Wd(s,$p(a))),i+=2):(r.push(new Wd(s,{})),i++)}return new Hd(r,{})}function Rp(t){const e={};return Id(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Np(new Hd([],{}),0,t))}),e}function $p(t){const e={};return Id(t,(t,n)=>e[n]=`${t}`),e}function Ip(t,e,n){return t==n.path&&Pd(e,n.parameters)}class zp{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),kp(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=pp(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Id(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=pp(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=pp(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ad(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Od(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(kp(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Lp(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Lp(t){kp(t.value),t.children.forEach(Lp)}class Up{constructor(t,e){this.routes=t,this.module=e}}function Bp(t){return"function"==typeof t}function qp(t){return t instanceof Vd}const Vp=Symbol("INITIAL_VALUE");function Hp(){return $f(t=>function(...t){let e,n;return q(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&O(t[0])&&(t=t[0]),lt(t,n).lift(new Tf(e))}(t.map(t=>t.pipe(Uf(1),function(...t){const e=t[t.length-1];return q(e)?(t.pop(),n=>jf(t,n,e)):e=>jf(t,e)}(Vp)))).pipe(Vf((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Vp)return t;if(r===Vp&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||qp(r))return r}return t},t)},Vp),vc(t=>t!==Vp),V(t=>qp(t)?t:!0===t),Uf(1)))}let Wp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Ko(0,"router-outlet")},directives:function(){return[Ug]},encapsulation:2}),t})();function Gp(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Zp(r,Yp(e,r))}}function Zp(t,e){t.children&&Gp(t.children,e)}function Yp(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Xp(t){const e=t.children&&t.children.map(Xp),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Wp),n}function Qp(t){return t.outlet||"primary"}function Kp(t,e){const n=t.filter(t=>Qp(t)===e);return n.push(...t.filter(t=>Qp(t)!==e)),n}const Jp={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function tg(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Jp):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||jd)(n,t,e);if(!i)return Object.assign({},Jp);const o={};Id(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function eg(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>ng(t,e,n)&&"primary"!==Qp(n))}(t,n,r)){const i=new Hd(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==Qp(o)){const n=new Hd([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Qp(o)]=n}return i}(t,e,r,new Hd(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>ng(t,e,n))}(t,n,r)){const o=new Hd(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(ng(t,n,a)&&!i[Qp(a)]){const n=new Hd([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Qp(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Hd(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function ng(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function rg(t,e,n,r){return!!(Qp(t)===r||"primary"!==r&&ng(e,n,t))&&("**"===t.path||tg(e,t,n).matched)}function ig(t,e,n){return 0===e.length&&!t.children[n]}class og{constructor(t){this.segmentGroup=t||null}}class sg{constructor(t){this.urlTree=t}}function ag(t){return new R(e=>e.error(new og(t)))}function lg(t){return new R(e=>e.error(new sg(t)))}function ug(t){return new R(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class cg{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(ka)}apply(){const t=eg(this.urlTree.root,[],[],this.config).segmentGroup,e=new Hd(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,"primary").pipe(V(t=>this.createUrlTree(hg(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gf(t=>{if(t instanceof sg)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof og)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(V(e=>this.createUrlTree(hg(e),t.queryParams,t.fragment))).pipe(Gf(t=>{if(t instanceof og)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Hd([],{primary:t}):t;return new Vd(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(V(t=>new Hd([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return tt(r).pipe(yc(r=>{const i=n.children[r],o=Kp(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(V(t=>({segment:t,outlet:r})))}),Vf((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?vc((e,n)=>t(e,n,r)):N,Xf(1),n?rd(e):Jf(()=>new Ff))}())}expandSegment(t,e,n,r,i,o){return tt(n).pipe(yc(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Gf(t=>{if(t instanceof og)return mc(null);throw t}))),sd(t=>!!t),Gf((t,n)=>{if(t instanceof Ff||"EmptyError"===t.name){if(ig(e,r,i))return mc(new Hd([],{}));throw new og(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return rg(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):ag(e):ag(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?lg(i):this.lineralizeSegments(n,i).pipe(it(n=>{const i=new Hd(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:u}=tg(e,r,i);if(!s)return ag(e);const c=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?lg(c):this.lineralizeSegments(r,c).pipe(it(r=>this.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?mc(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(V(t=>(n._loadedConfig=t,new Hd(r,{})))):mc(new Hd(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=tg(e,n,r);if(!o)return ag(e);const l=r.slice(a);return this.getChildConfig(t,n,r).pipe(it(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:u}=eg(e,s,l,o),c=new Hd(a.segments,a.children);if(0===u.length&&c.hasChildren())return this.expandChildren(r,o,c).pipe(V(t=>new Hd(s,t)));if(0===o.length&&0===u.length)return mc(new Hd(s,{}));const h=Qp(n)===i;return this.expandSegment(r,c,o,u,h?"primary":i,!0).pipe(V(t=>new Hd(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?mc(new Up(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?mc(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(it(n=>n?this.configLoader.load(t.injector,e).pipe(V(t=>(e._loadedConfig=t,t))):function(t){return new R(e=>e.error(Fd(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):mc(new Up([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?mc(r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Bp(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Bp(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return zd(o)})).pipe(Hp(),ld(t=>{if(!qp(t))return;const e=Fd(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),V(t=>!0===t)):mc(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return mc(n);if(r.numberOfChildren>1||!r.children.primary)return ug(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Vd(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Id(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Id(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Hd(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function hg(t){const e={};for(const n of Object.keys(t.children)){const r=hg(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Hd(t.segments.concat(e.segments),e.children)}return t}(new Hd(t.segments,e))}class fg{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class dg{constructor(t,e){this.component=t,this.route=e}}function pg(t,e,n){const r=t._root;return mg(r,e?e._root:null,n,[r.value])}function gg(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function mg(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=pp(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Gd(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gd(t.url,e.url)||!Pd(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ep(t,e)||!Pd(t.queryParams,e.queryParams);case"paramsChange":default:return!Ep(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new fg(r)):(o.data=s.data,o._resolvedData=s._resolvedData),mg(t,e,o.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dg(a.outlet.component,s))}else s&&yg(e,a,i),i.canActivateChecks.push(new fg(r)),mg(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Id(o,(t,e)=>yg(t,n.getContext(e),i)),i}function yg(t,e,n){const r=pp(t),i=t.value;Id(r,(t,r)=>{yg(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new dg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class vg{}function bg(t){return new R(e=>e.error(t))}class _g{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=eg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;const n=new bp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new dp(n,e),i=new _p(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=vp(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Kp(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!xg(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return ig(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!rg(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?$d(n).parameters:{};i=new bp(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Eg(t),Qp(t),t.component,t,wg(e),kg(e)+n.length,Sg(t))}else{const r=tg(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new bp(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Eg(t),Qp(t),t.component,t,wg(e),kg(e)+o.length,Sg(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=eg(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(a,l);return null===t?null:[new dp(i,t)]}if(0===a.length&&0===u.length)return[new dp(i,[])];const c=Qp(t)===r,h=this.processSegment(a,l,u,c?"primary":r);return null===h?null:[new dp(i,h)]}}function xg(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function wg(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function kg(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Eg(t){return t.data||{}}function Sg(t){return t.resolve||{}}function Og(t){return $f(e=>{const n=t(e);return n?tt(n).pipe(V(()=>e)):mc(e)})}class Cg extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ag=new nr("ROUTES");class Dg{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(V(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Up(Rd(r.injector.get(Ag,void 0,$t.Self|$t.Optional)).map(Xp),r)}),Gf(t=>{throw e._loader$=void 0,t}));return e._loader$=new ft(n,()=>new U).pipe(ut()),e._loader$}loadModuleFactory(t){return"string"==typeof t?tt(this.loader.load(t)):zd(t()).pipe(it(t=>t instanceof Ea?mc(t):tt(this.compiler.compileModuleAsync(t))))}}class Tg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Mg,this.attachRef=null}}class Mg{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Tg,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Fg{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function jg(t){throw t}function Pg(t,e,n){return e.parse("/")}function Ng(t,e){return mc(null)}let Rg=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new U,this.errorHandler=jg,this.malformedUriErrorHandler=Pg,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ng,afterPreactivation:Ng},this.urlHandlingStrategy=new Fg,this.routeReuseStrategy=new Cg,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=i.get(ka),this.console=i.get(ml);const l=i.get(Dl);this.isNgZoneEnabled=l instanceof Dl&&Dl.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new Vd(new Hd([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Dg(o,s,t=>this.triggerEvent(new kd(t)),t=>this.triggerEvent(new Ed(t))),this.routerState=mp(this.currentUrlTree,this.rootComponentType),this.transitions=new Sf({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(vc(t=>0!==t.id),V(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),$f(t=>{let n=!1,r=!1;return mc(t).pipe(ld(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$f(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return mc(t).pipe($f(t=>{const n=this.transitions.getValue();return e.next(new pd(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Pf:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,$f(t=>function(t,e,n,r,i){return new cg(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(V(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),ld(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return it(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new _g(t,e,n,r,i,o).recognize();return null===s?bg(new vg):mc(s)}catch(s){return bg(s)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(V(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),ld(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new vd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new pd(n,this.serializeUrl(r),i,o);e.next(a);const l=mp(r,this.rootComponentType).snapshot;return mc(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Pf}),Og(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),ld(t=>{const e=new bd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),V(t=>Object.assign(Object.assign({},t),{guards:pg(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return it(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?mc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return tt(t).pipe(it(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?mc(o.map(o=>{const s=gg(o,e,i);let a;if(function(t){return t&&Bp(t.canDeactivate)}(s))a=zd(s.canDeactivate(t,e,n,r));else{if(!Bp(s))throw new Error("Invalid CanDeactivate guard");a=zd(s(t,e,n,r))}return a.pipe(sd())})).pipe(Hp()):mc(!0)}(t.component,t.route,n,e,r)),sd(t=>!0!==t,!0))}(s,r,i,t).pipe(it(n=>n&&"boolean"==typeof n?function(t,e,n,r){return tt(e).pipe(yc(e=>jf(function(t,e){return null!==t&&e&&e(new Sd(t)),mc(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Cd(t)),mc(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Rf(()=>mc(e.guards.map(i=>{const o=gg(i,e.node,n);let s;if(function(t){return t&&Bp(t.canActivateChild)}(o))s=zd(o.canActivateChild(r,t));else{if(!Bp(o))throw new Error("Invalid CanActivateChild guard");s=zd(o(r,t))}return s.pipe(sd())})).pipe(Hp())));return mc(i).pipe(Hp())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?mc(r.map(r=>Rf(()=>{const i=gg(r,e,n);let o;if(function(t){return t&&Bp(t.canActivate)}(i))o=zd(i.canActivate(e,t));else{if(!Bp(i))throw new Error("Invalid CanActivate guard");o=zd(i(e,t))}return o.pipe(sd())}))).pipe(Hp()):mc(!0)}(t,e.route,n))),sd(t=>!0!==t,!0))}(r,o,t,e):mc(n)),V(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),ld(t=>{if(qp(t.guardsResult)){const e=Fd(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new _d(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),vc(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new md(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Og(t=>{if(t.guards.canActivateChecks.length)return mc(t).pipe(ld(t=>{const e=new xd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),$f(t=>{let n=!1;return mc(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,it(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return mc(t);let o=0;return tt(n).pipe(yc(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return mc({});const o={};return tt(i).pipe(it(i=>function(t,e,n,r){const i=gg(t,e,r);return zd(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(ld(t=>{o[i]=t}))),Xf(1),it(()=>Object.keys(o).length===i.length?mc(o):Pf))}(t._resolve,t,e,r).pipe(V(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),vp(t,n).resolve),null)))}(t.route,e,r,i)),ld(()=>o++),Xf(1),it(e=>o===n.length?mc(t):Pf))})),ld({next:()=>n=!0,complete:()=>{if(!n){const n=new md(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),ld(t=>{const e=new wd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Og(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),V(t=>{const e=function(t,e,n){const r=Sp(t,e._root,n?n._root:void 0);return new gp(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),ld(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),V(t=>(new zp(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),ld({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new md(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new hd(i))),Gf(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=qp(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new md(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new yd(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return Pf}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Gp(t),this.config=t.map(Xp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,l=s?this.currentUrlTree.fragment:i;let u=null;switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,i){if(0===n.length)return Dp(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Mp(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Id(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Mp(n,e,r)}(n);if(o.toRoot())return Dp(e.root,new Hd([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Fp(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Fp(t,t===e.root,0)}const r=Cp(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Fp(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Pp(s.segmentGroup,s.index,o.commands):jp(s.segmentGroup,s.index,o.commands);return Dp(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,u,l)}navigateByUrl(t,e={skipLocationChange:!1}){const n=qp(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(qp(t))return Ld(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ld(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new gd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let l,u,c;i?(l=i.resolve,u=i.reject,c=i.promise):c=new Promise((t,e)=>{l=t,u=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(vr(ir),vr(Zd),vr(Mg),vr(xu),vr(Mo),vr(Xl),vr(Ol),vr(void 0))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),$g=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new U,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:zg(this.skipLocationChange),replaceUrl:zg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:zg(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Go(Rg),Go(yp),tr("tabindex"),Go(Hs),Go(Bs))},t.\u0275dir=he({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&is("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[we]}),t})(),Ig=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new U,this.subscription=t.events.subscribe(t=>{t instanceof gd&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:zg(this.skipLocationChange),replaceUrl:zg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:zg(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Go(Rg),Go(yp),Go(mu))},t.\u0275dir=he({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&is("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(xs("href",e.href,Dr),Vo("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[we]}),t})();function zg(t){return""===t||!!t}let Lg=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof gd&&this.update()})}ngAfterContentInit(){mc(this.links.changes,this.linksWithHrefs.changes,mc(null)).pipe(at()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=tt(e).pipe(at()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(Go(Rg),Go(Bs),Go(Hs),Go(pa),Go($g,8),Go(Ig,8))},t.\u0275dir=he({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(rl(n,$g,1),rl(n,Ig,1)),2&t){let t;nl(t=il())&&(e.links=t),nl(t=il())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[we]}),t})(),Ug=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Va,this.deactivateEvents=new Va,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Bg(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Go(Mg),Go(Oa),Go(Is),tr("name"),Go(pa))},t.\u0275dir=he({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Bg{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===yp?this.route:t===Mg?this.childContexts:this.parent.get(t,e)}}class qg{}class Vg{preload(t,e){return mc(null)}}let Hg=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Dg(e,n,e=>t.triggerEvent(new kd(e)),e=>t.triggerEvent(new Ed(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(vc(t=>t instanceof gd),yc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(ka);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return tt(n).pipe(at(),V(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?mc(e._loadedConfig):this.loader.load(t.injector,e)).pipe(it(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(vr(Rg),vr(Xl),vr(Ol),vr(Mo),vr(qg))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),Wg=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Dd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Dd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(vr(Rg),vr(zu),vr(void 0))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const Gg=new nr("ROUTER_CONFIGURATION"),Zg=new nr("ROUTER_FORROOT_GUARD"),Yg=[xu,{provide:Zd,useClass:Yd},{provide:Rg,useFactory:function(t,e,n,r,i,o,s,a={},l,u){const c=new Rg(null,t,e,n,r,i,o,Rd(s));if(l&&(c.urlHandlingStrategy=l),u&&(c.routeReuseStrategy=u),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,c),a.enableTracing){const t=ou();c.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return c},deps:[Zd,Mg,xu,Mo,Xl,Ol,Ag,Gg,[class{},new wr],[class{},new wr]]},Mg,{provide:yp,useFactory:function(t){return t.routerState.root},deps:[Rg]},{provide:Xl,useClass:Jl},Hg,Vg,class{preload(t,e){return e().pipe(Gf(()=>mc(null)))}},{provide:Gg,useValue:{enableTracing:!1}}];function Xg(){return new ql("Router",Rg)}let Qg=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Yg,em(e),{provide:Zg,useFactory:tm,deps:[[Rg,new wr,new kr]]},{provide:Gg,useValue:n||{}},{provide:mu,useFactory:Jg,deps:[au,[new xr(vu),new wr],Gg]},{provide:Wg,useFactory:Kg,deps:[Rg,zu,Gg]},{provide:qg,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Vg},{provide:ql,multi:!0,useFactory:Xg},[nm,{provide:ll,multi:!0,useFactory:rm,deps:[nm]},{provide:om,useFactory:im,deps:[nm]},{provide:gl,multi:!0,useExisting:om}]]}}static forChild(e){return{ngModule:t,providers:[em(e)]}}}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)(vr(Zg,8),vr(Rg,8))}}),t})();function Kg(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Wg(t,e,n)}function Jg(t,e,n={}){return n.useHash?new _u(t,e):new bu(t,e)}function tm(t){return"guarded"}function em(t){return[{provide:rr,multi:!0,useValue:t},{provide:Ag,multi:!0,useValue:t}]}let nm=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new U}appInitializer(){return this.injector.get(uu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Rg),r=this.injector.get(Gg);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?mc(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Gg),n=this.injector.get(Hg),r=this.injector.get(Wg),i=this.injector.get(Rg),o=this.injector.get(Zl);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(vr(Mo))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();function rm(t){return t.appInitializer.bind(t)}function im(t){return t.bootstrapListener.bind(t)}const om=new nr("Router Initializer");let sm=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["app-home"]],decls:35,vars:0,consts:[["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],["rel","stylesheet","href","https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"],[1,"jumbotron","text-center"],[1,"container"],[1,"row"],[1,"col-sm-4"]],template:function(t,e){1&t&&(Xo(0,"head"),Xo(1,"title"),vs(2,"Bootstrap Example"),Qo(),Ko(3,"meta",0),Ko(4,"meta",1),Ko(5,"link",2),Qo(),Xo(6,"body"),Xo(7,"div",3),Xo(8,"h1"),vs(9,"Welcome to Clinical Data Integration"),Qo(),Xo(10,"p"),vs(11,"Below are the available options:"),Qo(),Qo(),Xo(12,"div",4),Xo(13,"div",5),Xo(14,"div",6),Xo(15,"h3"),vs(16,"About"),Qo(),Xo(17,"p"),vs(18,"We are a team of 5 students looking to combine data from multiple databases into 1. Users can then make querys on the combined database."),Qo(),Xo(19,"p"),vs(20,"Click on the about tab to learn more about our team and our mission."),Qo(),Qo(),Xo(21,"div",6),Xo(22,"h3"),vs(23,"SQL Query"),Qo(),Xo(24,"p"),vs(25,"For researches or other professionals who are familiar with SQL, a query can be typed in to directly access the database."),Qo(),Xo(26,"p"),vs(27,"Click on the SQL Query tab to enter."),Qo(),Qo(),Xo(28,"div",6),Xo(29,"h3"),vs(30,"Assisted Query"),Qo(),Xo(31,"p"),vs(32,"For those unfamiliar with SQL, you can input an english sentence describing the data you want and we will transform that sentence into SQL code."),Qo(),Xo(33,"p"),vs(34,"Click on the Assisted Query tab to enter."),Qo(),Qo(),Qo(),Qo(),Qo())},styles:[""]}),t})(),am=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["app-about"]],decls:2,vars:0,template:function(t,e){1&t&&(Xo(0,"p"),vs(1,"about works!"),Qo())},styles:[""]}),t})(),lm=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["app-contact"]],decls:17,vars:0,consts:[[1,"container"],["id","contact","action","","method","post"],["placeholder","Your name","type","text","tabindex","1","required","","autofocus",""],["placeholder","Your Email Address","type","email","tabindex","2","required",""],["placeholder","Your Phone Number","type","tel","tabindex","3","required",""],["placeholder","Type your Message Here....","tabindex","5","required",""],["name","submit","type","submit","id","contact-submit","data-submit","...Sending"]],template:function(t,e){1&t&&(Xo(0,"div",0),Xo(1,"form",1),Xo(2,"h3"),vs(3,"Quick Contact"),Qo(),Xo(4,"h4"),vs(5,"Contact us today, and get reply with in 24 hours!"),Qo(),Xo(6,"fieldset"),Ko(7,"input",2),Qo(),Xo(8,"fieldset"),Ko(9,"input",3),Qo(),Xo(10,"fieldset"),Ko(11,"input",4),Qo(),Xo(12,"fieldset"),Ko(13,"textarea",5),Qo(),Xo(14,"fieldset"),Xo(15,"button",6),vs(16,"Submit"),Qo(),Qo(),Qo(),Qo())},directives:[gf,Ah,hf],styles:["@import url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,600);*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-font-smoothing:antialiased;-o-font-smoothing:antialiased;font-smoothing:antialiased;text-rendering:optimizeLegibility}body[_ngcontent-%COMP%]{font-family:Open Sans,Helvetica,Arial,sans-serif;font-weight:300;font-size:12px;line-height:30px;color:#777;background:#0cf}.container[_ngcontent-%COMP%]{max-width:400px;width:100%;margin:0 auto;position:relative}#contact[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font:400 12px/16px Open Sans,Helvetica,Arial,sans-serif}#contact[_ngcontent-%COMP%]{background:#f9f9f9;padding:25px;margin:50px 0}#contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f96;display:block;font-size:30px;font-weight:400}#contact[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:5px 0 15px;display:block;font-size:13px}fieldset[_ngcontent-%COMP%]{border:none!important;margin:0 0 10px;min-width:100%;padding:0;width:100%}#contact[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ccc;background:#fff;margin:0 0 5px;padding:10px}#contact[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:hover, #contact[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]:hover, #contact[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:hover, #contact[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%]:hover, #contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:hover{transition:border-color .3s ease-in-out;border:1px solid #aaa}#contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;max-width:100%;resize:none}#contact[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{cursor:pointer;width:100%;border:none;background:#0cf;color:#fff;margin:0 0 5px;padding:10px;font-size:15px}#contact[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:#09c;transition:background-color .3s ease-in-out}#contact[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:active{box-shadow:inset 0 1px 3px rgba(0,0,0,.5)}#contact[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, #contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:0;border:1px solid #999}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#888}[_ngcontent-%COMP%]:-moz-placeholder, [_ngcontent-%COMP%]::-moz-placeholder{color:#888}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#888}"]}),t})(),um=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["app-sql-query"]],decls:9,vars:0,consts:[[1,"container"],["id","contact","action","","method","post"],["placeholder","Type your Message Here....","tabindex","5","required",""],["name","submit","type","submit","id","contact-submit","data-submit","...Sending"]],template:function(t,e){1&t&&(Xo(0,"div",0),Xo(1,"form",1),Xo(2,"h3"),vs(3,"Enter SQL Query Below"),Qo(),Xo(4,"fieldset"),Ko(5,"textarea",2),Qo(),Xo(6,"fieldset"),Xo(7,"button",3),vs(8,"Submit"),Qo(),Qo(),Qo(),Qo())},directives:[gf,Ah,hf],styles:["@import url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,600);*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-font-smoothing:antialiased;-o-font-smoothing:antialiased;font-smoothing:antialiased;text-rendering:optimizeLegibility}body[_ngcontent-%COMP%]{font-family:Open Sans,Helvetica,Arial,sans-serif;font-weight:300;font-size:12px;line-height:30px;color:#777;background:#0cf}.container[_ngcontent-%COMP%]{max-width:400px;width:100%;margin:0 auto;position:relative}#contact[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font:400 12px/16px Open Sans,Helvetica,Arial,sans-serif}#contact[_ngcontent-%COMP%]{background:#f9f9f9;padding:25px;margin:50px 0}#contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f96;display:block;font-size:30px;font-weight:400}fieldset[_ngcontent-%COMP%]{border:none!important;margin:0 0 10px;min-width:100%;padding:0;width:100%}#contact[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%], #contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ccc;background:#fff;margin:0 0 5px;padding:10px}#contact[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:hover, #contact[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]:hover, #contact[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:hover, #contact[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%]:hover, #contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:hover{transition:border-color .3s ease-in-out;border:1px solid #aaa}#contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;max-width:100%;resize:none}#contact[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{cursor:pointer;width:100%;border:none;background:#0cf;color:#fff;margin:0 0 5px;padding:10px;font-size:15px}#contact[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:#09c;transition:background-color .3s ease-in-out}#contact[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:active{box-shadow:inset 0 1px 3px rgba(0,0,0,.5)}#contact[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, #contact[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:0;border:1px solid #999}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#888}[_ngcontent-%COMP%]:-moz-placeholder, [_ngcontent-%COMP%]::-moz-placeholder{color:#888}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#888}"]}),t})();var cm,hm=(cm=function(t,e){return(cm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}cm(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),fm=Object.prototype.hasOwnProperty;function dm(t,e){return fm.call(t,e)}function pm(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);for(var r in e=[],t)dm(t,r)&&e.push(r);return e}function gm(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function mm(t){for(var e,n=0,r=t.length;n<r;){if(!((e=t.charCodeAt(n))>=48&&e<=57))return!1;n++}return!0}function ym(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function vm(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function bm(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(bm(t[e]))return!0}else if("object"==typeof t){var r=pm(t),i=r.length;for(e=0;e<i;e++)if(bm(t[r[e]]))return!0}return!1}function _m(t,e){var n=[t];for(var r in e){var i="object"==typeof e[r]?JSON.stringify(e[r],null,2):e[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}var xm=function(t){function e(e,n,r,i,o){var s=this.constructor,a=t.call(this,_m(e,{name:n,index:r,operation:i,tree:o}))||this;return a.name=n,a.index=r,a.operation=i,a.tree=o,Object.setPrototypeOf(a,s.prototype),a.message=_m(e,{name:n,index:r,operation:i,tree:o}),a}return hm(e,t),e}(Error),wm=xm,km=gm,Em={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=Om(n,this.path);r&&(r=gm(r));var i=Cm(n,{op:"remove",path:this.from}).removed;return Cm(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=Om(n,this.from);return Cm(n,{op:"add",path:this.path,value:gm(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:Fm(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},Sm={add:function(t,e,n){return mm(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:Em.move,copy:Em.copy,test:Em.test,_get:Em._get};function Om(t,e){if(""==e)return t;var n={op:"_get",path:e};return Cm(t,n),n.value}function Cm(t,e,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(e,0,t,e.path):Tm(e,0)),""===e.path){var s={newDocument:t};if("add"===e.op)return s.newDocument=e.value,s;if("replace"===e.op)return s.newDocument=e.value,s.removed=t,s;if("move"===e.op||"copy"===e.op)return s.newDocument=Om(t,e.from),"move"===e.op&&(s.removed=t),s;if("test"===e.op){if(s.test=Fm(t,e.value),!1===s.test)throw new wm("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return s.newDocument=t,s}if("remove"===e.op)return s.removed=t,s.newDocument=null,s;if("_get"===e.op)return e.value=t,s;if(n)throw new wm("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return s}r||(t=gm(t));var a=(e.path||"").split("/"),l=t,u=1,c=a.length,h=void 0,f=void 0,d=void 0;for(d="function"==typeof n?n:Tm;;){if(f=a[u],i&&"__proto__"==f)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===h&&(void 0===l[f]?h=a.slice(0,u).join("/"):u==c-1&&(h=e.path),void 0!==h&&d(e,0,t,h)),u++,Array.isArray(l)){if("-"===f)f=l.length;else{if(n&&!mm(f))throw new wm("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);mm(f)&&(f=~~f)}if(u>=c){if(n&&"add"===e.op&&f>l.length)throw new wm("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);if(!1===(s=Sm[e.op].call(e,l,f,t)).test)throw new wm("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return s}}else if(f&&-1!=f.indexOf("~")&&(f=vm(f)),u>=c){if(!1===(s=Em[e.op].call(e,l,f,t)).test)throw new wm("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return s}l=l[f]}}function Am(t,e,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(e))throw new wm("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=gm(t));for(var o=new Array(e.length),s=0,a=e.length;s<a;s++)o[s]=Cm(t,e[s],n,!0,i,s),t=o[s].newDocument;return o.newDocument=t,o}function Dm(t,e,n){var r=Cm(t,e);if(!1===r.test)throw new wm("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function Tm(t,e,n,r){if("object"!=typeof t||null===t||Array.isArray(t))throw new wm("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(!Em[t.op])throw new wm("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n);if("string"!=typeof t.path)throw new wm("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new wm('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new wm("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new wm("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&bm(t.value))throw new wm("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n)if("add"==t.op){var i=t.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new wm("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new wm("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if("move"===t.op||"copy"===t.op){var s=Mm([{op:"_get",path:t.from,value:void 0}],n);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new wm("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}function Mm(t,e,n){try{if(!Array.isArray(t))throw new wm("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Am(gm(e),gm(t),n||!0);else{n=n||Tm;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof wm)return i;throw i}}function Fm(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,r,i,o=Array.isArray(t),s=Array.isArray(e);if(o&&s){if((r=t.length)!=e.length)return!1;for(n=r;0!=n--;)if(!Fm(t[n],e[n]))return!1;return!0}if(o!=s)return!1;var a=Object.keys(t);if((r=a.length)!==Object.keys(e).length)return!1;for(n=r;0!=n--;)if(!e.hasOwnProperty(a[n]))return!1;for(n=r;0!=n--;)if(!Fm(t[i=a[n]],e[i]))return!1;return!0}return t!=t&&e!=e}var jm=new WeakMap,Pm=function(){return function(t){this.observers=new Map,this.obj=t}}(),Nm=function(){return function(t,e){this.callback=t,this.observer=e}}();function Rm(t,e){e.unobserve()}function $m(t,e){var n,r=function(t){return jm.get(t)}(t);if(r){var i=function(t,e){return t.observers.get(e)}(r,e);n=i&&i.observer}else r=new Pm(t),jm.set(t,r);if(n)return n;if(n={},r.value=gm(t),e){n.callback=e,n.next=null;var o=function(){Im(n)},s=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return n.patches=[],n.object=t,n.unobserve=function(){Im(n),clearTimeout(n.next),function(t,e){t.observers.delete(e.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},r.observers.set(e,new Nm(e,n)),n}function Im(t,e){void 0===e&&(e=!1);var n=jm.get(t.object);zm(n.value,t.object,t.patches,"",e),t.patches.length&&Am(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function zm(t,e,n,r,i){if(e!==t){"function"==typeof e.toJSON&&(e=e.toJSON());for(var o=pm(e),s=pm(t),a=!1,l=s.length-1;l>=0;l--){var u=t[h=s[l]];if(!dm(e,h)||void 0===e[h]&&void 0!==u&&!1===Array.isArray(e))Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+ym(h),value:gm(u)}),n.push({op:"remove",path:r+"/"+ym(h)}),a=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}));else{var c=e[h];"object"==typeof u&&null!=u&&"object"==typeof c&&null!=c?zm(u,c,n,r+"/"+ym(h),i):u!==c&&(i&&n.push({op:"test",path:r+"/"+ym(h),value:gm(u)}),n.push({op:"replace",path:r+"/"+ym(h),value:gm(c)}))}}if(a||o.length!=s.length)for(l=0;l<o.length;l++){var h;dm(t,h=o[l])||void 0===e[h]||n.push({op:"add",path:r+"/"+ym(h),value:gm(e[h])})}}}function Lm(t,e,n){void 0===n&&(n=!1);var r=[];return zm(t,e,r,"",n),r}Object.assign({},r,i,{JsonPatchError:xm,deepClone:gm,escapePathComponent:ym,unescapePathComponent:vm});var Um=n("ZYJ9"),Bm=n.n(Um),qm=n("3cPs");function Vm(t,e,n){return t.fields=e||[],t.fname=n,t}function Hm(t){return null==t?null:t.fname}function Wm(t){return null==t?null:t.fields}function Gm(t){return 1===t.length?Zm(t[0]):Ym(t)}const Zm=t=>function(e){return e[t]},Ym=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};function Xm(t){throw Error(t)}function Qm(t){const e=[],n=t.length;let r,i,o,s=null,a=0,l="";function u(){e.push(l+t.substring(r,i)),l="",r=i+1}for(t+="",r=i=0;i<n;++i)if(o=t[i],"\\"===o)l+=t.substring(r,i),l+=t.substring(++i,++i),r=i;else if(o===s)u(),s=null,a=-1;else{if(s)continue;r===a&&'"'===o||r===a&&"'"===o?(r=i+1,s=o):"."!==o||a?"["===o?(i>r&&u(),a=r=i+1):"]"===o&&(a||Xm("Access path missing open bracket: "+t),a>0&&u(),a=0,r=i+1):i>r?u():r=i+1}return a&&Xm("Access path missing closing bracket: "+t),s&&Xm("Access path missing closing quote: "+t),i>r&&(i++,u()),e}function Km(t,e,n){const r=Qm(t);return t=1===r.length?r[0]:t,Vm((n&&n.get||Gm)(r),[t],e||t)}const Jm=Km("id"),ty=Vm(t=>t,[],"identity"),ey=Vm(()=>0,[],"zero"),ny=Vm(()=>1,[],"one"),ry=Vm(()=>!0,[],"true"),iy=Vm(()=>!1,[],"false");function oy(t,e,n){const r=[e].concat([].slice.call(n));console[t].apply(console,r)}const sy=0,ay=1,ly=2,uy=3,cy=4;function hy(t,e){let n=t||sy;return{level(t){return arguments.length?(n=+t,this):n},error(){return n>=ay&&oy(e||"error","ERROR",arguments),this},warn(){return n>=ly&&oy(e||"warn","WARN",arguments),this},info(){return n>=uy&&oy(e||"log","INFO",arguments),this},debug(){return n>=cy&&oy(e||"log","DEBUG",arguments),this}}}var fy=Array.isArray;function dy(t){return t===Object(t)}const py=t=>"__proto__"!==t;function gy(...t){return t.reduce((t,e)=>{for(const n in e)"signals"===n?t.signals=yy(t.signals,e.signals):my(t,n,e[n],"legend"===n?{layout:1}:"style"===n||null);return t},{})}function my(t,e,n,r){if(!py(e))return;let i,o;if(dy(n)&&!fy(n))for(i in o=dy(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?my(o,i,n[i]):py(i)&&(o[i]=n[i]);else t[e]=n}function yy(t,e){if(null==t)return e;const n={},r=[];function i(t){n[t.name]||(n[t.name]=1,r.push(t))}return e.forEach(i),t.forEach(i),r}function vy(t){return t[t.length-1]}function by(t){return null==t||""===t?null:+t}const _y=t=>e=>t*Math.exp(e),xy=t=>e=>Math.log(t*e),wy=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),ky=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,Ey=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function Sy(t,e,n,r){const i=n(t[0]),o=n(vy(t)),s=(o-i)*e;return[r(i-s),r(o-s)]}function Oy(t,e){return Sy(t,e,by,ty)}function Cy(t,e){var n=Math.sign(t[0]);return Sy(t,e,xy(n),_y(n))}function Ay(t,e,n){return Sy(t,e,Ey(n),Ey(1/n))}function Dy(t,e,n){return Sy(t,e,wy(n),ky(n))}function Ty(t,e,n,r,i){const o=r(t[0]),s=r(vy(t)),a=null!=e?r(e):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function My(t,e,n){return Ty(t,e,n,by,ty)}function Fy(t,e,n){const r=Math.sign(t[0]);return Ty(t,e,n,xy(r),_y(r))}function jy(t,e,n,r){return Ty(t,e,n,Ey(r),Ey(1/r))}function Py(t,e,n,r){return Ty(t,e,n,wy(r),ky(r))}function Ny(t){return 1+~~(new Date(t).getMonth()/3)}function Ry(t){return 1+~~(new Date(t).getUTCMonth()/3)}function $y(t){return null!=t?fy(t)?t:[t]:[]}function Iy(t,e,n){let r,i=t[0],o=t[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]}function zy(t){return"function"==typeof t}function Ly(t,e,n){n=n||{},e=$y(e)||[];const r=[],i=[],o={},s=n.comparator||By;return $y(t).forEach((t,s)=>{null!=t&&(r.push("descending"===e[s]?-1:1),i.push(t=zy(t)?t:Km(t,null,n)),(Wm(t)||[]).forEach(t=>o[t]=1))}),0===i.length?null:Vm(s(i,r),Object.keys(o))}const Uy=(t,e)=>(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e==e?-1:e!=e&&t==t?1:0),By=(t,e)=>1===t.length?qy(t[0],e[0]):Vy(t,e,t.length),qy=(t,e)=>function(n,r){return Uy(t(n),t(r))*e},Vy=(t,e,n)=>(e.push(0),function(r,i){let o,s=0,a=-1;for(;0===s&&++a<n;)o=t[a],s=Uy(o(r),o(i));return s*e[a]});function Hy(t){return zy(t)?t:()=>t}function Wy(t,e){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(e(r),n=null),t)}}function Gy(t){for(let e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r],e)t[n]=e[n];return t}function Zy(t,e){let n,r,i,o,s=0;if(t&&(n=t.length))if(null==e){for(r=t[s];s<n&&(null==r||r!=r);r=t[++s]);for(i=o=r;s<n;++s)r=t[s],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=e(t[s]);s<n&&(null==r||r!=r);r=e(t[++s]));for(i=o=r;s<n;++s)r=e(t[s]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]}function Yy(t,e){const n=t.length;let r,i,o,s,a,l=-1;if(null==e){for(;++l<n;)if(i=t[l],null!=i&&i>=i){r=o=i;break}if(l===n)return[-1,-1];for(s=a=l;++l<n;)i=t[l],null!=i&&(r>i&&(r=i,s=l),o<i&&(o=i,a=l))}else{for(;++l<n;)if(i=e(t[l],l,t),null!=i&&i>=i){r=o=i;break}if(l===n)return[-1,-1];for(s=a=l;++l<n;)i=e(t[l],l,t),null!=i&&(r>i&&(r=i,s=l),o<i&&(o=i,a=l))}return[s,a]}const Xy=Object.prototype.hasOwnProperty;function Qy(t,e){return Xy.call(t,e)}const Ky={};function Jy(t){let e,n={};function r(t){return Qy(n,t)&&n[t]!==Ky}const i={size:0,empty:0,object:n,has:r,get:t=>r(t)?n[t]:void 0,set(t,e){return r(t)||(++i.size,n[t]===Ky&&--i.empty),n[t]=e,this},delete(t){return r(t)&&(--i.size,++i.empty,n[t]=Ky),this},clear(){i.size=i.empty=0,i.object=n={}},test(t){return arguments.length?(e=t,i):e},clean(){const t={};let r=0;for(const i in n){const o=n[i];o===Ky||e&&e(o)||(t[i]=o,++r)}i.size=r,i.empty=0,i.object=n=t}};return t&&Object.keys(t).forEach(e=>{i.set(e,t[e])}),i}function tv(t,e,n,r,i,o){if(!n&&0!==n)return o;const s=+n;let a,l=t[0],u=vy(t);u<l&&(a=l,l=u,u=a),a=Math.abs(e-l);const c=Math.abs(u-e);return a<c&&a<=s?r:c<=s?i:o}function ev(t,e,n){const r=t.prototype=Object.create(e.prototype);return r.constructor=t,Gy(r,n)}function nv(t,e,n,r){let i,o=e[0],s=e[e.length-1];return o>s&&(i=o,o=s,s=i),r=void 0===r||r,((n=void 0===n||n)?o<=t:o<t)&&(r?t<=s:t<s)}function rv(t){return"boolean"==typeof t}function iv(t){return"[object Date]"===Object.prototype.toString.call(t)}function ov(t){return t&&zy(t[Symbol.iterator])}function sv(t){return"number"==typeof t}function av(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function lv(t){return"string"==typeof t}function uv(t,e,n){t&&(t=e?$y(t).map(t=>t.replace(/\\(.)/g,"$1")):$y(t));const r=t&&t.length,i=n&&n.get||Gm,o=t=>i(e?[t]:Qm(t));let s;if(r)if(1===r){const e=o(t[0]);s=function(t){return""+e(t)}}else{const e=t.map(o);s=function(t){let n=""+e[0](t),i=0;for(;++i<r;)n+="|"+e[i](t);return n}}else s=function(){return""};return Vm(s,t,"key")}function cv(t,e){const n=t[0],r=vy(t),i=+e;return i?1===i?r:n+i*(r-n):n}function hv(t){let e,n,r;t=+t||1e4;const i=()=>{e={},n={},r=0},o=(i,o)=>(++r>t&&(n=e,e={},r=1),e[i]=o);return i(),{clear:i,has:t=>Qy(e,t)||Qy(n,t),get:t=>Qy(e,t)?e[t]:Qy(n,t)?o(t,n[t]):void 0,set:(t,n)=>Qy(e,t)?e[t]=n:o(t,n)}}function fv(t,e,n,r){const i=e.length,o=n.length;if(!o)return e;if(!i)return n;const s=r||new e.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=t(e[a],n[l])>0?n[l++]:e[a++];for(;a<i;++a,++u)s[u]=e[a];for(;l<o;++l,++u)s[u]=n[l];return s}function dv(t,e){let n="";for(;--e>=0;)n+=t;return n}function pv(t,e,n,r){const i=n||" ",o=t+"",s=e-o.length;return s<=0?o:"left"===r?dv(i,s)+o:"center"===r?dv(i,~~(s/2))+o+dv(i,Math.ceil(s/2)):o+dv(i,s)}function gv(t){return t&&vy(t)-t[0]||0}function mv(t){return fy(t)?"["+t.map(mv)+"]":dy(t)||lv(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function yv(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t||!t)}const vv=t=>sv(t)||iv(t)?t:Date.parse(t);function bv(t,e){return e=e||vv,null==t||""===t?null:e(t)}function _v(t){return null==t||""===t?null:t+""}function xv(t){const e={},n=t.length;for(let r=0;r<n;++r)e[t[r]]=!0;return e}function wv(t,e,n,r){const i=null!=r?r:"\u2026",o=t+"",s=o.length,a=Math.max(0,e-i.length);return s<=e?o:"left"===n?i+o.slice(s-a):"center"===n?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function kv(t,e,n){if(t)if(e){const r=t.length;for(let i=0;i<r;++i){const r=e(t[i]);r&&n(r,i,t)}}else t.forEach(n)}const Ev=/^([A-Za-z]+:)?\/\//,Sv=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Ov=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;async function Cv(t,e){const n=await this.sanitize(t,e),r=n.href;return n.localFile?this.file(r):this.http(r,e)}async function Av(t,e){e=Gy({},this.options,e);const n=this.fileAccess,r={href:null};let i,o,s;const a=Sv.test(t.replace(Ov,""));null!=t&&"string"==typeof t&&a||Xm("Sanitize failure, invalid URI: "+mv(t));const l=Ev.test(t);return(s=e.baseURL)&&!l&&(t.startsWith("/")||"/"===s[s.length-1]||(t="/"+t),t=s+t),o=(i=t.startsWith("file://"))||"file"===e.mode||"http"!==e.mode&&!l&&n,i?t=t.slice("file://".length):t.startsWith("//")&&("file"===e.defaultProtocol?(t=t.slice(2),o=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(r,"localFile",{value:!!o}),r.href=t,e.target&&(r.target=e.target+""),e.rel&&(r.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(r.crossOrigin=e.crossOrigin+""),r}function Dv(t){return t?e=>new Promise((n,r)=>{t.readFile(e,(t,e)=>{t?r(t):n(e)})}):Tv}async function Tv(){Xm("No file system access.")}function Mv(t){return t?async function(e,n){const r=Gy({},this.options.http,n),i=n&&n.response,o=await t(e,r);return o.ok?zy(o[i])?o[i]():o.text():Xm(o.status+""+o.statusText)}:Fv}async function Fv(){Xm("No HTTP fetch method available.")}const jv=t=>!(Number.isNaN(+t)||t instanceof Date),Pv={boolean:yv,integer:by,number:by,date:bv,string:_v,unknown:ty},Nv=[t=>"true"===t||"false"===t||!0===t||!1===t,t=>jv(t)&&Number.isInteger(+t),jv,t=>!Number.isNaN(Date.parse(t))],Rv=["boolean","integer","number","date"];function $v(t,e){if(!t||!t.length)return"unknown";const n=t.length,r=Nv.length,i=Nv.map((t,e)=>e+1);for(let s,a,l=0,u=0;l<n;++l)for(a=e?t[l][e]:t[l],s=0;s<r;++s)if(i[s]&&null!=(o=a)&&o==o&&!Nv[s](a)&&(i[s]=0,++u,u===Nv.length))return"string";var o;return Rv[i.reduce((t,e)=>0===t?e:t,0)-1]}function Iv(t,e){return e.reduce((e,n)=>(e[n]=$v(t,n),e),{})}var zv={},Lv={};function Uv(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Bv(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function qv(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Vv(t){const e=function(e,n){const r={delimiter:t};return Hv(e,n?Gy(n,r):r)};return e.responseType="text",e}function Hv(t,e){return e.header&&(t=e.header.map(mv).join(e.delimiter)+"\n"+t),function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,s=0,a=0,l=o<=0,u=!1;function c(){if(l)return Lv;if(u)return u=!1,zv;var e,r,i=s;if(34===t.charCodeAt(i)){for(;s++<o&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(e=s)>=o?l=!0:10===(r=t.charCodeAt(s++))?u=!0:13===r&&(u=!0,10===t.charCodeAt(s)&&++s),t.slice(i+1,e-1).replace(/""/g,'"')}for(;s<o;){if(10===(r=t.charCodeAt(e=s++)))u=!0;else if(13===r)u=!0,10===t.charCodeAt(s)&&++s;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=c())!==Lv;){for(var h=[];r!==zv&&r!==Lv;)h.push(r),r=c();e&&null==(h=e(h,a++))||i.push(h)}return i}function i(e,n){return e.map(function(e){return n.map(function(t){return s(e[t])}).join(t)})}function o(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?(i=(n=t).getUTCHours(),o=n.getUTCMinutes(),s=n.getUTCSeconds(),a=n.getUTCMilliseconds(),isNaN(n)?"Invalid Date":((r=n.getUTCFullYear())<0?"-"+qv(-r,6):r>9999?"+"+qv(r,6):qv(r,4))+"-"+qv(n.getUTCMonth()+1,2)+"-"+qv(n.getUTCDate(),2)+(a?"T"+qv(i,2)+":"+qv(o,2)+":"+qv(s,2)+"."+qv(a,3)+"Z":s?"T"+qv(i,2)+":"+qv(o,2)+":"+qv(s,2)+"Z":o||i?"T"+qv(i,2)+":"+qv(o,2)+"Z":"")):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;var n,r,i,o,s,a}return{parse:function(t,e){var n,i,o=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Uv(t);return function(r,i){return e(n(r),i,t)}}(t,e):Uv(t)});return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Bv(e)),[n.map(s).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Bv(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:s}}(e.delimiter).parse(t+"")}function Wv(t,e){const n=e&&e.property?Km(e.property):ty;return!dy(t)||(r=t,"function"==typeof Buffer&&zy(Buffer.isBuffer)&&Buffer.isBuffer(r))?n(JSON.parse(t)):function(t,e){return!fy(t)&&ov(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}(n(t),e);var r}Hv.responseType="text",Wv.responseType="json";var Gv=function(t){return t},Zv=function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return Yv(t,e)})}:Yv(t,e)};function Yv(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=Xv(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function Xv(t,e){var n=function(t){if(null==t)return Gv;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+s;l<u;)c[l]=t[l],++l;return c}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}var Qv=function(t,e){var n={},r={},i={},o=[],s=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(e){var n,o,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],l=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=l,o=r[l]){delete r[o.start];var u=o===n?n:n.concat(o);r[u.start=n.start]=i[u.end=o.end]=u}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=a,o=i[a]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=l]=n}),a(i,r),a(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o},Kv=function(t){return Xv(t,Jv.apply(this,arguments))};function Jv(t,e,n){var r,i,o;if(arguments.length>1)r=tb(0,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Qv(t,r)}}function tb(t,e,n){var r,i=[],o=[];function s(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function a(t){t.forEach(s)}function l(t){t.forEach(a)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":a(e.arcs);break;case"MultiLineString":case"Polygon":l(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(l)}(e.arcs)}}(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}const eb={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function nb(t,e){let n,r,i,o;return t=Wv(t,e),e&&e.feature?(n=Zv,i=e.feature):e&&e.mesh?(n=Kv,i=e.mesh,o=eb[e.filter]):Xm("Missing TopoJSON feature or mesh parameter."),r=(r=t.objects[i])?n(t,r,o):Xm("Invalid TopoJSON object: "+i),r&&r.features||[r]}nb.responseType="json";const rb={dsv:Hv,csv:Vv(","),tsv:Vv("\t"),json:Wv,topojson:nb};function ib(t,e){return arguments.length>1?(rb[t]=e,this):Qy(rb,t)?rb[t]:null}function ob(t){const e=ib(t);return e&&e.responseType||"text"}var sb=Math.sqrt(50),ab=Math.sqrt(10),lb=Math.sqrt(2),ub=function(t,e,n){var r,i,o,s,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=cb(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(i=Math.ceil(e-t+1));++a<i;)o[a]=(t+a)*s;else for(s=-s,t=Math.ceil(t*s),e=Math.floor(e*s),o=new Array(i=Math.ceil(e-t+1));++a<i;)o[a]=(t+a)/s;return r&&o.reverse(),o};function cb(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=sb?10:o>=ab?5:o>=lb?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=sb?10:o>=ab?5:o>=lb?2:1)}function hb(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=sb?i*=10:o>=ab?i*=5:o>=lb&&(i*=2),e<t?-i:i}var fb=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function db(t){if(!(e=fb.exec(t)))throw new Error("invalid format: "+t);var e;return new pb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function pb(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function gb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}db.prototype=pb.prototype,pb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var mb,yb,vb,bb,_b=function(t){return(t=gb(Math.abs(t)))?t[1]:NaN},xb=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_b(e)/3)))-_b(Math.abs(t)))},wb=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_b(e)-_b(t))+1},kb=function(t){return Math.max(0,-_b(Math.abs(t)))},Eb=function(t,e){var n=gb(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Sb={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Eb(100*t,e),r:Eb,s:function(t,e){var n=gb(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(mb=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+gb(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},Ob=function(t){return t},Cb=Array.prototype.map,Ab=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],Db=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Ob:(e=Cb.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(t.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Ob:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(Cb.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"\u2212":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=db(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,m=t.precision,y=t.trim,v=t.type;"n"===v?(g=!0,v="g"):Sb[v]||(void 0===m&&(m=12),y=!0,v="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===f?o:/[%p]/.test(v)?l:"",x=Sb[v],w=/[defgprs%]/.test(v);function k(t){var i,o,l,f=b,k=_;if("c"===v)k=x(t)+k,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:x(Math.abs(t),m),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==h&&(E=!1),f=(E?"("===h?h:u:"-"===h||"("===h?"":h)+f,k=("s"===v?Ab[8+mb/3]:"")+k+(E&&"("===h?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){k=(46===l?s+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var S=f.length+t.length+k.length,O=S<p?new Array(p-S+1).join(e):"";switch(g&&d&&(t=r(O+t,O.length?p-k.length:1/0),O=""),n){case"<":t=f+t+k+O;break;case"=":t=f+O+t+k;break;case"^":t=O.slice(0,S=O.length>>1)+f+t+k+O.slice(S);break;default:t=O+f+t+k}return a(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return t+""},k}return{format:h,formatPrefix:function(t,e){var n=h(((t=db(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(_b(e)/3))),i=Math.pow(10,-r),o=Ab[8+r/3];return function(t){return n(i*t)+o}}}};yb=Db({thousands:",",grouping:[3],currency:["$",""]}),vb=yb.format,bb=yb.formatPrefix;var Tb=new Date,Mb=new Date;function Fb(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var s,a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=function(n){return Fb(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Tb.setTime(+e),Mb.setTime(+r),t(Tb),t(Mb),Math.floor(n(Tb,Mb))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var jb=Fb(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5,t=>t.getDate()-1);function Pb(t){return Fb(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var Nb=Pb(0),Rb=Pb(1),$b=(Pb(2),Pb(3),Pb(4)),Ib=(Pb(5),Pb(6),Fb(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}));function zb(t){return Fb(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var Lb=zb(0),Ub=zb(1),Bb=(zb(2),zb(3),zb(4)),qb=(zb(5),zb(6),Fb(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));qb.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Fb(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Vb=qb,Hb=Fb(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Wb=Fb(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Gb=Fb(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()}),Zb=Fb(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Yb=Fb(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Yb.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Fb(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Yb:null};var Xb=Yb,Qb=Fb(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Qb.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Fb(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var Kb=Qb,Jb=Fb(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),t_=Fb(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),e_=Fb(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}),n_=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},r_=function(t){let e=t,n=t;function r(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)<0?r=o+1:i=o}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>n_(t(e),n)}(t)),{left:r,center:function(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);const s=r(t,n,i,o-1);return s>i&&e(t[s-1],n)>-e(t[s],n)?s-1:s},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)>0?i=o:r=o+1}return r}}};const i_="year",o_="quarter",s_="month",a_="week",l_="date",u_="day",c_="dayofyear",h_="hours",f_="minutes",d_="seconds",p_="milliseconds",g_=[i_,o_,s_,a_,l_,u_,c_,h_,f_,d_,p_],m_=g_.reduce((t,e,n)=>(t[e]=1+n,t),{});function y_(t){const e=$y(t).slice(),n={};return e.length||Xm("Missing time unit."),e.forEach(t=>{Qy(m_,t)?n[t]=1:Xm("Invalid time unit: ".concat(t,"."))}),(n[a_]||n[u_]?1:0)+(n[o_]||n[s_]||n[l_]?1:0)+(n[c_]?1:0)>1&&Xm("Incompatible time units: ".concat(t)),e.sort((t,e)=>m_[t]-m_[e]),e}const v_={[i_]:"%Y ",[o_]:"Q%q ",[s_]:"%b ",[l_]:"%d ",[a_]:"W%U ",[u_]:"%a ",[c_]:"%j ",[h_]:"%H:00",[f_]:"00:%M",[d_]:":%S",[p_]:".%L",["".concat(i_,"-").concat(s_)]:"%Y-%m ",["".concat(i_,"-").concat(s_,"-").concat(l_)]:"%Y-%m-%d ",["".concat(h_,"-").concat(f_)]:"%H:%M"};function b_(t,e){const n=Gy({},v_,e),r=y_(t),i=r.length;let o,s,a="",l=0;for(l=0;l<i;)for(o=r.length;o>l;--o)if(s=r.slice(l,o).join("-"),null!=n[s]){a+=n[s],l=o;break}return a.trim()}const __=new Date;function x_(t){return __.setFullYear(t),__.setMonth(0),__.setDate(1),__.setHours(0,0,0,0),__}function w_(t){return E_(new Date(t))}function k_(t){return S_(new Date(t))}function E_(t){return jb.count(x_(t.getFullYear())-1,t)}function S_(t){return Nb.count(x_(t.getFullYear())-1,t)}function O_(t){return x_(t).getDay()}function C_(t,e,n,r,i,o,s){if(0<=t&&t<100){const a=new Date(-1,e,n,r,i,o,s);return a.setFullYear(t),a}return new Date(t,e,n,r,i,o,s)}function A_(t){return T_(new Date(t))}function D_(t){return M_(new Date(t))}function T_(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Ib.count(e-1,t)}function M_(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Lb.count(e-1,t)}function F_(t){return __.setTime(Date.UTC(t,0,1)),__.getUTCDay()}function j_(t,e,n,r,i,o,s){if(0<=t&&t<100){const t=new Date(Date.UTC(-1,e,n,r,i,o,s));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(t,e,n,r,i,o,s))}function P_(t,e,n,r,i){const o=e||1,s=vy(t),a=(t,e,i)=>function(t,e,n,r){const i=n<=1?t:r?(e,i)=>r+n*Math.floor((t(e,i)-r)/n):(e,r)=>n*Math.floor(t(e,r)/n);return e?(t,n)=>e(i(t,n),n):i}(n[i=i||t],r[i],t===s&&o,e),l=new Date,u=xv(t),c=u[i_]?a(i_):Hy(2012),h=u[s_]?a(s_):u[o_]?a(o_):ey,f=u[a_]&&u[u_]?a(u_,1,a_+u_):u[a_]?a(a_,1):u[u_]?a(u_,1):u[l_]?a(l_,1):u[c_]?a(c_,1):ny,d=u[h_]?a(h_):ey,p=u[f_]?a(f_):ey,g=u[d_]?a(d_):ey,m=u[p_]?a(p_):ey;return function(t){l.setTime(+t);const e=c(l);return i(e,h(l),f(l,e),d(l),p(l),g(l),m(l))}}function N_(t,e,n){return e+7*t-(n+6)%7}const R_={[i_]:t=>t.getFullYear(),[o_]:t=>Math.floor(t.getMonth()/3),[s_]:t=>t.getMonth(),[l_]:t=>t.getDate(),[h_]:t=>t.getHours(),[f_]:t=>t.getMinutes(),[d_]:t=>t.getSeconds(),[p_]:t=>t.getMilliseconds(),[c_]:t=>E_(t),[a_]:t=>S_(t),[a_+u_]:(t,e)=>N_(S_(t),t.getDay(),O_(e)),[u_]:(t,e)=>N_(1,t.getDay(),O_(e))},$_={[o_]:t=>3*t,[a_]:(t,e)=>N_(t,0,O_(e))};function I_(t,e){return P_(t,e||1,R_,$_,C_)}const z_={[i_]:t=>t.getUTCFullYear(),[o_]:t=>Math.floor(t.getUTCMonth()/3),[s_]:t=>t.getUTCMonth(),[l_]:t=>t.getUTCDate(),[h_]:t=>t.getUTCHours(),[f_]:t=>t.getUTCMinutes(),[d_]:t=>t.getUTCSeconds(),[p_]:t=>t.getUTCMilliseconds(),[c_]:t=>T_(t),[a_]:t=>M_(t),[u_]:(t,e)=>N_(1,t.getUTCDay(),F_(e)),[a_+u_]:(t,e)=>N_(M_(t),t.getUTCDay(),F_(e))},L_={[o_]:t=>3*t,[a_]:(t,e)=>N_(t,0,F_(e))};function U_(t,e){return P_(t,e||1,z_,L_,j_)}const B_={[i_]:Vb,[o_]:Hb.every(3),[s_]:Hb,[a_]:Nb,[l_]:jb,[u_]:jb,[c_]:jb,[h_]:Wb,[f_]:Gb,[d_]:Zb,[p_]:Xb},q_={[i_]:Kb,[o_]:Jb.every(3),[s_]:Jb,[a_]:Lb,[l_]:Ib,[u_]:Ib,[c_]:Ib,[h_]:t_,[f_]:e_,[d_]:Zb,[p_]:Xb};function V_(t){return B_[t]}function H_(t){return q_[t]}function W_(t,e,n){return t?t.offset(e,n):void 0}function G_(t,e,n){return W_(V_(t),e,n)}function Z_(t,e,n){return W_(H_(t),e,n)}function Y_(t,e,n,r){return t?t.range(e,n,r):void 0}function X_(t,e,n,r){return Y_(V_(t),e,n,r)}function Q_(t,e,n,r){return Y_(H_(t),e,n,r)}const K_=[i_,s_,l_,h_,f_,d_,p_],J_=K_.slice(0,-1),tx=J_.slice(0,-1),ex=tx.slice(0,-1),nx=ex.slice(0,-1),rx=[i_,s_],ix=[i_],ox=[[J_,1,1e3],[J_,5,5e3],[J_,15,15e3],[J_,30,3e4],[tx,1,6e4],[tx,5,3e5],[tx,15,9e5],[tx,30,18e5],[ex,1,36e5],[ex,3,108e5],[ex,6,216e5],[ex,12,432e5],[nx,1,864e5],[[i_,a_],1,6048e5],[rx,1,2592e6],[rx,3,7776e6],[ix,1,31536e6]];function sx(t){const e=t.extent,n=t.maxbins||40,r=Math.abs(gv(e))/n;let i,o,s=r_(t=>t[2]).right(ox,r);return s===ox.length?(i=ix,o=hb(e[0]/31536e6,e[1]/31536e6,n)):s?(s=ox[r/ox[s-1][2]<ox[s][2]/r?s-1:s],i=s[0],o=s[1]):(i=K_,o=Math.max(hb(e[0],e[1],n),1)),{units:i,step:o}}function ax(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function lx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ux(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function cx(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,u=wx(i),c=kx(i),h=wx(o),f=kx(o),d=wx(s),p=kx(s),g=wx(a),m=kx(a),y=wx(l),v=kx(l),b={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Vx,e:Vx,f:Yx,g:sw,G:lw,H:Hx,I:Wx,j:Gx,L:Zx,m:Xx,M:Qx,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Mw,s:Fw,S:Kx,u:Jx,U:tw,V:nw,w:rw,W:iw,x:null,X:null,y:ow,Y:aw,Z:uw,"%":Tw},_={a:function(t){return s[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:cw,e:cw,f:gw,g:Ow,G:Aw,H:hw,I:fw,j:dw,L:pw,m:mw,M:yw,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Mw,s:Fw,S:vw,u:bw,U:_w,V:ww,w:kw,W:Ew,x:null,X:null,y:Sw,Y:Cw,Z:Dw,"%":Tw},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:Px,e:Px,f:Lx,g:Tx,G:Dx,H:Rx,I:Rx,j:Nx,L:zx,m:jx,M:$x,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Fx,Q:Bx,s:qx,S:Ix,u:Sx,U:Ox,V:Cx,w:Ex,W:Ax,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:Tx,Y:Dx,Z:Mx,"%":Ux};function w(t,e){return function(n){var r,i,o,s=[],a=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++a<u;)37===t.charCodeAt(a)&&(s.push(t.slice(l,a)),null!=(i=mx[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),s.push(r),l=a+1);return s.push(t.slice(l,a)),s.join("")}}function k(t,e){return function(n){var r,i,o=ux(1900,void 0,1);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=lx(ux(o.y,0,1))).getUTCDay(),r=i>4||0===i?Ub.ceil(r):Ub(r),r=Ib.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=ax(ux(o.y,0,1))).getDay(),r=i>4||0===i?Rb.ceil(r):Rb(r),r=jb.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?lx(ux(o.y,0,1)).getUTCDay():ax(ux(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,lx(o)):ax(o)}}function E(t,e,n,r){for(var i,o,s=0,a=e.length,l=n.length;s<a;){if(r>=l)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(o=x[i in mx?e.charAt(s++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}var hx,fx,dx,px,gx,mx={"-":"",_:" ",0:"0"},yx=/^\s*\d+/,vx=/^%/,bx=/[\\^$*+?|[\]().{}]/g;function _x(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function xx(t){return t.replace(bx,"\\$&")}function wx(t){return new RegExp("^(?:"+t.map(xx).join("|")+")","i")}function kx(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function Ex(t,e,n){var r=yx.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Sx(t,e,n){var r=yx.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Ox(t,e,n){var r=yx.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Cx(t,e,n){var r=yx.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Ax(t,e,n){var r=yx.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Dx(t,e,n){var r=yx.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Tx(t,e,n){var r=yx.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Mx(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Fx(t,e,n){var r=yx.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function jx(t,e,n){var r=yx.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Px(t,e,n){var r=yx.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Nx(t,e,n){var r=yx.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Rx(t,e,n){var r=yx.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function $x(t,e,n){var r=yx.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ix(t,e,n){var r=yx.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function zx(t,e,n){var r=yx.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Lx(t,e,n){var r=yx.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ux(t,e,n){var r=vx.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Bx(t,e,n){var r=yx.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function qx(t,e,n){var r=yx.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Vx(t,e){return _x(t.getDate(),e,2)}function Hx(t,e){return _x(t.getHours(),e,2)}function Wx(t,e){return _x(t.getHours()%12||12,e,2)}function Gx(t,e){return _x(1+jb.count(Vb(t),t),e,3)}function Zx(t,e){return _x(t.getMilliseconds(),e,3)}function Yx(t,e){return Zx(t,e)+"000"}function Xx(t,e){return _x(t.getMonth()+1,e,2)}function Qx(t,e){return _x(t.getMinutes(),e,2)}function Kx(t,e){return _x(t.getSeconds(),e,2)}function Jx(t){var e=t.getDay();return 0===e?7:e}function tw(t,e){return _x(Nb.count(Vb(t)-1,t),e,2)}function ew(t){var e=t.getDay();return e>=4||0===e?$b(t):$b.ceil(t)}function nw(t,e){return t=ew(t),_x($b.count(Vb(t),t)+(4===Vb(t).getDay()),e,2)}function rw(t){return t.getDay()}function iw(t,e){return _x(Rb.count(Vb(t)-1,t),e,2)}function ow(t,e){return _x(t.getFullYear()%100,e,2)}function sw(t,e){return _x((t=ew(t)).getFullYear()%100,e,2)}function aw(t,e){return _x(t.getFullYear()%1e4,e,4)}function lw(t,e){var n=t.getDay();return _x((t=n>=4||0===n?$b(t):$b.ceil(t)).getFullYear()%1e4,e,4)}function uw(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_x(e/60|0,"0",2)+_x(e%60,"0",2)}function cw(t,e){return _x(t.getUTCDate(),e,2)}function hw(t,e){return _x(t.getUTCHours(),e,2)}function fw(t,e){return _x(t.getUTCHours()%12||12,e,2)}function dw(t,e){return _x(1+Ib.count(Kb(t),t),e,3)}function pw(t,e){return _x(t.getUTCMilliseconds(),e,3)}function gw(t,e){return pw(t,e)+"000"}function mw(t,e){return _x(t.getUTCMonth()+1,e,2)}function yw(t,e){return _x(t.getUTCMinutes(),e,2)}function vw(t,e){return _x(t.getUTCSeconds(),e,2)}function bw(t){var e=t.getUTCDay();return 0===e?7:e}function _w(t,e){return _x(Lb.count(Kb(t)-1,t),e,2)}function xw(t){var e=t.getUTCDay();return e>=4||0===e?Bb(t):Bb.ceil(t)}function ww(t,e){return t=xw(t),_x(Bb.count(Kb(t),t)+(4===Kb(t).getUTCDay()),e,2)}function kw(t){return t.getUTCDay()}function Ew(t,e){return _x(Ub.count(Kb(t)-1,t),e,2)}function Sw(t,e){return _x(t.getUTCFullYear()%100,e,2)}function Ow(t,e){return _x((t=xw(t)).getUTCFullYear()%100,e,2)}function Cw(t,e){return _x(t.getUTCFullYear()%1e4,e,4)}function Aw(t,e){var n=t.getUTCDay();return _x((t=n>=4||0===n?Bb(t):Bb.ceil(t)).getUTCFullYear()%1e4,e,4)}function Dw(){return"+0000"}function Tw(){return"%"}function Mw(t){return+t}function Fw(t){return Math.floor(+t/1e3)}function jw(t){const e={};return n=>e[n]||(e[n]=t(n))}function Pw(t){const e=jw(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(t){const n=db(t||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return function(t,e){return n=>{const r=t(n),i=r.indexOf(e);if(i<0)return r;let o=function(t,e){let n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if(n=t.charCodeAt(r),n>=48&&n<=57)return r+1}(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if("0"!==r[o]){++o;break}return r.slice(0,o)+s}}(e(n),e(".1f")(1)[1])}return e(n)},formatSpan(t,r,i,o){o=db(null==o?",f":o);const s=hb(t,r,i),a=Math.max(Math.abs(t),Math.abs(r));let l;if(null==o.precision)switch(o.type){case"s":return isNaN(l=xb(s,a))||(o.precision=l),n(o,a);case"":case"e":case"g":case"p":case"r":isNaN(l=wb(s,a))||(o.precision=l-("e"===o.type));break;case"f":case"%":isNaN(l=kb(s))||(o.precision=l-2*("%"===o.type))}return e(o)}}}let Nw,Rw;function $w(){return Nw=Pw({format:vb,formatPrefix:bb})}function Iw(t){return Pw(Db(t))}function zw(t){return arguments.length?Nw=Iw(t):Nw}function Lw(t,e,n){dy(n=n||{})||Xm("Invalid time multi-format specifier: ".concat(n));const r=e(d_),i=e(f_),o=e(h_),s=e(l_),a=e(a_),l=e(s_),u=e(o_),c=e(i_),h=t(n[p_]||".%L"),f=t(n[d_]||":%S"),d=t(n[f_]||"%I:%M"),p=t(n[h_]||"%I %p"),g=t(n[l_]||n[u_]||"%a %d"),m=t(n[a_]||"%b %d"),y=t(n[s_]||"%B"),v=t(n[o_]||"%B"),b=t(n[i_]||"%Y");return t=>(r(t)<t?h:i(t)<t?f:o(t)<t?d:s(t)<t?p:l(t)<t?a(t)<t?g:m:c(t)<t?u(t)<t?y:v:b)(t)}function Uw(t){const e=jw(t.format),n=jw(t.utcFormat);return{timeFormat:t=>lv(t)?e(t):Lw(e,V_,t),utcFormat:t=>lv(t)?n(t):Lw(n,H_,t),timeParse:jw(t.parse),utcParse:jw(t.utcParse)}}function Bw(){return Rw=Uw({format:fx,parse:dx,utcFormat:px,utcParse:gx})}function qw(t){return Uw(cx(t))}function Vw(t){return arguments.length?Rw=qw(t):Rw}hx=cx({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),fx=hx.format,dx=hx.parse,px=hx.utcFormat,gx=hx.utcParse,$w(),Bw();const Hw=(t,e)=>Gy({},t,e);function Ww(t,e){const n=t?Iw(t):zw(),r=e?qw(e):Vw();return Hw(n,r)}function Gw(t,e){const n=arguments.length;return n&&2!==n&&Xm("defaultLocale expects either zero or two arguments."),n?Hw(zw(t),Vw(e)):Hw(zw(),Vw())}function Zw(){return $w(),Bw(),Gw()}var Yw=function(t,e,n,r){const i=ib((e=e||{}).type||"json");return i||Xm("Unknown data format type: "+e.type),t=i(t,e),e.parse&&function(t,e,n,r){if(!t.length)return;const i=Vw();n=n||i.timeParse,r=r||i.utcParse;let o,s,a,l,u,c,h=t.columns||Object.keys(t[0]);"auto"===e&&(e=Iv(t,h)),h=Object.keys(e);const f=h.map(t=>{const i=e[t];let o,s;if(i&&(i.startsWith("date:")||i.startsWith("utc:")))return o=i.split(/:(.+)?/,2),s=o[1],("'"===s[0]&&"'"===s[s.length-1]||'"'===s[0]&&'"'===s[s.length-1])&&(s=s.slice(1,-1)),("utc"===o[0]?r:n)(s);if(!Pv[i])throw Error("Illegal format pattern: "+t+":"+i);return Pv[i]});for(a=0,u=t.length,c=h.length;a<u;++a)for(o=t[a],l=0;l<c;++l)s=h[l],o[s]=f[l](o[s])}(t,e.parse,n,r),Qy(t,"columns")&&delete t.columns,t};const Xw=function(t,e){return e=>({options:e||{},sanitize:Av,load:Cv,fileAccess:!1,file:Dv(null),http:Mv(t)})}("undefined"!=typeof fetch&&fetch);function Qw(t){const e=t||ty,n=[],r={};return n.add=t=>{const i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=t=>{const i=e(t);if(r[i]){r[i]=0;const e=n.indexOf(t);e>=0&&n.splice(e,1)}return n},n}async function Kw(t,e){try{await e(t)}catch(n){t.error(n)}}const Jw=Symbol("vega_id");let tk=1;function ek(t){return!(!t||!nk(t))}function nk(t){return t[Jw]}function rk(t,e){return t[Jw]=e,t}function ik(t){const e=t===Object(t)?t:{data:t};return nk(e)?e:rk(e,tk++)}function ok(t){return sk(t,ik({}))}function sk(t,e){for(const n in t)e[n]=t[n];return e}function ak(t,e){return rk(e,nk(t))}function lk(t,e){return t?e?(n,r)=>t(n,r)||nk(e(n))-nk(e(r)):(e,n)=>t(e,n)||nk(e)-nk(n):null}function uk(t){return t&&t.constructor===ck}function ck(){const t=[],e=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:ck,insert(e){const n=$y(e),r=n.length;for(let i=0;i<r;++i)t.push(n[i]);return this},remove(t){const n=zy(t)?r:e,i=$y(t),o=i.length;for(let e=0;e<o;++e)n.push(i[e]);return this},modify(t,e,r){const o={field:e,value:Hy(r)};return zy(t)?(o.filter=t,i.push(o)):(o.tuple=t,n.push(o)),this},encode(t,e){return zy(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},clean(t){return o=t,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let h,f,d,p,g,m;for(h=0,f=l.length;h<f;++h)u[nk(l[h])]=1;for(h=0,f=e.length;h<f;++h)g=e[h],u[nk(g)]=-1;for(h=0,f=r.length;h<f;++h)p=r[h],l.forEach(t=>{p(t)&&(u[nk(t)]=-1)});for(h=0,f=t.length;h<f;++h)g=t[h],m=nk(g),u[m]?u[m]=1:a.add.push(ik(t[h]));for(h=0,f=l.length;h<f;++h)g=l[h],u[nk(g)]<0&&a.rem.push(g);function y(t,e,n){n?t[e]=n(t):a.encode=e,s||(c[nk(t)]=t)}for(h=0,f=n.length;h<f;++h)d=n[h],g=d.tuple,p=d.field,m=u[nk(g)],m>0&&(y(g,p,d.value),a.modifies(p));for(h=0,f=i.length;h<f;++h)d=i[h],p=d.filter,l.forEach(t=>{p(t)&&u[nk(t)]>0&&y(t,d.field,d.value)}),a.modifies(d.field);if(s)a.mod=e.length||r.length?l.filter(t=>u[nk(t)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(o||null==o&&(e.length||r.length))&&a.clean(!0),a}}}function hk(){Object.defineProperty(this,"_:mod:_",{writable:!0,value:{}})}hk.prototype={set(t,e,n,r){const i=this,o=i[t],s=i["_:mod:_"];return null!=e&&e>=0?(o[e]!==n||r)&&(o[e]=n,s[e+":"+t]=-1,s[t]=-1):(o!==n||r)&&(i[t]=n,s[t]=fy(n)?1+n.length:-1),i},modified(t,e){const n=this["_:mod:_"];if(!arguments.length){for(const t in n)if(n[t])return!0;return!1}if(fy(t)){for(let e=0;e<t.length;++e)if(n[t[e]])return!0;return!1}return null!=e&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this["_:mod:_"]={},this}};let fk=0;const dk=new hk;function pk(t,e,n,r){this.id=++fk,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}function gk(t){return function(e){const n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}pk.prototype={targets(){return this._targets||(this._targets=Qw(Jm))},set(t){return this.value!==t?(this.value=t,1):0},skip:gk(1),modified:gk(2),parameters(t,e,n){e=!1!==e;const r=this._argval=this._argval||new hk,i=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(t,n,s)=>{s instanceof pk?(s!==this&&(e&&s.targets().add(this),o.push(s)),i.push({op:s,name:t,index:n})):r.set(t,n,s)};for(s in t)if(a=t[s],"pulse"===s)$y(a).forEach(t=>{t instanceof pk?t!==this&&(t.targets().add(this),o.push(t)):Xm("Pulse parameters must be operator instances.")}),this.source=a;else if(fy(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(t){const e=this._argval||dk,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===t,e.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,r,i;if(t)for(e=0,n=t.length;e<n;++e)r=t[e],i=r.op,i._targets&&i._targets.remove(this)},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};let mk=0;function yk(t,e,n){this.id=++mk,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function vk(t,e,n){return new yk(t,e,n)}yk.prototype={_filter:ry,_apply:ty,targets(){return this._targets||(this._targets=Qw(Jm))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,r=n?n.length:0;for(let t=0;t<r;++t)n[t].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=vk(t);return this.targets().add(e),e},apply(t){const e=vk(null,t);return this.targets().add(e),e},merge(){const t=vk();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=vk();return this.targets().add(vk(null,null,Wy(t,t=>{const n=t.dataflow;e.receive(t),n&&n.run&&n.run()}))),e},between(t,e){let n=!1;return t.targets().add(vk(null,null,()=>n=!0)),e.targets().add(vk(null,null,()=>n=!1)),this.filter(()=>n)},detach(){}};const bk={skip:!0};function _k(t,e,n,r,i,o){const s=Gy({},o,bk);let a,l;zy(n)||(n=Hy(n)),void 0===r?a=e=>t.touch(n(e)):zy(r)?(l=new pk(null,r,i,!1),a=e=>{l.evaluate(e);const r=n(e),i=l.value;uk(i)?t.pulse(r,i,o):t.update(r,i,s)}):a=e=>t.update(n(e),r,s),e.apply(a)}function xk(t,e,n,r,i,o){if(void 0===r)e.targets().add(n);else{const s=o||{},a=new pk(null,function(t,e){return e=zy(e)?e:Hy(e),t?function(n,r){const i=e(n,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}(n,r),i,!1);a.modified(s.force),a.rank=e.rank,e.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),t.connect(n,[a]))}}const wk={};function kk(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Ek(t,e){const n=[];return kv(t,e,t=>n.push(t)),n}function Sk(t,e){const n={};return t.visit(e,t=>{n[nk(t)]=1}),t=>n[nk(t)]?null:t}function Ok(t,e){return t?(n,r)=>t(n,r)&&e(n,r):e}function Ck(t,e,n,r){const i=this,o=n.length;let s=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n;for(let a=0;a<o;++a){const t=n[a];if(t.stamp===e){if(t.fields){const e=i.fields||(i.fields={});for(const n in t.fields)e[n]=1}t.changed(i.ADD)&&(s|=i.ADD),t.changed(i.REM)&&(s|=i.REM),t.changed(i.MOD)&&(s|=i.MOD)}}this.changes=s}function Ak(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}kk.prototype={StopPropagation:wk,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(t){return new kk(this.dataflow).init(this,t)},clone(){const t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new kk(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},reflow(t){if(t)return this.fork(7).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,Sk(this,1))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return fy(t)?t.forEach(t=>e[t]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return!(!e&&!this.mod.length||!n)&&(arguments.length?fy(t)?t.some(t=>n[t]):n[t]:!!n)},filter(t,e){const n=this;return 1&t&&(n.addF=Ok(n.addF,e)),2&t&&(n.remF=Ok(n.remF,e)),4&t&&(n.modF=Ok(n.modF,e)),16&t&&(n.srcF=Ok(n.srcF,e)),n},materialize(t){const e=this;return 1&(t=t||7)&&e.addF&&(e.add=Ek(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=Ek(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=Ek(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,r=e;if(16&t)return kv(n.source,n.srcF,r),n;1&t&&kv(n.add,n.addF,r),2&t&&kv(n.rem,n.remF,r),4&t&&kv(n.mod,n.modF,r);const i=n.source;if(8&t&&i){const t=n.add.length+n.mod.length;t===i.length||kv(i,t?Sk(n,5):n.srcF,r)}return n}},ev(Ck,kk,{fork(t){const e=new kk(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,t=>e.add.push(t)),t&e.REM&&this.visit(e.REM,t=>e.rem.push(t)),t&e.MOD&&this.visit(e.MOD,t=>e.mod.push(t))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?fy(t)?t.some(t=>n[t]):n[t]:0},filter(){Xm("MultiPulse does not support filtering.")},materialize(){Xm("MultiPulse does not support materialization.")},visit(t,e){const n=this,r=n.pulses,i=r.length;let o=0;if(t&n.SOURCE)for(;o<i;++o)r[o].visit(t,e);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(t,e);return n}});const Dk={skip:!1,force:!1};function Tk(t,e,n,r){let i,o;const s=t[n];for(;n>e&&(o=n-1>>1,i=t[o],r(s,i)<0);)t[n]=i,n=o;return t[n]=s}function Mk(){this.logger(hy()),this.logLevel(ay),this._clock=0,this._rank=0,this._locale=Gw();try{this._loader=Xw()}catch(t){}this._touched=Qw(Jm),this._input={},this._pulse=null,this._heap=function(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),Tk(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let r;return e.length?(r=e[0],e[0]=n,function(t,e,n){const r=e,i=t.length,o=t[e];let s,a=1+(e<<1);for(;a<i;)s=a+1,s<i&&n(t[a],t[s])>=0&&(a=s),t[e]=t[a],a=1+((e=a)<<1);t[e]=o,Tk(t,r,e,n)}(e,0,t)):r=n,r}}}((t,e)=>t.qrank-e.qrank),this._postrun=[]}function Fk(t){return function(){return this._log[t].apply(this,arguments)}}function jk(t,e){pk.call(this,t,null,e)}Mk.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:Fk("error"),warn:Fk("warn"),info:Fk("info"),debug:Fk("debug"),logLevel:Fk("level"),cleanThreshold:1e4,add:function(t,e,n,r){let i,o=1;return t instanceof pk?i=t:t&&t.prototype instanceof pk?i=new t:zy(t)?i=new pk(null,t):(o=0,i=new pk(t,e)),this.rank(i),o&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},connect:function(t,e){const n=t.rank,r=e.length;for(let i=0;i<r;++i)if(n<e[i].rank)return void this.rerank(t)},rank:function(t){t.rank=++this._rank},rerank:function(t){const e=[t];let n,r,i;for(;e.length;)if(this.rank(n=e.pop()),r=n._targets)for(i=r.length;--i>=0;)e.push(n=r[i]),n===t&&Xm("Cycle detected in dataflow graph.")},pulse:function(t,e,n){this.touch(t,n||Dk);const r=new kk(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=e.pulse(r,i),this},touch:function(t,e){const n=e||Dk;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},update:function(t,e,n){const r=n||Dk;return(t.set(e)||r.force)&&this.touch(t,r),this},changeset:ck,ingest:function(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))},parse:function(t,e){const n=this.locale();return Yw(t,e,n.timeParse,n.utcParse)},preload:async function(t,e,n){const r=this,i=r._pending||function(t){let e;const n=new Promise(t=>e=t);return n.requests=0,n.done=()=>{0==--n.requests&&(t._pending=null,e(t))},t._pending=n}(r);i.requests+=1;const o=await r.request(e,n);return r.pulse(t,r.changeset().remove(ry).insert(o.data||[])),i.done(),o},request:async function(t,e){const n=this;let r,i=0;try{r=await n.loader().load(t,{context:"dataflow",response:ob(e&&e.type)});try{r=n.parse(r,e)}catch(o){i=-2,n.warn("Data ingestion failed",t,o)}}catch(o){i=-1,n.warn("Loading failed",t,o)}return{data:r,status:i}},events:function(t,e,n,r){const i=this,o=vk(n,r),s=function(t){t.dataflow=i;try{o.receive(t)}catch(e){i.error(e)}finally{i.run()}};let a;a="string"==typeof t&&"undefined"!=typeof document?document.querySelectorAll(t):$y(t);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(e,s);return o},on:function(t,e,n,r,i){return(t instanceof pk?xk:_k)(this,t,e,n,r,i),this},evaluate:async function(t,e,n){const r=this,i=[];if(r._pulse)return Ak(r);if(r._pending&&await r._pending,e&&await Kw(r,e),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new kk(r,o,t),r._touched.forEach(t=>r._enqueue(t,!0)),r._touched=Qw(Jm);let s,a,l,u=0;try{for(;r._heap.size()>0;)s=r._heap.pop(),s.rank===s.qrank?(a=s.run(r._getPulse(s,t)),a.then?a=await a:a.async&&(i.push(a.async),a=wk),a!==wk&&s._targets&&s._targets.forEach(t=>r._enqueue(t)),++u):r._enqueue(s,!0)}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug("Pulse ".concat(o,": ").concat(u," operators")),l&&(r._postrun=[],r.error(l)),r._postrun.length){const t=r._postrun.sort((t,e)=>e.priority-t.priority);r._postrun=[];for(let e=0;e<t.length;++e)await Kw(r,t[e].callback)}return n&&await Kw(r,n),i.length&&Promise.all(i).then(t=>r.runAsync(null,()=>{t.forEach(t=>{try{t(r)}catch(c){r.error(c)}})})),r},run:function(t,e,n){return this._pulse?Ak(this):(this.evaluate(t,e,n),this)},runAsync:async function(t,e,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(r,r),this._running},runAfter:function(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(r){this.error(r)}},_enqueue:function(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},_getPulse:function(t,e){const n=t.source,r=this._clock;return n&&fy(n)?new Ck(this,r,n.map(t=>t.pulse),e):this._input[t.id]||function(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==wk&&(t.source=e.source),t)}(this._pulse,n&&n.pulse)}},ev(jk,pk,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(t=>this.pulse=t):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const Pk={};function Nk(t){const e=Rk(t);return e&&e.Definition||null}function Rk(t){return t=t&&t.toLowerCase(),Qy(Pk,t)?Pk[t]:null}function $k(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Ik(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function zk(t,e,n=0,r=t.length-1,i=n_){for(;r>n;){if(r-n>600){const o=r-n+1,s=e-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);zk(t,e,Math.max(n,Math.floor(e-s*l/o+u)),Math.min(r,Math.floor(e+(o-s)*l/o+u)),i)}const o=t[e];let s=n,a=r;for(Lk(t,n,e),i(t[r],o)>0&&Lk(t,n,r);s<a;){for(Lk(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}0===i(t[n],o)?Lk(t,n,a):(++a,Lk(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Lk(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}var Uk=function(t){return null===t?NaN:+t};function Bk(t,e,n){if(r=(t=Float64Array.from(function*(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n))).length){if((e=+e)<=0||r<2)return Ik(t);if(e>=1)return $k(t);var r,i=(r-1)*e,o=Math.floor(i),s=$k(zk(t,o).subarray(0,o+1));return s+(Ik(t.subarray(o+1))-s)*(i-o)}}function qk(t,e,n=Uk){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(i-o)}}var Vk=function(t,e){return Bk(t,.5,e)};function*Hk(t,e){if(null==e)for(let n of t)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)r=e(r,++n,t),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function Wk(t,e,n){const r=Float64Array.from(Hk(t,n));return r.sort(n_),e.map(t=>qk(r,t))}function Gk(t,e){return Wk(t,[.25,.5,.75],e)}function Zk(t,e){const n=t.length,r=function(t,e){const n=function(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let s of t)null!=s&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i));else{let s=-1;for(let a of t)null!=(a=e(a,++s,t))&&(a=+a)>=a&&(n=a-i,i+=n/++r,o+=n*(a-i))}if(r>1)return o/(r-1)}(t,e);return n?Math.sqrt(n):n}(t,e),i=Gk(t,e);return 1.06*(Math.min(r,(i[2]-i[0])/1.34)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Yk(t){const e=t.maxbins||20,n=t.base||10,r=Math.log(n),i=t.divide||[5,2];let o,s,a,l,u,c,h=t.extent[0],f=t.extent[1];const d=t.span||f-h||Math.abs(h)||1;if(t.step)o=t.step;else if(t.steps){for(l=d/e,u=0,c=t.steps.length;u<c&&t.steps[u]<l;++u);o=t.steps[Math.max(0,u-1)]}else{for(s=Math.ceil(Math.log(e)/r),a=t.minstep||0,o=Math.max(a,Math.pow(n,Math.round(Math.log(d)/r)-s));Math.ceil(d/o)>e;)o*=n;for(u=0,c=i.length;u<c;++u)l=o/i[u],l>=a&&d/l<=e&&(o=l)}l=Math.log(o);const p=Math.pow(n,-(l>=0?0:1+~~(-l/r))-1);return(t.nice||void 0===t.nice)&&(l=Math.floor(h/o+p)*o,h=h<l?l-o:l,f=Math.ceil(f/o)*o),{start:h,stop:f===h?h+o:f,step:o}}var Xk=Math.random;function Qk(t){Xk=t}function Kk(t,e,n,r){if(!t.length)return[void 0,void 0];const i=Float64Array.from(Hk(t,r)),o=i.length,s=e;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Xk()*o)];c[u]=a/o}return c.sort(n_),[Bk(c,n/2),Bk(c,1-n/2)]}function Jk(t,e,n,r){r=r||(t=>t);const i=t.length,o=new Float64Array(i);let s,a=0,l=1,u=r(t[0]),c=u,h=u+e;for(;l<i;++l){if(s=r(t[l]),s>=h){for(c=(u+c)/2;a<l;++a)o[a]=c;h=s+e,u=s}c=s}for(c=(u+c)/2;a<l;++a)o[a]=c;return n?function(t,e){const n=t.length;let r,i,o=0,s=1;for(;t[o]===t[s];)++s;for(;s<n;){for(r=s+1;t[s]===t[r];)++r;if(t[s]-t[s-1]<e){for(i=s+(o+r-s-s>>1);i<s;)t[i++]=t[s];for(;i>s;)t[i--]=t[o]}o=s,s=r}return t}(o,e+e/4):o}function tE(t){return function(){return(t=(1103515245*t+12345)%2147483647)/2147483647}}function eE(t,e){let n,r,i;null==e&&(e=t,t=0);const o={min(t){return arguments.length?(n=t||0,i=r-n,o):n},max(t){return arguments.length?(r=t||0,i=r-n,o):r},sample:()=>n+Math.floor(i*Xk()),pdf:t=>t===Math.floor(t)&&t>=n&&t<r?1/i:0,cdf(t){const e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},icdf:t=>t>=0&&t<=1?n-1+Math.floor(t*i):NaN};return o.min(t).max(e)}const nE=Math.sqrt(2*Math.PI),rE=Math.SQRT2;let iE=NaN;function oE(t,e){t=t||0,e=null==e?1:e;let n,r,i=0,o=0;if(iE==iE)i=iE,iE=NaN;else{do{i=2*Xk()-1,o=2*Xk()-1,n=i*i+o*o}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,iE=o*r}return t+i*e}function sE(t,e,n){const r=(t-(e||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*nE)}function aE(t,e,n){const r=(t-(e=e||0))/(n=null==n?1:n),i=Math.abs(r);let o;if(i>37)o=0;else{const t=Math.exp(-i*i/2);let e;i<7.07106781186547?(e=.0352624965998911*i+.700383064443688,e=e*i+6.37396220353165,e=e*i+33.912866078383,e=e*i+112.079291497871,e=e*i+221.213596169931,e=e*i+220.206867912376,o=t*e,e=.0883883476483184*i+1.75566716318264,e=e*i+16.064177579207,e=e*i+86.7807322029461,e=e*i+296.564248779674,e=e*i+637.333633378831,e=e*i+793.826512519948,e=e*i+440.413735824752,o/=e):(e=i+.65,e=i+4/e,e=i+3/e,e=i+2/e,e=i+1/e,o=t/e/2.506628274631)}return r>0?1-o:o}function lE(t,e,n){return t<0||t>1?NaN:(e||0)+(null==n?1:n)*rE*function(t){let e,n=-Math.log((1-t)*(1+t));return n<6.25?(n-=3.125,e=-364441206401782e-35,e=e*n-16850591381820166e-35,e=128584807152564e-32+e*n,e=11157877678025181e-33+e*n,e=e*n-1333171662854621e-31,e=20972767875968562e-33+e*n,e=6637638134358324e-30+e*n,e=e*n-4054566272975207e-29,e=e*n-8151934197605472e-29,e=26335093153082323e-28+e*n,e=e*n-12975133253453532e-27,e=e*n-5415412054294628e-26,e=1.0512122733215323e-9+e*n,e=e*n-4.112633980346984e-9,e=e*n-2.9070369957882005e-8,e=4.2347877827932404e-7+e*n,e=e*n-13654692000834679e-22,e=e*n-13882523362786469e-21,e=.00018673420803405714+e*n,e=e*n-.000740702534166267,e=e*n-.006033670871430149,e=.24015818242558962+e*n,e=1.6536545626831027+e*n):n<16?(n=Math.sqrt(n)-3.25,e=2.2137376921775787e-9,e=9.075656193888539e-8+e*n,e=e*n-2.7517406297064545e-7,e=1.8239629214389228e-8+e*n,e=15027403968909828e-22+e*n,e=e*n-4013867526981546e-21,e=29234449089955446e-22+e*n,e=12475304481671779e-21+e*n,e=e*n-47318229009055734e-21,e=6828485145957318e-20+e*n,e=24031110387097894e-21+e*n,e=e*n-.0003550375203628475,e=.0009532893797373805+e*n,e=e*n-.0016882755560235047,e=.002491442096107851+e*n,e=e*n-.003751208507569241,e=.005370914553590064+e*n,e=1.0052589676941592+e*n,e=3.0838856104922208+e*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,e=-27109920616438573e-27,e=e*n-2.555641816996525e-10,e=1.5076572693500548e-9+e*n,e=e*n-3.789465440126737e-9,e=7.61570120807834e-9+e*n,e=e*n-1.496002662714924e-8,e=2.914795345090108e-8+e*n,e=e*n-6.771199775845234e-8,e=2.2900482228026655e-7+e*n,e=e*n-9.9298272942317e-7,e=4526062597223154e-21+e*n,e=e*n-1968177810553167e-20,e=7599527703001776e-20+e*n,e=e*n-.00021503011930044477,e=e*n-.00013871931833623122,e=1.0103004648645344+e*n,e=4.849906401408584+e*n):e=1/0,e*t}(2*t-1)}function uE(t,e){let n,r;const i={mean(t){return arguments.length?(n=t||0,i):n},stdev(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>oE(n,r),pdf:t=>sE(t,n,r),cdf:t=>aE(t,n,r),icdf:t=>lE(t,n,r)};return i.mean(t).stdev(e)}function cE(t,e){const n=uE();let r=0;const i={data(n){return arguments.length?(t=n,r=n?n.length:0,i.bandwidth(e)):t},bandwidth(n){return arguments.length?(!(e=n)&&t&&(e=Zk(t)),i):e},sample:()=>t[~~(Xk()*r)]+e*n.sample(),pdf(i){let o=0,s=0;for(;s<r;++s)o+=n.pdf((i-t[s])/e);return o/e/r},cdf(i){let o=0,s=0;for(;s<r;++s)o+=n.cdf((i-t[s])/e);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function hE(t,e){return t=t||0,e=null==e?1:e,Math.exp(t+oE()*e)}function fE(t,e,n){if(t<=0)return 0;e=e||0,n=null==n?1:n;const r=(Math.log(t)-e)/n;return Math.exp(-.5*r*r)/(n*nE*t)}function dE(t,e,n){return aE(Math.log(t),e,n)}function pE(t,e,n){return Math.exp(lE(t,e,n))}function gE(t,e){let n,r;const i={mean(t){return arguments.length?(n=t||0,i):n},stdev(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>hE(n,r),pdf:t=>fE(t,n,r),cdf:t=>dE(t,n,r),icdf:t=>pE(t,n,r)};return i.mean(t).stdev(e)}function mE(t,e){let n,r=0;const i={weights(t){return arguments.length?(n=function(t){const e=[];let n,i=0;for(n=0;n<r;++n)i+=e[n]=null==t[n]?1:+t[n];for(n=0;n<r;++n)e[n]/=i;return e}(e=t||[]),i):e},distributions(n){return arguments.length?(n?(r=n.length,t=n):(r=0,t=[]),i.weights(e)):t},sample(){const e=Xk();let i=t[r-1],o=n[0],s=0;for(;s<r-1;o+=n[++s])if(e<o){i=t[s];break}return i.sample()},pdf(e){let i=0,o=0;for(;o<r;++o)i+=n[o]*t[o].pdf(e);return i},cdf(e){let i=0,o=0;for(;o<r;++o)i+=n[o]*t[o].cdf(e);return i},icdf(){throw Error("Mixture icdf not supported.")}};return i.distributions(t).weights(e)}function yE(t,e){return null==e&&(e=null==t?1:t,t=0),t+(e-t)*Xk()}function vE(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function bE(t,e,n){return null==n&&(n=null==e?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function _E(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function xE(t,e){let n,r;const i={min(t){return arguments.length?(n=t||0,i):n},max(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>yE(n,r),pdf:t=>vE(t,n,r),cdf:t=>bE(t,n,r),icdf:t=>_E(t,n,r)};return null==e&&(e=null==t?1:t,t=0),i.min(t).max(e)}function wE(t,e,n,r){const i=r-t*t,o=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-o*t,o]}function kE(t,e,n,r){t=t.filter(t=>{let r=e(t),i=n(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i}),r&&t.sort((t,n)=>e(t)-e(n));const i=t.length,o=new Float64Array(i),s=new Float64Array(i);let a,l,u,c=0,h=0,f=0;for(u of t)o[c]=a=+e(u),s[c]=l=+n(u),++c,h+=(a-h)/c,f+=(l-f)/c;for(c=0;c<i;++c)o[c]-=h,s[c]-=f;return[o,s,h,f]}function EE(t,e,n,r){let i,o,s=-1;for(const a of t)i=e(a),o=n(a),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++s)}function SE(t,e,n,r,i){let o=0,s=0;return EE(t,e,n,(t,e)=>{const n=e-i(t),a=e-r;o+=n*n,s+=a*a}),1-o/s}function OE(t,e,n){let r=0,i=0,o=0,s=0,a=0;EE(t,e,n,(t,e)=>{++a,r+=(t-r)/a,i+=(e-i)/a,o+=(t*e-o)/a,s+=(t*t-s)/a});const l=wE(r,i,o,s),u=t=>l[0]+l[1]*t;return{coef:l,predict:u,rSquared:SE(t,e,n,i,u)}}function CE(t,e,n){let r=0,i=0,o=0,s=0,a=0;EE(t,e,n,(t,e)=>{++a,t=Math.log(t),r+=(t-r)/a,i+=(e-i)/a,o+=(t*e-o)/a,s+=(t*t-s)/a});const l=wE(r,i,o,s),u=t=>l[0]+l[1]*Math.log(t);return{coef:l,predict:u,rSquared:SE(t,e,n,i,u)}}function AE(t,e,n){const[r,i,o,s]=kE(t,e,n);let a,l,u,c=0,h=0,f=0,d=0,p=0;EE(t,e,n,(t,e)=>{a=r[p++],l=Math.log(e),u=a*e,c+=(e*l-c)/p,h+=(u-h)/p,f+=(u*l-f)/p,d+=(a*u-d)/p});const[g,m]=wE(h/s,c/s,f/s,d/s),y=t=>Math.exp(g+m*(t-o));return{coef:[Math.exp(g-m*o),m],predict:y,rSquared:SE(t,e,n,s,y)}}function DE(t,e,n){let r=0,i=0,o=0,s=0,a=0,l=0;EE(t,e,n,(t,e)=>{const n=Math.log(t),u=Math.log(e);++l,r+=(n-r)/l,i+=(u-i)/l,o+=(n*u-o)/l,s+=(n*n-s)/l,a+=(e-a)/l});const u=wE(r,i,o,s),c=t=>u[0]*Math.pow(t,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:SE(t,e,n,a,c)}}function TE(t,e,n){const[r,i,o,s]=kE(t,e,n),a=r.length;let l,u,c,h,f=0,d=0,p=0,g=0,m=0;for(l=0;l<a;)u=r[l],c=i[l++],h=u*u,f+=(h-f)/l,d+=(h*u-d)/l,p+=(h*h-p)/l,g+=(u*c-g)/l,m+=(h*c-m)/l;const y=p-f*f,v=f*y-d*d,b=(m*f-g*d)/v,_=(g*y-m*d)/v,x=-b*f,w=t=>b*(t-=o)*t+_*t+x+s;return{coef:[x-_*o+b*o*o+s,_-2*b*o,b],predict:w,rSquared:SE(t,e,n,s,w)}}function ME(t,e,n,r){if(1===r)return OE(t,e,n);if(2===r)return TE(t,e,n);const[i,o,s,a]=kE(t,e,n),l=i.length,u=[],c=[],h=r+1;let f,d,p,g,m;for(f=0;f<h;++f){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],f)*o[p];for(u.push(g),m=new Float64Array(h),d=0;d<h;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],f+d);m[d]=g}c.push(m)}c.push(u);const y=function(t){const e=t.length-1,n=[];let r,i,o,s,a;for(r=0;r<e;++r){for(s=r,i=r+1;i<e;++i)Math.abs(t[r][i])>Math.abs(t[r][s])&&(s=i);for(o=r;o<e+1;++o)a=t[o][r],t[o][r]=t[o][s],t[o][s]=a;for(i=r+1;i<e;++i)for(o=e;o>=r;o--)t[o][i]-=t[o][r]*t[r][i]/t[r][r]}for(i=e-1;i>=0;--i){for(a=0,o=i+1;o<e;++o)a+=t[o][i]*n[o];n[i]=(t[e][i]-a)/t[i][i]}return n}(c),v=t=>{let e=a+y[0]+y[1]*(t-=s)+y[2]*t*t;for(f=3;f<h;++f)e+=y[f]*Math.pow(t,f);return e};return{coef:FE(h,y,-s,a),predict:v,rSquared:SE(t,e,n,a,v)}}function FE(t,e,n,r){const i=Array(t);let o,s,a,l;for(o=0;o<t;++o)i[o]=0;for(o=t-1;o>=0;--o)for(a=e[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function jE(t,e,n,r){const[i,o,s,a]=kE(t,e,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),h=new Float64Array(l),f=new Float64Array(l).fill(1);for(let d=-1;++d<=2;){const t=[0,u-1];for(let n=0;n<l;++n){const e=i[n],r=t[0],s=t[1];let a=0,l=0,u=0,d=0,p=0;const g=1/Math.abs(i[e-i[r]>i[s]-e?r:s]-e||1);for(let t=r;t<=s;++t){const n=i[t],r=o[t],s=PE(Math.abs(e-n)*g)*f[t],c=n*s;a+=s,l+=c,u+=r*s,d+=r*c,p+=n*c}const[m,y]=wE(l/a,u/a,d/a,p/a);c[n]=m+y*e,h[n]=Math.abs(o[n]-c[n]),NE(i,n+1,t)}if(2===d)break;const e=Vk(h);if(Math.abs(e)<1e-12)break;for(let n,r,i=0;i<l;++i)n=h[i]/(6*e),f[i]=n>=1?1e-12:(r=1-n*n)*r}return function(t,e,n,r){const i=t.length,o=[];let s,a=0,l=0,u=[];for(;a<i;++a)s=t[a]+n,u[0]===s?u[1]+=(e[a]-u[1])/++l:(l=0,u[1]+=r,u=[s,e[a]],o.push(u));return u[1]+=r,o}(i,c,s,a)}function PE(t){return(t=1-t*t*t)*t*t}function NE(t,e,n){const r=t[e];let i=n[0],o=n[1]+1;if(!(o>=t.length))for(;e>i&&t[o]-r<=r-t[i];)n[0]=++i,n[1]=o,++o}const RE=.1*Math.PI/180;function $E(t,e,n,r){n=n||25,r=Math.max(n,r||200);const i=e=>[e,t(e)],o=e[0],s=e[1],a=s-o,l=a/r,u=[i(o)],c=[];if(n===r){for(let t=1;t<r;++t)u.push(i(o+t/n*a));return u.push(i(s)),u}c.push(i(s));for(let d=n;--d>0;)c.push(i(o+d/n*a));let h=u[0],f=c[c.length-1];for(;f;){const t=i((h[0]+f[0])/2);t[0]-h[0]>=l&&IE(h,t,f)>RE?c.push(t):(h=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function IE(t,e,n){const r=Math.atan2(n[1]-t[1],n[0]-t[0]),i=Math.atan2(e[1]-t[1],e[0]-t[0]);return Math.abs(r-i)}var zE=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o};function LE(t){return t&&t.length?1===t.length?t[0]:(e=t,t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}):function(){return""};var e}function UE(t,e,n){return n||t+(e?"_"+e:"")}const BE=()=>{},qE={init:BE,add:BE,rem:BE,idx:0},VE={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||void 0===t.min)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||void 0===t.max)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},HE=Object.keys(VE);function WE(t,e){return VE[t](e)}function GE(t,e){return t.idx-e.idx}function ZE(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function YE(t,e){null!=t&&""!==t?t==t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e))):++this.missing}function XE(t,e){null!=t&&""!==t?t==t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e))):--this.missing}function QE(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function KE(t,e){const n=e||ty,r=function(t){const e={};t.forEach(t=>e[t.name]=t);const n=t=>{t.req&&t.req.forEach(t=>{e[t]||n(e[t]=VE[t]())})};return t.forEach(n),Object.values(e).sort(GE)}(t),i=t.slice().sort(GE);function o(t){this._ops=r,this._out=i,this.cell=t,this.init()}return o.prototype.init=ZE,o.prototype.add=YE,o.prototype.rem=XE,o.prototype.set=QE,o.prototype.get=n,o.fields=t.map(t=>t.out),o}function JE(t){this._key=t?Km(t):nk,this.reset()}HE.forEach(t=>{VE[t]=function(t,e){return n=>Gy({name:t,out:n||t},qE,e)}(t,VE[t])});const tS=JE.prototype;function eS(t){jk.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function nS(t){jk.call(this,null,t)}function rS(t,e,n){const r=t;let i=e||[],o=n||[],s={},a=0;return{add:t=>o.push(t),remove:t=>s[r(t)]=++a,size:()=>i.length,data:(t,e)=>(a&&(i=i.filter(t=>!s[r(t)]),s={},a=0),e&&t&&i.sort(t),o.length&&(i=t?fv(t,i,o.sort(t)):i.concat(o),o=[]),i)}}function iS(t){jk.call(this,[],t)}function oS(t){pk.call(this,null,sS,t)}function sS(t){return this.value&&!t.modified()?this.value:Ly(t.fields,t.orders)}function aS(t){jk.call(this,null,t)}function lS(t){jk.call(this,null,t)}tS.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},tS.add=function(t){this._add.push(t)},tS.rem=function(t){this._rem.push(t)},tS.values=function(){if(this._get=null,0===this._rem.length)return this._add;const t=this._add,e=this._rem,n=this._key,r=t.length,i=e.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(e[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=t[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o},tS.distinct=function(t){const e=this.values(),n={};let r,i=e.length,o=0;for(;--i>=0;)r=t(e[i])+"",Qy(n,r)||(n[r]=1,++o);return o},tS.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=Yy(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},tS.argmin=function(t){return this.extent(t)[0]||{}},tS.argmax=function(t){return this.extent(t)[1]||{}},tS.min=function(t){const e=this.extent(t)[0];return null!=e?t(e):void 0},tS.max=function(t){const e=this.extent(t)[1];return null!=e?t(e):void 0},tS.quartile=function(t){return this._get===t&&this._q||(this._q=Gk(this.values(),t),this._get=t),this._q},tS.q1=function(t){return this.quartile(t)[0]},tS.q2=function(t){return this.quartile(t)[1]},tS.q3=function(t){return this.quartile(t)[2]},tS.ci=function(t){return this._get===t&&this._ci||(this._ci=Kk(this.values(),1e3,.05,t),this._get=t),this._ci},tS.ci0=function(t){return this.ci(t)[0]},tS.ci1=function(t){return this.ci(t)[1]},eS.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:HE},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},ev(eS,jk,{transform(t,e){const n=this,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.modified();return n.stamp=r.stamp,n.value&&(i||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):{},e.visit(e.SOURCE,t=>n.add(t))):(n.value=n.value||n.init(t),e.visit(e.REM,t=>n.rem(t)),e.visit(e.ADD,t=>n.add(t))),r.modifies(n._outputs),n._drop=!1!==t.drop,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const t=this,e=t.value,n=t._dnames,r=n.map(()=>({})),i=n.length;function o(t){let e,o,s,a;for(e in t)for(s=t[e].tuple,o=0;o<i;++o)r[o][a=s[n[o]]]=a}o(t._prev),o(e),function o(s,a,l){const u=n[l],c=r[l++];for(const n in c){const r=s?s+"|"+n:n;a[u]=c[n],l<i?o(r,a,l):e[r]||t.cell(r,a)}}("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],r={};function i(t){const n=$y(Wm(t)),i=n.length;let o,s=0;for(;s<i;++s)r[o=n[s]]||(r[o]=1,e.push(o))}this._dims=$y(t.groupby),this._dnames=this._dims.map(t=>{const e=Hm(t);return i(t),n.push(e),e}),this.cellkey=t.key?t.key:LE(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=t.fields||[null],s=t.ops||["count"],a=t.as||[],l=o.length,u={};let c,h,f,d,p,g;for(l!==s.length&&Xm("Unmatched number of fields and aggregate ops."),g=0;g<l;++g)c=o[g],h=s[g],null==c&&"count"!==h&&Xm("Null aggregate field specified."),d=Hm(c),p=UE(h,d,a[g]),n.push(p),"count"!==h?(f=u[d],f||(i(c),f=u[d]=[],f.field=c,this._measures.push(f)),"count"!==h&&(this._countOnly=!1),f.push(WE(h,p))):this._counts.push(p);return this._measures=this._measures.map(t=>KE(t,t.field)),{}},cellkey:LE(),cell(t,e){let n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const t=this._measures,e=t.length;n.agg=Array(e);for(let r=0;r<e;++r)n.agg[r]=new t[r](n)}return n.store&&(n.data=new JE),n},newtuple(t,e){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](t);return e?ak(e.tuple,o):ik(o)},clean(){const t=this.value;for(const e in t)0===t[e].num&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let r=0,i=n.length;r<i;++r)e[n[r]]=t.num;if(!this._countOnly){const n=t.agg;for(let t=0,r=n.length;t<r;++t)n[t].set(e)}return e},changes(t){const e=this._adds,n=this._mods,r=this._prev,i=this._drop,o=t.add,s=t.rem,a=t.mod;let l,u,c,h;if(r)for(u in r)l=r[u],i&&!l.num||s.push(l.tuple);for(c=0,h=this._alen;c<h;++c)o.push(this.celltuple(e[c])),e[c]=null;for(c=0,h=this._mlen;c<h;++c)l=n[c],(0===l.num&&i?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,t}}),nS.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},ev(nS,jk,{transform(t,e){const n=!1!==t.interval,r=this._bins(t),i=r.start,o=r.step,s=t.as||["bin0","bin1"],a=s[0],l=s[1];let u;return u=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(Wm(t.field))?e.ADD_MOD:e.ADD,e.visit(u,n?t=>{const e=r(t);t[a]=e,t[l]=null==e?null:i+o*(1+(e-i)/o)}:t=>t[a]=r(t)),e.modifies(n?s:a)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=Yk(t),r=n.step;let i,o,s=n.start,a=s+Math.ceil((n.stop-s)/r)*r;null!=(i=t.anchor)&&(o=i-(s+r*Math.floor((i-s)/r)),s+=o,a+=o);const l=function(t){let n=by(e(t));return null==n?null:n<s?-1/0:n>a?1/0:(n=Math.max(s,Math.min(n,a-r)),s+r*Math.floor(1e-14+(n-s)/r))};return l.start=s,l.stop=n.stop,l.step=r,this.value=Vm(l,Wm(e),t.name||"bin_"+Hm(e))}}),iS.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},ev(iS,jk,{transform(t,e){const n=e.fork(e.ALL),r=rS(nk,this.value,n.materialize(n.ADD).add),i=t.sort,o=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(lk(i),o),e.source&&e.source.root&&(this.value.root=e.source.root),n}}),ev(oS,pk),aS.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},ev(aS,jk,{transform(t,e){const n=e=>n=>{for(var r,i=function(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(n)}(a(n),t.case,o)||[],l=0,u=i.length;l<u;++l)s.test(r=i[l])||e(r)},r=this._parameterCheck(t,e),i=this._counts,o=this._match,s=this._stop,a=t.field,l=t.as||["text","count"],u=n(t=>i[t]=1+(i[t]||0)),c=n(t=>i[t]-=1);return r?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,c)),this._finish(e,l)},_parameterCheck(t,e){let n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,r=this._tuples||(this._tuples={}),i=e[0],o=e[1],s=t.fork(t.NO_SOURCE|t.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=ik({}),l[i]=a,l[o]=u,s.add.push(l)):0===u?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(e)}}),lS.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},ev(lS,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.as||["a","b"],i=r[0],o=r[1],s=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=e.materialize(e.SOURCE).source,n.add=this.value=function(t,e,n,r){for(var i,o,s=[],a={},l=t.length,u=0;u<l;++u)for(a[e]=o=t[u],i=0;i<l;++i)a[n]=t[i],r(a)&&(s.push(ik(a)),(a={})[e]=o);return s}(a,i,o,t.filter||ry)):n.mod=a,n.source=this.value,n.modifies(r)}});const uS={kde:cE,mixture:mE,normal:uE,lognormal:gE,uniform:xE};function cS(t,e){const n=t.function;Qy(uS,n)||Xm("Unknown distribution function: "+n);const r=uS[n]();for(const i in t)"field"===i?r.data((t.from||e()).map(t[i])):"distributions"===i?r[i](t[i].map(t=>cS(t,e))):"function"==typeof r[i]&&r[i](t[i]);return r}function hS(t){jk.call(this,null,t)}const fS=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function dS(t,e){return t?t.map((t,n)=>e[n]||Hm(t)):null}function pS(t,e,n){const r=[],i=t=>t(l);let o,s,a,l,u,c;if(null==e)r.push(t.map(n));else for(o={},s=0,a=t.length;s<a;++s)l=t[s],u=e.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}function gS(t){jk.call(this,null,t)}function mS(t){pk.call(this,null,yS,t),this.modified(!0)}function yS(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:Vm(n=>e(n,t),Wm(e),Hm(e))}function vS(t){jk.call(this,[void 0,void 0],t)}function bS(t,e){pk.call(this,t),this.parent=e,this.count=0}function _S(t){jk.call(this,{},t),this._keys=Jy();const e=this._targets=[];e.active=0,e.forEach=t=>{for(let n=0,r=e.active;n<r;++n)t(e[n],n,e)}}function xS(t){pk.call(this,null,wS,t)}function wS(t){return this.value&&!t.modified()?this.value:fy(t.name)?$y(t.name).map(t=>Km(t)):Km(t.name,t.as)}function kS(t){jk.call(this,Jy(),t)}function ES(t){jk.call(this,[],t)}function SS(t){jk.call(this,[],t)}function OS(t){jk.call(this,null,t)}function CS(t){jk.call(this,[],t)}hS.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:fS.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:fS},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},ev(hS,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=cS(t.distribution,function(t){return()=>t.materialize(t.SOURCE).source}(e)),i=t.steps||t.minsteps||25,o=t.steps||t.maxsteps||200;let s=t.method||"pdf";"pdf"!==s&&"cdf"!==s&&Xm("Invalid density method: "+s),t.extent||r.data||Xm("Missing density extent parameter."),s=r[s];const a=t.as||["value","density"],l=$E(s,t.extent||Zy(r.data()),i,o).map(t=>{const e={};return e[a[0]]=t[0],e[a[1]]=t[1],ik(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),gS.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},ev(gS,jk,{transform(t,e){if(this.value&&!t.modified()&&!e.changed())return e;const n=e.materialize(e.SOURCE).source,r=pS(e.source,t.groupby,ty),i=t.smooth||!1,o=t.field,s=t.step||((t,e)=>gv(Zy(t,e))/30)(n,o),a=lk((t,e)=>o(t)-o(e)),l=t.as||"bin",u=r.length;let c,h=1/0,f=-1/0,d=0;for(;d<u;++d){const t=r[d].sort(a);c=-1;for(const e of Jk(t,s,i,o))e<h&&(h=e),e>f&&(f=e),t[++c][l]=e}return this.value={start:h,stop:f,step:s},e.reflow(!0).modifies(l)}}),ev(mS,pk),vS.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},ev(vS,jk,{transform(t,e){const n=this.value,r=t.field,i=e.changed()||e.modified(r.fields)||t.modified("field");let o=n[0],s=n[1];if((i||null==o)&&(o=1/0,s=-1/0),e.visit(i?e.SOURCE:e.ADD,t=>{const e=by(r(t));null!=e&&(e<o&&(o=e),e>s&&(s=e))}),!Number.isFinite(o)||!Number.isFinite(s)){let t=Hm(r);t&&(t=' for field "'.concat(t,'"')),e.dataflow.warn("Infinite extent".concat(t,": [").concat(o,", ").concat(s,"]")),o=s=void 0}this.value=[o,s]}}),ev(bS,pk,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}}),ev(_S,jk,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,r){const i=this.value;let o,s,a=Qy(i,t)&&i[t];return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(s=r||(s=this._group[t])&&s.tuple,o=n.dataflow,a=new bS(n.fork(n.NO_SOURCE),this),o.add(a).connect(e(o,t,s)),i[t]=a,this.activate(a)),a},clean(){const t=this.value;for(const e in t)if(0===t[e].count){const n=t[e].detachSubflow;n&&n(),delete t[e]}},initTargets(){const t=this._targets,e=t.length;for(let n=0;n<e&&null!=t[n];++n)t[n]=null;t.active=0},transform(t,e){const n=e.dataflow,r=t.key,i=t.subflow,o=this._keys,s=t.modified("key"),a=t=>this.subflow(t,i,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,t=>{const e=nk(t),n=o.get(e);void 0!==n&&(o.delete(e),a(n).rem(t))}),e.visit(e.ADD,t=>{const e=r(t);o.set(nk(t),e),a(e).add(t)}),s||e.modified(r.fields)?e.visit(e.MOD,t=>{const e=nk(t),n=o.get(e),i=r(t);n===i?a(i).mod(t):(o.set(e,i),a(n).rem(t),a(i).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,t=>{a(o.get(nk(t))).mod(t)}),s&&e.visit(e.REFLOW,t=>{const e=nk(t),n=o.get(e),i=r(t);n!==i&&(o.set(e,i),a(n).rem(t),a(i).add(t))}),e.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),e}}),ev(xS,pk),kS.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},ev(kS,jk,{transform(t,e){const n=e.dataflow,r=this.value,i=e.fork(),o=i.add,s=i.rem,a=i.mod,l=t.expr;let u=!0;function c(e){const n=nk(e),i=l(e,t),c=r.get(n);i&&c?(r.delete(n),o.push(e)):i||c?u&&i&&!c&&a.push(e):(r.set(n,1),s.push(e))}return e.visit(e.REM,t=>{const e=nk(t);r.has(e)?r.delete(e):s.push(t)}),e.visit(e.ADD,e=>{l(e,t)?o.push(e):r.set(nk(e),1)}),e.visit(e.MOD,c),t.modified()&&(u=!1,e.visit(e.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),ES.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},ev(ES,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=dS(r,t.as||[]),o=t.index||null,s=i.length;return n.rem=this.value,e.visit(e.SOURCE,t=>{const e=r.map(e=>e(t)),a=e.reduce((t,e)=>Math.max(t,e.length),0);let l,u,c,h=0;for(;h<a;++h){for(u=ok(t),l=0;l<s;++l)u[i[l]]=null==(c=e[l][h])?null:c;o&&(u[o]=h),n.add.push(u)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}}),SS.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},ev(SS,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(Hm),o=t.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,e.visit(e.SOURCE,t=>{for(let e,o=0;o<l;++o)e=ok(t),e[s]=i[o],e[a]=r[o](t),n.add.push(e)}),this.value=n.source=n.add,n.modifies(o)}}),OS.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},ev(OS,jk,{transform(t,e){const n=t.expr,r=t.as,i=t.modified(),o=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)||e.modified(r)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(o,e=>e[r]=n(e,t))}}),ev(CS,jk,{transform(t,e){const n=e.fork(e.ALL),r=t.generator;let i,o,s,a=this.value,l=t.size-a.length;if(l>0){for(i=[];--l>=0;)i.push(s=ik(r(t))),a.push(s);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else o=a.slice(0,-l),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,a=a.slice(-l);return n.source=this.value=a,n}});const AS={value:"value",median:Vk,mean:function(t,e){let n=0,r=0;if(void 0===e)for(let i of t)null!=i&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},min:Ik,max:$k},DS=[];function TS(t){jk.call(this,[],t)}function MS(t){eS.call(this,t)}function FS(t){jk.call(this,null,t)}function jS(t){pk.call(this,null,PS,t)}function PS(t){return this.value&&!t.modified()?this.value:uv(t.fields,t.flat)}function NS(t){jk.call(this,[],t),this._pending=null}function RS(t,e,n){n.forEach(ik);const r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.source=r.add=n,t._pending=null,r.rem.length&&r.clean(!0),r}function $S(t){jk.call(this,{},t)}function IS(t){pk.call(this,null,zS,t)}function zS(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let r,i,o=1/0,s=-1/0;for(r=0;r<n;++r)i=e[r],i[0]<o&&(o=i[0]),i[1]>s&&(s=i[1]);return[o,s]}function LS(t){pk.call(this,null,US,t)}function US(t){return this.value&&!t.modified()?this.value:t.values.reduce((t,e)=>t.concat(e),[])}function BS(t){jk.call(this,null,t)}function qS(t){eS.call(this,t)}function VS(t){_S.call(this,t)}function HS(t){jk.call(this,null,t)}function WS(t){jk.call(this,null,t)}function GS(t){jk.call(this,null,t)}function ZS(t){jk.call(this,null,t)}function YS(t){jk.call(this,[],t),this.count=0}function XS(t){jk.call(this,null,t)}function QS(t){jk.call(this,null,t),this.modified(!0)}function KS(t){jk.call(this,null,t)}TS.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},ev(TS,jk,{transform(t,e){var n,r,i,o,s,a,l,u,c,h,f=e.fork(e.ALL),d=function(t){var e,n=t.method||AS.value;if(null!=AS[n])return n===AS.value?(e=void 0!==t.value?t.value:0,()=>e):AS[n];Xm("Unrecognized imputation method: "+n)}(t),p=function(t){const e=t.field;return t=>t?e(t):NaN}(t),g=Hm(t.field),m=Hm(t.key),y=(t.groupby||[]).map(Hm),v=function(t,e,n,r){var i,o,s,a,l,u,c,h,f=t=>t(h),d=[],p=r?r.slice():[],g={},m={};for(p.forEach((t,e)=>g[t]=e+1),a=0,c=t.length;a<c;++a)u=n(h=t[a]),l=g[u]||(g[u]=p.push(u)),(s=m[o=(i=e?e.map(f):DS)+""])||(s=m[o]=[],d.push(s),s.values=i),s[l-1]=h;return d.domain=p,d}(e.source,t.groupby,t.key,t.keyvals),b=[],_=this.value,x=v.domain.length;for(s=0,u=v.length;s<u;++s)for(i=(n=v[s]).values,r=NaN,l=0;l<x;++l)if(null==n[l]){for(o=v.domain[l],h={_impute:!0},a=0,c=i.length;a<c;++a)h[y[a]]=i[a];h[m]=o,h[g]=Number.isNaN(r)?r=d(n,p):r,b.push(ik(h))}return b.length&&(f.add=f.materialize(f.ADD).add.concat(b)),_.length&&(f.rem=f.materialize(f.REM).rem.concat(_)),this.value=b,f}}),MS.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:HE},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},ev(MS,eS,{transform(t,e){const n=this,r=t.modified();let i;return n.value&&(r||e.modified(n._inputs,!0))?(i=n.value=r?n.init(t):{},e.visit(e.SOURCE,t=>n.add(t))):(i=n.value=n.value||this.init(t),e.visit(e.REM,t=>n.rem(t)),e.visit(e.ADD,t=>n.add(t))),n.changes(),e.visit(e.SOURCE,t=>{Gy(t,i[n.cellkey(t)].tuple)}),e.reflow(r).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(t[n]),t[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}}),FS.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},ev(FS,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=pS(r,t.groupby,t.field),o=(t.groupby||[]).map(Hm),s=t.bandwidth,a=t.cumulative?"cdf":"pdf",l=t.as||["value","density"],u=[];let c=t.extent,h=t.steps||t.minsteps||25,f=t.steps||t.maxsteps||200;"pdf"!==a&&"cdf"!==a&&Xm("Invalid density method: "+a),"shared"===t.resolve&&(c||(c=Zy(r,t.field)),h=f=t.steps||f),i.forEach(e=>{const n=cE(e,s)[a],r=t.counts?e.length:1;$E(n,c||Zy(e),h,f).forEach(t=>{const n={};for(let r=0;r<o.length;++r)n[o[r]]=e.dims[r];n[l[0]]=t[0],n[l[1]]=t[1]*r,u.push(ik(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}}),ev(jS,pk),ev(NS,jk,{transform(t,e){const n=e.dataflow;return this._pending?RS(this,e,this._pending):function(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}(t)?e.StopPropagation:t.values?RS(this,e,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(t=>(this._pending=$y(t.data),t=>t.touch(this)))}:n.request(t.url,t.format).then(t=>RS(this,e,$y(t.data)))}}),$S.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},ev($S,jk,{transform(t,e){const n=t.fields,r=t.index,i=t.values,o=null==t.default?null:t.default,s=t.modified(),a=n.length;let l,u,c,h=s?e.SOURCE:e.ADD,f=e,d=t.as;return i?(u=i.length,a>1&&!d&&Xm('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==a*u&&Xm('The "as" parameter has too few output field names.'),d=d||i.map(Hm),l=function(t){for(var e,s,l=0,c=0;l<a;++l)if(null==(s=r.get(n[l](t))))for(e=0;e<u;++e,++c)t[d[c]]=o;else for(e=0;e<u;++e,++c)t[d[c]]=i[e](s)}):(d||Xm("Missing output field names."),l=function(t){for(var e,i=0;i<a;++i)e=r.get(n[i](t)),t[d[i]]=null==e?o:e}),s?f=e.reflow(!0):(c=n.some(t=>e.modified(t.fields)),h|=c?e.MOD:0),e.visit(h,l),f.modifies(d)}}),ev(IS,pk),ev(LS,pk),ev(BS,jk,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),qS.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:HE,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},ev(qS,eS,{_transform:eS.prototype.transform,transform(t,e){return this._transform(function(t,e){const n=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",o=Wm(n).concat(Wm(r)),s=function(t,e,n){const r={},i=[];return n.visit(n.SOURCE,e=>{const n=t(e);r[n]||(r[n]=1,i.push(n))}),i.sort(Uy),e?i.slice(0,e):i}(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:s.map(()=>i),fields:s.map(t=>function(t,e,n,r){return Vm(r=>e(r)===t?n(r):NaN,r,t+"")}(t,n,r,o)),as:s.map(t=>t+""),modified:t.modified.bind(t)}}(t,e),e)}}),ev(VS,_S,{transform(t,e){const n=t.subflow,r=t.field,i=t=>this.subflow(nk(t),n,e,t);return(t.modified("field")||r&&e.modified(Wm(r)))&&Xm("PreFacet does not support field modification."),this.initTargets(),r?(e.visit(e.MOD,t=>{const e=i(t);r(t).forEach(t=>e.mod(t))}),e.visit(e.ADD,t=>{const e=i(t);r(t).forEach(t=>e.add(ik(t)))}),e.visit(e.REM,t=>{const e=i(t);r(t).forEach(t=>e.rem(t))})):(e.visit(e.MOD,t=>i(t).mod(t)),e.visit(e.ADD,t=>i(t).add(t)),e.visit(e.REM,t=>i(t).rem(t))),e.clean()&&e.runAfter(()=>this.clean()),e}}),HS.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},ev(HS,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=dS(t.fields,t.as||[]),o=r?(t,e)=>function(t,e,n,r){for(let i=0,o=n.length;i<o;++i)e[r[i]]=n[i](t);return e}(t,e,r,i):sk;let s;return this.value?s=this.value:(e=e.addAll(),s=this.value={}),e.visit(e.REM,t=>{const e=nk(t);n.rem.push(s[e]),s[e]=null}),e.visit(e.ADD,t=>{const e=o(t,ik({}));s[nk(t)]=e,n.add.push(e)}),e.visit(e.MOD,t=>{n.mod.push(o(t,s[nk(t)]))}),n}}),ev(WS,jk,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}}),GS.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]},ev(GS,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const i=pS(e.materialize(e.SOURCE).source,t.groupby,t.field),o=(t.groupby||[]).map(Hm),s=[],a=t.step||.01,l=t.probs||zE(a/2,1-1e-14,a),u=l.length;return i.forEach(t=>{const e=Wk(t,l);for(let n=0;n<u;++n){const i={};for(let e=0;e<o.length;++e)i[o[e]]=t.dims[e];i[r[0]]=l[n],i[r[1]]=e[n],s.push(ik(i))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}}),ev(ZS,jk,{transform(t,e){let n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,t=>{const e=nk(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,t=>{const e=ok(t);r[nk(t)]=e,n.add.push(e)}),e.visit(e.MOD,t=>{const e=r[nk(t)];for(const r in t)e[r]=t[r],n.modifies(r);n.mod.push(e)})),n}}),YS.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},ev(YS,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,o=this.value.reduce((t,e)=>(t[nk(e)]=1,t),{});let s=this.value,a=this.count,l=0;function u(t){let e,r;s.length<i?s.push(t):(r=~~((a+1)*Xk()),r<s.length&&r>=l&&(e=s[r],o[nk(e)]&&n.rem.push(e),s[r]=t)),++a}if(e.rem.length&&(e.visit(e.REM,t=>{const e=nk(t);o[e]&&(o[e]=-1,n.rem.push(t)),--a}),s=s.filter(t=>-1!==o[nk(t)])),(e.rem.length||r)&&s.length<i&&e.source&&(l=a=s.length,e.visit(e.SOURCE,t=>{o[nk(t)]||u(t)}),l=-1),r&&s.length>i){const t=s.length-i;for(let e=0;e<t;++e)o[nk(s[e])]=-1,n.rem.push(s[e]);s=s.slice(t)}return e.mod.length&&e.visit(e.MOD,t=>{o[nk(t)]&&n.mod.push(t)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||l<0)&&(n.add=s.filter(t=>!o[nk(t)])),this.count=a,this.value=n.source=s,n}}),XS.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},ev(XS,jk,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=zE(t.start,t.stop,t.step||1).map(t=>{const e={};return e[r]=t,ik(e)}),n.add=e.add.concat(this.value),n}}),ev(QS,jk,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});const JS=["unit0","unit1"];function tO(t){jk.call(this,Jy(),t)}function eO(t){jk.call(this,null,t)}KS.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:g_,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:JS}]},ev(KS,jk,{transform(t,e){const n=t.field,r=!1!==t.interval,i="utc"===t.timezone,o=this._floor(t,e),s=(i?H_:V_)(o.unit).offset,a=t.as||JS,l=a[0],u=a[1],c=o.step;let h=o.start||1/0,f=o.stop||-1/0,d=e.ADD;return(t.modified()||e.modified(Wm(n)))&&(d=(e=e.reflow(!0)).SOURCE,h=1/0,f=-1/0),e.visit(d,t=>{const e=n(t);let i,a;null==e?(t[l]=null,r&&(t[u]=null)):(t[l]=i=a=o(e),r&&(t[u]=a=s(i,c)),i<h&&(h=i),a>f&&(f=a))}),o.start=h,o.stop=f,e.modifies(r?a:l)},_floor(t,e){const n="utc"===t.timezone,{units:r,step:i}=t.units?{units:t.units,step:t.step||1}:sx({extent:t.extent||Zy(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),o=y_(r),s=this.value||{},a=(n?U_:I_)(o,i);return a.unit=vy(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}}),ev(tO,jk,{transform(t,e){const n=e.dataflow,r=t.field,i=this.value,o=t=>i.set(r(t),t);let s=!0;return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,o)):e.changed()?(e.visit(e.REM,t=>i.delete(r(t))),e.visit(e.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()}}),ev(eO,jk,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(lk(t.sort)):e.source).map(t.field))}});const nO={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){const t=nO.rank(),e=t.next;return{init:t.init,next:t=>(e(t)-1)/(t.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,r=e.compare;let i=e.index;if(t<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;t=i}return(1+t)/n.length}}},ntile:function(t,e){(e=+e)>0||Xm("ntile num must be greater than zero.");const n=nO.cume_dist(),r=n.next;return{init:n.init,next:t=>Math.ceil(e*r(t))}},lag:function(t,e){return e=+e||1,{next:n=>{const r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return(e=+e)>0||Xm("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const r=t(n.data[n.index]);return null!=r?e=r:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:r=>{const i=r.data;return r.index<=n?e:(n=function(t,e,n){for(let r=e.length;n<r;++n)if(null!=t(e[n]))return n;return-1}(t,i,r.index))<0?(n=i.length,e=null):e=t(i[n])}}}},rO=Object.keys(nO);function iO(t){const e=$y(t.ops),n=$y(t.fields),r=$y(t.params),i=$y(t.as),o=this.outputs=[],s=this.windows=[],a={},l={},u=[],c=[];let h=!0;function f(t){$y(Wm(t)).forEach(t=>a[t]=1)}f(t.sort),e.forEach((t,e)=>{const a=n[e],d=Hm(a),p=UE(t,d,i[e]);if(f(a),o.push(p),Qy(nO,t))s.push(function(t,e,n,r){const i=nO[t](e,n);return{init:i.init||ey,update:function(t,e){e[r]=i.next(t)}}}(t,n[e],r[e],p));else{if(null==a&&"count"!==t&&Xm("Null aggregate field specified."),"count"===t)return void u.push(p);h=!1;let e=l[d];e||(e=l[d]=[],e.field=a,c.push(e)),e.push(WE(t,p))}}),(u.length||c.length)&&(this.cell=function(t,e,n){t=t.map(t=>KE(t,t.field));const r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new t[s](r);if(r.store)var a=r.data=new JE;return r.add=function(t){if(r.num+=1,!n){a&&a.add(t);for(let e=0;e<i;++e)o[e].add(o[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){a&&a.rem(t);for(let e=0;e<i;++e)o[e].rem(o[e].get(t),t)}},r.set=function(t){let i,s;for(a&&a.values(),i=0,s=e.length;i<s;++i)t[e[i]]=r.num;if(!n)for(i=0,s=o.length;i<s;++i)o[i].set(t)},r.init=function(){r.num=0,a&&a.reset();for(let t=0;t<i;++t)o[t].init()},r}(c,u,h)),this.inputs=Object.keys(a)}const oO=iO.prototype;function sO(t){jk.call(this,{},t),this._mlen=0,this._mods=[]}function aO(t,e,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=t.data(n),l=a.length,u=o?r_(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Hy(-1)};e.init();for(let h=0;h<l;++h)lO(c,s,h,l),o&&uO(c,u),e.update(c,a[h])}function lO(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function uO(t,e){const n=t.i0,r=t.i1-1,i=t.compare,o=t.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(t.i0=e.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(t.i1=e.right(o,o[r]))}function cO(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function hO(t){this._context=t}oO.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()},oO.update=function(t,e){const n=this.cell,r=this.windows,i=t.data,o=r&&r.length;let s;if(n){for(s=t.p0;s<t.i0;++s)n.rem(i[s]);for(s=t.p1;s<t.i1;++s)n.add(i[s]);n.set(e)}for(s=0;s<o;++s)r[s].update(t,e)},sO.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:rO.concat(HE)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},ev(sO,jk,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),r=lk(t.sort),i=LE(t.groupby),o=t=>this.group(i(t));let s=this.state;s&&!n||(s=this.state=new iO(t)),n||e.modified(s.inputs)?(this.value={},e.visit(e.SOURCE,t=>o(t).add(t))):(e.visit(e.REM,t=>o(t).remove(t)),e.visit(e.ADD,t=>o(t).add(t)));for(let a=0,l=this._mlen;a<l;++a)aO(this._mods[a],s,r,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(s.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=rS(nk),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}}),hO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cO(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cO(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var fO=function(){};function dO(t){this._context=t}function pO(t){this._context=t}function gO(t,e){this._basis=new hO(t),this._beta=e}dO.prototype={areaStart:fO,areaEnd:fO,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:cO(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},pO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:cO(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},gO.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],s=t[n]-i,a=e[n]-o,l=-1;++l<=n;)this._basis.point(this._beta*t[l]+(1-this._beta)*(i+(r=l/n)*s),this._beta*e[l]+(1-this._beta)*(o+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var mO=function t(e){function n(t){return 1===e?new hO(t):new gO(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function yO(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function vO(t,e){this._context=t,this._k=(1-e)/6}vO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:yO(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:yO(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var bO=function t(e){function n(t){return new vO(t,e)}return n.tension=function(e){return t(+e)},n}(0);function _O(t,e){this._context=t,this._k=(1-e)/6}_O.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:yO(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var xO=function t(e){function n(t){return new _O(t,e)}return n.tension=function(e){return t(+e)},n}(0);function wO(t,e){this._context=t,this._k=(1-e)/6}wO.prototype={areaStart:fO,areaEnd:fO,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:yO(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var kO=function t(e){function n(t){return new wO(t,e)}return n.tension=function(e){return t(+e)},n}(0),EO=Math.abs,SO=Math.atan2,OO=Math.cos,CO=Math.max,AO=Math.min,DO=Math.sin,TO=Math.sqrt,MO=Math.PI,FO=MO/2,jO=2*MO;function PO(t){return t>1?0:t<-1?MO:Math.acos(t)}function NO(t){return t>=1?FO:t<=-1?-FO:Math.asin(t)}function RO(t,e,n){var r=t._x1,i=t._y1,o=t._x2,s=t._y2;if(t._l01_a>1e-12){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>1e-12){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/c,s=(s*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,s,t._x2,t._y2)}function $O(t,e){this._context=t,this._alpha=e}$O.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:RO(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var IO=function t(e){function n(t){return e?new $O(t,e):new vO(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function zO(t,e){this._context=t,this._alpha=e}zO.prototype={areaStart:fO,areaEnd:fO,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:RO(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var LO=function t(e){function n(t){return e?new zO(t,e):new wO(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function UO(t,e){this._context=t,this._alpha=e}UO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:RO(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var BO=function t(e){function n(t){return e?new UO(t,e):new _O(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function qO(t){this._context=t}qO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var VO=function(t){return new qO(t)};function HO(t){this._context=t}function WO(t){return t<0?-1:1}function GO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(WO(o)+WO(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function ZO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function YO(t,e,n){var r=t._x0,i=t._x1,o=t._y1,s=(i-r)/3;t._context.bezierCurveTo(r+s,t._y0+s*e,i-s,o-s*n,i,o)}function XO(t){this._context=t}function QO(t){this._context=new KO(t)}function KO(t){this._context=t}function JO(t){this._context=t}function tC(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)o[e]-=n=i[e]/o[e-1],s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function eC(t,e){this._context=t,this._t=e}HO.prototype={areaStart:fO,areaEnd:fO,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},XO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:YO(this,this._t0,ZO(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,YO(this,ZO(this,n=GO(this,t,e)),n);break;default:YO(this,this._t0,n=GO(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(QO.prototype=Object.create(XO.prototype)).point=function(t,e){XO.prototype.point.call(this,e,t)},KO.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},JO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=tC(t),i=tC(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},eC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};const nC=Math.PI,rC=2*nC,iC=rC-1e-6;function oC(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function sC(){return new oC}oC.prototype=sC.prototype={constructor:oC,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){var o=this._x1,s=this._y1,a=(n=+n)-(t=+t),l=(r=+r)-(e=+e),u=o-t,c=s-e,h=u*u+c*c;if((i=+i)<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(c*a-l*u)>1e-6&&i){var f=n-o,d=r-s,p=a*a+l*l,g=f*f+d*d,m=Math.sqrt(p),y=Math.sqrt(h),v=i*Math.tan((nC-Math.acos((p+h-g)/(2*m*y)))/2),b=v/y,_=v/m;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*u)+","+(e+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>u*d)+","+(this._x1=t+_*a)+","+(this._y1=e+_*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(r),a=n*Math.sin(r),l=t+s,u=e+a,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%rC+rC),h>iC?this._+="A"+n+","+n+",0,1,"+c+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=nC)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var aC=sC,lC=function(t){return function(){return t}};function uC(t){return t.innerRadius}function cC(t){return t.outerRadius}function hC(t){return t.startAngle}function fC(t){return t.endAngle}function dC(t){return t&&t.padAngle}function pC(t,e,n,r,i,o,s,a){var l=n-t,u=r-e,c=s-i,h=a-o,f=h*l-c*u;if(!(f*f<1e-12))return[t+(f=(c*(e-o)-h*(t-i))/f)*l,e+f*u]}function gC(t,e,n,r,i,o,s){var a=t-n,l=e-r,u=(s?o:-o)/TO(a*a+l*l),c=u*l,h=-u*a,f=t+c,d=e+h,p=n+c,g=r+h,m=(f+p)/2,y=(d+g)/2,v=p-f,b=g-d,_=v*v+b*b,x=i-o,w=f*g-p*d,k=(b<0?-1:1)*TO(CO(0,x*x*_-w*w)),E=(w*b-v*k)/_,S=(-w*v-b*k)/_,O=(w*b+v*k)/_,C=(-w*v+b*k)/_,A=E-m,D=S-y,T=O-m,M=C-y;return A*A+D*D>T*T+M*M&&(E=O,S=C),{cx:E,cy:S,x01:-c,y01:-h,x11:E*(i/x-1),y11:S*(i/x-1)}}var mC=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)};function yC(t){return t[0]}function vC(t){return t[1]}var bC=function(t,e){var n=lC(!0),r=null,i=VO,o=null;function s(s){var a,l,u,c=(s=mC(s)).length,h=!1;for(null==r&&(o=i(u=aC())),a=0;a<=c;++a)!(a<c&&n(l=s[a],a,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(l,a,s),+e(l,a,s));if(u)return o=null,u+""||null}return t="function"==typeof t?t:void 0===t?yC:lC(t),e="function"==typeof e?e:void 0===e?vC:lC(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:lC(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:lC(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:lC(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s},_C=function(t,e,n){var r=null,i=lC(!0),o=null,s=VO,a=null;function l(l){var u,c,h,f,d,p=(l=mC(l)).length,g=!1,m=new Array(p),y=new Array(p);for(null==o&&(a=s(d=aC())),u=0;u<=p;++u){if(!(u<p&&i(f=l[u],u,l))===g)if(g=!g)c=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=u-1;h>=c;--h)a.point(m[h],y[h]);a.lineEnd(),a.areaEnd()}g&&(m[u]=+t(f,u,l),y[u]=+e(f,u,l),a.point(r?+r(f,u,l):m[u],n?+n(f,u,l):y[u]))}if(d)return a=null,d+""||null}function u(){return bC().defined(i).curve(s).context(o)}return t="function"==typeof t?t:void 0===t?yC:lC(+t),e="function"==typeof e?e:lC(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?vC:lC(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:lC(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:lC(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:lC(+t),l):r},l.y=function(t){return arguments.length?(e="function"==typeof t?t:lC(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:lC(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:lC(+t),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:lC(!!t),l):i},l.curve=function(t){return arguments.length?(s=t,null!=o&&(a=s(o)),l):s},l.context=function(t){return arguments.length?(null==t?o=a=null:a=s(o=t),l):o},l},xC={draw:function(t,e){var n=Math.sqrt(e/MO);t.moveTo(n,0),t.arc(0,0,n,0,jO)}};function wC(t,e){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}Math.sqrt(1/3),Math.sin(MO/10),Math.sin(7*MO/10),Math.sin(jO/10),Math.cos(jO/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);const kC=()=>"undefined"!=typeof Image?Image:null,EC=r_(n_),SC=EC.right,OC=EC.left;r_(Uk);var CC=SC;function AC(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function DC(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const TC=Symbol("implicit");function MC(){var t=new Map,e=[],n=[],r=TC;function i(i){var o=i+"",s=t.get(o);if(!s){if(r!==TC)return r;t.set(o,s=e.push(i))}return n[(s-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return MC(e,n).unknown(r)},AC.apply(i,arguments),i}function FC(t,e,n,r){var i,o=hb(t,e,n);switch((r=db(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=xb(o,s))||(r.precision=i),bb(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=wb(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=kb(o))||(r.precision=i-2*("%"===r.type))}return vb(r)}var jC=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function PC(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function NC(){}var RC=1/.7,$C="\\s*([+-]?\\d+)\\s*",IC="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",zC="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",LC=/^#([0-9a-f]{3,8})$/,UC=new RegExp("^rgb\\("+[$C,$C,$C]+"\\)$"),BC=new RegExp("^rgb\\("+[zC,zC,zC]+"\\)$"),qC=new RegExp("^rgba\\("+[$C,$C,$C,IC]+"\\)$"),VC=new RegExp("^rgba\\("+[zC,zC,zC,IC]+"\\)$"),HC=new RegExp("^hsl\\("+[IC,zC,zC]+"\\)$"),WC=new RegExp("^hsla\\("+[IC,zC,zC,IC]+"\\)$"),GC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ZC(){return this.rgb().formatHex()}function YC(){return this.rgb().formatRgb()}function XC(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=LC.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?QC(e):3===n?new eA(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?KC(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?KC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=UC.exec(t))?new eA(e[1],e[2],e[3],1):(e=BC.exec(t))?new eA(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=qC.exec(t))?KC(e[1],e[2],e[3],e[4]):(e=VC.exec(t))?KC(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=HC.exec(t))?oA(e[1],e[2]/100,e[3]/100,1):(e=WC.exec(t))?oA(e[1],e[2]/100,e[3]/100,e[4]):GC.hasOwnProperty(t)?QC(GC[t]):"transparent"===t?new eA(NaN,NaN,NaN,0):null}function QC(t){return new eA(t>>16&255,t>>8&255,255&t,1)}function KC(t,e,n,r){return r<=0&&(t=e=n=NaN),new eA(t,e,n,r)}function JC(t){return t instanceof NC||(t=XC(t)),t?new eA((t=t.rgb()).r,t.g,t.b,t.opacity):new eA}function tA(t,e,n,r){return 1===arguments.length?JC(t):new eA(t,e,n,null==r?1:r)}function eA(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function nA(){return"#"+iA(this.r)+iA(this.g)+iA(this.b)}function rA(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function iA(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function oA(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new lA(t,e,n,r)}function sA(t){if(t instanceof lA)return new lA(t.h,t.s,t.l,t.opacity);if(t instanceof NC||(t=XC(t)),!t)return new lA;if(t instanceof lA)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new lA(s,a,l,t.opacity)}function aA(t,e,n,r){return 1===arguments.length?sA(t):new lA(t,e,n,null==r?1:r)}function lA(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function uA(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function cA(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}jC(NC,XC,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ZC,formatHex:ZC,formatHsl:function(){return sA(this).formatHsl()},formatRgb:YC,toString:YC}),jC(eA,tA,PC(NC,{brighter:function(t){return t=null==t?RC:Math.pow(RC,t),new eA(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new eA(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nA,formatHex:nA,formatRgb:rA,toString:rA})),jC(lA,aA,PC(NC,{brighter:function(t){return t=null==t?RC:Math.pow(RC,t),new lA(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new lA(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new eA(uA(t>=240?t-240:t+120,i,r),uA(t,i,r),uA(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var hA=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1];return cA((n-r/e)*e,r>0?t[r-1]:2*i-o,i,o,r<e-1?t[r+2]:2*o-i)}},fA=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return cA((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}},dA=t=>()=>t;function pA(t,e){return function(n){return t+n*e}}function gA(t,e){var n=e-t;return n?pA(t,n>180||n<-180?n-360*Math.round(n/360):n):dA(isNaN(t)?e:t)}function mA(t,e){var n=e-t;return n?pA(t,n):dA(isNaN(t)?e:t)}var yA=function t(e){var n=function(t){return 1==(t=+t)?mA:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):dA(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=tA(t)).r,(e=tA(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=mA(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function vA(t){return function(e){var n,r,i=e.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=tA(e[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=t(o),s=t(s),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=a(t),r+""}}}var bA=vA(hA),_A=vA(fA),xA=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function wA(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var kA=function(t,e){return(wA(e)?xA:EA)(t,e)};function EA(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),s=new Array(r);for(n=0;n<i;++n)o[n]=MA(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=o[n](t);return s}}var SA=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},OA=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},CA=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=MA(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},AA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,DA=new RegExp(AA.source,"g"),TA=function(t,e){var n,r,i,o=AA.lastIndex=DA.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=AA.exec(t))&&(r=DA.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:OA(n,r)})),o=DA.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)a[(n=l[r]).i]=n.x(t);return a.join("")})},MA=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?dA(e):("number"===r?OA:"string"===r?(n=XC(e))?(e=n,yA):TA:e instanceof XC?yA:e instanceof Date?SA:wA(e)?xA:Array.isArray(e)?EA:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?CA:OA)(t,e)},FA=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}};function jA(t){return+t}var PA=[0,1];function NA(t){return t}function RA(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function $A(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=RA(i,r),o=n(s,o)):(r=RA(r,i),o=n(o,s)),function(t){return o(r(t))}}function IA(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=RA(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=CC(t,e,1,r)-1;return o[n](i[n](e))}}function zA(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function LA(){var t,e,n,r,i,o,s=PA,a=PA,l=MA,u=NA;function c(){var t,e,n,l=Math.min(s.length,a.length);return u!==NA&&((t=s[0])>(e=s[l-1])&&(n=t,t=e,e=n),u=function(n){return Math.max(t,Math.min(e,n))}),r=l>2?IA:$A,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(s.map(t),a,l)))(t(u(e)))}return h.invert=function(n){return u(e((o||(o=r(a,s.map(t),OA)))(n)))},h.domain=function(t){return arguments.length?(s=Array.from(t,jA),c()):s.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),c()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),l=FA,c()},h.clamp=function(t){return arguments.length?(u=!!t||NA,c()):u!==NA},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}function UA(){return LA()(NA,NA)}function BA(t){var e=t.domain;return t.ticks=function(t){var n=e();return ub(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return FC(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),s=0,a=o.length-1,l=o[s],u=o[a],c=10;for(u<l&&(i=l,l=u,u=i,i=s,s=a,a=i);c-- >0;){if((i=cb(l,u,n))===r)return o[s]=l,o[a]=u,e(o);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}r=i}return t},t}function qA(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],s=t[i];return s<o&&(n=r,r=i,i=n,n=o,o=s,s=n),t[r]=e.floor(o),t[i]=e.ceil(s),t}function VA(t){return Math.log(t)}function HA(t){return Math.exp(t)}function WA(t){return-Math.log(-t)}function GA(t){return-Math.exp(-t)}function ZA(t){return isFinite(t)?+("1e"+t):t<0?0:t}function YA(t){return function(e){return-t(-e)}}function XA(t){var e,n,r=t(VA,HA),i=r.domain,o=10;function s(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),n=function(t){return 10===t?ZA:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),i()[0]<0?(e=YA(e),n=YA(n),t(WA,GA)):t(VA,HA),r}return r.base=function(t){return arguments.length?(o=+t,s()):o},r.domain=function(t){return arguments.length?(i(t),s()):i()},r.ticks=function(t){var r,s=i(),a=s[0],l=s[s.length-1];(r=l<a)&&(f=a,a=l,l=f);var u,c,h,f=e(a),d=e(l),p=null==t?10:+t,g=[];if(!(o%1)&&d-f<p){if(f=Math.floor(f),d=Math.ceil(d),a>0){for(;f<=d;++f)for(c=1,u=n(f);c<o;++c)if(!((h=u*c)<a)){if(h>l)break;g.push(h)}}else for(;f<=d;++f)for(c=o-1,u=n(f);c>=1;--c)if(!((h=u*c)<a)){if(h>l)break;g.push(h)}2*g.length<p&&(g=ub(a,l,p))}else g=ub(f,d,Math.min(d-f,p)).map(n);return r?g.reverse():g},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=vb(i)),t===1/0)return i;null==t&&(t=10);var s=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=s?i(t):""}},r.nice=function(){return i(qA(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function QA(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function KA(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function JA(t){return t<0?-t*t:t*t}function tD(t){var e=t(NA,NA),n=1;function r(){return 1===n?t(NA,NA):.5===n?t(KA,JA):t(QA(n),QA(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},BA(e)}function eD(){var t=tD(LA());return t.copy=function(){return zA(t,eD()).exponent(t.exponent())},AC.apply(t,arguments),t}function nD(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function rD(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function iD(t){var e=1,n=t(nD(e),rD(e));return n.constant=function(n){return arguments.length?t(nD(e=+n),rD(e)):e},BA(n)}function oD(t){return new Date(t)}function sD(t){return t instanceof Date?+t:+new Date(+t)}function aD(t,e,n,r,i,o,s,a,l){var u=UA(),c=u.invert,h=u.domain,f=l(".%L"),d=l(":%S"),p=l("%I:%M"),g=l("%I %p"),m=l("%a %d"),y=l("%b %d"),v=l("%B"),b=l("%Y"),_=[[s,1,1e3],[s,5,5e3],[s,15,15e3],[s,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function x(a){return(s(a)<a?f:o(a)<a?d:i(a)<a?p:r(a)<a?g:e(a)<a?n(a)<a?m:y:t(a)<a?v:b)(a)}function w(e,n,r){if(null==e&&(e=10),"number"==typeof e){var i,o=Math.abs(r-n)/e,s=r_(function(t){return t[2]}).right(_,o);return s===_.length?(i=hb(n/31536e6,r/31536e6,e),e=t):s?(i=(s=_[o/_[s-1][2]<_[s][2]/o?s-1:s])[1],e=s[0]):(i=Math.max(hb(n,r,e),1),e=a),e.every(i)}return e}return u.invert=function(t){return new Date(c(t))},u.domain=function(t){return arguments.length?h(Array.from(t,sD)):h().map(oD)},u.ticks=function(t){var e,n=h(),r=n[0],i=n[n.length-1],o=i<r;return o&&(e=r,r=i,i=e),e=(e=w(t,r,i))?e.range(r,i+1):[],o?e.reverse():e},u.tickFormat=function(t,e){return null==e?x:l(e)},u.nice=function(t){var e=h();return(t=w(t,e[0],e[e.length-1]))?h(qA(e,t)):u},u.copy=function(){return zA(u,aD(t,e,n,r,i,o,s,a,l))},u}function lD(){var t,e,n,r,i,o=0,s=1,a=NA,l=!1;function u(e){return isNaN(e=+e)?i:a(0===n?.5:(e=(r(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,r;return arguments.length?([n,r]=e,a=t(n,r),u):[a(0),a(1)]}}return u.domain=function(i){return arguments.length?([o,s]=i,t=r(o=+o),e=r(s=+s),n=t===e?0:1/(e-t),u):[o,s]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(a=t,u):a},u.range=c(MA),u.rangeRound=c(FA),u.unknown=function(t){return arguments.length?(i=t,u):i},function(i){return r=i,t=i(o),e=i(s),n=t===e?0:1/(e-t),u}}function uD(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cD(){var t=BA(lD()(NA));return t.copy=function(){return uD(t,cD())},DC.apply(t,arguments)}function hD(){var t=tD(lD());return t.copy=function(){return uD(t,hD()).exponent(t.exponent())},DC.apply(t,arguments)}function fD(t,e){void 0===e&&(e=t,t=MA);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function dD(){var t,e,n,r,i,o,s,a=0,l=.5,u=1,c=1,h=NA,f=!1;function d(t){return isNaN(t=+t)?s:(t=.5+((t=+o(t))-e)*(c*t<c*e?r:i),h(f?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=fD(t,[n,r,i]),d):[h(0),h(.5),h(1)]}}return d.domain=function(s){return arguments.length?([a,l,u]=s,t=o(a=+a),e=o(l=+l),n=o(u=+u),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d):[a,l,u]},d.clamp=function(t){return arguments.length?(f=!!t,d):f},d.interpolator=function(t){return arguments.length?(h=t,d):h},d.range=p(MA),d.rangeRound=p(FA),d.unknown=function(t){return arguments.length?(s=t,d):s},function(s){return o=s,t=s(a),e=s(l),n=s(u),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d}}function pD(){var t=tD(dD());return t.copy=function(){return uD(t,pD()).exponent(t.exponent())},DC.apply(t,arguments)}var gD,mD=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},yD=function(t,e){var n=gA(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},vD=180/Math.PI,bD={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},_D=function(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*vD,skewX:Math.atan(l)*vD,scaleX:s,scaleY:a}};function xD(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],l=[];return o=t(o),s=t(s),function(t,r,i,o,s,a){if(t!==i||r!==o){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:OA(t,i)},{i:l-2,x:OA(r,o)})}else(i||o)&&s.push("translate("+i+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:OA(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,s.rotate,a,l),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:OA(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,s.skewX,a,l),function(t,e,n,r,o,s){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:OA(t,n)},{i:a-2,x:OA(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(t){for(var e,n=-1,r=l.length;++n<r;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var wD=xD(function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?bD:_D(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),kD=xD(function(t){return null==t?bD:(gD||(gD=document.createElementNS("http://www.w3.org/2000/svg","g")),gD.setAttribute("transform",t),(t=gD.transform.baseVal.consolidate())?_D((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):bD)},", ",")",")");function ED(t){return((t=Math.exp(t))+1/t)/2}var SD=function t(e,n,r){function i(t,i){var o,s,a=t[0],l=t[1],u=t[2],c=i[2],h=i[0]-a,f=i[1]-l,d=h*h+f*f;if(d<1e-12)s=Math.log(c/u)/e,o=function(t){return[a+t*h,l+t*f,u*Math.exp(e*t*s)]};else{var p=Math.sqrt(d),g=(c*c-u*u+r*d)/(2*u*n*p),m=(c*c-u*u-r*d)/(2*c*n*p),y=Math.log(Math.sqrt(g*g+1)-g),v=Math.log(Math.sqrt(m*m+1)-m);s=(v-y)/e,o=function(t){var r,i=t*s,o=ED(y),c=u/(n*p)*(o*(r=e*i+y,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[a+c*h,l+c*f,u*o/ED(e*i+y)]}}return o.duration=1e3*s*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function OD(t){return function(e,n){var r=t((e=aA(e)).h,(n=aA(n)).h),i=mA(e.s,n.s),o=mA(e.l,n.l),s=mA(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=s(t),e+""}}}var CD=OD(gA),AD=OD(mA);const DD=Math.PI/180,TD=180/Math.PI;function MD(t){if(t instanceof jD)return new jD(t.l,t.a,t.b,t.opacity);if(t instanceof LD)return UD(t);t instanceof eA||(t=JC(t));var e,n,r=$D(t.r),i=$D(t.g),o=$D(t.b),s=PD((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=s:(e=PD((.4360747*r+.3850649*i+.1430804*o)/.96422),n=PD((.0139322*r+.0971045*i+.7141733*o)/.82521)),new jD(116*s-16,500*(e-s),200*(s-n),t.opacity)}function FD(t,e,n,r){return 1===arguments.length?MD(t):new jD(t,e,n,null==r?1:r)}function jD(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function PD(t){return t>.008856451679035631?Math.pow(t,1/3):t/.12841854934601665+.13793103448275862}function ND(t){return t>.20689655172413793?t*t*t:.12841854934601665*(t-.13793103448275862)}function RD(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function $D(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ID(t){if(t instanceof LD)return new LD(t.h,t.c,t.l,t.opacity);if(t instanceof jD||(t=MD(t)),0===t.a&&0===t.b)return new LD(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*TD;return new LD(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function zD(t,e,n,r){return 1===arguments.length?ID(t):new LD(t,e,n,null==r?1:r)}function LD(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function UD(t){if(isNaN(t.h))return new jD(t.l,0,0,t.opacity);var e=t.h*DD;return new jD(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function BD(t,e){var n=mA((t=FD(t)).l,(e=FD(e)).l),r=mA(t.a,e.a),i=mA(t.b,e.b),o=mA(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function qD(t){return function(e,n){var r=t((e=zD(e)).h,(n=zD(n)).h),i=mA(e.c,n.c),o=mA(e.l,n.l),s=mA(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=s(t),e+""}}}jC(jD,FD,PC(NC,{brighter:function(t){return new jD(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new jD(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new eA(RD(3.1338561*(e=.96422*ND(e))-1.6168667*(t=1*ND(t))-.4906146*(n=.82521*ND(n))),RD(-.9787684*e+1.9161415*t+.033454*n),RD(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),jC(LD,zD,PC(NC,{brighter:function(t){return new LD(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new LD(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return UD(this).rgb()}}));var VD=qD(gA),HD=qD(mA),WD=-.29227,GD=1.97294,ZD=-.90649*GD,YD=1.78277*GD,XD=-.6557636667999999;function QD(t){if(t instanceof JD)return new JD(t.h,t.s,t.l,t.opacity);t instanceof eA||(t=JC(t));var e=t.g/255,n=t.b/255,r=(XD*n+ZD*(t.r/255)-YD*e)/(XD+ZD-YD),i=n-r,o=(GD*(e-r)-WD*i)/-.90649,s=Math.sqrt(o*o+i*i)/(GD*r*(1-r)),a=s?Math.atan2(o,i)*TD-120:NaN;return new JD(a<0?a+360:a,s,r,t.opacity)}function KD(t,e,n,r){return 1===arguments.length?QD(t):new JD(t,e,n,null==r?1:r)}function JD(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function tT(t){return function e(n){function r(e,r){var i=t((e=KD(e)).h,(r=KD(r)).h),o=mA(e.s,r.s),s=mA(e.l,r.l),a=mA(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=s(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,r.gamma=e,r}(1)}jC(JD,KD,PC(NC,{brighter:function(t){return t=null==t?RC:Math.pow(RC,t),new JD(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new JD(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*DD,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new eA(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(WD*r+-.90649*i)),255*(e+n*(GD*r)),this.opacity)}}));var eT=tT(gA),nT=tT(mA),rT=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};function iT(t,e,n){const r=t-e+2*n;return t?r>0?r:1:0}const oT="log",sT="time",aT="utc",lT="continuous";function uT(){const t=MC().unknown(void 0),e=t.domain,n=t.range;let r,i,o=[0,1],s=!1,a=0,l=0,u=.5;function c(){const t=e().length,c=o[1]<o[0],h=o[1-c],f=iT(t,a,l);let d=o[c-0];r=(h-d)/(f||1),s&&(r=Math.floor(r)),d+=(h-d-r*(t-a))*u,i=r*(1-a),s&&(d=Math.round(d),i=Math.round(i));const p=zE(t).map(t=>d+r*t);return n(c?p.reverse():p)}return delete t.unknown,t.domain=function(t){return arguments.length?(e(t),c()):e()},t.range=function(t){return arguments.length?(o=[+t[0],+t[1]],c()):o.slice()},t.rangeRound=function(t){return o=[+t[0],+t[1]],s=!0,c()},t.bandwidth=function(){return i},t.step=function(){return r},t.round=function(t){return arguments.length?(s=!!t,c()):s},t.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),a=l,c()):a},t.paddingInner=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),c()):a},t.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},t.invertRange=function(t){if(null==t[0]||null==t[1])return;const r=o[1]<o[0],s=r?n().reverse():n(),a=s.length-1;let l,u,c,h=+t[0],f=+t[1];return h!=h||f!=f||(f<h&&(c=h,h=f,f=c),f<s[0]||h>o[1-r])?void 0:(l=Math.max(0,SC(s,h)-1),u=h===f?l:SC(s,f)-1,h-s[l]>i+1e-10&&++l,r&&(c=l,l=a-u,u=a-c),l>u?void 0:e().slice(l,u+1))},t.invert=function(e){const n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return uT().domain(e()).range(o).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function cT(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return cT(e())},t}var hT=Array.prototype.map;function fT(t){return hT.call(t,by)}const dT=Array.prototype.slice,pT={};function gT(t,e,n){const r=function(){const n=e();return n.invertRange||(n.invertRange=n.invert?(r=n,function(t){let e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),[r.invert(n),r.invert(i)]}):n.invertExtent?function(t){return function(e){const n=t.range();let r,i,o,s,a=e[0],l=e[1],u=-1;for(l<a&&(i=a,a=l,l=i),o=0,s=n.length;o<s;++o)n[o]>=a&&n[o]<=l&&(u<0&&(u=o),r=o);if(!(u<0))return a=t.invertExtent(n[u]),l=t.invertExtent(n[r]),[void 0===a[0]?a[1]:a[0],void 0===l[1]?l[0]:l[1]]}}(n):void 0),n.type=t,n;var r};return r.metadata=xv($y(n)),r}function mT(t,e,n){return arguments.length>1?(pT[t]=gT(t,e,n),this):yT(t)?pT[t]:void 0}function yT(t){return Qy(pT,t)}function vT(t,e){const n=pT[t];return n&&n.metadata[e]}function bT(t){return vT(t,lT)}function _T(t){return vT(t,"discrete")}function xT(t){return vT(t,"discretizing")}function wT(t){return vT(t,oT)}function kT(t){return vT(t,"interpolating")}function ET(t){return vT(t,"quantile")}mT("identity",function t(e){var n;function r(t){return isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,jA),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,jA):[0,1],BA(r)}),mT("linear",function t(){var e=UA();return e.copy=function(){return zA(e,t())},AC.apply(e,arguments),BA(e)},lT),mT(oT,function t(){var e=XA(LA()).domain([1,10]);return e.copy=function(){return zA(e,t()).base(e.base())},AC.apply(e,arguments),e},[lT,oT]),mT("pow",eD,lT),mT("sqrt",function(){return eD.apply(null,arguments).exponent(.5)},lT),mT("symlog",function t(){var e=iD(LA());return e.copy=function(){return zA(e,t()).constant(e.constant())},AC.apply(e,arguments)},lT),mT(sT,function(){return AC.apply(aD(Vb,Hb,Nb,jb,Wb,Gb,Zb,Xb,fx).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[lT,"temporal"]),mT(aT,function(){return AC.apply(aD(Kb,Jb,Lb,Ib,t_,e_,Zb,Xb,px).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[lT,"temporal"]),mT("sequential",cD,[lT,"interpolating"]),mT("".concat("sequential","-").concat("linear"),cD,[lT,"interpolating"]),mT("".concat("sequential","-").concat(oT),function t(){var e=XA(lD()).domain([1,10]);return e.copy=function(){return uD(e,t()).base(e.base())},DC.apply(e,arguments)},[lT,"interpolating",oT]),mT("".concat("sequential","-").concat("pow"),hD,[lT,"interpolating"]),mT("".concat("sequential","-").concat("sqrt"),function(){return hD.apply(null,arguments).exponent(.5)},[lT,"interpolating"]),mT("".concat("sequential","-").concat("symlog"),function t(){var e=iD(lD());return e.copy=function(){return uD(e,t()).constant(e.constant())},DC.apply(e,arguments)},[lT,"interpolating"]),mT("".concat("diverging","-").concat("linear"),function t(){var e=BA(dD()(NA));return e.copy=function(){return uD(e,t())},DC.apply(e,arguments)},[lT,"interpolating"]),mT("".concat("diverging","-").concat(oT),function t(){var e=XA(dD()).domain([.1,1,10]);return e.copy=function(){return uD(e,t()).base(e.base())},DC.apply(e,arguments)},[lT,"interpolating",oT]),mT("".concat("diverging","-").concat("pow"),pD,[lT,"interpolating"]),mT("".concat("diverging","-").concat("sqrt"),function(){return pD.apply(null,arguments).exponent(.5)},[lT,"interpolating"]),mT("".concat("diverging","-").concat("symlog"),function t(){var e=iD(dD());return e.copy=function(){return uD(e,t()).constant(e.constant())},DC.apply(e,arguments)},[lT,"interpolating"]),mT("quantile",function t(){var e,n=[],r=[],i=[];function o(){var t=0,e=Math.max(1,r.length);for(i=new Array(e-1);++t<e;)i[t-1]=qk(n,t/e);return s}function s(t){return isNaN(t=+t)?e:r[CC(i,t)]}return s.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},s.domain=function(t){if(!arguments.length)return n.slice();n=[];for(let e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(n_),o()},s.range=function(t){return arguments.length?(r=Array.from(t),o()):r.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return i.slice()},s.copy=function(){return t().domain(n).range(r).unknown(e)},AC.apply(s,arguments)},["discretizing","quantile"]),mT("quantize",function t(){var e,n=0,r=1,i=1,o=[.5],s=[0,1];function a(t){return t<=t?s[CC(o,t,0,i)]:e}function l(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*n)/(i+1);return a}return a.domain=function(t){return arguments.length?([n,r]=t,n=+n,r=+r,l()):[n,r]},a.range=function(t){return arguments.length?(i=(s=Array.from(t)).length-1,l()):s.slice()},a.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=i?[o[i-1],r]:[o[e-1],o[e]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return o.slice()},a.copy=function(){return t().domain([n,r]).range(s).unknown(e)},AC.apply(BA(a),arguments)},"discretizing"),mT("threshold",function t(){var e,n=[.5],r=[0,1],i=1;function o(t){return t<=t?r[CC(n,t,0,i)]:e}return o.domain=function(t){return arguments.length?(n=Array.from(t),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t().domain(n).range(r).unknown(e)},AC.apply(o,arguments)},"discretizing"),mT("bin-ordinal",function t(){let e=[],n=[];function r(t){return null==t||t!=t?void 0:n[(CC(e,t)-1)%n.length]}return r.domain=function(t){return arguments.length?(e=fT(t),r):e.slice()},r.range=function(t){return arguments.length?(n=dT.call(t),r):n.slice()},r.tickFormat=function(t,n){return FC(e[0],vy(e),null==t?10:t,n)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r},["discrete","discretizing"]),mT("ordinal",MC,"discrete"),mT("band",uT,"discrete"),mT("point",function(){return cT(uT().paddingInner(1))},"discrete");const ST=["clamp","base","constant","exponent"];function OT(t,e){const n=e[0],r=vy(e)-n;return function(e){return t(n+e*r)}}function CT(t,e,n){return fD(TT(e||"rgb",n),t)}function AT(t,e){const n=new Array(e),r=e+1;for(let i=0;i<e;)n[i]=t(++i/r);return n}function DT(t,e,n){const r=n-e;let i,o,s;return r&&Number.isFinite(r)?(i=(o=t.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=mT(o)().domain([e,n]).range([0,1]),ST.forEach(e=>t[e]?s[e](t[e]()):0),s):Hy(.5)}function TT(t,e){const n=s[function(t){return"interpolate"+t.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function MT(t){const e=t.length/6|0,n=new Array(e);for(let r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function FT(t,e){for(const n in t)PT(n,e(t[n]))}const jT={};function PT(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(jT[t]=e,this):jT[t]}FT({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},MT),FT({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},t=>CT(MT(t)));const NT=t=>fy(t)?t.map(t=>String(t)):String(t),RT=(t,e)=>t[1]-e[1],$T=(t,e)=>e[1]-t[1];function IT(t,e,n){let r;return sv(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),null!=n&&(e=Math.min(e,Math.floor(gv(t.domain())/n||1)))),dy(e)&&(r=e.step,e=e.interval),lv(e)&&(e=t.type===sT?V_(e):t.type==aT?H_(e):Xm("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function zT(t,e,n){let r=t.range(),i=r[0],o=vy(r),s=RT;if(i>o&&(r=o,o=i,i=r,s=$T),i=Math.floor(i),o=Math.ceil(o),e=e.map(e=>[e,t(e)]).filter(t=>i<=t[1]&&t[1]<=o).sort(s).map(t=>t[0]),n>0&&e.length>1){const t=[e[0],vy(e)];for(;e.length>n&&e.length>=3;)e=e.filter((t,e)=>!(e%2));e.length<3&&(e=t)}return e}function LT(t,e){return t.bins?zT(t,t.bins):t.ticks?t.ticks(e):t.domain()}function UT(t,e,n,r,i,o){const s=e.type;let a=NT;if(s===sT||i===sT)a=t.timeFormat(r);else if(s===aT||i===aT)a=t.utcFormat(r);else if(wT(s)){const i=t.formatFloat(r);if(o||e.bins)a=i;else{const t=BT(e,n,!1);a=e=>t(e)?i(e):""}}else if(e.tickFormat){const i=e.domain();a=t.formatSpan(i[0],i[i.length-1],n,r)}else r&&(a=t.format(r));return a}function BT(t,e,n){const r=LT(t,e),i=t.base(),o=Math.log(i),s=Math.max(1,i*e/r.length),a=t=>{let e=t/Math.pow(i,Math.round(Math.log(t)/o));return e*i<i-.5&&(e*=i),e<=s};return n?r.filter(a):a}const qT={quantile:"quantiles",quantize:"thresholds",threshold:"domain"},VT={quantile:"quantiles",quantize:"domain"};function HT(t,e){return t.bins?function(t){const e=t.slice(0,-1);return e.max=vy(t),e}(t.bins):t.type===oT?BT(t,e,!0):qT[t.type]?function(t){const e=[-1/0].concat(t);return e.max=1/0,e}(t[qT[t.type]]()):LT(t,e)}function WT(t,e,n,r,i,o,s){const a=VT[e.type]&&o!==sT&&o!==aT?function(t,e,n){const r=e[VT[e.type]](),i=r.length;let o,s=i>1?r[1]-r[0]:r[0];for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return t.formatSpan(0,s,30,n)}(t,e,i):UT(t,e,n,i,o,s);return"symbol"===r&&(t=>qT[t.type]||t.bins)(e)?GT(a):"discrete"===r?YT(a):XT(a)}const GT=t=>(e,n,r)=>{const i=ZT(r[n+1],ZT(r.max,1/0)),o=QT(e,t),s=QT(i,t);return o&&s?o+" \u2013 "+s:s?"< "+s:"\u2265 "+o},ZT=(t,e)=>null!=t?t:e,YT=t=>(e,n)=>n?t(e):null,XT=t=>e=>t(e),QT=(t,e)=>Number.isFinite(t)?e(t):null;function KT(t,e,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=function(t,e,n,r){const i=r||e.type;return lv(n)&&vT(i,"temporal")&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==sT?n||i!==aT?WT(t,e,5,null,n,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}(t,e,n.format,n.formatType);if(xT(e.type)){const t=HT(e).slice(1).map(i),n=t.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(t.join(", "))}if(_T(e.type)){const t=e.domain(),n=t.length,o=n>r?t.slice(0,r-2).map(i).join(", ")+", ending with "+t.slice(-1).map(i):t.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(o)}{const t=e.domain();return"values from ".concat(i(t[0])," to ").concat(i(vy(t)))}}let JT=0;function tM(t){return t&&t.gradient}function eM(t,e,n){const r=t.gradient;let i=t.id,o="radial"===r?"p_":"";return i||(i=t.id="gradient_"+JT++,"radial"===r?(t.x1=nM(t.x1,.5),t.y1=nM(t.y1,.5),t.r1=nM(t.r1,0),t.x2=nM(t.x2,.5),t.y2=nM(t.y2,.5),t.r2=nM(t.r2,.5),o="p_"):(t.x1=nM(t.x1,0),t.y1=nM(t.y1,0),t.x2=nM(t.x2,1),t.y2=nM(t.y2,0))),e[i]=t,"url("+(n||"")+"#"+o+i+")"}function nM(t,e){return null!=t?t:e}function rM(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}}const iM={basis:{curve:function(t){return new hO(t)}},"basis-closed":{curve:function(t){return new dO(t)}},"basis-open":{curve:function(t){return new pO(t)}},bundle:{curve:mO,tension:"beta",value:.85},cardinal:{curve:bO,tension:"tension",value:0},"cardinal-open":{curve:xO,tension:"tension",value:0},"cardinal-closed":{curve:kO,tension:"tension",value:0},"catmull-rom":{curve:IO,tension:"alpha",value:.5},"catmull-rom-closed":{curve:LO,tension:"alpha",value:.5},"catmull-rom-open":{curve:BO,tension:"alpha",value:.5},linear:{curve:VO},"linear-closed":{curve:function(t){return new HO(t)}},monotone:{horizontal:function(t){return new QO(t)},vertical:function(t){return new XO(t)}},natural:{curve:function(t){return new JO(t)}},step:{curve:function(t){return new eC(t,.5)}},"step-after":{curve:function(t){return new eC(t,1)}},"step-before":{curve:function(t){return new eC(t,0)}}};function oM(t,e,n){var r=Qy(iM,t)&&iM[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const sM={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},aM=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function lM(t){const e=[];let n,r,i,o,s,a,l,u,c,h;const f=t.slice().replace(aM[0],"###$1").split(aM[1]).slice(1);for(l=0,c=f.length;l<c;++l){for(n=f[l],r=n.slice(1).trim().replace(aM[2],"$1###$2").replace(aM[3],"$1###$2").split(aM[4]),s=n.charAt(0),i=[s],u=0,h=r.length;u<h;++u)(o=+r[u])===o&&i.push(o);if(a=sM[s.toLowerCase()],i.length-1>a){const t=i.length;for(u=1,e.push([s].concat(i.slice(u,u+=a))),s="M"===s?"L":"m"===s?"l":s;u<t;u+=a)e.push([s].concat(i.slice(u,u+a)))}else e.push(i)}return e}const uM=Math.PI/180,cM=Math.PI/2,hM=2*Math.PI,fM=Math.sqrt(3)/2;var dM={},pM={},gM=[].join;function mM(t){const e=gM.call(t);if(pM[e])return pM[e];var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7];const c=u*s,h=-l*a,f=l*s,d=u*a,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(.5*v),_=8/3*b*b/Math.sin(v),x=n+p-_*g,w=r+g+_*p,k=n+m,E=r+y,S=k+_*y,O=E-_*m;return pM[e]=[c*x+h*w,f*x+d*w,c*S+h*O,f*S+d*O,c*k+h*E,f*k+d*E]}const yM=["l",0,0,0,0,0,0,0];function vM(t,e,n){const r=yM[0]=t[0];if("a"===r||"A"===r)yM[1]=e*t[1],yM[2]=n*t[2],yM[3]=t[3],yM[4]=t[4],yM[5]=t[5],yM[6]=e*t[6],yM[7]=n*t[7];else if("h"===r||"H"===r)yM[1]=e*t[1];else if("v"===r||"V"===r)yM[1]=n*t[1];else for(var i=1,o=t.length;i<o;++i)yM[i]=(i%2==1?e:n)*t[i];return yM}function bM(t,e,n,r,i,o){var s,a,l,u,c,h=null,f=0,d=0,p=0,g=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),t.beginPath&&t.beginPath();for(var m=0,y=e.length;m<y;++m){switch(s=e[m],1===i&&1===o||(s=vM(s,i,o)),s[0]){case"l":t.lineTo((f+=s[1])+n,(d+=s[2])+r);break;case"L":t.lineTo((f=s[1])+n,(d=s[2])+r);break;case"h":t.lineTo((f+=s[1])+n,d+r);break;case"H":t.lineTo((f=s[1])+n,d+r);break;case"v":t.lineTo(f+n,(d+=s[1])+r);break;case"V":t.lineTo(f+n,(d=s[1])+r);break;case"m":t.moveTo((f+=s[1])+n,(d+=s[2])+r);break;case"M":t.moveTo((f=s[1])+n,(d=s[2])+r);break;case"c":t.bezierCurveTo(f+s[1]+n,d+s[2]+r,(p=f+s[3])+n,(g=d+s[4])+r,(a=f+s[5])+n,(l=d+s[6])+r),f=a,d=l;break;case"C":t.bezierCurveTo(s[1]+n,s[2]+r,(p=s[3])+n,(g=s[4])+r,(f=s[5])+n,(d=s[6])+r);break;case"s":t.bezierCurveTo((p=2*f-p)+n,(g=2*d-g)+r,f+s[1]+n,d+s[2]+r,(a=f+s[3])+n,(l=d+s[4])+r),p=f+s[1],g=d+s[2],f=a,d=l;break;case"S":t.bezierCurveTo((p=2*f-p)+n,(g=2*d-g)+r,s[1]+n,s[2]+r,(a=s[3])+n,(l=s[4])+r),f=a,d=l,p=s[1],g=s[2];break;case"q":t.quadraticCurveTo((p=f+s[1])+n,(g=d+s[2])+r,(a=f+s[3])+n,(l=d+s[4])+r),f=a,d=l;break;case"Q":t.quadraticCurveTo(s[1]+n,s[2]+r,(a=s[3])+n,(l=s[4])+r),f=a,d=l,p=s[1],g=s[2];break;case"t":a=f+s[1],l=d+s[2],null===h[0].match(/[QqTt]/)?(p=f,g=d):"t"===h[0]?(p=2*f-u,g=2*d-c):"q"===h[0]&&(p=2*f-p,g=2*d-g),u=p,c=g,t.quadraticCurveTo(p+n,g+r,a+n,l+r),p=(f=a)+s[1],g=(d=l)+s[2];break;case"T":t.quadraticCurveTo((p=2*f-p)+n,(g=2*d-g)+r,(a=s[1])+n,(l=s[2])+r),f=a,d=l;break;case"a":_M(t,f+n,d+r,[s[1],s[2],s[3],s[4],s[5],s[6]+f+n,s[7]+d+r]),f+=s[6],d+=s[7];break;case"A":_M(t,f+n,d+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),f=s[6],d=s[7];break;case"z":case"Z":t.closePath()}h=s}}function _M(t,e,n,r){const i=function(t,e,n,r,i,o,s,a,l){const u=gM.call(arguments);if(dM[u])return dM[u];const c=s*uM,h=Math.sin(c),f=Math.cos(c),d=f*(a-t)*.5+h*(l-e)*.5,p=f*(l-e)*.5-h*(a-t)*.5;let g=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=f/n,y=h/n,v=-h/r,b=f/r,_=m*a+y*l,x=v*a+b*l,w=m*t+y*e,k=v*t+b*e;let E=1/((w-_)*(w-_)+(k-x)*(k-x))-.25;E<0&&(E=0);let S=Math.sqrt(E);o==i&&(S=-S);const O=.5*(_+w)-S*(k-x),C=.5*(x+k)+S*(w-_),A=Math.atan2(x-C,_-O);let D=Math.atan2(k-C,w-O)-A;D<0&&1===o?D+=hM:D>0&&0===o&&(D-=hM);const T=Math.ceil(Math.abs(D/(cM+.001))),M=[];for(let F=0;F<T;++F)M[F]=[O,C,A+F*D/T,A+(F+1)*D/T,n,r,h,f];return dM[u]=M}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n);for(let o=0;o<i.length;++o){const e=mM(i[o]);t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])}}const xM=.5773502691896257,wM={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,hM)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,o=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-o),t.lineTo(i,-o),t.lineTo(0,-n),t.lineTo(-i,-o),t.lineTo(-r,-o),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=fM*n,i=r-n*xM,o=n/4;t.moveTo(0,-r-i),t.lineTo(-o,r-i),t.lineTo(o,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=fM*n,i=r-n*xM;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=fM*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=fM*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=fM*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=fM*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function kM(t){return Qy(wM,t)?wM[t]:function(t){if(!Qy(EM,t)){const e=lM(t);EM[t]={draw:function(t,n){bM(t,e,0,0,Math.sqrt(n)/2)}}}return EM[t]}(t)}var EM={};function SM(t){return t.x}function OM(t){return t.y}function CM(t){return t.width}function AM(t){return t.height}function DM(t){return"function"==typeof t?t:()=>+t}function TM(t,e,n){return Math.max(e,Math.min(t,n))}function MM(){var t=SM,e=OM,n=CM,r=AM,i=DM(0),o=i,s=i,a=i,l=null;function u(u,c,h){var f,d=null!=c?c:+t.call(this,u),p=null!=h?h:+e.call(this,u),g=+n.call(this,u),m=+r.call(this,u),y=Math.min(g,m)/2,v=TM(+i.call(this,u),0,y),b=TM(+o.call(this,u),0,y),_=TM(+s.call(this,u),0,y),x=TM(+a.call(this,u),0,y);if(l||(l=f=aC()),v<=0&&b<=0&&_<=0&&x<=0)l.rect(d,p,g,m);else{var w=d+g,k=p+m;l.moveTo(d+v,p),l.lineTo(w-b,p),l.bezierCurveTo(w-.448084975506*b,p,w,p+.448084975506*b,w,p+b),l.lineTo(w,k-x),l.bezierCurveTo(w,k-.448084975506*x,w-.448084975506*x,k,w-x,k),l.lineTo(d+_,k),l.bezierCurveTo(d+.448084975506*_,k,d,k-.448084975506*_,d,k-_),l.lineTo(d,p+v),l.bezierCurveTo(d,p+.448084975506*v,d+.448084975506*v,p,d+v,p),l.closePath()}if(f)return l=null,f+""||null}return u.x=function(e){return arguments.length?(t=DM(e),u):t},u.y=function(t){return arguments.length?(e=DM(t),u):e},u.width=function(t){return arguments.length?(n=DM(t),u):n},u.height=function(t){return arguments.length?(r=DM(t),u):r},u.cornerRadius=function(t,e,n,r){return arguments.length?(i=DM(t),o=null!=e?DM(e):i,a=null!=n?DM(n):i,s=null!=r?DM(r):o,u):i},u.context=function(t){return arguments.length?(l=null==t?null:t,u):l},u}function FM(){var t,e,n,r,i,o,s,a,l=null;function u(t,e,n){const r=n/2;if(i){var u=s-e,c=t-o;if(u||c){var h=Math.sqrt(u*u+c*c),f=(u/=h)*a,d=(c/=h)*a,p=Math.atan2(c,u);l.moveTo(o-f,s-d),l.lineTo(t-u*r,e-c*r),l.arc(t,e,r,p-Math.PI,p),l.lineTo(o+f,s+d),l.arc(o,s,a,p,p+Math.PI)}else l.arc(t,e,r,0,hM);l.closePath()}else i=1;o=t,s=e,a=r}function c(o){var s,a,c,h=o.length,f=!1;for(null==l&&(l=c=aC()),s=0;s<=h;++s)!(s<h&&r(a=o[s],s,o))===f&&(f=!f)&&(i=0),f&&u(+t(a,s,o),+e(a,s,o),+n(a,s,o));if(c)return l=null,c+""||null}return c.x=function(e){return arguments.length?(t=e,c):t},c.y=function(t){return arguments.length?(e=t,c):e},c.size=function(t){return arguments.length?(n=t,c):n},c.defined=function(t){return arguments.length?(r=t,c):r},c.context=function(t){return arguments.length?(l=null==t?null:t,c):l},c}function jM(t,e){return null!=t?t:e}const PM=t=>t.x||0,NM=t=>t.y||0,RM=t=>!(!1===t.defined),$M=function(){var t=uC,e=cC,n=lC(0),r=null,i=hC,o=fC,s=dC,a=null;function l(){var l,u,c=+t.apply(this,arguments),h=+e.apply(this,arguments),f=i.apply(this,arguments)-FO,d=o.apply(this,arguments)-FO,p=EO(d-f),g=d>f;if(a||(a=l=aC()),h<c&&(u=h,h=c,c=u),h>1e-12)if(p>jO-1e-12)a.moveTo(h*OO(f),h*DO(f)),a.arc(0,0,h,f,d,!g),c>1e-12&&(a.moveTo(c*OO(d),c*DO(d)),a.arc(0,0,c,d,f,g));else{var m,y,v=f,b=d,_=f,x=d,w=p,k=p,E=s.apply(this,arguments)/2,S=E>1e-12&&(r?+r.apply(this,arguments):TO(c*c+h*h)),O=AO(EO(h-c)/2,+n.apply(this,arguments)),C=O,A=O;if(S>1e-12){var D=NO(S/c*DO(E)),T=NO(S/h*DO(E));(w-=2*D)>1e-12?(_+=D*=g?1:-1,x-=D):(w=0,_=x=(f+d)/2),(k-=2*T)>1e-12?(v+=T*=g?1:-1,b-=T):(k=0,v=b=(f+d)/2)}var M=h*OO(v),F=h*DO(v),j=c*OO(x),P=c*DO(x);if(O>1e-12){var N,R=h*OO(b),$=h*DO(b),I=c*OO(_),z=c*DO(_);if(p<MO&&(N=pC(M,F,I,z,R,$,j,P))){var L=M-N[0],U=F-N[1],B=R-N[0],q=$-N[1],V=1/DO(PO((L*B+U*q)/(TO(L*L+U*U)*TO(B*B+q*q)))/2),H=TO(N[0]*N[0]+N[1]*N[1]);C=AO(O,(c-H)/(V-1)),A=AO(O,(h-H)/(V+1))}}k>1e-12?A>1e-12?(m=gC(I,z,M,F,h,A,g),y=gC(R,$,j,P,h,A,g),a.moveTo(m.cx+m.x01,m.cy+m.y01),A<O?a.arc(m.cx,m.cy,A,SO(m.y01,m.x01),SO(y.y01,y.x01),!g):(a.arc(m.cx,m.cy,A,SO(m.y01,m.x01),SO(m.y11,m.x11),!g),a.arc(0,0,h,SO(m.cy+m.y11,m.cx+m.x11),SO(y.cy+y.y11,y.cx+y.x11),!g),a.arc(y.cx,y.cy,A,SO(y.y11,y.x11),SO(y.y01,y.x01),!g))):(a.moveTo(M,F),a.arc(0,0,h,v,b,!g)):a.moveTo(M,F),c>1e-12&&w>1e-12?C>1e-12?(m=gC(j,P,R,$,c,-C,g),y=gC(M,F,I,z,c,-C,g),a.lineTo(m.cx+m.x01,m.cy+m.y01),C<O?a.arc(m.cx,m.cy,C,SO(m.y01,m.x01),SO(y.y01,y.x01),!g):(a.arc(m.cx,m.cy,C,SO(m.y01,m.x01),SO(m.y11,m.x11),!g),a.arc(0,0,c,SO(m.cy+m.y11,m.cx+m.x11),SO(y.cy+y.y11,y.cx+y.x11),g),a.arc(y.cx,y.cy,C,SO(y.y11,y.x11),SO(y.y01,y.x01),!g))):a.arc(0,0,c,x,_,g):a.lineTo(j,P)}else a.moveTo(0,0);if(a.closePath(),l)return a=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-MO/2;return[OO(r)*n,DO(r)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:lC(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:lC(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:lC(+t),l):n},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:lC(+t),l):r},l.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:lC(+t),l):i},l.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:lC(+t),l):o},l.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:lC(+t),l):s},l.context=function(t){return arguments.length?(a=null==t?null:t,l):a},l}().startAngle(t=>t.startAngle||0).endAngle(t=>t.endAngle||0).padAngle(t=>t.padAngle||0).innerRadius(t=>t.innerRadius||0).outerRadius(t=>t.outerRadius||0).cornerRadius(t=>t.cornerRadius||0),IM=_C().x(PM).y1(NM).y0(t=>(t.y||0)+(t.height||0)).defined(RM),zM=_C().y(NM).x1(PM).x0(t=>(t.x||0)+(t.width||0)).defined(RM),LM=bC().x(PM).y(NM).defined(RM),UM=MM().x(PM).y(NM).width(t=>t.width||0).height(t=>t.height||0).cornerRadius(t=>jM(t.cornerRadiusTopLeft,t.cornerRadius)||0,t=>jM(t.cornerRadiusTopRight,t.cornerRadius)||0,t=>jM(t.cornerRadiusBottomRight,t.cornerRadius)||0,t=>jM(t.cornerRadiusBottomLeft,t.cornerRadius)||0),BM=function(t,e){var n=null;function r(){var r;if(n||(n=r=aC()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"==typeof t?t:lC(t||xC),e="function"==typeof e?e:lC(void 0===e?64:+e),r.type=function(e){return arguments.length?(t="function"==typeof e?e:lC(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:lC(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}().type(t=>kM(t.shape||"circle")).size(t=>jM(t.size,64)),qM=FM().x(PM).y(NM).defined(RM).size(t=>t.size||1);function VM(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function HM(t,e,n,r){return UM.context(t)(e,n,r)}var WM=1;function GM(){WM=1}function ZM(t,e,n){var r=e.clip,i=t._defs,o=e.clip_id||(e.clip_id="clip"+WM++),s=i.clipping[o]||(i.clipping[o]={id:o});return zy(r)?s.path=r(null):VM(n)?s.path=HM(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function YM(t){this.clear(),t&&this.union(t)}function XM(t){this.mark=t,this.bounds=this.bounds||new YM}function QM(t){XM.call(this,t),this.items=this.items||[]}function KM(t){this._pending=0,this._loader=t||Xw()}function JM(t){t._pending+=1}function tF(t){t._pending-=1}function eF(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){const r=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(r+(n?function(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}(e,r):0))}return t}YM.prototype={clone(){return new YM(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(t,e,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(t),l=Math.sin(t),u=e-e*a+n*l,c=n-e*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*s+u,l*r+a*s+c,a*o-l*i+u,l*o+a*i+c,a*o-l*s+u,l*o+a*s+c]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},ev(QM,XM),KM.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return JM(e),e._loader.sanitize(t,{context:"href"}).then(t=>(tF(e),t)).catch(()=>(tF(e),null))},loadImage(t){const e=this,n=kC();return JM(e),e._loader.sanitize(t,{context:"image"}).then(t=>{const r=t.href;if(!r||!n)throw{url:r};const i=new n,o=Qy(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=()=>tF(e),i.onerror=()=>tF(e),i.src=r,i}).catch(t=>(tF(e),{complete:!1,width:0,height:0,src:t&&t.url||""}))},ready(){const t=this;return new Promise(e=>{!function n(r){t.pending()?setTimeout(()=>{n(!0)},10):e(r)}(!1)})}};const nF=hM-1e-8;let rF,iF,oF,sF,aF,lF,uF,cF;const hF=(t,e)=>rF.add(t,e),fF=(t,e)=>hF(iF=t,oF=e),dF=t=>hF(t,rF.y1),pF=t=>hF(rF.x1,t),gF=(t,e)=>aF*t+uF*e,mF=(t,e)=>lF*t+cF*e,yF=(t,e)=>hF(gF(t,e),mF(t,e)),vF=(t,e)=>fF(gF(t,e),mF(t,e));function bF(t,e){return rF=t,e?(sF=e*uM,aF=cF=Math.cos(sF),lF=Math.sin(sF),uF=-lF):(aF=cF=1,sF=lF=uF=0),_F}const _F={beginPath(){},closePath(){},moveTo:vF,lineTo:vF,rect(t,e,n,r){sF?(yF(t+n,e),yF(t+n,e+r),yF(t,e+r),vF(t,e)):(hF(t+n,e+r),fF(t,e))},quadraticCurveTo(t,e,n,r){const i=gF(t,e),o=mF(t,e),s=gF(n,r),a=mF(n,r);xF(iF,i,s,dF),xF(oF,o,a,pF),fF(s,a)},bezierCurveTo(t,e,n,r,i,o){const s=gF(t,e),a=mF(t,e),l=gF(n,r),u=mF(n,r),c=gF(i,o),h=mF(i,o);wF(iF,s,l,c,dF),wF(oF,a,u,h,pF),fF(c,h)},arc(t,e,n,r,i,o){if(r+=sF,i+=sF,iF=n*Math.cos(i)+t,oF=n*Math.sin(i)+e,Math.abs(i-r)>nF)hF(t-n,e-n),hF(t+n,e+n);else{const s=r=>hF(n*Math.cos(r)+t,n*Math.sin(r)+e);let a,l;if(s(r),s(i),i!==r)if((r%=hM)<0&&(r+=hM),(i%=hM)<0&&(i+=hM),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=hM,a=r-r%cM,l=0;l<4&&a>i;++l,a-=cM)s(a);else for(a=r-r%cM+cM,l=0;l<4&&a<i;++l,a+=cM)s(a)}}};function xF(t,e,n,r){const i=(t-e)/(t+n-2*e);0<i&&i<1&&r(t+(e-t)*i)}function wF(t,e,n,r,i){const o=r-t+3*e-3*n,s=t+n-2*e,a=t-e;let l,u=0,c=0;Math.abs(o)>1e-14?(l=s*s+a*o,l>=0&&(l=Math.sqrt(l),u=(-s+l)/o,c=(-s-l)/o)):u=.5*a/s,0<u&&u<1&&i(kF(u,t,e,n,r)),0<c&&c<1&&i(kF(c,t,e,n,r))}function kF(t,e,n,r,i){const o=1-t,s=o*o,a=t*t;return s*o*e+3*s*t*n+3*o*a*r+a*t*i}var EF=(EF=wC(1,1))?EF.getContext("2d"):null;const SF=new YM;function OF(t){return function(e,n){if(!EF)return!0;t(EF,e),SF.clear().union(e.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=SF;for(let t=i;t<=s;++t)for(let e=r;e<=o;++e)if(EF.isPointInPath(e,t))return!0;return!1}}function CF(t,e){return e.contains(t.x||0,t.y||0)}function AF(t,e){const n=t.x||0,r=t.y||0;return e.intersects(SF.set(n,r,n+(t.width||0),r+(t.height||0)))}function DF(t,e){const n=t.x||0,r=t.y||0;return TF(e,n,r,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r)}function TF(t,e,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=t,u=r-e,c=i-n;let h,f,d,p,g=0,m=1;for(p=0;p<4;++p){if(0===p&&(h=-u,f=-(o-e)),1===p&&(h=u,f=a-e),2===p&&(h=-c,f=-(s-n)),3===p&&(h=c,f=l-n),Math.abs(h)<1e-10&&f<0)return!1;if(d=f/h,h<0){if(d>m)return!1;d>g&&(g=d)}else if(h>0){if(d<g)return!1;d<m&&(m=d)}}return!0}function MF(t,e){t.globalCompositeOperation=e.blend||"source-over"}function FF(t,e){return null==t?e:t}function jF(t,e){const n=e.length;for(let r=0;r<n;++r)t.addColorStop(e[r].offset,e[r].color);return t}function PF(t,e,n){return tM(n)?function(t,e,n){const r=n.width(),i=n.height();let o;if("radial"===e.gradient)o=t.createRadialGradient(n.x1+FF(e.x1,.5)*r,n.y1+FF(e.y1,.5)*i,Math.max(r,i)*FF(e.r1,0),n.x1+FF(e.x2,.5)*r,n.y1+FF(e.y2,.5)*i,Math.max(r,i)*FF(e.r2,.5));else{const s=FF(e.x1,0),a=FF(e.y1,0),l=FF(e.x2,1),u=FF(e.y2,0);if(s!==l&&a!==u&&r!==i){const n=wC(Math.ceil(r),Math.ceil(i)),o=n.getContext("2d");return o.scale(r,i),o.fillStyle=jF(o.createLinearGradient(s,a,l,u),e.stops),o.fillRect(0,0,r,i),t.createPattern(n,"no-repeat")}o=t.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i)}return jF(o,e.stops)}(t,n,e.bounds):n}function NF(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=PF(t,e,e.fill),!0)}var RF=[];function $F(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=PF(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||RF),t.lineDashOffset=e.strokeDashOffset||0),!0)}function IF(t,e){return t.zindex-e.zindex||t.index-e.index}function zF(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,o=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&o.push(e);return t.zdirty=!1,t.zitems=o.sort(IF)}function LF(t,e){var n,r,i=t.items;if(!i||!i.length)return;const o=zF(t);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=o}for(n=0,r=i.length;n<r;++n)e(i[n])}function UF(t,e){var n,r,i=t.items;if(!i||!i.length)return null;const o=zF(t);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===o)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function BF(t){return function(e,n,r){LF(n,n=>{r&&!r.intersects(n.bounds)||qF(t,e,n,n)})}}function qF(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(MF(e,n),n.fill&&NF(e,n,i)&&e.fill(),n.stroke&&$F(e,n,i)&&e.stroke()))}function VF(t){return t=t||ry,function(e,n,r,i,o,s){return r*=e.pixelRatio,i*=e.pixelRatio,UF(n,n=>{const a=n.bounds;if((!a||a.contains(o,s))&&a)return t(e,n,r,i,o,s)?n:void 0})}}function HF(t,e){return function(n,r,i,o){var s,a,l=Array.isArray(r)?r[0]:r,u=null==e?l.fill:e,c=l.stroke&&n.isPointInStroke;return c&&(a=l.strokeCap,n.lineWidth=null!=(s=l.strokeWidth)?s:1,n.lineCap=null!=a?a:"butt"),!t(n,r)&&(u&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o))}}function WF(t){return VF(HF(t))}function GF(t,e){return"translate("+t+","+e+")"}function ZF(t){return"rotate("+t+")"}function YF(t){return GF(t.x||0,t.y||0)}function XF(t,e,n){function r(t,n){var r=n.x||0,i=n.y||0,o=n.angle||0;t.translate(r,i),o&&t.rotate(o*=uM),t.beginPath(),e(t,n),o&&t.rotate(-o),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",function(t){return GF(t.x||0,t.y||0)+(t.angle?" "+ZF(t.angle):"")}(n)),t("d",e(null,n))},bound:function(t,n){return e(bF(t,n.angle),n),eF(t,n).translate(n.x||0,n.y||0)},draw:BF(r),pick:WF(r),isect:n||OF(r)}}var QF=XF("arc",function(t,e){return $M.context(t)(e)});function KF(t,e,n){function r(t,n){t.beginPath(),e(t,n)}const i=HF(r);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(bF(t),r),eF(t,r[0]))},draw:(o=r,function(t,e,n){!e.items.length||n&&!n.intersects(e.bounds)||qF(o,t,e.items[0],e.items)}),pick:function(t,e,n,r,o,s){var a=e.items,l=e.bounds;return!a||!a.length||l&&!l.contains(o,s)?null:i(t,a,n*=t.pixelRatio,r*=t.pixelRatio)?a[0]:null},isect:CF,tip:n};var o}var JF=KF("area",function(t,e){const n=e[0];return("horizontal"===n.orient?zM:IM).curve(oM(n.interpolate||"linear",n.orient,n.tension)).context(t)(e)},function(t,e){for(var n,r,i="horizontal"===t[0].orient?e[1]:e[0],o="horizontal"===t[0].orient?"y":"x",s=t.length,a=1/0;--s>=0;)!1!==t[s].defined&&(r=Math.abs(t[s][o]-i))<a&&(a=r,n=t[s]);return n});function tj(t,e){t.beginPath(),VM(e)?HM(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function ej(t){const e=FF(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function nj(t,e){const n=ej(e);t("d",HM(null,e,n,n))}function rj(t,e,n,r){const i=ej(e);t.beginPath(),HM(t,e,(n||0)+i,(r||0)+i)}const ij=HF(rj),oj=HF(rj,!1),sj=HF(rj,!0);var aj={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",YF(e))},bound:function(t,e){if(!e.clip&&e.items){const n=e.items,r=n.length;for(let e=0;e<r;++e)t.union(n[e].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),eF(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){LF(e,e=>{const r=e.x||0,i=e.y||0,o=e.strokeForeground,s=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&s&&(rj(t,e,r,i),MF(t,e),e.fill&&NF(t,e,s)&&t.fill(),e.stroke&&!o&&$F(t,e,s)&&t.stroke()),t.save(),t.translate(r,i),e.clip&&tj(t,e),n&&n.translate(-r,-i),LF(e,e=>{this.draw(t,e,n)}),n&&n.translate(r,i),t.restore(),o&&e.stroke&&s&&(rj(t,e,r,i),MF(t,e),$F(t,e,s)&&t.stroke())})},pick:function(t,e,n,r,i,o){if(e.bounds&&!e.bounds.contains(i,o)||!e.items)return null;const s=n*t.pixelRatio,a=r*t.pixelRatio;return UF(e,l=>{let u,c,h;const f=l.bounds;if(f&&!f.contains(i,o))return;c=l.x||0,h=l.y||0;const d=l.clip;if(d&&(i<c||i>c+(l.width||0)||o<h||o>h+(l.height||0)))return;if(t.save(),t.translate(c,h),c=i-c,h=o-h,d&&VM(l)&&!sj(t,l,s,a))return t.restore(),null;const p=l.strokeForeground,g=!1!==e.interactive;return g&&p&&l.stroke&&oj(t,l,s,a)?(t.restore(),l):(u=UF(l,t=>function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,c,h)?this.pick(t,n,r,c,h):null),!u&&g&&(l.fill||!p&&l.stroke)&&ij(t,l,s,a)&&(u=l),t.restore(),u||null)})},isect:AF,content:function(t,e,n){t("clip-path",e.clip?ZM(n,e,e):null)},background:function(t,e){t("class","background"),t("aria-hidden",!0),nj(t,e)},foreground:function(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?nj(t,e):t("d","")}},lj={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function uj(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(e=>{t.image=e,t.image.url=t.url})),n}function cj(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function hj(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function fj(t,e){return"center"===t?e/2:"right"===t?e:0}function dj(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var pj={type:"image",tag:"image",nested:!1,attr:function(t,e,n){const r=uj(e,n),i=cj(e,r),o=hj(e,r),s=(e.x||0)-fj(e.align,i),a=(e.y||0)-dj(e.baseline,o);t("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",lj["xmlns:xlink"],"xlink:href"),t("transform",GF(s,a)),t("width",i),t("height",o),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")},bound:function(t,e){const n=e.image,r=cj(e,n),i=hj(e,n),o=(e.x||0)-fj(e.align,r),s=(e.y||0)-dj(e.baseline,i);return t.set(o,s,o+r,s+i)},draw:function(t,e,n){LF(e,e=>{if(n&&!n.intersects(e.bounds))return;const r=uj(e,this);let i,o,s,a,l=cj(e,r),u=hj(e,r),c=(e.x||0)-fj(e.align,l),h=(e.y||0)-dj(e.baseline,u);!1!==e.aspect&&(o=r.width/r.height,s=e.width/e.height,o==o&&s==s&&o!==s&&(s<o?(a=l/o,h+=(u-a)/2,u=a):(a=u*o,c+=(l-a)/2,l=a))),(r.complete||r.toDataURL)&&(MF(t,e),t.globalAlpha=null!=(i=e.opacity)?i:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(r,c,h,l,u))})},pick:VF(),isect:ry,get:uj,xOffset:fj,yOffset:dj},gj=KF("line",function(t,e){const n=e[0];return LM.curve(oM(n.interpolate||"linear",n.orient,n.tension)).context(t)(e)},function(t,e){for(var n,r,i=Math.pow(t[0].strokeWidth||1,2),o=t.length;--o>=0;)if(!1!==t[o].defined&&(n=t[o].x-e[0])*n+(r=t[o].y-e[1])*r<i)return t[o];return null});function mj(t,e){var n=e.path;if(null==n)return!0;var r=e.x||0,i=e.y||0,o=e.scaleX||1,s=e.scaleY||1,a=(e.angle||0)*uM,l=e.pathCache;l&&l.path===n||((e.pathCache=l=lM(n)).path=n),a&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(a),bM(t,l,0,0,o,s),t.rotate(-a),t.translate(-r,-i)):bM(t,l,r,i,o,s)}var yj={type:"path",tag:"path",nested:!1,attr:function(t,e){1===(e.scaleX||1)&&1===(e.scaleY||1)||t("vector-effect","non-scaling-stroke"),t("transform",function(t){return GF(t.x||0,t.y||0)+(t.angle?" "+ZF(t.angle):"")+(t.scaleX||t.scaleY?" scale("+(t.scaleX||1)+","+(t.scaleY||1)+")":"")}(e)),t("d",e.path)},bound:function(t,e){return mj(bF(t,e.angle),e)?t.set(0,0,0,0):eF(t,e,!0)},draw:BF(mj),pick:WF(mj),isect:OF(mj)};function vj(t,e){t.beginPath(),HM(t,e)}var bj={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",HM(null,e))},bound:function(t,e){var n,r;return eF(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:BF(vj),pick:WF(vj),isect:AF};function _j(t,e,n){var r,i,o,s;return!(!e.stroke||!$F(t,e,n)||(r=e.x||0,i=e.y||0,o=null!=e.x2?e.x2:r,s=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(o,s),0))}var xj={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",YF(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return eF(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){LF(e,e=>{if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&_j(t,e,r)&&(MF(t,e),t.stroke())}})},pick:VF(function(t,e,n,r){return!!t.isPointInStroke&&_j(t,e,1)&&t.isPointInStroke(n,r)}),isect:DF},wj=XF("shape",function(t,e){return(e.mark.shape||e.shape).context(t)(e)}),kj=XF("symbol",function(t,e){return BM.context(t)(e)},CF);const Ej=hv();var Sj={height:Mj,measureWidth:Dj,estimateWidth:Cj,width:Cj,canvas:Oj};function Oj(t){Sj.width=t&&EF?Dj:Cj}function Cj(t,e){return Aj(Nj(t,e),Mj(t))}function Aj(t,e){return~~(.8*t.length*e)}function Dj(t,e){return Mj(t)<=0||!(e=Nj(t,e))?0:Tj(e,$j(t))}function Tj(t,e){const n="(".concat(e,") ").concat(t);let r=Ej.get(n);return void 0===r&&(EF.font=e,r=EF.measureText(t).width,Ej.set(n,r)),r}function Mj(t){return null!=t.fontSize?+t.fontSize||0:11}function Fj(t){return null!=t.lineHeight?t.lineHeight:Mj(t)+2}function jj(t){return e=t.lineBreak&&t.text&&!fy(t.text)?t.text.split(t.lineBreak):t.text,fy(e)?e.length>1?e:e[0]:e;var e}function Pj(t){const e=jj(t);return(fy(e)?e.length-1:0)*Fj(t)}function Nj(t,e){const n=null==e?"":(e+"").trim();return t.limit>0&&n.length?function(t,e){var n=+t.limit,r=function(t){if(Sj.width===Dj){const e=$j(t);return t=>Tj(t,e)}{const e=Mj(t);return t=>Aj(t,e)}}(t);if(r(e)<n)return e;var i,o=t.ellipsis||"\u2026",s="rtl"===t.dir,a=0,l=e.length;if(n-=r(o),s){for(;a<l;)r(e.slice(i=a+l>>>1))>n?a=i+1:l=i;return o+e.slice(a)}for(;a<l;)r(e.slice(0,i=1+(a+l>>>1)))<n?a=i:l=i-1;return e.slice(0,a)+o}(t,n):n}function Rj(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function $j(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Mj(t)+"px "+Rj(t,e)}function Ij(t){var e=t.baseline,n=Mj(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*Fj(t):"line-bottom"===e?.29*n-.5*Fj(t):0)}Oj(!0);const zj={left:"start",center:"middle",right:"end"},Lj=new YM;function Uj(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-cM,n+=i*Math.cos(e),r+=i*Math.sin(e)),Lj.x1=n,Lj.y1=r,Lj}function Bj(t,e,n){var r,i=Sj.height(e),o=e.align,s=Uj(e),a=s.x1,l=s.y1,u=e.dx||0,c=(e.dy||0)+Ij(e)-Math.round(.8*i),h=jj(e);if(fy(h)?(i+=Fj(e)*(h.length-1),r=h.reduce((t,n)=>Math.max(t,Sj.width(e,n)),0)):r=Sj.width(e,h),"center"===o?u-=r/2:"right"===o&&(u-=r),t.set(u+=a,c+=l,u+r,c+i),e.angle&&!n)t.rotate(e.angle*uM,a,l);else if(2===n)return t.rotatedPoints(e.angle*uM,a,l);return t}var qj={arc:QF,area:JF,group:aj,image:pj,line:gj,path:yj,rect:bj,rule:xj,shape:wj,symbol:kj,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+Ij(e),o=Uj(e),s=o.x1,a=o.y1,l=e.angle||0;t("text-anchor",zj[e.align]||"start"),l?(n=GF(s,a)+" "+ZF(l),(r||i)&&(n+=" "+GF(r,i))):n=GF(s+r,a+i),t("transform",n)},bound:Bj,draw:function(t,e,n){LF(e,e=>{var r,i,o,s,a,l,u,c=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===c||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=$j(e),t.textAlign=e.align||"left",i=(r=Uj(e)).x1,o=r.y1,e.angle&&(t.save(),t.translate(i,o),t.rotate(e.angle*uM),i=o=0),i+=e.dx||0,o+=(e.dy||0)+Ij(e),l=jj(e),MF(t,e),fy(l))for(a=Fj(e),s=0;s<l.length;++s)u=Nj(e,l[s]),e.fill&&NF(t,e,c)&&t.fillText(u,i,o),e.stroke&&$F(t,e,c)&&t.strokeText(u,i,o),o+=a;else u=Nj(e,l),e.fill&&NF(t,e,c)&&t.fillText(u,i,o),e.stroke&&$F(t,e,c)&&t.strokeText(u,i,o);e.angle&&t.restore()}})},pick:VF(function(t,e,n,r,i,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var s=Uj(e),a=s.x1,l=s.y1,u=Bj(Lj,e,1),c=-e.angle*uM,h=Math.cos(c),f=Math.sin(c);return u.contains(h*i-f*o+(a-h*a+f*l),f*i+h*o+(l-f*a-h*l))}),isect:function(t,e){const n=Bj(Lj,t,2);return TF(e,n[0],n[1],n[2],n[3])||TF(e,n[0],n[1],n[4],n[5])||TF(e,n[4],n[5],n[6],n[7])||TF(e,n[2],n[3],n[6],n[7])}},trail:KF("trail",function(t,e){return qM.context(t)(e)},function(t,e){for(var n,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(n=t[i].x-e[0])*n+(r=t[i].y-e[1])*r<(n=t[i].size||1)*n)return t[i];return null})};function Vj(t,e,n){var r=qj[t.mark.marktype];return r.nested&&(t=t.mark),(e||r.bound)(t.bounds||(t.bounds=new YM),t,n)}var Hj={mark:null};function Wj(t,e,n){var r,i,o,s,a=qj[t.marktype],l=a.bound,u=t.items,c=u&&u.length;if(a.nested)return c?o=u[0]:(Hj.mark=t,o=Hj),s=Vj(o,l,n),e&&e.union(s)||s;if(e=e||t.bounds&&t.bounds.clear()||new YM,c)for(r=0,i=u.length;r<i;++r)e.union(Vj(u[r],l,n));return t.bounds=e}const Gj=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Zj(t,e){return JSON.stringify(t,Gj,e)}function Yj(t){return Xj("string"==typeof t?JSON.parse(t):t)}function Xj(t){var e,n,r,i=t.marktype,o=t.items;if(o)for(n=0,r=o.length;n<r;++n)o[n][e=i?"mark":"group"]=t,o[n].zindex&&(o[n][e].zdirty=!0),"group"===(i||e)&&Xj(o[n]);return i&&Wj(t),t}function Qj(t){arguments.length?this.root=Yj(t):(this.root=Kj({marktype:"group",name:"root",role:"frame"}),this.root.items=[new QM(this.root)])}function Kj(t,e){const n={bounds:new YM,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function Jj(t,e,n){return!t&&"undefined"!=typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function tP(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function eP(t,e,n,r){var i,o=t.childNodes[e];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=Jj(t.ownerDocument,n,r),t.insertBefore(o,i)),o}function nP(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function rP(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function iP(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function oP(t,e){this._active=null,this._handlers={},this._loader=t||Xw(),this._tooltip=e||sP}function sP(t,e,n,r){t.element().setAttribute("title",r||"")}function aP(t){this._el=null,this._bgcolor=null,this._loader=new KM(t)}Qj.prototype={toJSON(t){return Zj(this.root,t||0)},mark(t,e,n){const r=Kj(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},oP.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const r in e)n.push(...e[r]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(e=>{const n=new MouseEvent(t.type,t),r=Jj(null,"a");for(const t in e)r.setAttribute(t,e[t]);r.dispatchEvent(n)}).catch(()=>{})},handleTooltip(t,e,n){e&&null!=e.tooltip&&(e=function(t,e,n,r){var i,o,s=t&&t.mark;if(s&&(i=qj[s.marktype]).tip){for((o=iP(e,n))[0]-=r[0],o[1]-=r[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=i.tip(s.items,o)}return t}(e,t,this.canvas(),this._origin),this._tooltip.call(this._obj,this,t,e,n&&e&&e.tooltip||null))},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,o=i.width(),s=i.height();let a=i.x1+r[0]+n.left,l=i.y1+r[1]+n.top;for(;t.mark&&(t=t.mark.group);)a+=t.x||0,l+=t.y||0;return{x:a,y:l,width:o,height:s,left:a,top:l,right:a+o,bottom:l+s}}},aP.prototype={initialize(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var n=this,r=n._loader[t](e);if(!n._ready){const t=n._call;n._ready=n._loader.ready().then(e=>{e&&t(),n._ready=null})}return r},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const lP="dragleave",uP="mousedown",cP="mousemove",hP="mouseout",fP="click",dP=cP,pP=hP,gP=fP;function mP(t,e){oP.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}function yP(t,e){(t=>"touchstart"===t||"touchmove"===t||"touchend"===t?["touchstart","touchmove","touchend"]:[t])(e).forEach(e=>function(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}(t,e))}function vP(t,e,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(e,r)),this.fire(t,r)}}function bP(t){return function(e){this.fire(t,e),this._active=null}}ev(mP,oP,{initialize(t,e,n){return this._canvas=t&&tP(t,"canvas"),[fP,uP,cP,hP,lP].forEach(t=>yP(this,t)),oP.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup","dragenter",lP,"dragover",uP,"mouseup",cP,hP,"mouseover",fP,"dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],DOMMouseScroll(t){this.fire("mousewheel",t)},mousemove:vP(cP,"mouseover",hP),dragover:vP("dragover","dragenter",lP),mouseout:bP(hP),dragleave:bP(lP),mousedown(t){this._down=this._active,this.fire(uP,t)},click(t){this._down===this._active&&(this.fire(fP,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},touchmove(t){this.fire("touchmove",t,!0)},touchend(t){this.fire("touchend",t,!0),this._touch=null},fire(t,e,n){const r=n?this._touch:this._active,i=this._handlers[t];if(e.vegaType=t,t===gP&&r&&r.href?this.handleHref(e,r,r.href):t!==dP&&t!==pP||this.handleTooltip(e,r,t!==pP),i)for(let o=0,s=i.length;o<s;++o)i[o].handler.call(this._obj,e,r)},on(t,e){const n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(yP(this,t),(r[n]||(r[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},pickEvent(t){const e=iP(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,r,i){const o=this.context();return qj[t.marktype].pick.call(this,o,t,e,n,r,i)}});var _P="undefined"!=typeof window&&window.devicePixelRatio||1;function xP(t){aP.call(this,t),this._options={},this._redraw=!1,this._dirty=new YM,this._tempb=new YM}const wP=aP.prototype;function kP(t,e){oP.call(this,t,e);const n=this;n._hrefHandler=EP(n,(t,e)=>{e&&e.href&&n.handleHref(t,e,e.href)}),n._tooltipHandler=EP(n,(t,e)=>{n.handleTooltip(t,e,t.type!==pP)})}ev(xP,aP,{initialize(t,e,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:wC(1,1),t&&this._canvas&&(nP(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),wP.initialize.call(this,t,e,n,r,i)},resize(t,e,n,r){if(wP.resize.call(this,t,e,n,r),this._canvas)!function(t,e,n,r,i,o){const s="undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,a=t.getContext("2d"),l=s?_P:i;t.width=e*l,t.height=n*l;for(const u in o)a[u]=o[u];s&&1!==l&&(t.style.width=e+"px",t.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const t=this._options.externalContext;t||Xm("CanvasRenderer is missing a valid canvas or context"),t.scale(this._scale,this._scale),t.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;for(;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,s=(a=n,l=r,u=i,(new YM).set(0,0,l,u).translate(-a[0],-a[1]));var a,l,u;e.save();const c=this._redraw||o.empty()?(this._redraw=!1,s.expand(1)):function(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,s.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(e,t,c),e.restore(),o.clear(),this},draw(t,e,n){const r=qj[e.marktype];e.clip&&function(t,e){var n=e.clip;t.save(),zy(n)?(t.beginPath(),n(t),t.clip()):tj(t,e.group)}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(t,e,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(t,e,n,r))}});const EP=(t,e)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,e.call(t._obj,n,r)};ev(kP,oP,{initialize(t,e,n){let r=this._svg;return r&&(r.removeEventListener(gP,this._hrefHandler),r.removeEventListener(dP,this._tooltipHandler),r.removeEventListener(pP,this._tooltipHandler)),this._svg=r=t&&tP(t,"svg"),r&&(r.addEventListener(gP,this._hrefHandler),r.addEventListener(dP,this._tooltipHandler),r.addEventListener(pP,this._tooltipHandler)),oP.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){const i={type:t,handler:e,listener:EP(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const SP=(t,e,n)=>({role:t,"aria-roledescription":e,"aria-label":n||void 0}),OP=xv(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),CP={axis:{desc:"axis",caption:function(t){const e=t.datum,n=t.orient,r=e.title?FP(t):null,i=t.context,o=i.scales[e.scale].value,s=i.dataflow.locale(),a=o.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(_T(a)?"discrete":a," scale")+" with ".concat(KT(s,o,t))}},legend:{desc:"legend",caption:function(t){const e=t.datum,n=e.title?FP(t):null,r="".concat(e.type||""," legend").trim(),i=e.scales,o=Object.keys(i),s=t.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return((u=r).length?u[0].toUpperCase()+u.slice(1):u)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(t){return(t=t.map(t=>t+("fill"===t||"stroke"===t?" color":""))).length<2?t[0]:t.slice(0,-1).join(", ")+" and "+vy(t)}(o))+" with ".concat(KT(l,a,t));var u}},"title-text":{desc:"title",caption:t=>"Title text '".concat(MP(t),"'")},"title-subtitle":{desc:"subtitle",caption:t=>"Subtitle text '".concat(MP(t),"'")}},AP={ariaRole:"role",ariaRoleDescription:"aria-roledescription",description:"aria-label"};function DP(t,e){const n=!1===e.aria;if(t("aria-hidden",n||void 0),n||null==e.description)for(const r in AP)t(AP[r],void 0);else{const n=e.mark.marktype;t("aria-label",e.description),t("role",e.ariaRole||("group"===n?"graphics-object":"graphics-symbol")),t("aria-roledescription",e.ariaRoleDescription||"".concat(n," mark"))}}function TP(t){return!1===t.aria?{"aria-hidden":!0}:OP[t.role]?null:CP[t.role]?function(t,e){try{const n=t.items[0],r=e.caption||(()=>"");return SP(e.role||"graphics-symbol",e.desc,n.description||r(n))}catch(n){return null}}(t,CP[t.role]):function(t){const e=t.marktype,n="group"===e||"text"===e||t.items.some(t=>null!=t.description&&!1!==t.aria);return SP(n?"graphics-object":"graphics-symbol","".concat(e," mark container"),t.description)}(t)}function MP(t){return $y(t.text).join(" ")}function FP(t){try{return $y(vy(t.items).items[0].text).join(" ")}catch(e){return null}}const jP=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function PP(){let t="",e="",n="";const r=[],i=()=>e=n="",o=(t,n)=>(null!=n&&(e+=" ".concat(t,'="').concat(jP(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),s),s={open(a,...l){(o=>{e&&(t+="".concat(e,">").concat(n),i()),r.push(o)})(a),e="<"+a;for(const t of l)for(const e in t)o(e,t[e]);return s},close(){const o=r.pop();return t+=e?e+(n?">".concat(n,"</").concat(o,">"):"/>"):"</".concat(o,">"),i(),s},attr:o,text:t=>(n+=jP(t),s),toString:()=>t};return s}const NP=t=>RP(PP(),t)+"";function RP(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,r=n.length;for(let e=0;e<r;++e)t.attr(n[e].name,n[e].value)}if(e.hasChildNodes()){const n=e.childNodes,r=n.length;for(let e=0;e<r;e++){const r=n[e];3===r.nodeType?t.text(r.nodeValue):RP(t,r)}}return t.close()}const $P={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},IP={fill:"none","stroke-miterlimit":10},zP="http://www.w3.org/2000/xmlns/",LP=lj.xmlns;function UP(t){aP.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const BP=aP.prototype;function qP(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function VP(t,e,n){let r,i,o;if("radial"===e.gradient){let r=eP(t,n++,"pattern",LP);KP(r,{id:"p_"+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=eP(r,0,"rect",LP),KP(r,{width:1,height:1,fill:"url(".concat(tN(),"#").concat(e.id,")")}),KP(t=eP(t,n++,"radialGradient",LP),{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else KP(t=eP(t,n++,"linearGradient",LP),{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(r=0,i=e.stops.length;r<i;++r)o=eP(t,r,"stop",LP),o.setAttribute("offset",e.stops[r].offset),o.setAttribute("stop-color",e.stops[r].color);return nP(t,r),n}function HP(t,e,n){let r;return(t=eP(t,n,"clipPath",LP)).setAttribute("id",e.id),e.path?(r=eP(t,0,"path",LP),r.setAttribute("d",e.path)):(r=eP(t,0,"rect",LP),KP(r,{x:0,y:0,width:e.width,height:e.height})),nP(t,1),n+1}function WP(t,e,n,r,i){let o,s=t._svg;if(!s&&(o=e.ownerDocument,s=Jj(o,r,LP),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},"g"===r))){const e=Jj(o,"path",LP);s.appendChild(e),e.__data__=t;const n=Jj(o,"g",LP);s.appendChild(n),n.__data__=t;const r=Jj(o,"path",LP);s.appendChild(r),r.__data__=t,r.__values__={fill:"default"}}return(s.ownerSVGElement!==i||function(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}(s,n))&&e.insertBefore(s,n?n.nextSibling:e.firstChild),s}ev(UP,aP,{initialize(t,e,n,r,i){return this._defs={},this._clearDefs(),t&&(this._svg=eP(t,0,"svg",LP),this._svg.setAttributeNS(zP,"xmlns",LP),this._svg.setAttributeNS(zP,"xmlns:xlink",lj["xmlns:xlink"]),this._svg.setAttribute("version",lj.version),this._svg.setAttribute("class","marks"),nP(t,1),this._root=eP(this._svg,0,"g",LP),KP(this._root,IP),nP(this._svg,1)),this.background(this._bgcolor),BP.initialize.call(this,t,e,n,r,i)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),BP.background.apply(this,arguments)},resize(t,e,n,r){return BP.resize.call(this,t,e,n,r),this._svg&&(KP(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=eP(t,0,"rect",LP),KP(n,{width:this._width,height:this._height,fill:e}));const r=NP(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),r},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),nP(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,r,i,o,s,a,l;for(s=0,a=t.length;s<a;++s)n=t[s],r=n.mark,r.marktype!==i&&(i=r.marktype,o=qj[i]),r.zdirty&&r.dirty!==e&&(this._dirtyAll=!1,qP(n,e),r.items.forEach(t=>{t.dirty=e})),r.zdirty||(n.exit?(o.nested&&r.items.length?(l=r.items[0],l._svg&&this._update(o,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null):(n=o.nested?r.items[0]:n,n._update!==e&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,qP(n,e)),n._update=e)));return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const r=this._svg,i=qj[e.marktype],o=!1===e.interactive?"none":null,s="g"===i.tag;let a=null,l=0;const u=WP(e,t,n,"g",r);u.setAttribute("class",rP(e));const c=TP(e);for(const f in c)JP(u,f,c[f]);s||JP(u,"pointer-events",o),JP(u,"clip-path",e.clip?ZM(this,e,e.group):null);const h=t=>{const e=this.isDirty(t),n=WP(t,u,a,i.tag,r);e&&(this._update(i,n,t),s&&function(t,e,n){e=e.lastChild.previousSibling;let r,i=0;LF(n,n=>{r=t.mark(e,n,r),++i}),nP(e,1+i)}(this,n,t)),a=n,++l};return i.nested?e.items.length&&h(e.items[0]):LF(e,h),nP(u,l),u},_update(t,e,n){GP=e,ZP=e.__values__,DP(XP,n),t.attr(XP,n,this);const r=YP[t.type];r&&r.call(this,t,e,n),GP&&this.style(GP,n)},style(t,e){if(null!=e)for(const n in $P){let r="font"===n?Rj(e):e[n];if(r===ZP[n])continue;const i=$P[n];null==r?t.removeAttribute(i):(tM(r)&&(r=eM(r,this._defs.gradient,tN())),t.setAttribute(i,r+"")),ZP[n]=r}},defs(){const t=this._svg,e=this._defs;let n=e.el,r=0;for(const i in e.gradient)n||(e.el=n=eP(t,1,"defs",LP)),r=VP(n,e.gradient[i],r);for(const i in e.clipping)n||(e.el=n=eP(t,1,"defs",LP)),r=HP(n,e.clipping[i],r);n&&(0===r?(t.removeChild(n),e.el=null):nP(n,r))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});let GP=null,ZP=null;const YP={group(t,e,n){const r=GP=e.childNodes[2];ZP=r.__values__,t.foreground(XP,n,this),ZP=e.__values__,GP=e.childNodes[1],t.content(XP,n,this);const i=GP=e.childNodes[0];t.background(XP,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==ZP.events&&(JP(r,"pointer-events",o),JP(i,"pointer-events",o),ZP.events=o),n.strokeForeground&&n.stroke){const t=n.fill;JP(r,"display",null),this.style(i,n),JP(i,"stroke",null),t&&(n.fill=null),ZP=r.__values__,this.style(r,n),t&&(n.fill=t),GP=null}else JP(r,"display","none")},image(t,e,n){!1===n.smooth?(QP(e,"image-rendering","optimizeSpeed"),QP(e,"image-rendering","pixelated")):QP(e,"image-rendering",null)},text(t,e,n){const r=jj(n);let i,o,s,a;fy(r)?(o=r.map(t=>Nj(n,t)),i=o.join("\n"),i!==ZP.text&&(nP(e,0),s=e.ownerDocument,a=Fj(n),o.forEach((t,r)=>{const i=Jj(s,"tspan",LP);i.__data__=n,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",a)),e.appendChild(i)}),ZP.text=i)):(o=Nj(n,r),o!==ZP.text&&(e.textContent=o,ZP.text=o)),JP(e,"font-family",Rj(n)),JP(e,"font-size",Mj(n)+"px"),JP(e,"font-style",n.fontStyle),JP(e,"font-variant",n.fontVariant),JP(e,"font-weight",n.fontWeight)}};function XP(t,e,n){e!==ZP[t]&&(n?function(t,e,n,r){null!=n?t.setAttributeNS(r,e,n):t.removeAttributeNS(r,e)}(GP,t,e,n):JP(GP,t,e),ZP[t]=e)}function QP(t,e,n){n!==ZP[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),ZP[e]=n)}function KP(t,e){for(const n in e)JP(t,n,e[n])}function JP(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function tN(){let t;return"undefined"==typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function eN(t){aP.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}ev(eN,aP,{svg(){return this._text},_render(t){const e=PP();e.open("svg",Gy({},lj,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",IP,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=qj[e.marktype],r=n.tag,i=[DP,n.attr];t.open("g",{class:rP(e),"clip-path":e.clip?ZM(this,e,e.group):null},TP(e),{"pointer-events":"g"!==r&&!1===e.interactive?"none":null});const o=o=>{const s=this.href(o);if(s&&t.open("a",s),t.open(r,this.attr(e,o,i,"g"!==r?r:null)),"text"===r){const e=jj(o);if(fy(e)){const n={x:0,dy:Fj(o)};for(let r=0;r<e.length;++r)t.open("tspan",r?n:null).text(Nj(o,e[r])).close()}else t.text(Nj(o,e))}else if("g"===r){const r=o.strokeForeground,i=o.fill,s=o.stroke;r&&s&&(o.stroke=null),t.open("path",this.attr(e,o,n.background,"bgrect")).close(),t.open("g",this.attr(e,o,n.content)),LF(o,e=>this.mark(t,e)),t.close(),r&&s?(i&&(o.fill=null),o.stroke=s,t.open("path",this.attr(e,o,n.foreground,"bgrect")).close(),i&&(o.fill=i)):t.open("path",this.attr(e,o,n.foreground,"bgfore")).close()}t.close(),s&&t.close()};return n.nested?e.items&&e.items.length&&o(e.items[0]):LF(e,o),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(t=>{t["xlink:href"]=t.href,t.href=null,(this._hrefs||(this._hrefs={}))[e]=t})}return null},attr(t,e,n,r){const i={},o=(t,e,n,r)=>{i[r||t]=e};return Array.isArray(n)?n.forEach(t=>t(o,e,this)):n(o,e,this),r&&function(t,e,n,r,i){if(null==e)return t;if("bgrect"===r&&!1===n.interactive&&(t["pointer-events"]="none"),"bgfore"===r&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===r&&!1===e.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===r&&(t["font-family"]=Rj(e),t["font-size"]=Mj(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const o in $P){let n=e[o];const r=$P[o];("transparent"!==n||"fill"!==r&&"stroke"!==r)&&null!=n&&(tM(n)&&(n=eM(n,i.gradient,"")),t[r]=n)}}(i,e,t,r,this._defs),i},defs(t){const e=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(e).length+Object.keys(n).length){t.open("defs");for(const n in e){const r=e[n],i=r.stops;"radial"===r.gradient?(t.open("pattern",{id:"p_"+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),t.close(),t.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):t.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let e=0;e<i.length;++e)t.open("stop",{offset:i[e].offset,"stop-color":i[e].color}).close();t.close()}for(const e in n){const r=n[e];t.open("clipPath",{id:e}),r.path?t.open("path",{d:r.path}).close():t.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),t.close()}t.close()}}});const nN={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},rN={};function iN(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(rN[t]=e,this):rN[t]}function oN(t,e,n){const r=[],i=(new YM).union(e),o=t.marktype;return o?sN(t,i,n,r):"group"===o?aN(t,i,n,r):Xm("Intersect scene must be mark node or group item.")}function sN(t,e,n,r){if(function(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}(t,e,n)){const i=t.items,o=t.marktype,s=i.length;let a=0;if("group"===o)for(;a<s;++a)aN(i[a],e,n,r);else for(const t=qj[o].isect;a<s;++a){const n=i[a];lN(n,e,t)&&r.push(n)}}return r}function aN(t,e,n,r){n&&n(t.mark)&&lN(t,e,qj.group.isect)&&r.push(t);const i=t.items,o=i&&i.length;if(o){const s=t.x||0,a=t.y||0;e.translate(-s,-a);for(let t=0;t<o;++t)sN(i[t],e,n,r);e.translate(s,a)}return r}function lN(t,e,n){const r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}rN.canvas=rN.png={renderer:xP,headless:xP,handler:mP},rN.svg={renderer:UP,headless:eN,handler:kP},rN.none={};const uN=new YM;function cN(t){const e=t.clip;if(zy(e))e(bF(uN.clear()));else{if(!e)return;uN.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(uN)}function hN(t,e,n){return t===e||("path"===n?fN(t,e):t instanceof Date&&e instanceof Date?+t==+e:sv(t)&&sv(e)?Math.abs(t-e)<=1e-9:t&&e&&(dy(t)||dy(e))?function(t,e){var n,r,i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(!hN(t[n=i[r]],e[n],n))return!1;return typeof t==typeof e}(t,e):t==e)}function fN(t,e){return hN(lM(t),lM(e))}function dN(){GM(),JT=0}const pN="top",gN="left",mN="right",yN="end",vN="row";function bN(t){jk.call(this,null,t)}function _N(t,e,n){return e(t.bounds.clear(),t,n)}function xN(t){jk.call(this,0,t)}function wN(t){jk.call(this,null,t)}function kN(t){jk.call(this,null,t)}ev(bN,jk,{transform(t,e){const n=e.dataflow,r=t.mark,i=r.marktype,o=qj[i],s=o.bound;let a,l=r.bounds;if(o.nested)r.items.length&&n.dirty(r.items[0]),l=_N(r,s),r.items.forEach(t=>{t.bounds.clear().union(l)});else if("group"===i||t.modified())switch(e.visit(e.MOD,t=>n.dirty(t)),l.clear(),r.items.forEach(t=>l.union(_N(t,s))),r.role){case"axis":case"legend":case"title":e.reflow()}else a=e.changed(e.REM),e.visit(e.ADD,t=>{l.union(_N(t,s))}),e.visit(e.MOD,t=>{a=a||l.alignsWith(t.bounds),n.dirty(t),l.union(_N(t,s))}),a&&(l.clear(),r.items.forEach(t=>l.union(t.bounds)));return cN(r),e.modifies("bounds")}}),xN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},ev(xN,jk,{transform(t,e){const n=(i=e.dataflow)._signals[":vega_identifier:"]||(i._signals[":vega_identifier:"]=i.add(0)),r=t.as;var i;let o=n.value;return e.visit(e.ADD,t=>t[r]=t[r]||++o),n.set(this.value=o),e}}),ev(wN,jk,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,function(t){const e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const r="group"===n.marktype?QM:XM;return e.visit(e.ADD,t=>r.call(t,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});const EN={parity:t=>t.filter((t,e)=>e%2?t.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((t,r)=>r&&SN(n.bounds,t.bounds,e)?t.opacity=0:(n=t,1))}},SN=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),ON=(t,e)=>{for(var n,r=1,i=t.length,o=t[0].bounds;r<i;o=n,++r)if(SN(o,n=t[r].bounds,e))return!0},CN=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},AN=t=>(t.forEach(t=>t.opacity=1),t),DN=(t,e)=>t.reflow(e.modified()).modifies("opacity");function TN(t){jk.call(this,null,t)}ev(kN,jk,{transform(t,e){const n=EN[t.method]||EN.parity,r=t.separation||0;let i,o,s=e.materialize(e.SOURCE).source;if(!s||!s.length)return;if(!t.method)return t.modified("method")&&(AN(s),e=DN(e,t)),e;if(s=s.filter(CN),!s.length)return;if(t.sort&&(s=s.slice().sort(t.sort)),i=AN(s),e=DN(e,t),i.length>=3&&ON(i,r)){do{i=n(i,r)}while(i.length>=3&&ON(i,r));i.length<3&&!vy(s).opacity&&(i.length>1&&(vy(i).opacity=0),vy(s).opacity=1)}var a,l,u,c;t.boundScale&&t.boundTolerance>=0&&(a=t.boundOrient,l=+t.boundTolerance,u=t.boundScale.range(),c=new YM,a===pN||"bottom"===a?c.set(u[0],-1/0,u[1],1/0):c.set(-1/0,u[0],1/0,u[1]),c.expand(l||1),o=t=>c.encloses(t.bounds),s.forEach(t=>{o(t)||(t.opacity=0)}));const h=i[0].mark.bounds.clear();return s.forEach(t=>{t.opacity&&h.union(t.bounds)}),e}}),ev(TN,jk,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,t=>n.dirty(t)),e.fields&&e.fields.zindex){const t=e.source&&e.source[0];t&&(t.mark.zdirty=!0)}}});const MN=new YM;function FN(t,e,n){return t[e]===n?0:(t[e]=n,1)}function jN(t){var e=t.items[0].orient;return e===gN||e===mN}function PN(t,e,n,r){var i,o,s=e.items[0],a=s.datum,l=null!=s.translate?s.translate:.5,u=s.orient,c=function(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}(a),h=s.range,f=s.offset,d=s.position,p=s.minExtent,g=s.maxExtent,m=a.title&&s.items[c[2]].items[0],y=s.titlePadding,v=s.bounds,b=m&&Pj(m),_=0,x=0;switch(MN.clear().union(v),v.clear(),(i=c[0])>-1&&v.union(s.items[i].bounds),(i=c[1])>-1&&v.union(s.items[i].bounds),u){case pN:_=d||0,x=-f,o=Math.max(p,Math.min(g,-v.y1)),v.add(0,-o).add(h,0),m&&NN(t,m,o,y,b,0,-1,v);break;case gN:_=-f,x=d||0,o=Math.max(p,Math.min(g,-v.x1)),v.add(-o,0).add(0,h),m&&NN(t,m,o,y,b,1,-1,v);break;case mN:_=n+f,x=d||0,o=Math.max(p,Math.min(g,v.x2)),v.add(0,0).add(o,h),m&&NN(t,m,o,y,b,1,1,v);break;case"bottom":_=d||0,x=r+f,o=Math.max(p,Math.min(g,v.y2)),v.add(0,0).add(h,o),m&&NN(t,m,o,y,0,0,1,v);break;default:_=s.x,x=s.y}return eF(v.translate(_,x),s),FN(s,"x",_+l)|FN(s,"y",x+l)&&(s.bounds=MN,t.dirty(s),s.bounds=v,t.dirty(s)),s.mark.bounds.clear().union(v)}function NN(t,e,n,r,i,o,s,a){const l=e.bounds;if(e.auto){const a=s*(n+i+r);let u=0,c=0;t.dirty(e),o?u=(e.x||0)-(e.x=a):c=(e.y||0)-(e.y=a),e.mark.bounds.clear().union(l.translate(-u,-c)),t.dirty(e)}a.union(l)}const RN=(t,e)=>Math.floor(Math.min(t,e)),$N=(t,e)=>Math.ceil(Math.max(t,e));function IN(t){return(new YM).set(0,0,t.width||0,t.height||0)}function zN(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function LN(t,e,n){const r=dy(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function UN(t){return t<0?Math.ceil(-t):0}function BN(t,e,n){var r,i,o,s,a,l,u,c,h,f,d,p=!n.nodirty,g="flush"===n.bounds?IN:zN,m=MN.set(0,0,0,0),y=LN(n.align,"column"),v=LN(n.align,vN),b=LN(n.padding,"column"),_=LN(n.padding,vN),x=n.columns||e.length,w=x<=0?1:Math.ceil(e.length/x),k=e.length,E=Array(k),S=Array(x),O=0,C=Array(k),A=Array(w),D=0,T=Array(k),M=Array(k),F=Array(k);for(i=0;i<x;++i)S[i]=0;for(i=0;i<w;++i)A[i]=0;for(i=0;i<k;++i)a=F[i]=g(l=e[i]),l.x=l.x||0,T[i]=0,l.y=l.y||0,M[i]=0,o=i%x,s=~~(i/x),O=Math.max(O,u=Math.ceil(a.x2)),D=Math.max(D,c=Math.ceil(a.y2)),S[o]=Math.max(S[o],u),A[s]=Math.max(A[s],c),E[i]=b+UN(a.x1),C[i]=_+UN(a.y1),p&&t.dirty(e[i]);for(i=0;i<k;++i)i%x==0&&(E[i]=0),i<x&&(C[i]=0);if("each"===y)for(o=1;o<x;++o){for(d=0,i=o;i<k;i+=x)d<E[i]&&(d=E[i]);for(i=o;i<k;i+=x)E[i]=d+S[o-1]}else if("all"===y){for(d=0,i=0;i<k;++i)i%x&&d<E[i]&&(d=E[i]);for(i=0;i<k;++i)i%x&&(E[i]=d+O)}else for(y=!1,o=1;o<x;++o)for(i=o;i<k;i+=x)E[i]+=S[o-1];if("each"===v)for(s=1;s<w;++s){for(d=0,r=(i=s*x)+x;i<r;++i)d<C[i]&&(d=C[i]);for(i=s*x;i<r;++i)C[i]=d+A[s-1]}else if("all"===v){for(d=0,i=x;i<k;++i)d<C[i]&&(d=C[i]);for(i=x;i<k;++i)C[i]=d+D}else for(v=!1,s=1;s<w;++s)for(r=(i=s*x)+x;i<r;++i)C[i]+=A[s-1];for(h=0,i=0;i<k;++i)T[i]+=(h=E[i]+(i%x?h:0))-e[i].x;for(o=0;o<x;++o)for(f=0,i=o;i<k;i+=x)M[i]+=(f+=C[i])-e[i].y;if(y&&LN(n.center,"column")&&w>1)for(i=0;i<k;++i)(h=(a="all"===y?O:S[i%x])-F[i].x2-e[i].x-T[i])>0&&(T[i]+=h/2);if(v&&LN(n.center,vN)&&1!==x)for(i=0;i<k;++i)(f=(a="all"===v?D:A[~~(i/x)])-F[i].y2-e[i].y-M[i])>0&&(M[i]+=f/2);for(i=0;i<k;++i)m.union(F[i].translate(T[i],M[i]));switch(h=LN(n.anchor,"x"),f=LN(n.anchor,"y"),LN(n.anchor,"column")){case yN:h-=m.width();break;case"middle":h-=m.width()/2}switch(LN(n.anchor,vN)){case yN:f-=m.height();break;case"middle":f-=m.height()/2}for(h=Math.round(h),f=Math.round(f),m.clear(),i=0;i<k;++i)e[i].mark.bounds.clear();for(i=0;i<k;++i)(l=e[i]).x+=T[i]+=h,l.y+=M[i]+=f,m.union(l.mark.bounds.union(l.bounds.translate(T[i],M[i]))),p&&t.dirty(l);return m}function qN(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function VN(t,e){return t.bounds[e]}function HN(t,e,n,r,i,o,s,a,l,u,c,h,f,d){var p,g,m,y,v,b,_,x,w,k=n.length,E=0,S=0;if(!k)return E;for(p=c;p<k;p+=h)n[p]&&(E=s(E,l(n[p],u)));if(!e.length)return E;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),E+=o,g=0,y=e.length;g<y;++g)t.dirty(e[g]),e[g].mark.bounds.clear();for(p=c,g=0,y=e.length;g<y;++g,p+=h){for(v=(b=e[g]).mark.bounds,m=p;m>=0&&null==(_=n[m]);m-=f);a?(x=null==d?_.x:Math.round(_.bounds.x1+d*_.bounds.width()),w=E):(x=E,w=null==d?_.y:Math.round(_.bounds.y1+d*_.bounds.height())),v.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,t.dirty(b),S=s(S,v[u])}return S}function WN(t,e,n,r,i,o){if(e){t.dirty(e);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),e.bounds.translate(s-(e.x||0),a-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=s,e.y=a,t.dirty(e)}}function GN(t,e,n,r,i,o,s){const a=function(t,e){const n=t[e]||{};return(e,r)=>null!=n[e]?n[e]:null!=t[e]?t[e]:r}(n,e),l=function(t,e){let n=-1/0;return t.forEach(t=>{null!=t.offset&&(n=Math.max(n,t.offset))}),n>-1/0?n:e}(t,a("offset",0)),u=a("anchor","start"),c=u===yN?1:"middle"===u?.5:0,h={align:"each",bounds:a("bounds","flush"),columns:"vertical"===a("direction")?1:t.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(e){case gN:h.anchor={x:Math.floor(r.x1)-l,column:yN,y:c*(s||r.height()+2*r.y1),row:u};break;case mN:h.anchor={x:Math.ceil(r.x2)+l,y:c*(s||r.height()+2*r.y1),row:u};break;case pN:h.anchor={y:Math.floor(i.y1)-l,row:yN,x:c*(o||i.width()+2*i.x1),column:u};break;case"bottom":h.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case"top-left":h.anchor={x:l,y:l};break;case"top-right":h.anchor={x:o-l,y:l,column:yN};break;case"bottom-left":h.anchor={x:l,y:s-l,row:yN};break;case"bottom-right":h.anchor={x:o-l,y:s-l,column:yN,row:yN}}return h}function ZN(t,e){var n,r,i=e.items[0],o=i.datum,s=i.orient,a=i.bounds,l=i.x,u=i.y;return i._bounds?i._bounds.clear().union(a):i._bounds=a.clone(),a.clear(),function(t,e,n){var r=e.padding,i=r-n.x,o=r-n.y;if(e.datum.title){var s=e.items[1].items[0],a=s.anchor,l=e.titlePadding||0,u=r-s.x,c=r-s.y;switch(s.orient){case gN:i+=Math.ceil(s.bounds.width())+l;break;case mN:case"bottom":break;default:o+=s.bounds.height()+l}switch((i||o)&&XN(t,n,i,o),s.orient){case gN:c+=YN(e,n,s,a,1,1);break;case mN:u+=YN(e,n,s,yN,0,0)+l,c+=YN(e,n,s,a,1,1);break;case"bottom":u+=YN(e,n,s,a,0,0),c+=YN(e,n,s,yN,-1,0,1)+l;break;default:u+=YN(e,n,s,a,0,0)}(u||c)&&XN(t,s,u,c),(u=Math.round(s.bounds.x1-r))<0&&(XN(t,n,-u,0),XN(t,s,-u,0))}else(i||o)&&XN(t,n,i,o)}(t,i,i.items[0].items[0]),a=function(t,e){return t.items.forEach(t=>e.union(t.bounds)),e.x1=t.padding,e.y1=t.padding,e}(i,a),n=2*i.padding,r=2*i.padding,a.empty()||(n=Math.ceil(a.width()+n),r=Math.ceil(a.height()+r)),"symbol"===o.type&&function(t){const e=t.reduce((t,e)=>(t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t),{});t.forEach(t=>{t.width=e[t.column],t.height=t.bounds.y2-t.y})}(i.items[0].items[0].items[0].items),"none"!==s&&(i.x=l=0,i.y=u=0),i.width=n,i.height=r,eF(a.set(l,u,l+n,u+r),i),i.mark.bounds.clear().union(a),i}function YN(t,e,n,r,i,o,s){const a=n.datum.vgrad,l=("symbol"===t.datum.type||!o&&a||s?e:e.items[0]).bounds[i?"y2":"x2"]-t.padding,u=a&&o?l:0,c=a&&o?0:l,h=i<=0?0:Pj(n);return Math.round("start"===r?u:r===yN?c-h:.5*(l-h))}function XN(t,e,n,r){e.x+=n,e.y+=r,e.bounds.translate(n,r),e.mark.bounds.translate(n,r),t.dirty(e)}function QN(t){jk.call(this,null,t)}function KN(t,e){let n=0;if(void 0===e)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function JN(t){jk.call(this,null,t)}function tR(t){jk.call(this,null,t)}function eR(){return ik({})}function nR(t){jk.call(this,null,t)}function rR(t){jk.call(this,[],t)}ev(QN,jk,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(e=>{t.layout&&function(t,e,n){var r,i,o,s,a,l,u,c=function(t){var e,n,r=t.items,i=r.length,o=0;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<i;++o)if(n=(e=r[o]).items,"group"===e.marktype)switch(e.role){case"axis":case"legend":case"title":break;case"row-header":s.rowheaders.push(...n);break;case"row-footer":s.rowfooters.push(...n);break;case"column-header":s.colheaders.push(...n);break;case"column-footer":s.colfooters.push(...n);break;case"row-title":s.rowtitle=n[0];break;case"column-title":s.coltitle=n[0];break;default:s.marks.push(...n)}return s}(e),h=c.marks,f="flush"===n.bounds?qN:VN,d=n.offset,p=n.columns||h.length,g=p<=0?1:Math.ceil(h.length/p),m=g*p;const y=BN(t,h,n);y.empty()&&y.set(0,0,0,0),c.rowheaders&&(l=LN(n.headerBand,vN,null),r=HN(t,c.rowheaders,h,0,g,-LN(d,"rowHeader"),RN,0,f,"x1",0,p,1,l)),c.colheaders&&(l=LN(n.headerBand,"column",null),i=HN(t,c.colheaders,h,0,p,-LN(d,"columnHeader"),RN,1,f,"y1",0,1,p,l)),c.rowfooters&&(l=LN(n.footerBand,vN,null),o=HN(t,c.rowfooters,h,0,g,LN(d,"rowFooter"),$N,0,f,"x2",p-1,p,1,l)),c.colfooters&&(l=LN(n.footerBand,"column",null),s=HN(t,c.colfooters,h,0,p,LN(d,"columnFooter"),$N,1,f,"y2",m-p,1,p,l)),c.rowtitle&&(a=LN(n.titleAnchor,vN),u=LN(d,"rowTitle"),u=a===yN?o+u:r-u,l=LN(n.titleBand,vN,.5),WN(t,c.rowtitle,u,0,y,l)),c.coltitle&&(a=LN(n.titleAnchor,"column"),u=LN(d,"columnTitle"),u=a===yN?s+u:i-u,l=LN(n.titleBand,"column",.5),WN(t,c.coltitle,u,1,y,l))}(n,e,t.layout),function(t,e,n){var r,i,o,s,a,l=e.items,u=Math.max(0,e.width||0),c=Math.max(0,e.height||0),h=(new YM).set(0,0,u,c),f=h.clone(),d=h.clone(),p=[];for(s=0,a=l.length;s<a;++s)switch((i=l[s]).role){case"axis":(jN(i)?f:d).union(PN(t,i,u,c));break;case"title":r=i;break;case"legend":p.push(ZN(t,i));break;case"frame":case"scope":case"row-header":case"row-footer":case"row-title":case"column-header":case"column-footer":case"column-title":f.union(i.bounds),d.union(i.bounds);break;default:h.union(i.bounds)}if(p.length){const e={};p.forEach(t=>{"none"!==(o=t.orient||mN)&&(e[o]||(e[o]=[])).push(t)});for(const r in e){const i=e[r];BN(t,i,GN(i,r,n.legends,f,d,u,c))}p.forEach(e=>{const r=e.bounds;if(r.equals(e._bounds)||(e.bounds=e._bounds,t.dirty(e),e.bounds=r,t.dirty(e)),n.autosize&&"fit"===n.autosize.type)switch(e.orient){case gN:case mN:h.add(r.x1,0).add(r.x2,0);break;case pN:case"bottom":h.add(0,r.y1).add(0,r.y2)}else h.union(r)})}h.union(f).union(d),r&&h.union(function(t,e,n,r,i){var o,s=e.items[0],a=s.orient,l=s.anchor,u=s.offset,c=s.padding,h=s.items[0].items[0],f=s.items[1]&&s.items[1].items[0],d=a===gN||a===mN?r:n,p=0,g=0,m=0,y=0,v=0;if("group"!==s.frame?a===gN?(p=i.y2,d=i.y1):a===mN?(p=i.y1,d=i.y2):(p=i.x1,d=i.x2):a===gN&&(p=r,d=0),o="start"===l?p:l===yN?d:(p+d)/2,f&&f.text){switch(a){case pN:case"bottom":v=h.bounds.height()+c;break;case gN:y=h.bounds.width()+c;break;case mN:y=-h.bounds.width()-c}MN.clear().union(f.bounds),MN.translate(y-(f.x||0),v-(f.y||0)),FN(f,"x",y)|FN(f,"y",v)&&(t.dirty(f),f.bounds.clear().union(MN),f.mark.bounds.clear().union(MN),t.dirty(f)),MN.clear().union(f.bounds)}else MN.clear();switch(MN.union(h.bounds),a){case pN:g=o,m=i.y1-MN.height()-u;break;case gN:g=i.x1-MN.width()-u,m=o;break;case mN:g=i.x2+MN.width()+u,m=o;break;case"bottom":g=o,m=i.y2+u;break;default:g=s.x,m=s.y}return FN(s,"x",g)|FN(s,"y",m)&&(MN.translate(g,m),t.dirty(s),s.bounds.clear().union(MN),e.bounds.clear().union(MN),t.dirty(s)),s.bounds}(t,r,u,c,h)),e.clip&&h.set(0,0,e.width||0,e.height||0),function(t,e,n,r){const i=r.autosize||{},o=i.type;if(t._autosize<1||!o)return;let s=t._width,a=t._height,l=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,e.height||0),h=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),d=Math.max(0,Math.ceil(n.y2-c));if("padding"===i.contains){const e=t.padding();s-=e.left+e.right,a-=e.top+e.bottom}"none"===o?(u=0,h=0,l=s,c=a):"fit"===o?(l=Math.max(0,s-u-f),c=Math.max(0,a-h-d)):"fit-x"===o?(l=Math.max(0,s-u-f),a=c+h+d):"fit-y"===o?(s=l+u+f,c=Math.max(0,a-h-d)):"pad"===o&&(s=l+u+f,a=c+h+d),t._resizeView(s,a,l,c,[u,h],i.resize)}(t,e,h,n)}(n,e,t)}),(r=t.mark.group)&&"legend-entry"!==r.mark.role?e.reflow():e;var r}}),ev(JN,jk,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,o=t.scale,s=IT(o,null==t.count?t.values?t.values.length:10:t.count,t.minstep),a=t.format||UT(n,o,s,t.formatSpecifier,t.formatType,!!t.values),l=t.values?zT(o,t.values,s):LT(o,s);return i&&(r.rem=i),i=l.map((t,e)=>ik({index:e/(l.length-1||1),value:t,label:a(t)})),t.extra&&i.length&&i.push(ik({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),ev(tR,jk,{transform(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||eR,o=t.key||nk,s=this.value;return fy(r.encode)&&(r.encode=null),s&&(t.modified("key")||e.modified(o))&&Xm("DataJoin does not support modified key function or fields."),s||(e=e.addAll(),this.value=s=function(t){const e=Jy().test(t=>t.exit);return e.lookup=n=>e.get(t(n)),e}(o)),e.visit(e.ADD,t=>{const e=o(t);let n=s.get(e);n?n.exit?(s.empty--,r.add.push(n)):r.mod.push(n):(n=i(t),s.set(e,n),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,t=>{const e=o(t),n=s.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,t=>{const e=o(t),n=s.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++s.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),(e.clean()||t.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}}),ev(nR,jk,{transform(t,e){var n=e.fork(e.ADD_REM),r=t.mod||!1,i=t.encoders,o=e.encode;if(fy(o)){if(!n.changed()&&!o.every(t=>i[t]))return e.StopPropagation;o=o[0],n.encode=null}var s="enter"===o,a=i.update||iy,l=i.enter||iy,u=i.exit||iy,c=(o&&!s?i[o]:a)||iy;if(e.changed(e.ADD)&&(e.visit(e.ADD,e=>{l(e,t),a(e,t)}),n.modifies(l.output),n.modifies(a.output),c!==iy&&c!==a&&(e.visit(e.ADD,e=>{c(e,t)}),n.modifies(c.output))),e.changed(e.REM)&&u!==iy&&(e.visit(e.REM,e=>{u(e,t)}),n.modifies(u.output)),s||c!==iy){const i=e.MOD|(t.modified()?e.REFLOW:0);s?(e.visit(i,e=>{const i=l(e,t)||r;(c(e,t)||i)&&n.mod.push(e)}),n.mod.length&&n.modifies(l.output)):e.visit(i,e=>{(c(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:e.StopPropagation}}),ev(rR,jk,{transform(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,r,i,o,s,a=e.dataflow.locale(),l=e.fork(e.NO_SOURCE|e.NO_FIELDS),u=this.value,c=t.type||"symbol",h=t.scale,f=+t.limit,d=IT(h,null==t.count?5:t.count,t.minstep),p=t.format||WT(a,h,d,c,t.formatSpecifier,t.formatType,!!t.values||"symbol"===c),g=t.values||HT(h,d);return u&&(l.rem=u),"symbol"===c?(f&&g.length>f?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),u=g.slice(0,f-1),s=!0):u=g,zy(i=t.size)?(t.values||0!==h(u[0])||(u=u.slice(1)),o=u.reduce((e,n)=>Math.max(e,i(n,t)),0)):i=Hy(o=i||8),u=u.map((e,n)=>ik({index:n,label:p(e,n,u),value:e,offset:o,size:i(e,t)})),s&&(s=g[u.length],u.push(ik({index:u.length,label:"\u2026".concat(g.length-u.length," entries"),value:s,offset:o,size:i(s,t)})))):"gradient"===c?(n=h.domain(),r=DT(h,n[0],vy(n)),g.length<3&&!t.values&&n[0]!==vy(n)&&(g=[n[0],vy(n)]),u=g.map((t,e)=>ik({index:e,label:p(t,e,g),value:t,perc:r(t)}))):(i=g.length-1,r=function(t){const e=t.domain(),n=e.length-1;let r=+e[0],i=+vy(e),o=i-r;if("threshold"===t.type){const t=n?o/n:.1;r-=t,i+=t,o=i-r}return t=>(t-r)/o}(h),u=g.map((t,e)=>ik({index:e,label:p(t,e,g),value:t,perc:e?r(t):0,perc2:e===i?1:r(g[e+1])}))),l.source=u,l.add=u,this.value=u,l}});const iR=t=>t.source.x,oR=t=>t.source.y,sR=t=>t.target.x,aR=t=>t.target.y;function lR(t){jk.call(this,{},t)}lR.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},ev(lR,jk,{transform(t,e){var n=t.sourceX||iR,r=t.sourceY||oR,i=t.targetX||sR,o=t.targetY||aR,s=t.as||"path",a=t.shape||"line",l=fR.get(a+"-"+(t.orient||"vertical"))||fR.get(a);return l||Xm("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,t=>{t[s]=l(n(t),r(t),i(t),o(t))}),e.reflow(t.modified()).modifies(s)}});const uR=(t,e,n,r)=>"M"+t+","+e+"L"+n+","+r,cR=(t,e,n,r)=>{var i=n-t,o=r-e,s=Math.sqrt(i*i+o*o)/2;return"M"+t+","+e+"A"+s+","+s+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r},hR=(t,e,n,r)=>{const i=n-t,o=r-e,s=.2*(i+o),a=.2*(o-i);return"M"+t+","+e+"C"+(t+s)+","+(e+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},fR=Jy({line:uR,"line-radial":(t,e,n,r)=>uR(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),arc:cR,"arc-radial":(t,e,n,r)=>cR(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),curve:hR,"curve-radial":(t,e,n,r)=>hR(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),"orthogonal-horizontal":(t,e,n,r)=>"M"+t+","+e+"V"+r+"H"+n,"orthogonal-vertical":(t,e,n,r)=>"M"+t+","+e+"H"+n+"V"+r,"orthogonal-radial":(t,e,n,r)=>{const i=Math.cos(t),o=Math.sin(t),s=Math.cos(n),a=Math.sin(n);return"M"+e*i+","+e*o+"A"+e+","+e+" 0 0,"+((Math.abs(n-t)>Math.PI?n<=t:n>t)?1:0)+" "+e*s+","+e*a+"L"+r*s+","+r*a},"diagonal-horizontal":(t,e,n,r)=>{const i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},"diagonal-vertical":(t,e,n,r)=>{const i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":(t,e,n,r)=>{const i=Math.cos(t),o=Math.sin(t),s=Math.cos(n),a=Math.sin(n),l=(e+r)/2;return"M"+e*i+","+e*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a}});function dR(t){jk.call(this,null,t)}function pR(t){return bT(t)&&"sequential"!==t}dR.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},ev(dR,jk,{transform(t,e){var n,r,i,o=t.as||["startAngle","endAngle"],s=o[0],a=o[1],l=t.startAngle||0,u=null!=t.endAngle?t.endAngle:2*Math.PI,c=e.source,h=c.map(t.field||ny),f=h.length,d=l,p=(u-l)/KN(h),g=zE(f);for(t.sort&&g.sort((t,e)=>h[t]-h[e]),n=0;n<f;++n)i=h[g[n]],(r=c[g[n]])[s]=d,r[a]=d+=i*p;return this.value=h,e.reflow(t.modified()).modifies(o)}});const gR=xv(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function mR(t){jk.call(this,null,t),this.modified(!0)}function yR(t,e,n){return wT(t)&&Math.abs(e.reduce((t,e)=>t+(e<0?-1:e>0?1:0),0))!==e.length&&n.warn("Log scale domain includes zero: "+mv(e)),e}function vR(t,e,n){return zy(t)&&(e||n)?OT(t,bR(e||[0,1],n)):t}function bR(t,e){return e?t.slice().reverse():t}function _R(t){jk.call(this,null,t)}ev(mR,jk,{transform(t,e){var n=e.dataflow,r=this.value,i=function(t){var e,n=t.type,r="";return"sequential"===n?"sequential-linear":(function(t){const e=t.type;return bT(e)&&e!==sT&&e!==aT&&(t.scheme||t.range&&t.range.length&&t.range.every(lv))}(t)&&(r=2===(e=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0)?"sequential-":3===e?"diverging-":""),(r+n||"linear").toLowerCase())}(t);for(i in r&&i===r.type||(this.value=r=mT(i)()),t)if(!gR[i]){if("padding"===i&&pR(r.type))continue;zy(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return function(t,e,n){var r=t.type,i=e.round||!1,o=e.range;if(null!=e.rangeStep)o=function(t,e,n){return"band"!==t&&"point"!==t&&Xm("Only band and point scales support rangeStep."),[0,e.rangeStep*iT(n,"point"===t?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0,(null!=e.paddingOuter?e.paddingOuter:e.padding)||0)]}(r,e,n);else if(e.scheme&&(o=function(t,e,n){var r,i=e.schemeExtent;return fy(e.scheme)?r=CT(e.scheme,e.interpolate,e.interpolateGamma):(r=PT(e.scheme.toLowerCase()))||Xm("Unrecognized scheme name: ".concat(e.scheme)),n="threshold"===t?n+1:"bin-ordinal"===t?n-1:"quantile"===t||"quantize"===t?+e.schemeCount||5:n,kT(t)?vR(r,i,e.reverse):zy(r)?AT(vR(r,i),n):"ordinal"===t?r:r.slice(0,n)}(r,e,n),zy(o))){if(t.interpolator)return t.interpolator(o);Xm("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&kT(r))return t.interpolator(CT(bR(o,e.reverse),e.interpolate,e.interpolateGamma));o&&e.interpolate&&t.interpolate?t.interpolate(TT(e.interpolate,e.interpolateGamma)):zy(t.round)?t.round(i):zy(t.rangeRound)&&t.interpolate(i?FA:MA),o&&t.range(bR(o,e.reverse))}(r,t,function(t,e,n){let r=e.bins;if(r&&!fy(r)){const e=t.domain(),n=e[0],i=vy(e),o=r.step;let s=null==r.start?n:r.start,a=null==r.stop?i:r.stop;o||Xm("Scale bins parameter missing step property."),s<n&&(s=o*Math.ceil(n/o)),a>i&&(a=o*Math.floor(i/o)),r=zE(s,a+o/2,o)}return r?t.bins=r:t.bins&&delete t.bins,"bin-ordinal"===t.type&&(r?e.domain||e.domainRaw||(t.domain(r),n=r.length):t.bins=t.domain()),n}(r,t,function(t,e,n){const r=function(t,e,n){return e?(t.domain(yR(t.type,e,n)),e.length):-1}(t,e.domainRaw,n);if(r>-1)return r;var i,o,s=e.domain,a=t.type,l=e.zero||void 0===e.zero&&function(t){const e=t.type;return!t.bins&&("linear"===e||"pow"===e||"sqrt"===e)}(t);if(!s)return 0;if(pR(a)&&e.padding&&s[0]!==vy(s)&&(s=function(t,e,n,r,i,o){var s=Math.abs(vy(n)-n[0]),a=s/(s-2*r),l=t===oT?Fy(e,null,a):"sqrt"===t?jy(e,null,a,.5):"pow"===t?jy(e,null,a,i||1):"symlog"===t?Py(e,null,a,o||1):My(e,null,a);return(e=e.slice())[0]=l[0],e[e.length-1]=l[1],e}(a,s,e.range,e.padding,e.exponent,e.constant)),(l||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(s=s.slice()).length-1||1,l&&(s[0]>0&&(s[0]=0),s[i]<0&&(s[i]=0)),null!=e.domainMin&&(s[0]=e.domainMin),null!=e.domainMax&&(s[i]=e.domainMax),null!=e.domainMid)){const t=(o=e.domainMid)>s[i]?i+1:o<s[0]?0:i;t!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),s.splice(t,0,o)}return t.domain(yR(a,s,n)),"ordinal"===a&&t.unknown(e.domainImplicit?TC:void 0),e.nice&&t.nice&&t.nice(!0!==e.nice&&IT(t,e.nice)||null),s.length}(r,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),ev(_R,jk,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(lk(t.sort)),this.modified(n),e}});const xR=["y0","y1"];function wR(t){jk.call(this,null,t)}function kR(t,e,n,r,i){for(var o,s=(e-t.sum)/2,a=t.length,l=0;l<a;++l)(o=t[l])[r]=s,o[i]=s+=Math.abs(n(o))}function ER(t,e,n,r,i){for(var o,s=1/t.sum,a=0,l=t.length,u=0,c=0;u<l;++u)(o=t[u])[r]=a,o[i]=a=s*(c+=Math.abs(n(o)))}function SR(t,e,n,r,i){for(var o,s,a=0,l=0,u=t.length,c=0;c<u;++c)(o=+n(s=t[c]))<0?(s[r]=l,s[i]=l+=o):(s[r]=a,s[i]=a+=o)}wR.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:xR}]},ev(wR,jk,{transform(t,e){var n,r,i,o,s=t.as||xR,a=s[0],l=s[1],u=lk(t.sort),c=t.field||ny,h="center"===t.offset?kR:"normalize"===t.offset?ER:SR;for(n=function(t,e,n,r){var i,o,s,a,l,u,c,h,f,d=[],p=t=>t(l);if(null==e)d.push(t.slice());else for(i={},o=0,s=t.length;o<s;++o)l=t[o],(c=i[u=e.map(p)])||(i[u]=c=[],d.push(c)),c.push(l);for(u=0,f=0,a=d.length;u<a;++u){for(o=0,h=0,s=(c=d[u]).length;o<s;++o)h+=Math.abs(r(c[o]));c.sum=h,h>f&&(f=h),n&&c.sort(n)}return d.max=f,d}(e.source,t.groupby,u,c),r=0,i=n.length,o=n.max;r<i;++r)h(n[r],o,c,a,l);return e.reflow(t.modified()).modifies(s)}});var OR=t=>t;function CR(t,e){t&&DR.hasOwnProperty(t.type)&&DR[t.type](t,e)}var AR={Feature:function(t,e){CR(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)CR(n[r].geometry,e)}},DR={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){TR(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)TR(n[r],e,0)},Polygon:function(t,e){MR(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)MR(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)CR(n[r],e)}};function TR(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function MR(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)TR(t[n],e,1);e.polygonEnd()}var FR=function(t,e){t&&AR.hasOwnProperty(t.type)?AR[t.type](t,e):CR(t,e)};class jR{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,s=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);s&&(e[n++]=s),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}var PR=Math.PI,NR=PR/2,RR=PR/4,$R=2*PR,IR=180/PR,zR=PR/180,LR=Math.abs,UR=Math.atan,BR=Math.atan2,qR=Math.cos,VR=Math.ceil,HR=Math.exp,WR=(Math,Math.hypot),GR=Math.log,ZR=Math.pow,YR=Math.sin,XR=Math.sign||function(t){return t>0?1:t<0?-1:0},QR=Math.sqrt,KR=Math.tan;function JR(t){return t>1?0:t<-1?PR:Math.acos(t)}function t$(t){return t>1?NR:t<-1?-NR:Math.asin(t)}function e$(){}var n$,r$,i$,o$,s$=new jR,a$=new jR,l$={point:e$,lineStart:e$,lineEnd:e$,polygonStart:function(){l$.lineStart=u$,l$.lineEnd=f$},polygonEnd:function(){l$.lineStart=l$.lineEnd=l$.point=e$,s$.add(LR(a$)),a$=new jR},result:function(){var t=s$/2;return s$=new jR,t}};function u$(){l$.point=c$}function c$(t,e){l$.point=h$,n$=i$=t,r$=o$=e}function h$(t,e){a$.add(o$*t-i$*e),i$=t,o$=e}function f$(){h$(n$,r$)}var d$,p$,g$,m$,y$=l$,v$=1/0,b$=v$,_$=-v$,x$=_$,w$={point:function(t,e){t<v$&&(v$=t),t>_$&&(_$=t),e<b$&&(b$=e),e>x$&&(x$=e)},lineStart:e$,lineEnd:e$,polygonStart:e$,polygonEnd:e$,result:function(){var t=[[v$,b$],[_$,x$]];return _$=x$=-(b$=v$=1/0),t}},k$=0,E$=0,S$=0,O$=0,C$=0,A$=0,D$=0,T$=0,M$=0,F$={point:j$,lineStart:P$,lineEnd:$$,polygonStart:function(){F$.lineStart=I$,F$.lineEnd=z$},polygonEnd:function(){F$.point=j$,F$.lineStart=P$,F$.lineEnd=$$},result:function(){var t=M$?[D$/M$,T$/M$]:A$?[O$/A$,C$/A$]:S$?[k$/S$,E$/S$]:[NaN,NaN];return k$=E$=S$=O$=C$=A$=D$=T$=M$=0,t}};function j$(t,e){k$+=t,E$+=e,++S$}function P$(){F$.point=N$}function N$(t,e){F$.point=R$,j$(g$=t,m$=e)}function R$(t,e){var n=t-g$,r=e-m$,i=QR(n*n+r*r);O$+=i*(g$+t)/2,C$+=i*(m$+e)/2,A$+=i,j$(g$=t,m$=e)}function $$(){F$.point=j$}function I$(){F$.point=L$}function z$(){U$(d$,p$)}function L$(t,e){F$.point=U$,j$(d$=g$=t,p$=m$=e)}function U$(t,e){var n=t-g$,r=e-m$,i=QR(n*n+r*r);O$+=i*(g$+t)/2,C$+=i*(m$+e)/2,A$+=i,D$+=(i=m$*t-g$*e)*(g$+t),T$+=i*(m$+e),M$+=3*i,j$(g$=t,m$=e)}var B$=F$;function q$(t){this._context=t}q$.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,$R)}},result:e$};var V$,H$,W$,G$,Z$,Y$=new jR,X$={point:e$,lineStart:function(){X$.point=Q$},lineEnd:function(){V$&&K$(H$,W$),X$.point=e$},polygonStart:function(){V$=!0},polygonEnd:function(){V$=null},result:function(){var t=+Y$;return Y$=new jR,t}};function Q$(t,e){X$.point=K$,H$=G$=t,W$=Z$=e}function K$(t,e){Y$.add(QR((G$-=t)*G$+(Z$-=e)*Z$)),G$=t,Z$=e}var J$=X$;function tI(){this._string=[]}function eI(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}tI.prototype={_radius:4.5,_circle:eI(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=eI(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var nI=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),FR(t,n(r))),r.result()}return o.area=function(t){return FR(t,n(y$)),y$.result()},o.measure=function(t){return FR(t,n(J$)),J$.result()},o.bounds=function(t){return FR(t,n(w$)),w$.result()},o.centroid=function(t){return FR(t,n(B$)),B$.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,OR):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new tI):new q$(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},rI=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:e$,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},iI=function(t,e){return LR(t[0]-e[0])<1e-6&&LR(t[1]-e[1])<1e-6};function oI(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var sI=function(t,e,n,r,i){var o,s,a=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(iI(r,s)){if(!r[2]&&!s[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s[0]+=2e-6}a.push(n=new oI(r,t,null,!0)),l.push(n.o=new oI(r,null,n,!1)),a.push(n=new oI(s,t,null,!1)),l.push(n.o=new oI(s,null,n,!0))}}),a.length){for(l.sort(e),aI(a),aI(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n;for(var u,c,h=a[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;u=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,s=u.length;o<s;++o)i.point((c=u[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(o=(u=f.p.z).length-1;o>=0;--o)i.point((c=u[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}u=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}};function aI(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function lI(t){return[BR(t[1],t[0]),t$(t[2])]}function uI(t){var e=t[0],n=t[1],r=qR(n);return[r*qR(e),r*YR(e),YR(n)]}function cI(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function hI(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function fI(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function dI(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function pI(t){var e=QR(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function gI(t){return LR(t[0])<=PR?t[0]:XR(t[0])*((LR(t[0])+PR)%$R-PR)}function mI(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}var yI=function(t,e,n,r){return function(i){var o,s,a,l=e(i),u=rI(),c=e(u),h=!1,f={point:d,lineStart:g,lineEnd:m,polygonStart:function(){f.point=y,f.lineStart=v,f.lineEnd=b,s=[],o=[]},polygonEnd:function(){f.point=d,f.lineStart=g,f.lineEnd=m,s=mI(s);var t=function(t,e){var n=gI(e),r=e[1],i=YR(r),o=[YR(n),-qR(n),0],s=0,a=0,l=new jR;1===i?r=NR+1e-6:-1===i&&(r=-NR-1e-6);for(var u=0,c=t.length;u<c;++u)if(f=(h=t[u]).length)for(var h,f,d=h[f-1],p=gI(d),g=d[1]/2+RR,m=YR(g),y=qR(g),v=0;v<f;++v,p=_,m=w,y=k,d=b){var b=h[v],_=gI(b),x=b[1]/2+RR,w=YR(x),k=qR(x),E=_-p,S=E>=0?1:-1,O=S*E,C=O>PR,A=m*w;if(l.add(BR(A*S*YR(O),y*k+A*qR(O))),s+=C?E+S*$R:E,C^p>=n^_>=n){var D=hI(uI(d),uI(b));pI(D);var T=hI(o,D);pI(T);var M=(C^E>=0?-1:1)*t$(T[2]);(r>M||r===M&&(D[0]||D[1]))&&(a+=C^E>=0?1:-1)}}return(s<-1e-6||s<1e-6&&l<-1e-12)^1&a}(o,r);s.length?(h||(i.polygonStart(),h=!0),sI(s,bI,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),s=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){l.point(t,e)}function g(){f.point=p,l.lineStart()}function m(){f.point=d,l.lineEnd()}function y(t,e){a.push([t,e]),c.point(t,e)}function v(){c.lineStart(),a=[]}function b(){y(a[0][0],a[0][1]),c.lineEnd();var t,e,n,r,l=c.clean(),f=u.result(),d=f.length;if(a.pop(),o.push(a),a=null,d)if(1&l){if((e=(n=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&l&&f.push(f.pop().concat(f.shift())),s.push(f.filter(vI))}return f}};function vI(t){return t.length>1}function bI(t,e){return((t=t.x)[0]<0?t[1]-NR-1e-6:NR-t[1])-((e=e.x)[0]<0?e[1]-NR-1e-6:NR-e[1])}var _I=yI(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?PR:-PR,l=LR(o-n);LR(l-PR)<1e-6?(t.point(n,r=(r+s)/2>0?NR:-NR),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&l>=PR&&(LR(n-i)<1e-6&&(n-=1e-6*i),LR(o-a)<1e-6&&(o-=1e-6*a),r=function(t,e,n,r){var i,o,s=YR(t-n);return LR(s)>1e-6?UR((YR(e)*(o=qR(r))*YR(n)-YR(r)*(i=qR(e))*YR(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-PR,i=n*NR),r.point(0,i),r.point(PR,i),r.point(PR,0),r.point(PR,-i),r.point(0,-i),r.point(-PR,-i),r.point(-PR,0),r.point(-PR,i);else if(LR(t[0]-e[0])>1e-6){var o=t[0]<e[0]?PR:-PR;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-PR,-NR]),xI=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function wI(t,e){return[LR(t)>PR?t+Math.round(-t/$R)*$R:t,e]}function kI(t,e,n){return(t%=$R)?e||n?xI(SI(t),OI(e,n)):SI(t):e||n?OI(e,n):wI}function EI(t){return function(e,n){return[(e+=t)>PR?e-$R:e<-PR?e+$R:e,n]}}function SI(t){var e=EI(t);return e.invert=EI(-t),e}function OI(t,e){var n=qR(t),r=YR(t),i=qR(e),o=YR(e);function s(t,e){var s=qR(e),a=qR(t)*s,l=YR(t)*s,u=YR(e),c=u*n+a*r;return[BR(l*i-c*o,a*n-u*r),t$(c*i+l*o)]}return s.invert=function(t,e){var s=qR(e),a=qR(t)*s,l=YR(t)*s,u=YR(e),c=u*i-l*o;return[BR(l*i+u*o,a*n+c*r),t$(c*n-a*r)]},s}function CI(t,e){(e=uI(e))[0]-=t,pI(e);var n=JR(-e[1]);return((-e[2]<0?-n:n)+$R-1e-6)%$R}wI.invert=wI;var AI=function(t){var e=qR(t),n=6*zR,r=e>0,i=LR(e)>1e-6;function o(t,n){return qR(t)*qR(n)>e}function s(t,n,r){var i=[1,0,0],o=hI(uI(t),uI(n)),s=cI(o,o),a=o[0],l=s-a*a;if(!l)return!r&&t;var u=e*s/l,c=-e*a/l,h=hI(i,o),f=dI(i,u);fI(f,dI(o,c));var d=h,p=cI(f,d),g=cI(d,d),m=p*p-g*(cI(f,f)-1);if(!(m<0)){var y=QR(m),v=dI(d,(-p-y)/g);if(fI(v,f),v=lI(v),!r)return v;var b,_=t[0],x=n[0],w=t[1],k=n[1];x<_&&(b=_,_=x,x=b);var E=x-_,S=LR(E-PR)<1e-6;if(!S&&k<w&&(b=w,w=k,k=b),S||E<1e-6?S?w+k>0^v[1]<(LR(v[0]-_)<1e-6?w:k):w<=v[1]&&v[1]<=k:E>PR^(_<=v[0]&&v[0]<=x)){var O=dI(d,(-p+y)/g);return fI(O,f),[v,lI(O)]}}}function a(e,n){var i=r?t:PR-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return yI(o,function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var d,p=[h,f],g=o(h,f),m=r?g?0:a(h,f):g?a(h+(h<0?PR:-PR),f):0;if(!e&&(u=l=g)&&t.lineStart(),g!==l&&(!(d=s(e,p))||iI(e,d)||iI(p,d))&&(p[2]=1),g!==l)c=0,g?(t.lineStart(),d=s(p,e),t.point(d[0],d[1])):(d=s(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^g){var y;m&n||!(y=s(p,e,!0))||(c=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!g||e&&iI(e,p)||t.point(p[0],p[1]),e=p,l=g,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}},function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var s=qR(e),a=YR(e),l=r*n;null==i?(i=e+r*$R,o=e-l/2):(i=CI(s,i),o=CI(s,o),(r>0?i<o:i>o)&&(i+=r*$R));for(var u,c=i;r>0?c>o:c<o;c-=l)u=lI([s,-a*qR(c),-a*YR(c)]),t.point(u[0],u[1])}}(o,t,n,i,e,r)},r?[0,-t]:[-PR,t-PR])};function DI(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,u){var c=0,h=0;if(null==i||(c=s(i,a))!==(h=s(o,a))||l(i,o)<0^a>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+a+4)%4)!==h);else u.point(o[0],o[1])}function s(r,i){return LR(r[0]-t)<1e-6?i>0?0:3:LR(r[0]-n)<1e-6?i>0?2:1:LR(r[1]-e)<1e-6?i>0?1:0:i>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var l,u,c,h,f,d,p,g,m,y,v,b=s,_=rI(),x={point:w,lineStart:function(){x.point=k,u&&u.push(c=[]),y=!0,m=!1,p=g=NaN},lineEnd:function(){l&&(k(h,f),d&&m&&_.rejoin(),l.push(_.result())),x.point=w,m&&b.lineEnd()},polygonStart:function(){b=_,l=[],u=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=u.length;n<i;++n)for(var o,s,a=u[n],l=1,c=a.length,h=a[0],f=h[0],d=h[1];l<c;++l)o=f,s=d,f=(h=a[l])[0],d=h[1],s<=r?d>r&&(f-o)*(r-s)>(d-s)*(t-o)&&++e:d<=r&&(f-o)*(r-s)<(d-s)*(t-o)&&--e;return e}(),n=v&&e,i=(l=mI(l)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&sI(l,a,e,o,s),s.polygonEnd()),b=s,l=u=c=null}};function w(t,e){i(t,e)&&b.point(t,e)}function k(o,s){var a=i(o,s);if(u&&c.push([o,s]),y)h=o,f=s,d=a,y=!1,a&&(b.lineStart(),b.point(o,s));else if(a&&m)b.point(o,s);else{var l=[p=Math.max(-1e9,Math.min(1e9,p)),g=Math.max(-1e9,Math.min(1e9,g))],_=[o=Math.max(-1e9,Math.min(1e9,o)),s=Math.max(-1e9,Math.min(1e9,s))];!function(t,e,n,r,i,o){var s,a=t[0],l=t[1],u=0,c=1,h=e[0]-a,f=e[1]-l;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<u)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>u&&(u=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>u&&(u=s)}else if(h>0){if(s<u)return;s<c&&(c=s)}if(s=r-l,f||!(s>0)){if(s/=f,f<0){if(s<u)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>u&&(u=s)}if(s=o-l,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>u&&(u=s)}else if(f>0){if(s<u)return;s<c&&(c=s)}return u>0&&(t[0]=a+u*h,t[1]=l+u*f),c<1&&(e[0]=a+c*h,e[1]=l+c*f),!0}}}}}(l,_,t,e,n,r)?a&&(b.lineStart(),b.point(o,s),v=!1):(m||(b.lineStart(),b.point(l[0],l[1])),b.point(_[0],_[1]),a||b.lineEnd(),v=!1)}p=o,g=s,m=a}return x}}function TI(t){return function(e){var n=new MI;for(var r in t)n[r]=t[r];return n.stream=e,n}}function MI(){}function FI(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),FR(n,t.stream(w$)),e(w$.result()),null!=r&&t.clipExtent(r),t}function jI(t,e,n){return FI(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),s=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([s,a])},n)}function PI(t,e,n){return jI(t,[[0,0],e],n)}function NI(t,e,n){return FI(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,s=-i*n[0][1];t.scale(150*i).translate([o,s])},n)}function RI(t,e,n){return FI(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],s=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,s])},n)}MI.prototype={constructor:MI,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var $I=qR(30*zR),II=function(t,e){return+e?function(t,e){function n(r,i,o,s,a,l,u,c,h,f,d,p,g,m){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*e&&g--){var _=s+f,x=a+d,w=l+p,k=QR(_*_+x*x+w*w),E=t$(w/=k),S=LR(LR(w)-1)<1e-6||LR(o-h)<1e-6?(o+h)/2:BR(x,_),O=t(S,E),C=O[0],A=O[1],D=C-r,T=A-i,M=v*D-y*T;(M*M/b>e||LR((y*D+v*T)/b-.5)>.3||s*f+a*d+l*p<$I)&&(n(r,i,o,s,a,l,C,A,S,_/=k,x/=k,w,g,m),m.point(C,A),n(C,A,S,_,x,w,u,c,h,f,d,p,g,m))}}return function(e){var r,i,o,s,a,l,u,c,h,f,d,p,g={point:m,lineStart:y,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=_},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){c=NaN,g.point=v,e.lineStart()}function v(r,i){var o=uI([r,i]),s=t(r,i);n(c,h,u,f,d,p,c=s[0],h=s[1],u=r,f=o[0],d=o[1],p=o[2],16,e),e.point(c,h)}function b(){g.point=m,e.lineEnd()}function _(){y(),g.point=x,g.lineEnd=w}function x(t,e){v(r=t,e),i=c,o=h,s=f,a=d,l=p,g.point=v}function w(){n(c,h,u,f,d,p,i,o,r,s,a,l,16,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return TI({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},zI=TI({point:function(t,e){this.stream.point(t*zR,e*zR)}});function LI(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,s){return[e+t*(o*=r),n-t*(s*=i)]}return o.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*i]},o}(t,e,n,r,i);var s=qR(o),a=YR(o),l=s*t,u=a*t,c=s/t,h=a/t,f=(a*n-s*e)/t,d=(a*e+s*n)/t;function p(t,o){return[l*(t*=r)-u*(o*=i)+e,n-u*t-l*o]}return p.invert=function(t,e){return[r*(c*t-h*e+f),i*(d-h*t-c*e)]},p}function UI(t){return BI(function(){return t})()}function BI(t){var e,n,r,i,o,s,a,l,u,c,h=150,f=480,d=250,p=0,g=0,m=0,y=0,v=0,b=0,_=1,x=1,w=null,k=_I,E=null,S=OR,O=.5;function C(t){return l(t[0]*zR,t[1]*zR)}function A(t){return(t=l.invert(t[0],t[1]))&&[t[0]*IR,t[1]*IR]}function D(){var t=LI(h,0,0,_,x,b).apply(null,e(p,g)),r=LI(h,f-t[0],d-t[1],_,x,b);return n=kI(m,y,v),a=xI(e,r),l=xI(n,a),s=II(a,O),T()}function T(){return u=c=null,C}return C.stream=function(t){return u&&c===t?u:u=zI(function(t){return TI({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(k(s(S(c=t)))))},C.preclip=function(t){return arguments.length?(k=t,w=void 0,T()):k},C.postclip=function(t){return arguments.length?(S=t,E=r=i=o=null,T()):S},C.clipAngle=function(t){return arguments.length?(k=+t?AI(w=t*zR):(w=null,_I),T()):w*IR},C.clipExtent=function(t){return arguments.length?(S=null==t?(E=r=i=o=null,OR):DI(E=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),T()):null==E?null:[[E,r],[i,o]]},C.scale=function(t){return arguments.length?(h=+t,D()):h},C.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],D()):[f,d]},C.center=function(t){return arguments.length?(p=t[0]%360*zR,g=t[1]%360*zR,D()):[p*IR,g*IR]},C.rotate=function(t){return arguments.length?(m=t[0]%360*zR,y=t[1]%360*zR,v=t.length>2?t[2]%360*zR:0,D()):[m*IR,y*IR,v*IR]},C.angle=function(t){return arguments.length?(b=t%360*zR,D()):b*IR},C.reflectX=function(t){return arguments.length?(_=t?-1:1,D()):_<0},C.reflectY=function(t){return arguments.length?(x=t?-1:1,D()):x<0},C.precision=function(t){return arguments.length?(s=II(a,O=t*t),T()):QR(O)},C.fitExtent=function(t,e){return jI(C,t,e)},C.fitSize=function(t,e){return PI(C,t,e)},C.fitWidth=function(t,e){return NI(C,t,e)},C.fitHeight=function(t,e){return RI(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&A,D()}}function qI(t){var e=0,n=PR/3,r=BI(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*zR,n=t[1]*zR):[e*IR,n*IR]},i}function VI(t,e){var n=YR(t),r=(n+YR(e))/2;if(LR(r)<1e-6)return function(t){var e=qR(t);function n(t,n){return[t*e,YR(n)/e]}return n.invert=function(t,n){return[t/e,t$(n*e)]},n}(t);var i=1+n*(2*r-n),o=QR(i)/r;function s(t,e){var n=QR(i-2*r*YR(e))/r;return[n*YR(t*=r),o-n*qR(t)]}return s.invert=function(t,e){var n=o-e,s=BR(t,LR(n))*XR(n);return n*r<0&&(s-=PR*XR(t)*XR(n)),[s/r,t$((i-(t*t+n*n)*r*r)/(2*r))]},s}var HI=function(){return qI(VI).scale(155.424).center([0,33.6442])},WI=function(){return HI().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function GI(t){return function(e,n){var r=qR(e),i=qR(n),o=t(r*i);return o===1/0?[2,0]:[o*i*YR(e),o*YR(n)]}}function ZI(t){return function(e,n){var r=QR(e*e+n*n),i=t(r),o=YR(i),s=qR(i);return[BR(e*o,r*s),t$(r&&n*o/r)]}}var YI=GI(function(t){return QR(2/(1+t))});YI.invert=ZI(function(t){return 2*t$(t/2)});var XI=GI(function(t){return(t=JR(t))&&t/YR(t)});function QI(t,e){return[t,GR(KR((NR+e)/2))]}function KI(t){var e,n,r,i=UI(t),o=i.center,s=i.scale,a=i.translate,l=i.clipExtent,u=null;function c(){var o=PR*s(),a=i(function(t){function e(e){return(e=t(e[0]*zR,e[1]*zR))[0]*=IR,e[1]*=IR,e}return t=kI(t[0]*zR,t[1]*zR,t.length>2?t[2]*zR:0),e.invert=function(e){return(e=t.invert(e[0]*zR,e[1]*zR))[0]*=IR,e[1]*=IR,e},e}(i.rotate()).invert([0,0]));return l(null==u?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:t===QI?[[Math.max(a[0]-o,u),e],[Math.min(a[0]+o,n),r]]:[[u,Math.max(a[1]-o,e)],[n,Math.min(a[1]+o,r)]])}return i.scale=function(t){return arguments.length?(s(t),c()):s()},i.translate=function(t){return arguments.length?(a(t),c()):a()},i.center=function(t){return arguments.length?(o(t),c()):o()},i.clipExtent=function(t){return arguments.length?(null==t?u=e=n=r=null:(u=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==u?null:[[u,e],[n,r]]},c()}function JI(t){return KR((NR+t)/2)}function tz(t,e){var n=qR(t),r=t===e?YR(t):GR(n/qR(e))/GR(JI(e)/JI(t)),i=n*ZR(JI(t),r)/r;if(!r)return QI;function o(t,e){i>0?e<1e-6-NR&&(e=1e-6-NR):e>NR-1e-6&&(e=NR-1e-6);var n=i/ZR(JI(e),r);return[n*YR(r*t),i-n*qR(r*t)]}return o.invert=function(t,e){var n=i-e,o=XR(r)*QR(t*t+n*n),s=BR(t,LR(n))*XR(n);return n*r<0&&(s-=PR*XR(t)*XR(n)),[s/r,2*UR(ZR(i/o,1/r))-NR]},o}function ez(t,e){return[t,e]}function nz(t,e){var n=qR(t),r=t===e?YR(t):(n-qR(e))/(e-t),i=n/r+t;if(LR(r)<1e-6)return ez;function o(t,e){var n=i-e,o=r*t;return[n*YR(o),i-n*qR(o)]}return o.invert=function(t,e){var n=i-e,o=BR(t,LR(n))*XR(n);return n*r<0&&(o-=PR*XR(t)*XR(n)),[o/r,i-XR(r)*QR(t*t+n*n)]},o}XI.invert=ZI(function(t){return t}),QI.invert=function(t,e){return[t,2*UR(HR(e))-NR]},ez.invert=ez;var rz=1.340264,iz=-.081106,oz=893e-6,sz=.003796,az=QR(3)/2;function lz(t,e){var n=t$(az*YR(e)),r=n*n,i=r*r*r;return[t*qR(n)/(az*(rz+3*iz*r+i*(7*oz+9*sz*r))),n*(rz+iz*r+i*(oz+sz*r))]}function uz(t,e){var n=qR(e),r=qR(t)*n;return[n*YR(t)/r,YR(e)/r]}function cz(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function hz(t,e){return[qR(e)*YR(t),YR(e)]}function fz(t,e){var n=qR(e),r=1+qR(t)*n;return[n*YR(t)/r,YR(e)/r]}function dz(t,e){return[GR(KR((NR+e)/2)),-t]}lz.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,s=0;s<12&&(o=(i=(r-=n=(r*(rz+iz*i+o*(oz+sz*i))-e)/(rz+3*iz*i+o*(7*oz+9*sz*i)))*r)*i*i,!(LR(n)<1e-12));++s);return[az*t*(rz+3*iz*i+o*(7*oz+9*sz*i))/qR(r),t$(YR(r)/az)]},uz.invert=ZI(UR),cz.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,s=o*o;r-=n=(r*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(LR(n)>1e-6&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},hz.invert=ZI(t$),fz.invert=ZI(function(t){return 2*UR(t)}),dz.invert=function(t,e){return[-e,2*UR(HR(t))-NR]};var pz=Math.abs,gz=(Math,Math,Math,Math.cos),mz=(Math,Math,Math,Math,Math,Math,Math,Math,Math.sin),yz=(Math,Math.PI),vz=yz/2,bz=(Math,xz(2));function _z(t){return t>1?vz:t<-1?-vz:Math.asin(t)}function xz(t){return t>0?Math.sqrt(t):0}function wz(t,e){var n,r=t*mz(e),i=30;do{e-=n=(e+mz(e)-r)/(1+gz(e))}while(pz(n)>1e-6&&--i>0);return e/2}xz(yz);var kz=function(t,e,n){function r(r,i){return[t*r*gz(i=wz(n,i)),e*mz(i)]}return r.invert=function(r,i){return i=_z(i/e),[r/(t*gz(i)),_z((2*i+mz(2*i))/n)]},r}(bz/vz,bz,yz);const Ez=nI(),Sz=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Oz(t,e){return function n(){const r=e();return r.type=t,r.path=nI().projection(r),r.copy=r.copy||function(){const t=n();return Sz.forEach(e=>{r[e]&&t[e](r[e]())}),t.path.pointRadius(r.path.pointRadius()),t},r}}function Cz(t,e){if(!t||"string"!=typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Dz[t]=Oz(t,e),this):Dz[t]||null}function Az(t){return t&&t.path||Ez}const Dz={albers:WI,albersusa:function(){var t,e,n,r,i,o,s=WI(),a=HI().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=HI().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],s=t[1];return o=null,n.point(e,s),o||(r.point(e,s),o)||(i.point(e,s),o)}function h(){return t=e=null,c}return c.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:s).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[s.stream(e=n),a.stream(n),l.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(s.precision(t),a.precision(t),l.precision(t),h()):s.precision()},c.scale=function(t){return arguments.length?(s.scale(t),a.scale(.35*t),l.scale(t),c.translate(s.translate())):s.scale()},c.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),o=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(u),r=a.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+1e-6,c+.12*e+1e-6],[o-.214*e-1e-6,c+.234*e-1e-6]]).stream(u),i=l.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+1e-6,c+.166*e+1e-6],[o-.115*e-1e-6,c+.234*e-1e-6]]).stream(u),h()},c.fitExtent=function(t,e){return jI(c,t,e)},c.fitSize=function(t,e){return PI(c,t,e)},c.fitWidth=function(t,e){return NI(c,t,e)},c.fitHeight=function(t,e){return RI(c,t,e)},c.scale(1070)},azimuthalequalarea:function(){return UI(YI).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return UI(XI).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return qI(tz).scale(109.5).parallels([30,30])},conicequalarea:HI,conicequidistant:function(){return qI(nz).scale(131.154).center([0,13.9389])},equalEarth:function(){return UI(lz).scale(177.158)},equirectangular:function(){return UI(ez).scale(152.63)},gnomonic:function(){return UI(uz).scale(144.049).clipAngle(60)},identity:function(){var t,e,n,r,i,o,s,a=1,l=0,u=0,c=1,h=1,f=0,d=null,p=1,g=1,m=TI({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),y=OR;function v(){return p=a*c,g=a*h,o=s=null,b}function b(n){var r=n[0]*p,i=n[1]*g;if(f){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+l,i+u]}return b.invert=function(n){var r=n[0]-l,i=n[1]-u;if(f){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/p,i/g]},b.stream=function(t){return o&&s===t?o:o=m(y(s=t))},b.postclip=function(t){return arguments.length?(y=t,d=n=r=i=null,v()):y},b.clipExtent=function(t){return arguments.length?(y=null==t?(d=n=r=i=null,OR):DI(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),v()):null==d?null:[[d,n],[r,i]]},b.scale=function(t){return arguments.length?(a=+t,v()):a},b.translate=function(t){return arguments.length?(l=+t[0],u=+t[1],v()):[l,u]},b.angle=function(n){return arguments.length?(e=YR(f=n%360*zR),t=qR(f),v()):f*IR},b.reflectX=function(t){return arguments.length?(c=t?-1:1,v()):c<0},b.reflectY=function(t){return arguments.length?(h=t?-1:1,v()):h<0},b.fitExtent=function(t,e){return jI(b,t,e)},b.fitSize=function(t,e){return PI(b,t,e)},b.fitWidth=function(t,e){return NI(b,t,e)},b.fitHeight=function(t,e){return RI(b,t,e)},b},mercator:function(){return KI(QI).scale(961/$R)},mollweide:function(){return UI(kz).scale(169.529)},naturalEarth1:function(){return UI(cz).scale(175.295)},orthographic:function(){return UI(hz).scale(249.5).clipAngle(90.000001)},stereographic:function(){return UI(fz).scale(250).clipAngle(142)},transversemercator:function(){var t=KI(dz),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}};for(const Set in Dz)Cz(Set,Dz[Set]);function Tz(t,e,n){var r=zE(t,e-1e-6,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Mz(t,e,n){var r=zE(t,e-1e-6,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Fz(){}const jz=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Pz(){var t=1,e=1,n=s;function r(t,e){return e.map(e=>i(t,e))}function i(r,i){var s=[],a=[];return function(n,r,i){var s,a,l,u,c,h=new Array,f=new Array;for(s=a=-1,jz[(l=n[0]>=r)<<1].forEach(d);++s<t-1;)jz[l|(l=n[s+1]>=r)<<1].forEach(d);for(jz[l<<0].forEach(d);++a<e-1;){for(s=-1,jz[(l=n[a*t+t]>=r)<<1|(u=n[a*t]>=r)<<2].forEach(d);++s<t-1;)c=u,jz[l|(l=n[a*t+t+s+1]>=r)<<1|(u=n[a*t+s+1]>=r)<<2|c<<3].forEach(d);jz[l|u<<3].forEach(d)}for(s=-1,jz[(u=n[a*t]>=r)<<2].forEach(d);++s<t-1;)c=u,jz[(u=n[a*t+s+1]>=r)<<2|c<<3].forEach(d);function d(t){var e,n,r=[t[0][0]+s,t[0][1]+a],l=[t[1][0]+s,t[1][1]+a],u=o(r),c=o(l);(e=f[u])?(n=h[c])?(delete f[e.end],delete h[n.start],e===n?(e.ring.push(l),i(e.ring)):h[e.start]=f[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete f[e.end],e.ring.push(l),f[e.end=c]=e):(e=h[c])?(n=f[u])?(delete h[e.start],delete f[n.end],e===n?(e.ring.push(l),i(e.ring)):h[n.start]=f[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=u]=e):h[u]=f[c]={start:u,end:c,ring:[r,l]}}jz[u<<3].forEach(d)}(r,i,t=>{n(t,r,i),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?s.push([t]):a.push(t)}),a.forEach(t=>{for(var e,n=0,r=s.length;n<r;++n)if(-1!==Nz((e=s[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:i,coordinates:s}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach(n=>{var o,s=n[0],a=n[1],l=0|s,u=0|a,c=r[u*t+l];s>0&&s<t&&l===s&&(n[0]=s+(i-(o=r[u*t+l-1]))/(c-o)-.5),a>0&&a<e&&u===a&&(n[1]=a+(i-(o=r[(u-1)*t+l]))/(c-o)-.5)})}return r.contour=i,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||Xm("invalid size"),t=i,e=o,r},r.smooth=function(t){return arguments.length?(n=t?s:Fz,r):n===s},r}function Nz(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=Rz(t,e[r]))return n;return 0}function Rz(t,e){for(var n=e[0],r=e[1],i=-1,o=0,s=t.length,a=s-1;o<s;a=o++){var l=t[o],u=l[0],c=l[1],h=t[a],f=h[0],d=h[1];if($z(l,h,e))return 0;c>r!=d>r&&n<(f-u)*(r-c)/(d-c)+u&&(i=-i)}return i}function $z(t,e,n){var r,i,o,s;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],s=e[r],i<=(o=n[r])&&o<=s||s<=o&&o<=i)}function Iz(t,e,n){return function(r){var i=Zy(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=e?hb(o,s,t):a/(t+1);return zE(o+l,s,l)}}function zz(t){jk.call(this,null,t)}function Lz(t,e,n,r,i){const o=t.x1||0,s=t.y1||0,a=e*n<0;function l(t){t.forEach(u)}function u(t){a&&t.reverse(),t.forEach(c)}function c(t){t[0]=(t[0]-o)*e+r,t[1]=(t[1]-s)*n+i}return function(t){return t.coordinates.forEach(l),t}}function Uz(t,e,n){const r=t>=0?t:Zk(e,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Bz(t){return zy(t)?t:Hy(+t)}function qz(){var t=t=>t[0],e=t=>t[1],n=ny,r=[-1,-1],i=960,o=500,s=2;function a(a,l){const u=Uz(r[0],a,t)>>s,c=Uz(r[1],a,e)>>s,h=u?u+2:0,f=c?c+2:0,d=2*h+(i>>s),p=2*f+(o>>s),g=new Float32Array(d*p),m=new Float32Array(d*p);let y=g;a.forEach(r=>{const i=h+(+t(r)>>s),o=f+(+e(r)>>s);i>=0&&i<d&&o>=0&&o<p&&(g[i+o*d]+=+n(r))}),u>0&&c>0?(Vz(d,p,g,m,u),Hz(d,p,m,g,c),Vz(d,p,g,m,u),Hz(d,p,m,g,c),Vz(d,p,g,m,u),Hz(d,p,m,g,c)):u>0?(Vz(d,p,g,m,u),Vz(d,p,m,g,u),Vz(d,p,g,m,u),y=m):c>0&&(Hz(d,p,g,m,c),Hz(d,p,m,g,c),Hz(d,p,g,m,c),y=m);const v=l?Math.pow(2,-2*s):1/KN(y);for(let t=0,e=d*p;t<e;++t)y[t]*=v;return{values:y,scale:1<<s,width:d,height:p,x1:h,y1:f,x2:h+(i>>s),y2:f+(o>>s)}}return a.x=function(e){return arguments.length?(t=Bz(e),a):t},a.y=function(t){return arguments.length?(e=Bz(t),a):e},a.weight=function(t){return arguments.length?(n=Bz(t),a):n},a.size=function(t){if(!arguments.length)return[i,o];var e=+t[0],n=+t[1];return e>=0&&n>=0||Xm("invalid size"),i=e,o=n,a},a.cellSize=function(t){return arguments.length?((t=+t)>=1||Xm("invalid cell size"),s=Math.floor(Math.log(t)/Math.LN2),a):1<<s},a.bandwidth=function(t){return arguments.length?(1===(t=$y(t)).length&&(t=[+t[0],+t[0]]),2!==t.length&&Xm("invalid bandwidth"),r=t,a):r},a}function Vz(t,e,n,r,i){const o=1+(i<<1);for(let s=0;s<e;++s)for(let e=0,a=0;e<t+i;++e)e<t&&(a+=n[e+s*t]),e>=i&&(e>=o&&(a-=n[e-o+s*t]),r[e-i+s*t]=a/Math.min(e+1,t-1+o-e,o))}function Hz(t,e,n,r,i){const o=1+(i<<1);for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[s+a*t]),a>=i&&(a>=o&&(l-=n[s+(a-o)*t]),r[s+(a-i)*t]=l/Math.min(a+1,e-1+o-a,o))}function Wz(t){jk.call(this,null,t)}zz.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},ev(zz,jk,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=t.field||ty,o=Pz().smooth(!1!==t.smooth),s=t.thresholds||function(t,e,n){const r=Iz(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(t.map(t=>$k(e(t).values)))}(r,i,t),a=null===t.as?null:t.as||"contour",l=[];return r.forEach(e=>{const n=i(e),r=o.size([n.width,n.height])(n.values,fy(s)?s:s(n.values));!function(t,e,n,r){let i=r.scale||e.scale,o=r.translate||e.translate;if(zy(i)&&(i=i(n,r)),zy(o)&&(o=o(n,r)),(1===i||null==i)&&!o)return;const s=(sv(i)?i:i[0])||1,a=(sv(i)?i:i[1])||1;t.forEach(Lz(e,s,a,o&&o[0]||0,o&&o[1]||0))}(r,n,e,t),r.forEach(t=>{l.push(sk(e,ik(null!=a?{[a]:t}:t)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),Wz.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Gz=["x","y","weight","size","cellSize","bandwidth"];function Zz(t,e){return Gz.forEach(n=>null!=e[n]?t[n](e[n]):0),t}function Yz(t){jk.call(this,null,t)}function Xz(t){jk.call(this,null,t)}function Qz(t){jk.call(this,null,t)}function Kz(t){jk.call(this,null,t)}function Jz(t){jk.call(this,null,t)}function tL(t){jk.call(this,[],t),this.generator=function(){var t,e,n,r,i,o,s,a,l,u,c,h,f=10,d=f,p=90,g=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return zE(VR(r/p)*p,n,p).map(c).concat(zE(VR(a/g)*g,s,g).map(h)).concat(zE(VR(e/f)*f,t,f).filter(function(t){return LR(t%p)>1e-6}).map(l)).concat(zE(VR(o/d)*d,i,d).filter(function(t){return LR(t%g)>1e-6}).map(u))}return y.lines=function(){return v().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(h(s).slice(1),c(n).reverse().slice(1),h(a).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(a=+t[0][1],s=+t[1][1],(r=+t[0][0])>(n=+t[1][0])&&(t=r,r=n,n=t),a>s&&(t=a,a=s,s=t),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(n){return arguments.length?(o=+n[0][1],i=+n[1][1],(e=+n[0][0])>(t=+n[1][0])&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),y.precision(m)):[[e,o],[t,i]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],y):[p,g]},y.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],y):[f,d]},y.precision=function(f){return arguments.length?(m=+f,l=Tz(o,i,90),u=Mz(e,t,m),c=Tz(a,s,90),h=Mz(r,n,m),y):m},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()}function eL(t){jk.call(this,null,t)}function nL(t){if(!zy(t))return!1;const e=xv(Wm(t));return e.$x||e.$y||e.$value||e.$max}function rL(t){jk.call(this,null,t),this.modified(!0)}function iL(t,e,n){zy(t[e])&&t[e](n)}function oL(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,l,u,c,h,f,d=t._root,p={data:r},g=t._x0,m=t._y0,y=t._x1,v=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((u=e>=(o=(g+y)/2))?g=o:y=o,(c=n>=(s=(m+v)/2))?m=s:v=s,i=d,!(d=d[h=c<<1|u]))return i[h]=p,t;if(a=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===a&&n===l)return p.next=d,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(u=e>=(o=(g+y)/2))?g=o:y=o,(c=n>=(s=(m+v)/2))?m=s:v=s}while((h=c<<1|u)==(f=(l>=s)<<1|a>=o));return i[f]=d,i[h]=p,t}ev(Wz,jk,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=function(t,e){var n,r,i,o,s,a,l=[],u=t=>t(o);if(null==e)l.push(t);else for(n={},r=0,i=t.length;r<i;++r)o=t[r],(a=n[s=e.map(u)])||(n[s]=a=[],a.dims=s,l.push(a)),a.push(o);return l}(e.materialize(e.SOURCE).source,t.groupby),o=(t.groupby||[]).map(Hm),s=Zz(qz(),t),a=t.as||"grid";return n=i.map(e=>ik(function(t,e){for(let n=0;n<o.length;++n)t[o[n]]=e[n];return t}({[a]:s(e,t.counts)},e.dims))),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),Yz.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},ev(Yz,jk,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),o=Pz().smooth(!1!==t.smooth),s=t.values,a=t.thresholds||Iz(t.count||10,t.nice,!!s),l=t.size;return s||(s=e.materialize(e.SOURCE).source,r=Lz(n=Zz(qz(),t)(s,!0),n.scale||1,n.scale||1,0,0),l=[n.width,n.height],s=n.values),a=fy(a)?a:a(s),s=o.size(l)(s,a),r&&s.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(s||[]).map(ik),i}}),Xz.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},ev(Xz,jk,{transform(t,e){var n,r=this._features,i=this._points,o=t.fields,s=o&&o[0],a=o&&o[1],l=t.geojson||!o&&ty,u=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(Wm(l))||s&&e.modified(Wm(s))||a&&e.modified(Wm(a)),this.value&&!n||(u=e.SOURCE,this._features=r=[],this._points=i=[]),l&&e.visit(u,t=>r.push(l(t))),s&&a&&(e.visit(u,t=>{var e=s(t),n=a(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&i.push([e,n])}),r=r.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:"FeatureCollection",features:r}}}),Qz.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},ev(Qz,jk,{transform(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||ty,o=t.as||"path",s=n.SOURCE;!r||t.modified()?(this.value=r=Az(t.projection),n.materialize().reflow()):s=i===ty||e.modified(i.fields)?n.ADD_MOD:n.ADD;const a=function(t,e){const n=t.pointRadius();return t.context(null),null!=e&&t.pointRadius(e),n}(r,t.pointRadius);return n.visit(s,t=>t[o]=r(i(t))),r.pointRadius(a),n.modifies(o)}}),Kz.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},ev(Kz,jk,{transform(t,e){var n,r=t.projection,i=t.fields[0],o=t.fields[1],s=t.as||["x","y"],a=s[0],l=s[1];function u(t){const e=r([i(t),o(t)]);e?(t[a]=e[0],t[l]=e[1]):(t[a]=void 0,t[l]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(n=e.modified(i.fields)||e.modified(o.fields),e.visit(n?e.ADD_MOD:e.ADD,u)),e.modifies(s)}}),Jz.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},ev(Jz,jk,{transform(t,e){var n=e.fork(e.ALL),r=this.value,i=t.as||"shape",o=n.ADD;return r&&!t.modified()||(this.value=r=function(t,e,n){const r=null==n?n=>t(e(n)):r=>{var i=t.pointRadius(),o=t.pointRadius(n)(e(r));return t.pointRadius(i),o};return r.context=e=>(t.context(e),r),r}(Az(t.projection),t.field||Km("datum"),t.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,t=>t[i]=r),n.modifies(i)}}),tL.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},ev(tL,jk,{transform(t,e){var n,r=this.value,i=this.generator;if(!r.length||t.modified())for(const o in t)zy(i[o])&&i[o](t[o]);return n=i(),r.length?e.mod.push(ak(r[0],n)):e.add.push(ik(n)),r[0]=n,e}}),eL.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},ev(eL,jk,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,r="shared"===t.resolve,i=t.field||ty,o=function(t,e){let n;return zy(t)?(n=n=>t(n,e),n.dep=nL(t)):t?n=Hy(t):(n=t=>t.$value/t.$max||0,n.dep=!0),n}(t.opacity,t),s=function(t,e){let n;return zy(t)?(n=n=>tA(t(n,e)),n.dep=nL(t)):n=Hy(tA(t||"#888")),n}(t.color,t),a=t.as||"image",l={$x:0,$y:0,$value:0,$max:r?$k(n.map(t=>$k(i(t).values))):0};return n.forEach(t=>{const e=i(t),n=Gy({},t,l);r||(n.$max=$k(e.values||[])),t[a]=function(t,e,n,r){const i=t.width,o=t.x1||0,s=t.y1||0,a=t.x2||i,l=t.y2||t.height,u=t.values,c=u?t=>u[t]:ey,h=wC(a-o,l-s),f=h.getContext("2d"),d=f.getImageData(0,0,a-o,l-s),p=d.data;for(let g=s,m=0;g<l;++g){e.$y=g-s;for(let t=o,s=g*i;t<a;++t,m+=4){e.$x=t-o,e.$value=c(t+s);const i=n(e);p[m+0]=i.r,p[m+1]=i.g,p[m+2]=i.b,p[m+3]=~~(255*r(e))}}return f.putImageData(d,0,0),h}(e,n,s.dep?s:Hy(s(n)),o.dep?o:Hy(o(n)))}),e.reflow(!0).modifies(a)}}),ev(rL,jk,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=function(t){const e=Cz((t||"mercator").toLowerCase());return e||Xm("Unrecognized projection type: "+t),e()}(t.type),Sz.forEach(e=>{null!=t[e]&&iL(n,e,t[e])})):Sz.forEach(e=>{t.modified(e)&&iL(n,e,t[e])}),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&function(t,e){const n=function(t){return 1===(t=$y(t)).length?t[0]:{type:"FeatureCollection",features:t.reduce((t,e)=>t.concat(function(t){return"FeatureCollection"===t.type?t.features:$y(t).filter(t=>null!=t).map(t=>"Feature"===t.type?t:{type:"Feature",geometry:t})}(e)),[])}}(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});var sL=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function aL(t){return t[0]}function lL(t){return t[1]}function uL(t,e,n){var r=new cL(null==e?aL:e,null==n?lL:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function cL(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function hL(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var fL=uL.prototype=cL.prototype;fL.copy=function(){var t,e,n=new cL(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=hL(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=hL(e));return n},fL.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return oL(this.cover(e,n),e,n,t)},fL.addAll=function(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>h&&(h=i));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<o;++n)oL(this,s[n],a[n],t[n]);return this},fL.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s,a,l=i-n||1,u=this._root;n>t||t>=i||r>e||e>=o;)switch(a=(e<r)<<1|t<n,(s=new Array(4))[a]=u,u=s,l*=2,a){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},fL.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},fL.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},fL.find=function(t,e,n){var r,i,o,s,a,l,u,c=this._x0,h=this._y0,f=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new sL(g,c,h,f,d)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,d=e+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(i=l.x0)>f||(o=l.y0)>d||(s=l.x1)<c||(a=l.y1)<h))if(g.length){var m=(i+s)/2,y=(o+a)/2;p.push(new sL(g[3],m,y,s,a),new sL(g[2],i,y,m,a),new sL(g[1],m,o,s,y),new sL(g[0],i,o,m,y)),(u=(e>=y)<<1|t>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var v=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),_=v*v+b*b;if(_<n){var x=Math.sqrt(n=_);c=t-x,h=e-x,f=t+x,d=e+x,r=g.data}}return r},fL.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,l,u,c,h,f,d=this._root,p=this._x0,g=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((u=o>=(a=(p+m)/2))?p=a:m=a,(c=s>=(l=(g+y)/2))?g=l:y=l,e=d,!(d=d[h=c<<1|u]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},fL.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},fL.root=function(){return this._root},fL.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},fL.visit=function(t){var e,n,r,i,o,s,a=[],l=this._root;for(l&&a.push(new sL(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&l.length){var u=(r+o)/2,c=(i+s)/2;(n=l[3])&&a.push(new sL(n,u,c,o,s)),(n=l[2])&&a.push(new sL(n,r,c,u,s)),(n=l[1])&&a.push(new sL(n,u,i,o,c)),(n=l[0])&&a.push(new sL(n,r,i,u,c))}return this},fL.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new sL(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,l=e.x1,u=e.y1,c=(s+l)/2,h=(a+u)/2;(o=i[0])&&n.push(new sL(o,s,a,c,h)),(o=i[1])&&n.push(new sL(o,c,a,l,h)),(o=i[2])&&n.push(new sL(o,s,h,c,u)),(o=i[3])&&n.push(new sL(o,c,h,l,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},fL.x=function(t){return arguments.length?(this._x=t,this):this._x},fL.y=function(t){return arguments.length?(this._y=t,this):this._y};var dL=function(t){return function(){return t}},pL=function(t){return 1e-6*(t()-.5)};function gL(t){return t.x+t.vx}function mL(t){return t.y+t.vy}var yL={value:()=>{}};function vL(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new bL(r)}function bL(t){this._=t}function _L(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function xL(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function wL(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=yL,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}bL.prototype=vL.prototype={constructor:bL,on:function(t,e){var n,r=this._,i=_L(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=wL(r[n],t.name,e);else if(null==e)for(n in r)r[n]=wL(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=xL(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new bL(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var kL,EL,SL=vL,OL=0,CL=0,AL=0,DL=0,TL=0,ML=0,FL="object"==typeof performance&&performance.now?performance:Date,jL="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function PL(){return TL||(jL(NL),TL=FL.now()+ML)}function NL(){TL=0}function RL(){this._call=this._time=this._next=null}function $L(t,e,n){var r=new RL;return r.restart(t,e,n),r}function IL(){TL=(DL=FL.now())+ML,OL=CL=0;try{!function(){PL(),++OL;for(var t,e=kL;e;)(t=TL-e._time)>=0&&e._call.call(null,t),e=e._next;--OL}()}finally{OL=0,function(){for(var t,e,n=kL,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:kL=e);EL=t,LL(r)}(),TL=0}}function zL(){var t=FL.now(),e=t-DL;e>1e3&&(ML-=e,DL=t)}function LL(t){OL||(CL&&(CL=clearTimeout(CL)),t-TL>24?(t<1/0&&(CL=setTimeout(IL,t-FL.now()-ML)),AL&&(AL=clearInterval(AL))):(AL||(DL=FL.now(),AL=setInterval(zL,1e3)),OL=1,jL(IL)))}function UL(t){return t.x}function BL(t){return t.y}RL.prototype=$L.prototype={constructor:RL,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?PL():+n)+(null==e?0:+e),this._next||EL===this||(EL?EL._next=this:kL=this,EL=this),this._call=t,this._time=n,LL()},stop:function(){this._call&&(this._call=null,this._time=1/0,LL())}};var qL=Math.PI*(3-Math.sqrt(5));function VL(t){return t.index}function HL(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}const WL={center:function(t,e){var n,r=1;function i(){var i,o,s=n.length,a=0,l=0;for(i=0;i<s;++i)a+=(o=n[i]).x,l+=o.y;for(a=(a/s-t)*r,l=(l/s-e)*r,i=0;i<s;++i)(o=n[i]).x-=a,o.y-=l}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i},collide:function(t){var e,n,r,i=1,o=1;function s(){for(var t,s,l,u,c,h,f,d=e.length,p=0;p<o;++p)for(s=uL(e,gL,mL).visitAfter(a),t=0;t<d;++t)f=(h=n[(l=e[t]).index])*h,u=l.x+l.vx,c=l.y+l.vy,s.visit(g);function g(t,e,n,o,s){var a=t.data,d=t.r,p=h+d;if(!a)return e>u+p||o<u-p||n>c+p||s<c-p;if(a.index>l.index){var g=u-a.x-a.vx,m=c-a.y-a.vy,y=g*g+m*m;y<p*p&&(0===g&&(y+=(g=pL(r))*g),0===m&&(y+=(m=pL(r))*m),y=(p-(y=Math.sqrt(y)))/y*i,l.vx+=(g*=y)*(p=(d*=d)/(f+d)),l.vy+=(m*=y)*p,a.vx-=g*(p=1-p),a.vy-=m*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)n[(i=e[r]).index]=+t(i,r,e)}}return"function"!=typeof t&&(t=dL(null==t?1:+t)),s.initialize=function(t,n){e=t,r=n,l()},s.iterations=function(t){return arguments.length?(o=+t,s):o},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:dL(+e),l(),s):t},s},nbody:function(){var t,e,n,r,i,o=dL(-30),s=1,a=1/0,l=.81;function u(n){var i,o=t.length,s=uL(t,UL,BL).visitAfter(h);for(r=n,i=0;i<o;++i)e=t[i],s.visit(f)}function c(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)i[(n=t[e]).index]=+o(n,e,t)}}function h(t){var e,n,r,o,s,a=0,l=0;if(t.length){for(r=o=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(a+=e.value,l+=n,r+=n*e.x,o+=n*e.y);t.x=r/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=i[e.data.index]}while(e=e.next)}t.value=a}function f(t,o,u,c){if(!t.value)return!0;var h=t.x-e.x,f=t.y-e.y,d=c-o,p=h*h+f*f;if(d*d/l<p)return p<a&&(0===h&&(p+=(h=pL(n))*h),0===f&&(p+=(f=pL(n))*f),p<s&&(p=Math.sqrt(s*p)),e.vx+=h*t.value*r/p,e.vy+=f*t.value*r/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===h&&(p+=(h=pL(n))*h),0===f&&(p+=(f=pL(n))*f),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(e.vx+=h*(d=i[t.data.index]*r/p),e.vy+=f*d)}while(t=t.next)}}return u.initialize=function(e,r){t=e,n=r,c()},u.strength=function(t){return arguments.length?(o="function"==typeof t?t:dL(+t),c(),u):o},u.distanceMin=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u},link:function(t){var e,n,r,i,o,s,a=VL,l=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=dL(30),c=1;function h(r){for(var i=0,a=t.length;i<c;++i)for(var l,u,h,f,d,p,g,m=0;m<a;++m)f=(h=(l=t[m]).target).x+h.vx-(u=l.source).x-u.vx||pL(s),d=h.y+h.vy-u.y-u.vy||pL(s),d*=p=((p=Math.sqrt(f*f+d*d))-n[m])/p*r*e[m],h.vx-=(f*=p)*(g=o[m]),h.vy-=d*g,u.vx+=f*(g=1-g),u.vy+=d*g}function f(){if(r){var s,l,u=r.length,c=t.length,h=new Map(r.map((t,e)=>[a(t,e,r),t]));for(s=0,i=new Array(u);s<c;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=HL(h,l.source)),"object"!=typeof l.target&&(l.target=HL(h,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(s=0,o=new Array(c);s<c;++s)o[s]=i[(l=t[s]).source.index]/(i[l.source.index]+i[l.target.index]);e=new Array(c),d(),n=new Array(c),p()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+l(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){r=t,s=e,f()},h.links=function(e){return arguments.length?(t=e,f(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(l="function"==typeof t?t:dL(+t),d(),h):l},h.distance=function(t){return arguments.length?(u="function"==typeof t?t:dL(+t),p(),h):u},h},x:function(t){var e,n,r,i=dL(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=dL(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:dL(+t),s(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:dL(+e),s(),o):t},o},y:function(t){var e,n,r,i=dL(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=dL(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:dL(+t),s(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:dL(+e),s(),o):t},o}},GL=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ZL=["static","iterations"],YL=["x","y","vx","vy"];function XL(t){jk.call(this,null,t)}function QL(t,e,n,r){var i,o,s,a,l=$y(e.forces);for(i=0,o=GL.length;i<o;++i)"forces"!==(s=GL[i])&&e.modified(s)&&t[s](e[s]);for(i=0,o=l.length;i<o;++i)a="forces"+i,(s=n||e.modified("forces",i)?JL(l[i]):r&&KL(l[i],r)?t.force(a):null)&&t.force(a,s);for(o=t.numForces||0;i<o;++i)t.force("forces"+i,null);return t.numForces=l.length,t}function KL(t,e){var n,r;for(n in t)if(zy(r=t[n])&&e.modified(Wm(r)))return 1;return 0}function JL(t){var e,n;for(n in Qy(WL,t.force)||Xm("Unrecognized force: "+t.force),e=WL[t.force](),t)zy(e[n])&&tU(e[n],t[n],t);return e}function tU(t,e,n){t(zy(e)?t=>e(t,n):e)}function eU(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function nU(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=iU)):void 0===e&&(e=rU);for(var n,r,i,o,s,a=new aU(t),l=[a];n=l.pop();)if((i=e(n.data))&&(s=(i=Array.from(i)).length))for(n.children=i,o=s-1;o>=0;--o)l.push(r=i[o]=new aU(i[o])),r.parent=n,r.depth=n.depth+1;return a.eachBefore(sU)}function rU(t){return t.children}function iU(t){return Array.isArray(t)?t[1]:null}function oU(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function sU(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function aU(t){this.data=t,this.depth=this.height=0,this.parent=null}function lU(t,e){var n,r;if(hU(e,t))return[e];for(n=0;n<t.length;++n)if(uU(e,t[n])&&hU(dU(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(uU(dU(t[n],t[r]),e)&&uU(dU(t[n],e),t[r])&&uU(dU(t[r],e),t[n])&&hU(pU(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function uU(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function cU(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function hU(t,e){for(var n=0;n<e.length;++n)if(!cU(t,e[n]))return!1;return!0}function fU(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return dU(t[0],t[1]);case 3:return pU(t[0],t[1],t[2])}var e}function dU(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,s=e.y,a=e.r,l=o-n,u=s-r,c=a-i,h=Math.sqrt(l*l+u*u);return{x:(n+o+l/h*c)/2,y:(r+s+u/h*c)/2,r:(h+i+a)/2}}function pU(t,e,n){var r=t.x,i=t.y,o=t.r,s=e.x,a=e.y,l=e.r,u=n.x,c=n.y,h=n.r,f=r-s,d=r-u,p=i-a,g=i-c,m=l-o,y=h-o,v=r*r+i*i-o*o,b=v-s*s-a*a+l*l,_=v-u*u-c*c+h*h,x=d*p-f*g,w=(p*_-g*b)/(2*x)-r,k=(g*m-p*y)/x,E=(d*b-f*_)/(2*x)-i,S=(f*y-d*m)/x,O=k*k+S*S-1,C=2*(o+w*k+E*S),A=w*w+E*E-o*o,D=-(O?(C+Math.sqrt(C*C-4*O*A))/(2*O):A/C);return{x:r+w+k*D,y:i+E+S*D,r:D}}function gU(t,e,n){var r,i,o,s,a=t.x-e.x,l=t.y-e.y,u=a*a+l*l;u?(i=e.r+n.r,s=t.r+n.r,(i*=i)>(s*=s)?(r=(u+s-i)/(2*u),o=Math.sqrt(Math.max(0,s/u-r*r)),n.x=t.x-r*a-o*l,n.y=t.y-r*l+o*a):(r=(u+i-s)/(2*u),o=Math.sqrt(Math.max(0,i/u-r*r)),n.x=e.x+r*a-o*l,n.y=e.y+r*l+o*a)):(n.x=e.x+n.r,n.y=e.y)}function mU(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function yU(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function vU(t){this._=t,this.next=null,this.previous=null}function bU(t){return null==t?null:_U(t)}function _U(t){if("function"!=typeof t)throw new Error;return t}function xU(){return 0}XL.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:YL}]},ev(XL,jk,{transform(t,e){var n,r,i=this.value,o=e.changed(e.ADD_REM),s=t.modified(GL),a=t.iterations||300;if(i?(o&&(e.modifies("index"),i.nodes(e.source)),(s||e.changed(e.MOD))&&QL(i,t,0,e)):(this.value=i=function(t,e){const n=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=$L(h),u=SL("tick","end"),c=function(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}();function h(){f(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function f(r){var l,u,c=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,a.forEach(function(t){t(n)}),l=0;l<c;++l)null==(u=t[l]).fx?u.x+=u.vx*=s:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=s:(u.y=u.fy,u.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*qL;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),d(),e={tick:f,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(c=t,a.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,r){var i,o,s,a,l,u=0,c=t.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(s=(i=e-(a=t[u]).x)*i+(o=n-a.y)*o)<r&&(l=a,r=s);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}}(t),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),QL(n,e,!0).on("end",()=>o=!0)}(e.source,t),i.on("tick",(n=e.dataflow,r=this,()=>n.touch(r).run())),t.static||(o=!0,i.tick()),e.modifies("index")),s||o||t.modified(ZL)||e.changed()&&t.restart)if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/a)),t.static)for(i.stop();--a>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return e.StopPropagation;return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let a,l=this._argops,u=0,c=l.length;u<c;++u)if(a=l[u],"forces"===a.name&&"link"===a.op._argval.force)for(var r,i=a.op._argops,o=0,s=i.length;o<s;++o)if("links"===i[o].name&&(r=i[o].op.source)){n.pulse(r,n.changeset().reflow());break}return e.reflow(t.modified()).modifies(YL)}}),aU.prototype=nU.prototype={constructor:aU,count:function(){return this.eachAfter(eU)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,s=[o],a=[],l=-1;o=s.pop();)if(a.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)s.push(n[r]);for(;o=a.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],s=-1;i=o.pop();)if(t.call(e,i,++s,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)r.push(e=e.parent);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return nU(this).eachBefore(oU)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};var wU=function(t){return function(){return t}};function kU(t){return Math.sqrt(t.value)}function EU(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function SU(t,e){return function(n){if(r=n.children){var r,i,o,s=r.length,a=t(n)*e||0;if(a)for(i=0;i<s;++i)r[i].r+=a;if(o=function(t){if(!(o=(e=t,t="object"==typeof e&&"length"in e?e:Array.from(e)).length))return 0;var e,n,r,i,o,s,a,l,u,c,h,f;if((n=t[0]).x=0,n.y=0,!(o>1))return n.r;if(n.x=-(r=t[1]).r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;gU(r,n,i=t[2]),n=new vU(n),r=new vU(r),i=new vU(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<o;++l){gU(n._,r._,i=t[l]),i=new vU(i),u=r.next,c=n.previous,h=r._.r,f=n._.r;do{if(h<=f){if(mU(u._,i._)){n.next=r=u,r.previous=n,--l;continue t}h+=u._.r,u=u.next}else{if(mU(c._,i._)){(n=c).next=r,r.previous=n,--l;continue t}f+=c._.r,c=c.previous}}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=yU(n);(i=i.next)!==r;)(a=yU(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Array.from(t))).length,o=[];r<i;)e=t[r],n&&cU(n,e)?++r:(n=fU(o=lU(o,e)),r=0);return n}(n),l=0;l<o;++l)(n=t[l]).x-=i.x,n.y-=i.y;return i.r}(r),a)for(i=0;i<s;++i)r[i].r-=a;n.r=o+a}}}function OU(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var CU=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},AU=function(t,e,n,r,i){for(var o,s=t.children,a=-1,l=s.length,u=t.value&&(r-e)/t.value;++a<l;)(o=s[a]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*u},DU={depth:-1},TU={};function MU(t){return t.id}function FU(t){return t.parentId}var jU=function(){var t=MU,e=FU;function n(n){var r,i,o,s,a,l,u,c=Array.from(n),h=c.length,f=new Map;for(i=0;i<h;++i)a=c[i]=new aU(r=c[i]),null!=(l=t(r,i,n))&&(l+="")&&(u=a.id=l,f.set(u,f.has(u)?TU:a)),null!=(l=e(r,i,n))&&(l+="")&&(a.parent=l);for(i=0;i<h;++i)if(l=(a=c[i]).parent){if(!(s=f.get(l)))throw new Error("missing: "+l);if(s===TU)throw new Error("ambiguous: "+l);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=DU,o.eachBefore(function(t){t.depth=t.parent.depth+1,--h}).eachBefore(sU),o.parent=null,h>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=_U(e),n):t},n.parentId=function(t){return arguments.length?(e=_U(t),n):e},n};function PU(t,e){return t.parent===e.parent?1:2}function NU(t){var e=t.children;return e?e[0]:t.t}function RU(t){var e=t.children;return e?e[e.length-1]:t.t}function $U(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function IU(t,e,n){return t.a.parent===e.parent?t.a:n}function zU(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function LU(t,e){return t.parent===e.parent?1:2}function UU(t,e){return t+e.x}function BU(t,e){return Math.max(t,e.y)}zU.prototype=Object.create(aU.prototype);var qU=function(t,e,n,r,i){for(var o,s=t.children,a=-1,l=s.length,u=t.value&&(i-n)/t.value;++a<l;)(o=s[a]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*u},VU=(1+Math.sqrt(5))/2;function HU(t,e,n,r,i,o){for(var s,a,l,u,c,h,f,d,p,g,m,y=[],v=e.children,b=0,_=0,x=v.length,w=e.value;b<x;){l=i-n,u=o-r;do{c=v[_++].value}while(!c&&_<x);for(h=f=c,m=c*c*(g=Math.max(u/l,l/u)/(w*t)),p=Math.max(f/m,m/h);_<x;++_){if(c+=a=v[_].value,a<h&&(h=a),a>f&&(f=a),m=c*c*g,(d=Math.max(f/m,m/h))>p){c-=a;break}p=d}y.push(s={value:c,dice:l<u,children:v.slice(b,_)}),s.dice?AU(s,n,r,i,w?r+=u*c/w:o):qU(s,n,r,w?n+=l*c/w:i,o),w-=c,b=_}return y}var WU=function t(e){function n(t,n,r,i,o){HU(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(VU),GU=function t(e){function n(t,n,r,i,o){if((s=t._squarify)&&s.ratio===e)for(var s,a,l,u,c,h=-1,f=s.length,d=t.value;++h<f;){for(l=(a=s[h]).children,u=a.value=0,c=l.length;u<c;++u)a.value+=l[u].value;a.dice?AU(a,n,r,i,d?r+=(o-r)*a.value/d:o):qU(a,n,r,d?n+=(i-n)*a.value/d:i,o),d-=a.value}else t._squarify=s=HU(e,t,n,r,i,o),s.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(VU);function ZU(t,e,n){const r={};return t.each(t=>{const i=t.data;n(i)&&(r[e(i)]=t)}),t.lookup=r,t}function YU(t){jk.call(this,null,t)}YU.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const XU=t=>t.values;function QU(){const t=[],e={entries:t=>r(n(t,0),0),key:n=>(t.push(n),e)};function n(e,r){if(r>=t.length)return e;const i=e.length,o=t[r++],s={},a={};let l,u,c,h=-1;for(;++h<i;)l=o(u=e[h])+"",(c=s[l])?c.push(u):s[l]=[u];for(l in s)a[l]=n(s[l],r);return a}function r(e,n){if(++n>t.length)return e;const i=[];for(const t in e)i.push({key:t,values:r(e[t],n)});return i}return e}function KU(t){jk.call(this,null,t)}ev(YU,jk,{transform(t,e){e.source||Xm("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),o=this.value;return(!o||r||e.changed())&&(o&&o.each(t=>{t.children&&ek(t.data)&&i.rem.push(t.data)}),this.value=o=nU({values:$y(t.keys).reduce((t,e)=>(t.key(e),t),QU()).entries(i.source)},XU),n&&o.each(t=>{t.children&&(t=ik(t.data),i.add.push(t),i.source.push(t))}),ZU(o,nk,nk)),i.source.root=o,i}});const JU=(t,e)=>t.parent===e.parent?1:2;ev(KU,jk,{transform(t,e){e.source&&e.source.root||Xm(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),r=this.fields,i=e.source.root,o=t.as||r;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(lk(t.sort,t=>t.data)),function(t,e,n){for(let r,i=0,o=e.length;i<o;++i)r=e[i],r in n&&t[r](n[r])}(n,this.params,t),n.separation&&n.separation(!1!==t.separation?JU:ny);try{this.value=n(i)}catch(s){Xm(s)}return i.each(t=>function(t,e,n){const r=t.data,i=e.length-1;for(let o=0;o<i;++o)r[n[o]]=t[e[o]];r[n[i]]=t.children?t.children.length:0}(t,r,o)),e.reflow(t.modified()).modifies(o).modifies("leaf")}});const tB=["x","y","r","depth","children"];function eB(t){KU.call(this,t)}eB.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:tB.length,default:tB}]},ev(eB,KU,{layout:function(){var t=null,e=1,n=1,r=xU;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(EU(t)).eachAfter(SU(r,.5)).eachBefore(OU(1)):i.eachBefore(EU(kU)).eachAfter(SU(xU,1)).eachAfter(SU(r,i.r/Math.min(e,n))).eachBefore(OU(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=bU(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:wU(+t),i):r},i},params:["radius","size","padding"],fields:tB});const nB=["x0","y0","x1","y1","depth","children"];function rB(t){KU.call(this,t)}function iB(t){jk.call(this,null,t)}rB.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:nB.length,default:nB}]},ev(rB,KU,{layout:function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&AU(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,s=r.x1-n,a=r.y1-n;s<i&&(i=s=(i+s)/2),a<o&&(o=a=(o+a)/2),r.x0=i,r.y0=o,r.x1=s,r.y1=a}}(e,o)),r&&i.eachBefore(CU),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},params:["size","round","padding"],fields:nB}),iB.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},ev(iB,jk,{transform(t,e){e.source||Xm("Stratify transform requires an upstream data source.");let n=this.value;const r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),o=!n||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?ZU(jU().id(t.key).parentId(t.parentKey)(i.source),t.key,ry):ZU(jU()([{}]),t.key,t.key)),i.source.root=this.value=n,i}});const oB={tidy:function(){var t=PU,e=1,n=1,r=null;function i(i){var l=function(t){for(var e,n,r,i,o,s=new zU(t,0),a=[s];e=a.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)a.push(n=e.children[i]=new zU(r[i],i)),n.parent=e;return(s.parent=new zU(null,0)).children=[s],s}(i);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(s),r)i.eachBefore(a);else{var u=i,c=i,h=i;i.eachBefore(function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)});var f=u===c?1:t(u,c)/2,d=f-u.x,p=e/(c.x+f+d),g=n/(h.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*g})}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,s=e,a=n,l=o.parent.children[0],u=o.m,c=s.m,h=a.m,f=l.m;a=RU(a),o=NU(o),a&&o;)l=NU(l),(s=RU(s)).a=e,(i=a.z+h-o.z-u+t(a._,o._))>0&&($U(IU(a,e,r),e,i),u+=i,c+=i),h+=a.m,u+=o.m,f+=l.m,c+=s.m;a&&!RU(s)&&(s.t=a,s.m+=h-c),o&&!NU(l)&&(l.t=o,l.m+=u-f,r=e)}return r}(e,i,e.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},cluster:function(){var t=LU,e=1,n=1,r=!1;function i(i){var o,s=0;i.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(UU,0)/t.length}(n),e.y=function(t){return 1+t.reduce(BU,0)}(n)):(e.x=o?s+=t(e,o):0,e.y=0,o=e)});var a=function(t){for(var e;e=t.children;)t=e[0];return t}(i),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),u=a.x-t(a,l)/2,c=l.x+t(l,a)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-u)/(c-u)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}},sB=["x","y","depth","children"];function aB(t){KU.call(this,t)}function lB(t){jk.call(this,[],t)}aB.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:sB.length,default:sB}]},ev(aB,KU,{layout(t){const e=t||"tidy";if(Qy(oB,e))return oB[e]();Xm("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:sB}),lB.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},ev(lB,jk,{transform(t,e){const n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),o={};return r||Xm("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,t=>o[nk(t)]=1),r.each(t=>{const e=t.data,n=t.parent&&t.parent.data;n&&o[nk(e)]&&o[nk(n)]&&i.add.push(ik({source:n,target:e}))}),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,t=>o[nk(t)]=1),n.forEach(t=>{(o[nk(t.source)]||o[nk(t.target)])&&i.mod.push(t)})),i}});const uB={binary:function(t,e,n,r,i){var o,s,a=t.children,l=a.length,u=new Array(l+1);for(u[0]=s=o=0;o<l;++o)u[o+1]=s+=a[o].value;!function t(e,n,r,i,o,s,l){if(e>=n-1){var c=a[e];return c.x0=i,c.y0=o,c.x1=s,void(c.y1=l)}for(var h=u[e],f=r/2+h,d=e+1,p=n-1;d<p;){var g=d+p>>>1;u[g]<f?d=g+1:p=g}f-u[d-1]<u[d]-f&&e+1<d&&--d;var m=u[d]-h,y=r-m;if(s-i>l-o){var v=r?(i*y+s*m)/r:s;t(e,d,m,i,o,v,l),t(d,n,y,v,o,s,l)}else{var b=r?(o*y+l*m)/r:l;t(e,d,m,i,o,s,b),t(d,n,y,i,b,s,l)}}(0,l,t.value,e,n,r,i)},dice:AU,slice:qU,slicedice:function(t,e,n,r,i){(1&t.depth?qU:AU)(t,e,n,r,i)},squarify:WU,resquarify:GU},cB=["x0","y0","x1","y1","depth","children"];function hB(t){KU.call(this,t)}function fB(t,e,n,r){const i=t.width,o=t.height,s=n||r,a=wC(i,o).getContext("2d");e.forEach(t=>dB(a,t,s));const l=new Uint32Array(a.getImageData(0,0,i,o).data.buffer),u=t.bitmap(),c=s&&t.bitmap();let h,f,d,p,g;for(f=0;f<o;++f)for(h=0;h<i;++h)g=4278190080&l[f*i+h],g&&(d=t(h),p=t(f),r||u.set(d,p),s&&268435456^g&&c.set(d,p));return[u,c]}function dB(t,e,n){if(!e.length)return;const r=e[0].mark.marktype;"group"===r?e.forEach(e=>{e.items.forEach(e=>dB(t,e.items,n))}):qj[r].draw(t,{items:n?e.map(pB):e})}function pB(t){const e=sk(t,{});return e.stroke&&(e.strokeOpacity=1),e.fill&&(e.fillOpacity=.0625,e.stroke="#000",e.strokeOpacity=1,e.strokeWidth=2),e}hB.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cB.length,default:cB}]},ev(hB,KU,{layout(){const t=function(){var t=WU,e=!1,n=1,r=1,i=[0],o=xU,s=xU,a=xU,l=xU,u=xU;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(CU),t}function h(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,h=e.x1-n,f=e.y1-n;h<r&&(r=h=(r+h)/2),f<c&&(c=f=(c+f)/2),e.x0=r,e.y0=c,e.x1=h,e.y1=f,e.children&&(n=i[e.depth+1]=o(e)/2,r+=u(e)-n,c+=s(e)-n,(h-=a(e)-n)<r&&(r=h=(r+h)/2),(f-=l(e)-n)<c&&(c=f=(c+f)/2),t(e,r,c,h,f))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=_U(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:wU(+t),c):o},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:wU(+t),c):s},c.paddingRight=function(t){return arguments.length?(a="function"==typeof t?t:wU(+t),c):a},c.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:wU(+t),c):l},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:wU(+t),c):u},c}();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{Qy(uB,e)?t.tile(uB[e]):Xm("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:cB});const gB=new Uint32Array(33),mB=new Uint32Array(33);mB[0]=0,gB[0]=~mB[0];for(let Set=1;Set<=32;++Set)mB[Set]=mB[Set-1]<<1|1,gB[Set]=~mB[Set];function yB(t,e,n,r,i,o){let s=n/2;return t-s<0||t+s>i||e-(s=r/2)<0||e+s>o}function vB(t,e,n,r,i,o,s,a){const l=i*o/(2*r),u=t(e-l),c=t(e+l),h=t(n-(o/=2)),f=t(n+o);return s.outOfBounds(u,h,c,f)||s.getRange(u,h,c,f)||a&&a.getRange(u,h,c,f)}const bB=[-1,-1,1,1],_B=[-1,1,-1,1],xB=["right","center","left"],wB=["bottom","middle","top"];function kB(t,e,n,r,i,o,s,a,l,u,c,h){return!(i.outOfBounds(t,n,e,r)||(h&&o?o.getRange(t,n,e,r)||!function(t,e,n,r,i){return i[0]<=t&&n<=i[2]&&i[3]<=e&&r<=i[5]}(s,l,a,u,c):i.getRange(t,n,e,r)))}const EB={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},SB={naive:function(t,e,n,r){const i=t.width,o=t.height;return function(t){const e=t.datum.datum.items[r].items,n=e.length,s=t.datum.fontSize,a=Sj.width(t.datum,t.datum.text);let l,u,c,h,f,d,p,g=0;for(let r=0;r<n;++r)l=e[r].x,c=e[r].y,u=void 0===e[r].x2?l:e[r].x2,h=void 0===e[r].y2?c:e[r].y2,f=(l+u)/2,d=(c+h)/2,p=Math.abs(u-l+h-c),p>=g&&(g=p,t.x=f,t.y=d);return f=a/2,d=s/2,l=t.x-f,u=t.x+f,c=t.y-d,h=t.y+d,t.align="center",l<0&&u<=i?t.align="left":0<=l&&i<u&&(t.align="right"),t.baseline="middle",c<0&&h<=o?t.baseline="top":0<=c&&o<h&&(t.baseline="bottom"),!0}},"reduced-search":function(t,e,n,r){const i=t.width,o=t.height,s=e[0],a=e[1];function l(e,n,r,l,u){const c=t.invert(e),h=t.invert(n);let f,d=r,p=o;if(!yB(c,h,l,u,i,o)&&!vB(t,c,h,u,l,d,s,a)&&!vB(t,c,h,u,l,u,s,null)){for(;p-d>=1;)f=(d+p)/2,vB(t,c,h,u,l,f,s,a)?p=f:d=f;if(d>r)return[c,h,d,!0]}}return function(e){const a=e.datum.datum.items[r].items,u=a.length,c=e.datum.fontSize,h=Sj.width(e.datum,e.datum.text);let f,d,p,g,m,y,v,b,_,x,w,k,E,S,O,C,A,D=n?c:0,T=!1,M=!1,F=0;for(let r=0;r<u;++r){for(f=a[r].x,p=a[r].y,d=void 0===a[r].x2?f:a[r].x2,g=void 0===a[r].y2?p:a[r].y2,f>d&&(A=f,f=d,d=A),p>g&&(A=p,p=g,g=A),_=t(f),w=t(d),x=~~((_+w)/2),k=t(p),S=t(g),E=~~((k+S)/2),v=x;v>=_;--v)for(b=E;b>=k;--b)C=l(v,b,D,h,c),C&&([e.x,e.y,D,T]=C);for(v=x;v<=w;++v)for(b=E;b<=S;++b)C=l(v,b,D,h,c),C&&([e.x,e.y,D,T]=C);T||n||(O=Math.abs(d-f+g-p),m=(f+d)/2,y=(p+g)/2,O>=F&&!yB(m,y,h,c,i,o)&&!vB(t,m,y,c,h,c,s,null)&&(F=O,e.x=m,e.y=y,M=!0))}return!(!T&&!M||(m=h/2,y=c/2,s.setRange(t(e.x-m),t(e.y-y),t(e.x+m),t(e.y+y)),e.align="center",e.baseline="middle",0))}},floodfill:function(t,e,n,r){const i=t.width,o=t.height,s=e[0],a=e[1],l=t.bitmap();return function(e){const u=e.datum.datum.items[r].items,c=u.length,h=e.datum.fontSize,f=Sj.width(e.datum,e.datum.text),d=[];let p,g,m,y,v,b,_,x,w,k,E,S,O=n?h:0,C=!1,A=!1,D=0;for(let r=0;r<c;++r){for(p=u[r].x,m=u[r].y,g=void 0===u[r].x2?p:u[r].x2,y=void 0===u[r].y2?m:u[r].y2,d.push([t((p+g)/2),t((m+y)/2)]);d.length;)if([_,x]=d.pop(),!(s.get(_,x)||a.get(_,x)||l.get(_,x))){l.set(_,x);for(let t=0;t<4;++t)v=_+bB[t],b=x+_B[t],l.outOfBounds(v,b,v,b)||d.push([v,b]);if(v=t.invert(_),b=t.invert(x),w=O,k=o,!yB(v,b,f,h,i,o)&&!vB(t,v,b,h,f,w,s,a)&&!vB(t,v,b,h,f,h,s,null)){for(;k-w>=1;)E=(w+k)/2,vB(t,v,b,h,f,E,s,a)?k=E:w=E;w>O&&(e.x=v,e.y=b,O=w,C=!0)}}C||n||(S=Math.abs(g-p+y-m),v=(p+g)/2,b=(m+y)/2,S>=D&&!yB(v,b,f,h,i,o)&&!vB(t,v,b,h,f,h,s,null)&&(D=S,e.x=v,e.y=b,A=!0))}return!(!C&&!A||(v=f/2,b=h/2,s.setRange(t(e.x-v),t(e.y-b),t(e.x+v),t(e.y+b)),e.align="center",e.baseline="middle",0))}}};const OB=["x","y","opacity","align","baseline"],CB=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function AB(t){jk.call(this,null,t)}function DB(t,e){var n,r,i,o,s,a,l=[],u=function(t){return t(o)};if(null==e)l.push(t);else for(n={},r=0,i=t.length;r<i;++r)o=t[r],(a=n[s=e.map(u)])||(n[s]=a=[],a.dims=s,l.push(a)),a.push(o);return l}function TB(t){jk.call(this,null,t)}AB.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:CB},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:OB.length,default:OB}]},ev(AB,jk,{transform(t,e){const n=t.modified();if(!(n||e.changed(e.ADD_REM)||function(n){const r=t.sort;return zy(r)&&e.modified(r.fields)}()))return;t.size&&2===t.size.length||Xm("Size parameter should be specified as a [width, height] array.");const r=t.as||OB;return function(t,e,n,r,i,o,s,a,l,u,c){if(!t.length)return t;const h=Math.max(r.length,i.length),f=function(t,e){const n=new Float64Array(e),r=t.length;for(let i=0;i<r;++i)n[i]=t[i]||0;for(let i=r;i<e;++i)n[i]=n[r-1];return n}(r,h),d=function(t,e){const n=new Int8Array(e),r=t.length;for(let i=0;i<r;++i)n[i]|=EB[t[i]];for(let i=r;i<e;++i)n[i]=n[r-1];return n}(i,h),p=(_=t[0].datum)&&_.mark&&_.mark.marktype,g="group"===p&&t[0].datum.items[l].marktype,m="area"===g,y=function(t,e,n,r){const i=t=>[t.x,t.x,t.x,t.y,t.y,t.y];return t?"line"===t||"area"===t?t=>i(t.datum):"line"===e?t=>{const e=t.datum.items[r].items;return i(e.length?e["start"===n?0:e.length-1]:{x:NaN,y:NaN})}:t=>{const e=t.datum.bounds;return[e.x1,(e.x1+e.x2)/2,e.x2,e.y1,(e.y1+e.y2)/2,e.y2]}:i}(p,g,a,l),v=function(t,e,n){const r=Math.max(1,Math.sqrt(t*e/1e6)),i=~~((t+2*n+r)/r),o=~~((e+2*n+r)/r),s=t=>~~((t+n)/r);return s.invert=t=>t*r-n,s.bitmap=()=>function(t,e){const n=new Uint32Array(~~((t*e+32)/32));function r(t,e){n[t]|=e}function i(t,e){n[t]&=e}return{array:n,get:(e,r)=>{const i=r*t+e;return n[i>>>5]&1<<(31&i)},set:(e,n)=>{const i=n*t+e;r(i>>>5,1<<(31&i))},clear:(e,n)=>{const r=n*t+e;i(r>>>5,~(1<<(31&r)))},getRange:(e,r,i,o)=>{let s,a,l,u,c=o;for(;c>=r;--c)if(s=c*t+e,a=c*t+i,l=s>>>5,u=a>>>5,l===u){if(n[l]&gB[31&s]&mB[1+(31&a)])return!0}else{if(n[l]&gB[31&s])return!0;if(n[u]&mB[1+(31&a)])return!0;for(let t=l+1;t<u;++t)if(n[t])return!0}return!1},setRange:(e,n,i,o)=>{let s,a,l,u,c;for(;n<=o;++n)if(s=n*t+e,a=n*t+i,l=s>>>5,u=a>>>5,l===u)r(l,gB[31&s]&mB[1+(31&a)]);else for(r(l,gB[31&s]),r(u,mB[1+(31&a)]),c=l+1;c<u;++c)r(c,4294967295)},clearRange:(e,n,r,o)=>{let s,a,l,u,c;for(;n<=o;++n)if(s=n*t+e,a=n*t+r,l=s>>>5,u=a>>>5,l===u)i(l,mB[31&s]|gB[1+(31&a)]);else for(i(l,mB[31&s]),i(u,gB[1+(31&a)]),c=l+1;c<u;++c)i(c,0)},outOfBounds:(n,r,i,o)=>n<0||r<0||o>=e||i>=t}}(i,o),s.ratio=r,s.padding=n,s.width=t,s.height=e,s}(e[0],e[1],u),b=m&&"naive"===c;var _;const x=t.map(t=>({datum:t,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(t)}));let w;if(!b){n&&x.sort((t,e)=>n(t.datum,e.datum));let e=!1;for(let t=0;t<d.length&&!e;++t)e=5===d[t]||f[t]<0;p&&(s||m)&&(o=[t.map(t=>t.datum)].concat(o)),w=o.length?fB(v,o,e,m):function(t,e){const n=t.bitmap();return(e||[]).forEach(e=>n.set(t(e.boundary[0]),t(e.boundary[3]))),[n,void 0]}(v,s&&x)}const k=m?SB[c](v,w,s,l):function(t,e,n,r){const i=t.width,o=t.height,s=e[0],a=e[1],l=r.length;return function(e){const u=e.boundary,c=e.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>o)return!1;let h,f,d,p,g,m,y,v,b,_,x,w,k,E,S,O=0;for(let i=0;i<l;++i){if(h=(3&n[i])-1,f=(n[i]>>>2&3)-1,d=0===h&&0===f||r[i]<0,p=h&&f?Math.SQRT1_2:1,g=r[i]<0?-1:1,m=u[1+h]+r[i]*h*p,x=u[4+f]+g*c*f/2+r[i]*f*p,v=x-c/2,b=x+c/2,w=t(m),E=t(v),S=t(b),!O){if(!kB(w,w,E,S,s,a,m,m,v,b,u,d))continue;O=Sj.width(e.datum,e.datum.text)}if(_=m+g*O*h/2,m=_-O/2,y=_+O/2,w=t(m),k=t(y),kB(w,k,E,S,s,a,m,y,v,b,u,d))return e.x=h?h*g<0?y:m:_,e.y=f?f*g<0?b:v:x,e.align=xB[h*g+1],e.baseline=wB[f*g+1],s.setRange(w,E,k,S),!0}return!1}}(v,w,d,f);return x.forEach(t=>t.opacity=+k(t)),x}(e.materialize(e.SOURCE).source,t.size,t.sort,$y(t.offset||1),$y(t.anchor||CB),t.avoidMarks||[],!1!==t.avoidBaseMark,t.lineAnchor||"end",t.markIndex||0,t.padding||0,t.method||"naive").forEach(t=>{const e=t.datum;e[r[0]]=t.x,e[r[1]]=t.y,e[r[2]]=t.opacity,e[r[3]]=t.align,e[r[4]]=t.baseline}),e.reflow(n).modifies(r)}}),TB.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},ev(TB,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=DB(e.materialize(e.SOURCE).source,t.groupby),i=(t.groupby||[]).map(Hm),o=i.length,s=t.as||[Hm(t.x),Hm(t.y)],a=[];r.forEach(e=>{jE(e,t.x,t.y,t.bandwidth||.3).forEach(t=>{const n={};for(let r=0;r<o;++r)n[i[r]]=e.dims[r];n[s[0]]=t[0],n[s[1]]=t[1],a.push(ik(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a}return n}});const MB={linear:OE,log:CE,exp:AE,pow:DE,quad:TE,poly:ME};function FB(t){jk.call(this,null,t)}FB.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(MB)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},ev(FB,jk,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=DB(e.materialize(e.SOURCE).source,t.groupby),i=(t.groupby||[]).map(Hm),o=t.method||"linear",s=t.order||3,a=((t,e)=>"poly"===t?e:"quad"===t?2:1)(o,s),l=t.as||[Hm(t.x),Hm(t.y)],u=MB[o],c=[];let h=t.extent;Qy(MB,o)||Xm("Invalid regression method: "+o),null!=h&&"log"===o&&h[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),r.forEach(n=>{if(n.length<=a)return void e.dataflow.warn("Skipping regression with more parameters than data points.");const r=u(n,t.x,t.y,s);if(t.params)return void c.push(ik({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));const f=h||Zy(n,t.x),d=t=>{const e={};for(let r=0;r<i.length;++r)e[i[r]]=n.dims[r];e[l[0]]=t[0],e[l[1]]=t[1],c.push(ik(e))};"linear"===o?f.forEach(t=>d([t,r.predict(t)])):$E(r.predict,f,25,200).forEach(d)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const jB=Math.pow(2,-52),PB=new Uint32Array(512);class NB{static from(t,e=qB,n=VB){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new NB(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let s=1/0,a=1/0,l=-1/0,u=-1/0;for(let S=0;S<o;S++){const e=t[2*S],n=t[2*S+1];e<s&&(s=e),n<a&&(a=n),e>l&&(l=e),n>u&&(u=n),this._ids[S]=S}const c=(s+l)/2,h=(a+u)/2;let f,d,p,g=1/0;for(let S=0;S<o;S++){const e=RB(c,h,t[2*S],t[2*S+1]);e<g&&(f=S,g=e)}const m=t[2*f],y=t[2*f+1];g=1/0;for(let S=0;S<o;S++){if(S===f)continue;const e=RB(m,y,t[2*S],t[2*S+1]);e<g&&e>0&&(d=S,g=e)}let v=t[2*d],b=t[2*d+1],_=1/0;for(let S=0;S<o;S++){if(S===f||S===d)continue;const e=LB(m,y,v,b,t[2*S],t[2*S+1]);e<_&&(p=S,_=e)}let x=t[2*p],w=t[2*p+1];if(_===1/0){for(let r=0;r<o;r++)this._dists[r]=t[2*r]-t[0]||t[2*r+1]-t[1];UB(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(IB(m,y,v,b,x,w)){const t=d,e=v,n=b;d=p,v=x,b=w,p=t,x=e,w=n}const k=function(t,e,n,r,i,o){const s=n-t,a=r-e,l=i-t,u=o-e,c=s*s+a*a,h=l*l+u*u,f=.5/(s*u-a*l);return{x:t+(u*c-a*h)*f,y:e+(s*h-l*c)*f}}(m,y,v,b,x,w);this._cx=k.x,this._cy=k.y;for(let S=0;S<o;S++)this._dists[S]=RB(t[2*S],t[2*S+1],k.x,k.y);UB(this._ids,this._dists,0,o-1),this._hullStart=f;let E=3;n[f]=e[p]=d,n[d]=e[f]=p,n[p]=e[d]=f,r[f]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,y)]=f,i[this._hashKey(v,b)]=d,i[this._hashKey(x,w)]=p,this.trianglesLen=0,this._addTriangle(f,d,p,-1,-1,-1);for(let S,O,C=0;C<this._ids.length;C++){const o=this._ids[C],s=t[2*o],a=t[2*o+1];if(C>0&&Math.abs(s-S)<=jB&&Math.abs(a-O)<=jB)continue;if(S=s,O=a,o===f||o===d||o===p)continue;let l=0;for(let t=0,e=this._hashKey(s,a);t<this._hashSize&&(l=i[(e+t)%this._hashSize],-1===l||l===n[l]);t++);l=e[l];let u,c=l;for(;u=n[c],!IB(s,a,t[2*c],t[2*c+1],t[2*u],t[2*u+1]);)if(c=u,c===l){c=-1;break}if(-1===c)continue;let h=this._addTriangle(c,o,n[c],-1,-1,r[c]);r[o]=this._legalize(h+2),r[c]=h,E++;let g=n[c];for(;u=n[g],IB(s,a,t[2*g],t[2*g+1],t[2*u],t[2*u+1]);)h=this._addTriangle(g,o,u,r[o],-1,r[g]),r[o]=this._legalize(h+2),n[g]=g,E--,g=u;if(c===l)for(;u=e[c],IB(s,a,t[2*u],t[2*u+1],t[2*c],t[2*c+1]);)h=this._addTriangle(u,o,c,-1,r[c],r[u]),this._legalize(h+2),r[u]=h,n[c]=c,E--,c=u;this._hullStart=e[o]=c,n[c]=e[g]=o,n[o]=g,i[this._hashKey(s,a)]=o,i[this._hashKey(t[2*c],t[2*c+1])]=c}this.hull=new Uint32Array(E);for(let S=0,O=this._hullStart;S<E;S++)this.hull[S]=O,O=n[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const s=n[t],a=t-t%3;if(o=a+(t+2)%3,-1===s){if(0===i)break;t=PB[--i];continue}const l=s-s%3,u=l+(s+2)%3,c=e[o],h=e[t],f=e[a+(t+1)%3],d=e[u];if(zB(r[2*c],r[2*c+1],r[2*h],r[2*h+1],r[2*f],r[2*f+1],r[2*d],r[2*d+1])){e[t]=d,e[s]=c;const r=n[u];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===u){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(s,n[o]),this._link(o,u);const a=l+(s+1)%3;i<PB.length&&(PB[i++]=a)}else{if(0===i)break;t=PB[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=e,this._triangles[s+2]=n,this._link(s,r),this._link(s+1,i),this._link(s+2,o),this.trianglesLen+=3,s}}function RB(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function $B(t,e,n,r,i,o){const s=(r-e)*(i-t),a=(n-t)*(o-e);return Math.abs(s-a)>=33306690738754716e-32*Math.abs(s+a)?s-a:0}function IB(t,e,n,r,i,o){return($B(i,o,t,e,n,r)||$B(t,e,n,r,i,o)||$B(n,r,i,o,t,e))<0}function zB(t,e,n,r,i,o,s,a){const l=t-s,u=e-a,c=n-s,h=r-a,f=i-s,d=o-a,p=c*c+h*h,g=f*f+d*d;return l*(h*g-p*d)-u*(c*g-p*f)+(l*l+u*u)*(c*d-h*f)<0}function LB(t,e,n,r,i,o){const s=n-t,a=r-e,l=i-t,u=o-e,c=s*s+a*a,h=l*l+u*u,f=.5/(s*u-a*l),d=(u*c-a*h)*f,p=(s*h-l*c)*f;return d*d+p*p}function UB(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let s=i-1;for(;s>=n&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=r}else{let i=n+1,o=r;BB(t,n+r>>1,i),e[t[n]]>e[t[r]]&&BB(t,n,r),e[t[i]]>e[t[r]]&&BB(t,i,r),e[t[n]]>e[t[i]]&&BB(t,n,i);const s=t[i],a=e[s];for(;;){do{i++}while(e[t[i]]<a);do{o--}while(e[t[o]]>a);if(o<i)break;BB(t,i,o)}t[n+1]=t[o],t[o]=s,r-i+1>=o-n?(UB(t,e,i,r),UB(t,e,n,o-1)):(UB(t,e,n,o-1),UB(t,e,i,r))}}function BB(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function qB(t){return t[0]}function VB(t){return t[1]}class HB{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-i)>1e-6)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class WB{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class GB{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let f,d,p=0,g=0,m=n.length;p<m;p+=3,g+=2){const e=2*n[p],r=2*n[p+1],o=2*n[p+2],s=t[e],a=t[e+1],l=t[o],u=t[o+1],c=t[r]-s,h=t[r+1]-a,m=l-s,y=u-a,v=c*c+h*h,b=m*m+y*y,_=2*(c*y-h*m);if(_)if(Math.abs(_)<1e-8)f=(s+l)/2,d=(a+u)/2;else{const t=1/_;f=s+(y*v-h*b)*t,d=a+(c*b-m*v)*t}else f=(s+l)/2-1e8*y,d=(a+u)/2+1e8*m;i[g]=f,i[g+1]=d}let o,s,a,l=e[e.length-1],u=4*l,c=t[2*l],h=t[2*l+1];r.fill(0);for(let f=0;f<e.length;++f)l=e[f],o=u,s=c,a=h,u=4*l,c=t[2*l],h=t[2*l+1],r[o+2]=r[u]=a-h,r[o+3]=r[u+1]=c-s}render(t){const e=null==t?t=new HB:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:s}=this;if(i.length<=1)return null;for(let u=0,c=n.length;u<c;++u){const e=n[u];if(e<u)continue;const r=2*Math.floor(u/3),i=2*Math.floor(e/3);this._renderSegment(o[r],o[r+1],o[i],o[i+1],t)}let a,l=i[i.length-1];for(let u=0;u<i.length;++u){a=l,l=i[u];const e=2*Math.floor(r[l]/3),n=o[e],c=o[e+1],h=4*a,f=this._project(n,c,s[h+2],s[h+3]);f&&this._renderSegment(n,c,f[0],f[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new HB:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new HB:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let o=2;o<i;o+=2)r[o]===r[o-2]&&r[o+1]===r[o-1]||e.lineTo(r[o],r[o+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new WB;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const s=this._regioncode(t,e),a=this._regioncode(n,r);0===s&&0===a?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,s,a))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,s=t.length;o<s;o+=2)if(e[r]==t[o]&&e[r+1]==t[o+1]&&e[(r+2)%i]==t[(o+s-2)%s]&&e[(r+3)%i]==t[(o+s-1)%s]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const s=[];let a=o;do{const n=Math.floor(a/3);if(s.push(e[2*n],e[2*n+1]),a=a%3==2?a-2:a+1,i[a]!==t)break;a=r[a]}while(a!==o&&-1!==a);return s}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let r,i,o,s,a,l=null,u=e[n-2],c=e[n-1],h=this._regioncode(u,c);for(let f=0;f<n;f+=2)if(r=u,i=c,u=e[f],c=e[f+1],o=h,h=this._regioncode(u,c),0===o&&0===h)s=a,a=0,l?l.push(u,c):l=[u,c];else{let e,n,f,d,p;if(0===o){if(null===(e=this._clipSegment(r,i,u,c,o,h)))continue;[n,f,d,p]=e}else{if(null===(e=this._clipSegment(u,c,r,i,h,o)))continue;[d,p,n,f]=e,s=a,a=this._edgecode(n,f),s&&a&&this._edge(t,s,a,l,l.length),l?l.push(n,f):l=[n,f]}s=a,a=this._edgecode(d,p),s&&a&&this._edge(t,s,a,l,l.length),l?l.push(d,p):l=[d,p]}if(l)s=a,a=this._edgecode(l[0],l[1]),s&&a&&this._edge(t,s,a,l,l.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(t,e,n,r,i,o){for(;;){if(0===i&&0===o)return[t,e,n,r];if(i&o)return null;let s,a,l=i||o;8&l?(s=t+(n-t)*(this.ymax-e)/(r-e),a=this.ymax):4&l?(s=t+(n-t)*(this.ymin-e)/(r-e),a=this.ymin):2&l?(a=e+(r-e)*(this.xmax-t)/(n-t),s=this.xmax):(a=e+(r-e)*(this.xmin-t)/(n-t),s=this.xmin),i?i=this._regioncode(t=s,e=a):o=this._regioncode(n=s,r=a)}}_clipInfinite(t,e,n,r,i,o){let s,a=Array.from(e);if((s=this._project(a[0],a[1],n,r))&&a.unshift(s[0],s[1]),(s=this._project(a[a.length-2],a[a.length-1],i,o))&&a.push(s[0],s[1]),a=this._clipFinite(t,a))for(let l,u=0,c=a.length,h=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)l=h,h=this._edgecode(a[u],a[u+1]),l&&h&&(u=this._edge(t,l,h,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,e,n,r,i){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let o=0;o<r.length;o+=2){const t=(o+2)%r.length,e=(o+4)%r.length;(r[o]===r[t]&&r[t]===r[e]||r[o+1]===r[t+1]&&r[t+1]===r[e+1])&&(r.splice(t,2),o-=2)}return i}_project(t,e,n,r){let i,o,s,a=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<a&&(s=this.ymin,o=t+(a=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<a&&(s=this.ymax,o=t+(a=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<a&&(o=this.xmax,s=e+(a=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<a&&(o=this.xmin,s=e+(a=i)*r)}return[o,s]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const ZB=2*Math.PI,YB=Math.pow;function XB(t){return t[0]}function QB(t){return t[1]}function KB(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class JB{static from(t,e=XB,n=QB,r){return new JB("length"in t?function(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let s=0;s<i;++s){const i=t[s];o[2*s]=e.call(r,i,s,t),o[2*s+1]=n.call(r,i,s,t)}return o}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new NB(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const t=2*e[r],i=2*e[r+1],o=2*e[r+2];if((n[o]-n[t])*(n[i+1]-n[t+1])-(n[i]-n[t])*(n[o+1]-n[t+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},(t,e)=>e).sort((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]);const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let o=0,s=e.length/2;o<s;++o){const t=KB(e[2*o],e[2*o+1],i);e[2*o]=t[0],e[2*o+1]=t[1]}this._delaunator=new NB(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let a=0,l=n.length;a<l;++a){const t=i[a%3==2?a-2:a+1];-1!==n[a]&&-1!==o[t]||(o[t]=a)}for(let a=0,l=r.length;a<l;++a)s[r[a]]=a;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(t){return new GB(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:s}=this;if(s){const e=s.indexOf(t);return e>0&&(yield s[e-1]),void(e<s.length-1&&(yield s[e+1]))}const a=e[t];if(-1===a)return;let l=a,u=-1;do{if(yield u=o[l],l=l%3==2?l-2:l+1,o[l]!==t)return;if(l=i[l],-1===l){const e=n[(r[t]+1)%n.length];return void(e!==u&&(yield e))}}while(l!==a)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:s,triangles:a,points:l}=this;if(-1===r[t]||!l.length)return(t+1)%(l.length>>1);let u=t,c=YB(e-l[2*t],2)+YB(n-l[2*t+1],2);const h=r[t];let f=h;do{let r=a[f];const h=YB(e-l[2*r],2)+YB(n-l[2*r+1],2);if(h<c&&(c=h,u=r),f=f%3==2?f-2:f+1,a[f]!==t)break;if(f=s[f],-1===f){if(f=i[(o[t]+1)%i.length],f!==r&&YB(e-l[2*f],2)+YB(n-l[2*f+1],2)<c)return f;break}}while(f!==h);return u}render(t){const e=null==t?t=new HB:void 0,{points:n,halfedges:r,triangles:i}=this;for(let o=0,s=r.length;o<s;++o){const e=r[o];if(e<o)continue;const s=2*i[o],a=2*i[e];t.moveTo(n[s],n[s+1]),t.lineTo(n[a],n[a+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e=2){const n=null==t?t=new HB:void 0,{points:r}=this;for(let i=0,o=r.length;i<o;i+=2){const n=r[i],o=r[i+1];t.moveTo(n+e,o),t.arc(n,o,e,0,ZB)}return n&&n.value()}renderHull(t){const e=null==t?t=new HB:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let s=1;s<o;++s){const e=2*n[s];t.lineTo(r[e],r[e+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new WB;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new HB:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],s=2*i[t+1],a=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[s],r[s+1]),e.lineTo(r[a],r[a+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new WB;return this.renderTriangle(t,e),e.value()}}function tq(t){jk.call(this,null,t)}tq.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const eq=[-1e5,-1e5,1e5,1e5];function nq(t){const e=t[0][0],n=t[0][1];let r=t.length-1;for(;t[r][0]===e&&t[r][1]===n;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}ev(tq,jk,{transform(t,e){const n=t.as||"path",r=e.source;if(!r||!r.length)return e;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:eq;const o=this.value=JB.from(r,t.x,t.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const t=o.cellPolygon(s);r[s][n]=t?nq(t):null}return e.reflow(t.modified()).modifies(n)}});var rq=Math.PI/180;function iq(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,2048/o,2048/o);var s,a,l,u,c,h=0,f=0,d=0,p=n.length;for(--r;++r<p;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font,s=i.measureText(e.text+"m").width*o,l=e.size<<1,e.rotate){var g=Math.sin(e.rotate*rq),m=Math.cos(e.rotate*rq),y=s*m,v=s*g,b=l*m,_=l*g;s=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,l=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else s=s+31>>5<<5;if(l>d&&(d=l),h+s>=2048&&(h=0,f+=d,d=0),f+l>=2048)break;i.translate((h+(s>>1))/o,(f+(l>>1))/o),e.rotate&&i.rotate(e.rotate*rq),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=s,e.height=l,e.xoff=h,e.yoff=f,e.x1=s>>1,e.y1=l>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,h+=s}for(var x=i.getImageData(0,0,2048/o,2048/o).data,w=[];--r>=0;)if((e=n[r]).hasText){for(a=(s=e.width)>>5,l=e.y1-e.y0,u=0;u<l*a;u++)w[u]=0;if(null==(h=e.xoff))return;f=e.yoff;var k=0,E=-1;for(c=0;c<l;c++){for(u=0;u<s;u++){var S=x[2048*(f+c)+(h+u)<<2]?1<<31-u%32:0;w[a*c+(u>>5)]|=S,k|=S}k?E=c:(e.y0++,l--,c--,f++)}e.y1=e.y0+E,e.sprite=w.slice(0,(e.y1-e.y0)*a)}}}function oq(t,e,n){for(var r,i=t.sprite,o=t.width>>5,s=t.x-(o<<4),a=127&s,l=32-a,u=t.y1-t.y0,c=(t.y+t.y0)*(n>>=5)+(s>>5),h=0;h<u;h++){r=0;for(var f=0;f<=o;f++)if((r<<l|(f<o?(r=i[h*o+f])>>>a:0))&e[c+f])return!0;c+=n}return!1}function sq(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function aq(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function lq(t){return"function"==typeof t?t:function(){return t}}var uq={archimedean:aq,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}};const cq=["x","y","font","fontSize","fontStyle","fontWeight","angle"],hq=["text","font","rotate","fontSize","fontStyle","fontWeight"];function fq(t){jk.call(this,function(){var t,e,n,r,i,o,s,a=[256,256],l=aq,u=[],c=Math.random,h={};function f(t,e,n){for(var r,i,o,s,u,h=e.x,f=e.y,d=Math.sqrt(a[0]*a[0]+a[1]*a[1]),p=l(a),g=c()<.5?1:-1,m=-g;(r=p(m+=g))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=d));)if(e.x=h+i,e.y=f+o,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>a[0]||e.y+e.y1>a[1]||n&&oq(e,t,a[0])||n&&!((s=e).x+s.x1>(u=n)[0].x&&s.x+s.x0<u[1].x&&s.y+s.y1>u[0].y&&s.y+s.y0<u[1].y))){for(var y,v=e.sprite,b=e.width>>5,_=a[0]>>5,x=e.x-(b<<4),w=127&x,k=32-w,E=e.y1-e.y0,S=(e.y+e.y0)*_+(x>>5),O=0;O<E;O++){y=0;for(var C=0;C<=b;C++)t[S+C]|=y<<k|(C<b?(y=v[O*b+C])>>>w:0);S+=_}return e.sprite=null,!0}return!1}return h.layout=function(){for(var l=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=2048/e,t.height=2048/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(wC()),h=function(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}((a[0]>>5)*a[1]),d=null,p=u.length,g=-1,m=[],y=u.map(a=>({text:t(a),font:e(a),style:r(a),weight:i(a),rotate:o(a),size:~~(n(a)+1e-14),padding:s(a),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:a})).sort((t,e)=>e.size-t.size);++g<p;){var v=y[g];v.x=a[0]*(c()+.5)>>1,v.y=a[1]*(c()+.5)>>1,iq(l,v,y,g),v.hasText&&f(h,v,d)&&(m.push(v),d?sq(d,v):d=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=a[0]>>1,v.y-=a[1]>>1)}return m},h.words=function(t){return arguments.length?(u=t,h):u},h.size=function(t){return arguments.length?(a=[+t[0],+t[1]],h):a},h.font=function(t){return arguments.length?(e=lq(t),h):e},h.fontStyle=function(t){return arguments.length?(r=lq(t),h):r},h.fontWeight=function(t){return arguments.length?(i=lq(t),h):i},h.rotate=function(t){return arguments.length?(o=lq(t),h):o},h.text=function(e){return arguments.length?(t=lq(e),h):t},h.spiral=function(t){return arguments.length?(l=uq[t]||t,h):l},h.fontSize=function(t){return arguments.length?(n=lq(t),h):n},h.padding=function(t){return arguments.length?(s=lq(t),h):s},h.random=function(t){return arguments.length?(c=t,h):c},h}(),t)}fq.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:cq}]},ev(fq,jk,{transform(t,e){!t.size||t.size[0]&&t.size[1]||Xm("Wordcloud size dimensions must be non-zero.");const n=t.modified();if(!(n||e.changed(e.ADD_REM)||hq.some(function(n){const r=t[n];return zy(r)&&e.modified(r.fields)})))return;const r=e.materialize(e.SOURCE).source,i=this.value,o=t.as||cq;let s,a=t.fontSize||14;if(zy(a)?s=t.fontSizeRange:a=Hy(a),s){const t=a,e=mT("sqrt")().domain(Zy(r,t)).range(s);a=n=>e(t(n))}r.forEach(t=>{t[o[0]]=NaN,t[o[1]]=NaN,t[o[3]]=0});const l=i.words(r).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(a).random(Xk).layout(),u=i.size(),c=u[0]>>1,h=u[1]>>1,f=l.length;for(let d,p,g=0;g<f;++g)d=l[g],p=d.datum,p[o[0]]=d.x+c,p[o[1]]=d.y+h,p[o[2]]=d.font,p[o[3]]=d.size,p[o[4]]=d.style,p[o[5]]=d.weight,p[o[6]]=d.rotate;return e.reflow(n).modifies(o)}});const dq=t=>new Uint8Array(t),pq=t=>new Uint16Array(t),gq=t=>new Uint32Array(t);function mq(t,e,n){const r=(e<257?dq:e<65537?pq:gq)(t);return n&&r.set(n),r}function yq(t,e,n){const r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(t,e){const n=this.bisect(this.range,t.value),i=t.index,o=n[0],s=n[1],a=i.length;let l;for(l=0;l<o;++l)e[i[l]]|=r;for(l=s;l<a;++l)e[i[l]]|=r;return this}}}function vq(){let t=gq(0),e=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];const s=n,a=i.length,l=gq(a);let u,c,h,f=Array(a);for(h=0;h<a;++h)f[h]=r(i[h]),l[h]=h;if(f=function(t,e){return t.sort.call(e,(e,n)=>{const r=t[e],i=t[n];return r<i?-1:r>i?1:0}),n=t,Array.from(e,t=>n[t]);var n}(f,l),s)u=e,c=t,e=Array(s+a),t=gq(s+a),function(t,e,n,r,i,o,s,a,l){let u,c=0,h=0;for(u=0;c<r&&h<s;++u)e[c]<i[h]?(a[u]=e[c],l[u]=n[c++]):(a[u]=i[h],l[u]=o[h++]+t);for(;c<r;++c,++u)a[u]=e[c],l[u]=n[c];for(;h<s;++h,++u)a[u]=i[h],l[u]=o[h]+t}(o,u,c,s,f,l,a,e,t);else{if(o>0)for(h=0;h<a;++h)l[h]+=o;e=f,t=l}return n=s+a,{index:l,value:f}},remove:function(r,i){const o=n;let s,a,l;for(a=0;!i[t[a]]&&a<o;++a);for(l=a;a<o;++a)i[s=t[a]]||(t[l]=s,e[l]=e[a],++l);n=o-r},bisect:function(t,r){let i;return r?i=r.length:(r=e,i=n),[OC(r,t[0],0,i),SC(r,t[1],0,i)]},reindex:function(e){for(let r=0,i=n;r<i;++r)t[r]=e[t[r]]},index:()=>t,size:()=>n}}function bq(t){jk.call(this,function(){let t=8,e=[],n=gq(0),r=mq(0,t),i=mq(0,t);return{data:()=>e,seen:()=>{return n=(t=n).length>=(r=e.length)?t:((i=i||new t.constructor(r)).set(t),i);var t,r,i},add(t){for(let n,r=0,i=e.length,o=t.length;r<o;++r)n=t[r],n._index=i++,e.push(n)},remove(t,n){const o=e.length,s=Array(o-t),a=e;let l,u,c;for(u=0;!n[u]&&u<o;++u)s[u]=e[u],a[u]=u;for(c=u;u<o;++u)l=e[u],n[u]?a[u]=-1:(a[u]=c,r[c]=r[u],i[c]=i[u],s[c]=l,l._index=c++),r[u]=0;return e=s,a},size:()=>e.length,curr:()=>r,prev:()=>i,reset:t=>i[t]=r[t],all:()=>t<257?255:t<65537?65535:4294967295,set(t,e){r[t]|=e},clear(t,e){r[t]&=~e},resize(e,n){(e>r.length||n>t)&&(t=Math.max(n,t),r=mq(e,t,r),i=mq(e,t))}}}(),t),this._indices=null,this._dims=null}function _q(t){jk.call(this,null,t)}function xq(t){this.type=t}var wq,kq,Eq,Sq,Oq;bq.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},ev(bq,jk,{transform(t,e){return this._dims?t.modified("fields")||t.fields.some(t=>e.modified(t.fields))?this.reinit(t,e):this.eval(t,e):this.init(t,e)},init(t,e){const n=t.fields,r=t.query,i=this._indices={},o=this._dims=[],s=r.length;let a,l,u=0;for(;u<s;++u)a=n[u].fname,l=i[a]||(i[a]=vq()),o.push(yq(l,u,r[u]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),r=t.fields,i=t.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),h=n.rem=n.add,f=n.mod,d=i.length,p={};let g,m,y,v,b,_,x,w,k;if(u.set(l),e.rem.length&&(b=this.remove(t,e,n)),e.add.length&&a.add(e.add),e.mod.length)for(_={},v=e.mod,x=0,w=v.length;x<w;++x)_[v[x]._index]=1;for(x=0;x<d;++x)k=r[x],(!s[x]||t.modified("fields",x)||e.modified(k.fields))&&(y=k.fname,(g=p[y])||(o[y]=m=vq(),p[y]=g=m.insert(k,e.source,0)),s[x]=yq(m,x,i[x]).onAdd(g,l));for(x=0,w=a.data().length;x<w;++x)b[x]||(u[x]!==l[x]?h.push(x):_[x]&&l[x]!==c&&f.push(x));return a.mask=(1<<d)-1,n},eval(t,e){const n=e.materialize().fork(),r=this._dims.length;let i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},insert(t,e,n){const r=e.add,i=this.value,o=this._dims,s=this._indices,a=t.fields,l={},u=n.add,c=i.size()+r.length,h=o.length;let f,d,p,g=i.size();i.resize(c,h),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(f=0;f<h;++f)d=a[f].fname,p=l[d]||(l[d]=s[d].insert(a[f],r,g)),o[f].onAdd(p,m);for(;g<c;++g)y[g]=v,m[g]!==v&&u.push(g)},modify(t,e){const n=e.mod,r=this.value,i=r.curr(),o=r.all(),s=t.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(t,e,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,c=e.rem;let h,f,d,p;for(h=0,f=c.length;h<f;++h)d=c[h]._index,l[d]=1,s[d]=p=o[d],o[d]=a,p!==a&&u.push(d);for(d in r)r[d].remove(f,l);return this.reindex(e,f,l),l},reindex(t,e,n){const r=this._indices,i=this.value;t.runAfter(()=>{const t=i.remove(e,n);for(const e in r)r[e].reindex(t)})},update(t,e,n){const r=this._dims,i=t.query,o=e.stamp,s=r.length;let a,l,u=0;for(n.filters=0,l=0;l<s;++l)t.modified("query",l)&&(a=l,++u);if(1===u)u=r[a].one,this.incrementOne(r[a],i[a],n.add,n.rem);else for(l=0,u=0;l<s;++l)t.modified("query",l)&&(u|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return u},incrementAll(t,e,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=t.index(),u=t.bisect(t.range),c=t.bisect(e),h=c[0],f=c[1],d=u[0],p=u[1],g=t.one;let m,y,v;if(h<d)for(m=h,y=Math.min(d,f);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(h>d)for(m=d,y=Math.min(h,p);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;if(f>p)for(m=Math.max(h,p),y=f;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(f<p)for(m=Math.max(d,f),y=p;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;t.range=e.slice()},incrementOne(t,e,n,r){const i=this.value.curr(),o=t.index(),s=t.bisect(t.range),a=t.bisect(e),l=a[0],u=a[1],c=s[0],h=s[1],f=t.one;let d,p,g;if(l<c)for(d=l,p=Math.min(c,u);d<p;++d)g=o[d],i[g]^=f,n.push(g);else if(l>c)for(d=c,p=Math.min(l,h);d<p;++d)g=o[d],i[g]^=f,r.push(g);if(u>h)for(d=Math.max(l,h),p=u;d<p;++d)g=o[d],i[g]^=f,n.push(g);else if(u<h)for(d=Math.max(c,u),p=h;d<p;++d)g=o[d],i[g]^=f,r.push(g);t.range=e.slice()}}),_q.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},ev(_q,jk,{transform(t,e){const n=~(t.ignore||0),r=t.filter,i=r.mask;if(0==(i&n))return e.StopPropagation;const o=e.fork(e.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=t=>a[t]&n?null:s[t];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,t=>{const e=a[t]&n;return!e&&e^l[t]&n?s[t]:null}),o.filter(o.REM,t=>{const e=a[t]&n;return!e||e^e^l[t]&n?null:s[t]})):(o.filter(o.ADD,u),o.filter(o.REM,t=>(a[t]&n)===i?s[t]:null)),o.filter(o.SOURCE,t=>u(t._index))}}),xq.prototype.visit=function(t){let e,n,r;if(t(this))return 1;for(e=function(t){switch(t.type){case"ArrayExpression":return t.elements;case"BinaryExpression":case"LogicalExpression":return[t.left,t.right];case"CallExpression":return[t.callee].concat(t.arguments);case"ConditionalExpression":return[t.test,t.consequent,t.alternate];case"MemberExpression":return[t.object,t.property];case"ObjectExpression":return t.properties;case"Property":return[t.key,t.value];case"UnaryExpression":return[t.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1},(wq={})[1]="Boolean",wq[2]="<end>",wq[3]="Identifier",wq[4]="Keyword",wq[5]="Null",wq[6]="Numeric",wq[7]="Punctuator",wq[8]="String",wq[9]="RegularExpression";var Cq="ILLEGAL",Aq=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Dq=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Tq(t,e){if(!t)throw new Error("ASSERT: "+e)}function Mq(t){return t>=48&&t<=57}function Fq(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function jq(t){return"01234567".indexOf(t)>=0}function Pq(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function Nq(t){return 10===t||13===t||8232===t||8233===t}function Rq(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&Aq.test(String.fromCharCode(t))}function $q(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&Dq.test(String.fromCharCode(t))}const Iq={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function zq(){for(;Eq<Sq;){const t=kq.charCodeAt(Eq);if(!Pq(t)&&!Nq(t))break;++Eq}}function Lq(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)Eq<Sq&&Fq(kq[Eq])?(r=kq[Eq++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):tV({},"Unexpected token %0",Cq);return String.fromCharCode(i)}function Uq(){var t,e;for(e=0,"}"===(t=kq[Eq])&&tV({},"Unexpected token %0",Cq);Eq<Sq&&Fq(t=kq[Eq++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&tV({},"Unexpected token %0",Cq),e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}function Bq(){var t,e;for(t=kq.charCodeAt(Eq++),e=String.fromCharCode(t),92===t&&(117!==kq.charCodeAt(Eq)&&tV({},"Unexpected token %0",Cq),++Eq,(t=Lq("u"))&&"\\"!==t&&Rq(t.charCodeAt(0))||tV({},"Unexpected token %0",Cq),e=t);Eq<Sq&&$q(t=kq.charCodeAt(Eq));)++Eq,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==kq.charCodeAt(Eq)&&tV({},"Unexpected token %0",Cq),++Eq,(t=Lq("u"))&&"\\"!==t&&$q(t.charCodeAt(0))||tV({},"Unexpected token %0",Cq),e+=t);return e}function qq(){var t,e,n,r,i=Eq,o=kq.charCodeAt(Eq),s=kq[Eq];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Eq,{type:7,value:String.fromCharCode(o),start:i,end:Eq};default:if(61===(t=kq.charCodeAt(Eq+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Eq+=2,{type:7,value:String.fromCharCode(o)+String.fromCharCode(t),start:i,end:Eq};case 33:case 61:return 61===kq.charCodeAt(Eq+=2)&&++Eq,{type:7,value:kq.slice(i,Eq),start:i,end:Eq}}}return">>>="===(r=kq.substr(Eq,4))?{type:7,value:r,start:i,end:Eq+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:Eq+=3}:s===(e=n.substr(0,2))[1]&&"+-<>&|".indexOf(s)>=0||"=>"===e?{type:7,value:e,start:i,end:Eq+=2}:("//"===e&&tV({},"Unexpected token %0",Cq),"<>=!+-*%&|^/".indexOf(s)>=0?{type:7,value:s,start:i,end:++Eq}:void tV({},"Unexpected token %0",Cq))}function Vq(){var t,e,n;if(Tq(Mq((n=kq[Eq]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=Eq,t="","."!==n){if(t=kq[Eq++],n=kq[Eq],"0"===t){if("x"===n||"X"===n)return++Eq,function(t){let e="";for(;Eq<Sq&&Fq(kq[Eq]);)e+=kq[Eq++];return 0===e.length&&tV({},"Unexpected token %0",Cq),Rq(kq.charCodeAt(Eq))&&tV({},"Unexpected token %0",Cq),{type:6,value:parseInt("0x"+e,16),start:t,end:Eq}}(e);if(jq(n))return function(t){let e="0"+kq[Eq++];for(;Eq<Sq&&jq(kq[Eq]);)e+=kq[Eq++];return(Rq(kq.charCodeAt(Eq))||Mq(kq.charCodeAt(Eq)))&&tV({},"Unexpected token %0",Cq),{type:6,value:parseInt(e,8),octal:!0,start:t,end:Eq}}(e);n&&Mq(n.charCodeAt(0))&&tV({},"Unexpected token %0",Cq)}for(;Mq(kq.charCodeAt(Eq));)t+=kq[Eq++];n=kq[Eq]}if("."===n){for(t+=kq[Eq++];Mq(kq.charCodeAt(Eq));)t+=kq[Eq++];n=kq[Eq]}if("e"===n||"E"===n)if(t+=kq[Eq++],"+"!==(n=kq[Eq])&&"-"!==n||(t+=kq[Eq++]),Mq(kq.charCodeAt(Eq)))for(;Mq(kq.charCodeAt(Eq));)t+=kq[Eq++];else tV({},"Unexpected token %0",Cq);return Rq(kq.charCodeAt(Eq))&&tV({},"Unexpected token %0",Cq),{type:6,value:parseFloat(t),start:e,end:Eq}}function Hq(){if(zq(),Eq>=Sq)return{type:2,start:Eq,end:Eq};const t=kq.charCodeAt(Eq);return Rq(t)?(e=Eq,{type:1===(n=92===kq.charCodeAt(Eq)?Bq():function(){var t,e;for(t=Eq++;Eq<Sq;){if(92===(e=kq.charCodeAt(Eq)))return Eq=t,Bq();if(!$q(e))break;++Eq}return kq.slice(t,Eq)}()).length?3:Iq.hasOwnProperty(n)?4:"null"===n?5:"true"===n||"false"===n?1:3,value:n,start:e,end:Eq}):40===t||41===t||59===t?qq():39===t||34===t?function(){var t,e,n,r,i="",o=!1;for(Tq("'"===(t=kq[Eq])||'"'===t,"String literal must starts with a quote"),e=Eq,++Eq;Eq<Sq;){if((n=kq[Eq++])===t){t="";break}if("\\"===n)if((n=kq[Eq++])&&Nq(n.charCodeAt(0)))"\r"===n&&"\n"===kq[Eq]&&++Eq;else switch(n){case"u":case"x":"{"===kq[Eq]?(++Eq,i+=Uq()):i+=Lq(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:jq(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),Eq<Sq&&jq(kq[Eq])&&(o=!0,r=8*r+"01234567".indexOf(kq[Eq++]),"0123".indexOf(n)>=0&&Eq<Sq&&jq(kq[Eq])&&(r=8*r+"01234567".indexOf(kq[Eq++]))),i+=String.fromCharCode(r)):i+=n}else{if(Nq(n.charCodeAt(0)))break;i+=n}}return""!==t&&tV({},"Unexpected token %0",Cq),{type:8,value:i,octal:o,start:e,end:Eq}}():46===t?Mq(kq.charCodeAt(Eq+1))?Vq():qq():Mq(t)?Vq():qq();var e,n}function Wq(){const t=Oq;return Eq=t.end,Oq=Hq(),Eq=t.end,t}function Gq(){const t=Eq;Oq=Hq(),Eq=t}function Zq(t,e,n){const r=new xq("||"===t||"&&"===t?"LogicalExpression":"BinaryExpression");return r.operator=t,r.left=e,r.right=n,r}function Yq(t,e){const n=new xq("CallExpression");return n.callee=t,n.arguments=e,n}function Xq(t){const e=new xq("Identifier");return e.name=t,e}function Qq(t){const e=new xq("Literal");return e.value=t.value,e.raw=kq.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Kq(t,e,n){const r=new xq("MemberExpression");return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function Jq(t,e,n){const r=new xq("Property");return r.key=e,r.value=n,r.kind=t,r}function tV(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(t,e)=>(Tq(e<r.length,"Message reference must be in range"),r[e]));throw(n=new Error(i)).index=Eq,n.description=i,n}function eV(t){2===t.type&&tV(t,"Unexpected end of input"),6===t.type&&tV(t,"Unexpected number"),8===t.type&&tV(t,"Unexpected string"),3===t.type&&tV(t,"Unexpected identifier"),4===t.type&&tV(t,"Unexpected reserved word"),tV(t,"Unexpected token %0",t.value)}function nV(t){const e=Wq();7===e.type&&e.value===t||eV(e)}function rV(t){return 7===Oq.type&&Oq.value===t}function iV(t){return 4===Oq.type&&Oq.value===t}function oV(){Eq=Oq.start;const t=Wq();return 8===t.type||6===t.type?(t.octal&&tV(t,"Octal literals are not allowed in strict mode."),Qq(t)):Xq(t.value)}function sV(){var t,e,n;return Eq=Oq.start,3===(t=Oq).type?(n=oV(),nV(":"),Jq("init",n,dV())):2!==t.type&&7!==t.type?(e=oV(),nV(":"),Jq("init",e,dV())):void eV(t)}const aV={if:1};function lV(){const t=[];if(nV("("),!rV(")"))for(;Eq<Sq&&(t.push(dV()),!rV(")"));)nV(",");return nV(")"),t}function uV(){nV("[");const t=pV();return nV("]"),t}function cV(){const t=function(){var t;for(t=function(){var t,e,n,r,i,o,s;if(rV("("))return function(){nV("(");const t=pV();return nV(")"),t}();if(rV("["))return function(){const t=[];for(Eq=Oq.start,nV("[");!rV("]");)rV(",")?(Wq(),t.push(null)):(t.push(dV()),rV("]")||nV(","));return Wq(),function(t){const e=new xq("ArrayExpression");return e.elements=t,e}(t)}();if(rV("{"))return function(){var t,e,n=[],r={},i=String;for(Eq=Oq.start,nV("{");!rV("}");)e="$"+("Identifier"===(t=sV()).key.type?t.key.name:i(t.key.value)),Object.prototype.hasOwnProperty.call(r,e)?tV({},"Duplicate data property in object literal not allowed in strict mode"):r[e]=!0,n.push(t),rV("}")||nV(",");return nV("}"),function(t){const e=new xq("ObjectExpression");return e.properties=t,e}(n)}();if(Eq=Oq.start,3===(t=Oq.type)||aV[Oq.value])n=Xq(Wq().value);else if(8===t||6===t)Oq.octal&&tV(Oq,"Octal literals are not allowed in strict mode."),n=Qq(Wq());else{if(4===t)throw new Error("Disabled.");1===t?((e=Wq()).value="true"===e.value,n=Qq(e)):5===t?((e=Wq()).value=null,n=Qq(e)):rV("/")||rV("/=")?(n=Qq((Oq=null,zq(),r=Eq,i=function(){var t,e,n,r;for(Tq("/"===(t=kq[Eq]),"Regular expression literal must start with a slash"),e=kq[Eq++],n=!1,r=!1;Eq<Sq;)if(e+=t=kq[Eq++],"\\"===t)Nq((t=kq[Eq++]).charCodeAt(0))&&tV({},"Invalid regular expression: missing /"),e+=t;else if(Nq(t.charCodeAt(0)))tV({},"Invalid regular expression: missing /");else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||tV({},"Invalid regular expression: missing /"),{value:e.substr(1,e.length-2),literal:e}}(),o=function(){var t,e,n;for(e="",n="";Eq<Sq&&$q((t=kq[Eq]).charCodeAt(0));)++Eq,"\\"===t&&Eq<Sq?tV({},"Unexpected token %0",Cq):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&tV({},"Invalid regular expression",n),{value:n,literal:e}}(),s=function(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(t,e)=>{if(parseInt(e,16)<=1114111)return"x";tV({},"Invalid regular expression")}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){tV({},"Invalid regular expression")}try{return new RegExp(t,e)}catch(i){return null}}(i.value,o.value),{literal:i.literal+o.literal,value:s,regex:{pattern:i.value,flags:o.value},start:r,end:Eq})),Gq()):eV(Wq())}return n}();;)if(rV("."))t=Kq(".",t,(nV("."),function(){Eq=Oq.start;const t=Wq();return function(t){return 3===t.type||4===t.type||1===t.type||5===t.type}(t)||eV(t),Xq(t.value)}()));else if(rV("("))t=Yq(t,lV());else{if(!rV("["))break;t=Kq("[",t,uV())}return t}();if(7===Oq.type&&(rV("++")||rV("--")))throw new Error("Disabled.");return t}function hV(){var t,e;if(7!==Oq.type&&4!==Oq.type)e=cV();else{if(rV("++")||rV("--"))throw new Error("Disabled.");if(rV("+")||rV("-")||rV("~")||rV("!"))t=Wq(),e=hV(),e=function(t,e){const n=new xq("UnaryExpression");return n.operator=t,n.argument=e,n.prefix=!0,n}(t.value,e);else{if(iV("delete")||iV("void")||iV("typeof"))throw new Error("Disabled.");e=cV()}}return e}function fV(t){let e=0;if(7!==t.type&&4!==t.type)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function dV(){var t,e;return t=function(){var t,e,n,r,i,o,s,a,l,u;if(t=Oq,l=hV(),0===(i=fV(r=Oq)))return l;for(r.prec=i,Wq(),e=[t,Oq],o=[l,r,s=hV()];(i=fV(Oq))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),e.pop(),n=Zq(a,l,s),o.push(n);(r=Wq()).prec=i,o.push(r),e.push(Oq),n=hV(),o.push(n)}for(n=o[u=o.length-1],e.pop();u>1;)e.pop(),n=Zq(o[u-1].value,o[u-2],n),u-=2;return n}(),rV("?")&&(Wq(),e=dV(),nV(":"),t=function(t,e,n){const r=new xq("ConditionalExpression");return r.test=t,r.consequent=e,r.alternate=n,r}(t,e,dV())),t}function pV(){const t=dV();if(rV(","))throw new Error("Disabled.");return t}function gV(t){Eq=0,Sq=(kq=t).length,Oq=null,Gq();const e=pV();if(2!==Oq.type)throw new Error("Unexpect token after expression.");return e}var mV={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function yV(t){function e(e,n,r){return i=>function(e,n,r,i){let o=t(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}(e,i,n,r)}const n="new Date";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&Xm("Missing arguments to clamp function."),e.length>3&&Xm("Too many arguments to clamp function.");const n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:e("getDate",n,0),day:e("getDay",n,0),year:e("getFullYear",n,0),month:e("getMonth",n,0),hours:e("getHours",n,0),minutes:e("getMinutes",n,0),seconds:e("getSeconds",n,0),milliseconds:e("getMilliseconds",n,0),time:e("getTime",n,0),timezoneoffset:e("getTimezoneOffset",n,0),utcdate:e("getUTCDate",n,0),utcday:e("getUTCDay",n,0),utcyear:e("getUTCFullYear",n,0),utcmonth:e("getUTCMonth",n,0),utchours:e("getUTCHours",n,0),utcminutes:e("getUTCMinutes",n,0),utcseconds:e("getUTCSeconds",n,0),utcmilliseconds:e("getUTCMilliseconds",n,0),length:e("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase","String",0),lower:e("toLowerCase","String",0),substring:e("substring","String"),split:e("split","String"),trim:e("trim","String",0),regexp:"RegExp",test:e("test","RegExp"),if:function(e){e.length<3&&Xm("Missing arguments to if function."),e.length>3&&Xm("Too many arguments to if function.");const n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}var vV,bV,_V,xV,wV,kV=new jR,EV=new jR,SV={point:e$,lineStart:e$,lineEnd:e$,polygonStart:function(){kV=new jR,SV.lineStart=OV,SV.lineEnd=CV},polygonEnd:function(){var t=+kV;EV.add(t<0?$R+t:t),this.lineStart=this.lineEnd=this.point=e$},sphere:function(){EV.add($R)}};function OV(){SV.point=AV}function CV(){DV(vV,bV)}function AV(t,e){SV.point=DV,vV=t,bV=e,_V=t*=zR,xV=qR(e=(e*=zR)/2+RR),wV=YR(e)}function DV(t,e){var n=(t*=zR)-_V,r=n>=0?1:-1,i=r*n,o=qR(e=(e*=zR)/2+RR),s=YR(e),a=wV*s,l=xV*o+a*qR(i),u=a*r*YR(i);kV.add(BR(u,l)),_V=t,xV=o,wV=s}var TV,MV,FV,jV,PV,NV,RV,$V,IV,zV,LV,UV={point:BV,lineStart:VV,lineEnd:HV,polygonStart:function(){UV.point=WV,UV.lineStart=GV,UV.lineEnd=ZV,IV=new jR,SV.polygonStart()},polygonEnd:function(){SV.polygonEnd(),UV.point=BV,UV.lineStart=VV,UV.lineEnd=HV,kV<0?(TV=-(FV=180),MV=-(jV=90)):IV>1e-6?jV=90:IV<-1e-6&&(MV=-90),LV[0]=TV,LV[1]=FV},sphere:function(){TV=-(FV=180),MV=-(jV=90)}};function BV(t,e){zV.push(LV=[TV=t,FV=t]),e<MV&&(MV=e),e>jV&&(jV=e)}function qV(t,e){var n=uI([t*zR,e*zR]);if($V){var r=hI($V,n),i=hI([r[1],-r[0],0],r);pI(i),i=lI(i);var o,s=t-PV,a=s>0?1:-1,l=i[0]*IR*a,u=LR(s)>180;u^(a*PV<l&&l<a*t)?(o=i[1]*IR)>jV&&(jV=o):u^(a*PV<(l=(l+360)%360-180)&&l<a*t)?(o=-i[1]*IR)<MV&&(MV=o):(e<MV&&(MV=e),e>jV&&(jV=e)),u?t<PV?YV(TV,t)>YV(TV,FV)&&(FV=t):YV(t,FV)>YV(TV,FV)&&(TV=t):FV>=TV?(t<TV&&(TV=t),t>FV&&(FV=t)):t>PV?YV(TV,t)>YV(TV,FV)&&(FV=t):YV(t,FV)>YV(TV,FV)&&(TV=t)}else zV.push(LV=[TV=t,FV=t]);e<MV&&(MV=e),e>jV&&(jV=e),$V=n,PV=t}function VV(){UV.point=qV}function HV(){LV[0]=TV,LV[1]=FV,UV.point=BV,$V=null}function WV(t,e){if($V){var n=t-PV;IV.add(LR(n)>180?n+(n>0?360:-360):n)}else NV=t,RV=e;SV.point(t,e),qV(t,e)}function GV(){SV.lineStart()}function ZV(){WV(NV,RV),SV.lineEnd(),LR(IV)>1e-6&&(TV=-(FV=180)),LV[0]=TV,LV[1]=FV,$V=null}function YV(t,e){return(e-=t)<0?e+360:e}function XV(t,e){return t[0]-e[0]}function QV(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var KV,JV,tH,eH,nH,rH,iH,oH,sH,aH,lH,uH,cH,hH,fH,dH,pH={sphere:e$,point:gH,lineStart:yH,lineEnd:_H,polygonStart:function(){pH.lineStart=xH,pH.lineEnd=wH},polygonEnd:function(){pH.lineStart=yH,pH.lineEnd=_H}};function gH(t,e){t*=zR;var n=qR(e*=zR);mH(n*qR(t),n*YR(t),YR(e))}function mH(t,e,n){++KV,tH+=(t-tH)/KV,eH+=(e-eH)/KV,nH+=(n-nH)/KV}function yH(){pH.point=vH}function vH(t,e){t*=zR;var n=qR(e*=zR);hH=n*qR(t),fH=n*YR(t),dH=YR(e),pH.point=bH,mH(hH,fH,dH)}function bH(t,e){t*=zR;var n=qR(e*=zR),r=n*qR(t),i=n*YR(t),o=YR(e),s=BR(QR((s=fH*o-dH*i)*s+(s=dH*r-hH*o)*s+(s=hH*i-fH*r)*s),hH*r+fH*i+dH*o);JV+=s,rH+=s*(hH+(hH=r)),iH+=s*(fH+(fH=i)),oH+=s*(dH+(dH=o)),mH(hH,fH,dH)}function _H(){pH.point=gH}function xH(){pH.point=kH}function wH(){EH(uH,cH),pH.point=gH}function kH(t,e){uH=t,cH=e,t*=zR,e*=zR,pH.point=EH;var n=qR(e);hH=n*qR(t),fH=n*YR(t),dH=YR(e),mH(hH,fH,dH)}function EH(t,e){t*=zR;var n=qR(e*=zR),r=n*qR(t),i=n*YR(t),o=YR(e),s=fH*o-dH*i,a=dH*r-hH*o,l=hH*i-fH*r,u=WR(s,a,l),c=t$(u),h=u&&-c/u;sH.add(h*s),aH.add(h*a),lH.add(h*l),JV+=c,rH+=c*(hH+(hH=r)),iH+=c*(fH+(fH=i)),oH+=c*(dH+(dH=o)),mH(hH,fH,dH)}function SH(t,e){for(var n,r,i=e.fields,o=e.values,s=i.length,a=0;a<s;++a)if((r=i[a]).getter=Km.getter||Km(r.field),iv(n=r.getter(t))&&(n=by(n)),iv(o[a])&&(o[a]=by(o[a])),iv(o[a][0])&&(o[a]=o[a].map(by)),"E"===r.type){if(fy(o[a])?o[a].indexOf(n)<0:n!==o[a])return!1}else if("R"===r.type){if(!nv(n,o[a]))return!1}else if("R-RE"===r.type){if(!nv(n,o[a],!0,!1))return!1}else if("R-E"===r.type){if(!nv(n,o[a],!1,!1))return!1}else if("R-LE"===r.type&&!nv(n,o[a],!1,!0))return!1;return!0}const OH=Km("_vgsid_"),CH=function(t){let e=t,n=t;function r(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)<0?r=o+1:i=o}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>{return(r=t(e))<(i=n)?-1:r>i?1:r>=i?0:NaN;var r,i}}(t)),{left:r,center:function(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);const s=r(t,n,i,o-1);return s>i&&e(t[s-1],n)>-e(t[s],n)?s-1:s},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)>0?i=o:r=o+1}return r}}}(OH),AH=CH.left,DH=CH.right;var TH={E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(t=>e.indexOf(t)>=0):e},R_union:function(t,e){var n=by(e[0]),r=by(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=by(e[0]),r=by(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}};function MH(t,e,n,r){"Literal"!==e[0].type&&Xm("First argument to selection functions must be a string literal.");const i=e[0].value,o=":"+i;"intersect"!==(e.length>=2&&vy(e).value)||Qy(r,"@unit")||(r["@unit"]=n.getData(i).indataRef(n,"unit")),Qy(r,o)||(r[o]=n.getData(i).tuplesRef())}function FH(t){const e=this.context.data[t];return e?e.values.value:[]}const jH=t=>function(e,n){return this.context.dataflow.locale()[t](n)(e)},PH=jH("format"),NH=jH("timeFormat"),RH=jH("utcFormat"),$H=jH("timeParse"),IH=jH("utcParse"),zH=new Date(2e3,0,1);function LH(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?(zH.setYear(2e3),zH.setMonth(t),zH.setDate(e),NH.call(this,zH,n)):""}function UH(t,e,n,r){"Literal"!==e[0].type&&Xm("First argument to data functions must be a string literal.");const i=e[0].value,o=":"+i;if(!Qy(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(s){}}function BH(t,e,n,r){if("Literal"===e[0].type)qH(n,r,e[0].value);else for(t in n.scales)qH(n,r,t)}function qH(t,e,n){const r="%"+n;if(!Qy(e,r))try{e[r]=t.scaleRef(n)}catch(i){}}function VH(t,e){let n;return zy(t)?t:lv(t)?(n=e.scales[t])&&n.value:void 0}function HH(t,e){return function(n,r,i){if(n){const e=VH(n,(i||this).context);return e&&e.path[t](r)}return e(r)}}const WH=HH("area",function(t){return EV=new jR,FR(t,SV),2*EV}),GH=HH("bounds",function(t){var e,n,r,i,o,s,a;if(jV=FV=-(TV=MV=1/0),zV=[],FR(t,UV),n=zV.length){for(zV.sort(XV),e=1,o=[r=zV[0]];e<n;++e)QV(r,(i=zV[e])[0])||QV(r,i[1])?(YV(r[0],i[1])>YV(r[0],r[1])&&(r[1]=i[1]),YV(i[0],r[1])>YV(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)(a=YV(r[1],(i=o[e])[0]))>s&&(s=a,TV=i[0],FV=r[1])}return zV=LV=null,TV===1/0||MV===1/0?[[NaN,NaN],[NaN,NaN]]:[[TV,MV],[FV,jV]]}),ZH=HH("centroid",function(t){KV=JV=tH=eH=nH=rH=iH=oH=0,sH=new jR,aH=new jR,lH=new jR,FR(t,pH);var e=+sH,n=+aH,r=+lH,i=WR(e,n,r);return i<1e-12&&(e=rH,n=iH,r=oH,JV<1e-6&&(e=tH,n=eH,r=nH),(i=WR(e,n,r))<1e-12)?[NaN,NaN]:[BR(n,e)*IR,t$(r/i)*IR]});function YH(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function XH(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function QH(t){const e=tA(t);return.2126*XH(e.r)+.7152*XH(e.g)+.0722*XH(e.b)}function KH(t,e){return t===e||t!=t&&e!=e||(fy(t)?!(!fy(e)||t.length!==e.length)&&function(t,e){for(let n=0,r=t.length;n<r;++n)if(!KH(t[n],e[n]))return!1;return!0}(t,e):!(!dy(t)||!dy(e))&&JH(t,e))}function JH(t,e){for(const n in t)if(!KH(t[n],e[n]))return!1;return!0}function tW(t){return e=>JH(t,e)}const eW={};function nW(t){return fy(t)||ArrayBuffer.isView(t)?t:null}function rW(t){return nW(t)||(lv(t)?t:null)}const iW=t=>t.data;function oW(t,e){const n=FH.call(e,t);return n.root&&n.root.lookup||{}}const sW=()=>"undefined"!=typeof window&&window||null,aW={random:()=>Xk(),cumulativeNormal:aE,cumulativeLogNormal:dE,cumulativeUniform:bE,densityNormal:sE,densityLogNormal:fE,densityUniform:vE,quantileNormal:lE,quantileLogNormal:pE,quantileUniform:_E,sampleNormal:oE,sampleLogNormal:hE,sampleUniform:yE,isArray:fy,isBoolean:rv,isDate:iv,isDefined:t=>void 0!==t,isNumber:sv,isObject:dy,isRegExp:av,isString:lv,isTuple:ek,isValid:t=>null!=t&&t==t,toBoolean:yv,toDate:bv,toNumber:by,toString:_v,indexof:function(t,...e){return rW(t).indexOf(...e)},join:function(t,...e){return nW(t).join(...e)},lastindexof:function(t,...e){return rW(t).lastIndexOf(...e)},replace:function(t,e,n){return zy(n)&&Xm("Function argument passed to replace."),String(t).replace(e,n)},reverse:function(t){return nW(t).slice().reverse()},slice:function(t,...e){return rW(t).slice(...e)},flush:tv,lerp:cv,merge:function(){const t=[].slice.call(arguments);return t.unshift({}),Gy(...t)},pad:pv,peek:vy,pluck:function(t,e){const n=eW[e]||(eW[e]=Km(e));return fy(t)?t.map(n):n(t)},span:gv,inrange:nv,truncate:wv,rgb:tA,lab:FD,hcl:zD,hsl:aA,luminance:QH,contrast:function(t,e){const n=QH(t),r=QH(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:zE,format:PH,utcFormat:RH,utcParse:IH,utcOffset:Z_,utcSequence:Q_,timeFormat:NH,timeParse:$H,timeOffset:G_,timeSequence:X_,timeUnitSpecifier:b_,monthFormat:function(t){return LH.call(this,t,1,"%B")},monthAbbrevFormat:function(t){return LH.call(this,t,1,"%b")},dayFormat:function(t){return LH.call(this,0,2+t,"%A")},dayAbbrevFormat:function(t){return LH.call(this,0,2+t,"%a")},quarter:Ny,utcquarter:Ry,week:k_,utcweek:D_,dayofyear:w_,utcdayofyear:A_,warn:function(){return YH(this.context.dataflow,"warn",arguments)},info:function(){return YH(this.context.dataflow,"info",arguments)},debug:function(){return YH(this.context.dataflow,"debug",arguments)},extent:Zy,inScope:function(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n},intersect:function(t,e,n){if(!t)return[];const[r,i]=t,o=(new YM).set(r[0],r[1],i[0],i[1]);return oN(n||this.context.dataflow.scenegraph().root,o,function(t){let e=null;if(t){const n=$y(t.marktype),r=$y(t.markname);e=t=>(!n.length||n.some(e=>t.marktype===e))&&(!r.length||r.some(e=>t.name===e))}return e}(e))},clampRange:Iy,pinchDistance:function(t){const e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){const t=sW();return t?t.screen:{}},containerSize:function(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){const t=sW();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]},bandspace:function(t,e,n){return iT(t||0,e||0,n||0)},setdata:function(t,e){const n=this.context.dataflow;return n.pulse(this.context.data[t].input,n.changeset().remove(ry).insert(e)),1},pathShape:function(t){let e=null;return function(n){return n?bM(n,e=e||lM(t)):t}},panLinear:Oy,panLog:Cy,panPow:Ay,panSymlog:Dy,zoomLinear:My,zoomLog:Fy,zoomPow:jy,zoomSymlog:Py,encode:function(t,e,n){if(t){const n=this.context.dataflow;n.pulse(t.mark.source,n.changeset().encode(t,e))}return void 0!==n?n:t},modify:function(t,e,n,r,i,o){const s=this.context.dataflow,a=this.context.data[t],l=a.input,u=s.stamp();let c,h,f=a.changes;if(!1===s._trigger||!(l.value.length||e||r))return 0;if((!f||f.stamp<u)&&(a.changes=f=s.changeset(),f.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,f).run()},!0,1)),n&&(c=!0===n?ry:fy(n)||ek(n)?n:tW(n),f.remove(c)),e&&f.insert(e),r&&(c=tW(r),l.value.some(c)?f.remove(c):f.insert(r)),i)for(h in o)f.modify(i,h,o[h]);return 1}},lW=["view","item","group","xy","x","y"],uW={},cW={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>"_[".concat(mv("$"+t),"]"),functions:function(t){const e=yV(t);lW.forEach(t=>e[t]="event.vega."+t);for(const n in aW)e[n]="this."+n;return Gy(e,function(t,e,n){e.__bandwidth=t=>t&&t.bandwidth?t.bandwidth():0,n._bandwidth=BH,n._range=BH,n._scale=BH;const r=e=>"_["+("Literal"===e.type?mv("%"+e.value):mv("%")+"+"+t(e))+"]";return{_bandwidth:t=>"this.__bandwidth(".concat(r(t[0]),")"),_range:t=>"".concat(r(t[0]),".range()"),_scale:e=>"".concat(r(e[0]),"(").concat(t(e[1]),")")}}(t,aW,uW)),e},constants:mV,visitors:uW},hW=function(t){const e=(t=t||{}).allowed?xv(t.allowed):{},n=t.forbidden?xv(t.forbidden):{},r=t.constants||mV,i=(t.functions||yV)(h),o=t.globalvar,s=t.fieldvar,a=zy(o)?o:t=>"".concat(o,'["').concat(t,'"]');let l={},u={},c=0;function h(t){if(lv(t))return t;const e=f[t.type];return null==e&&Xm("Unsupported type: "+t.type),e(t)}const f={Literal:t=>t.raw,Identifier:t=>{const i=t.name;return c>0?i:Qy(n,i)?Xm("Illegal identifier: "+i):Qy(r,i)?r[i]:Qy(e,i)?i:(l[i]=1,a(i))},MemberExpression:t=>{const e=!t.computed,n=h(t.object);e&&(c+=1);const r=h(t.property);return n===s&&(u[function(t){const e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}(r)]=1),e&&(c-=1),n+(e?"."+r:"["+r+"]")},CallExpression:t=>{"Identifier"!==t.callee.type&&Xm("Illegal callee type: "+t.callee.type);const e=t.callee.name,n=t.arguments,r=Qy(i,e)&&i[e];return r||Xm("Unrecognized function: "+e),zy(r)?r(n):r+"("+n.map(h).join(",")+")"},ArrayExpression:t=>"["+t.elements.map(h).join(",")+"]",BinaryExpression:t=>"("+h(t.left)+" "+t.operator+" "+h(t.right)+")",UnaryExpression:t=>"("+t.operator+h(t.argument)+")",ConditionalExpression:t=>"("+h(t.test)+"?"+h(t.consequent)+":"+h(t.alternate)+")",LogicalExpression:t=>"("+h(t.left)+t.operator+h(t.right)+")",ObjectExpression:t=>"{"+t.properties.map(h).join(",")+"}",Property:t=>{c+=1;const e=h(t.key);return c-=1,e+":"+h(t.value)}};function d(t){const e={code:h(t),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},e}return d.functions=i,d.constants=r,d}(cW);function fW(t,e,n){return 1===arguments.length?aW[t]:(aW[t]=e,n&&(uW[t]=n),hW&&(hW.functions[t]="this."+t),this)}function dW(t,e){const n={};let r;try{r=gV(t=lv(t)?t:mv(t)+"")}catch(o){Xm("Expression parse error: "+t)}r.visit(t=>{if("CallExpression"!==t.type)return;const r=t.callee.name,i=cW.visitors[r];i&&i(r,t.arguments,e,n)});const i=hW(r);return i.globals.forEach(t=>{const r="$"+t;!Qy(n,r)&&e.getSignal(t)&&(n[r]=e.signalRef(t))}),{$expr:Gy({code:i.code},e.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}fW("bandwidth",function(t,e){const n=VH(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0},BH),fW("copy",function(t,e){const n=VH(t,(e||this).context);return n?n.copy():void 0},BH),fW("domain",function(t,e){const n=VH(t,(e||this).context);return n?n.domain():[]},BH),fW("range",function(t,e){const n=VH(t,(e||this).context);return n&&n.range?n.range():[]},BH),fW("invert",function(t,e,n){const r=VH(t,(n||this).context);return r?fy(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0},BH),fW("scale",function(t,e,n){const r=VH(t,(n||this).context);return r?r(e):void 0},BH),fW("gradient",function(t,e,n,r,i){t=VH(t,(i||this).context);const o=rM(e,n);let s=t.domain(),a=s[0],l=vy(s),u=ty;return l-a?u=DT(t,a,l):t=(t.interpolator?mT("sequential")().interpolator(t.interpolator()):mT("linear")().interpolate(t.interpolate()).range(t.range())).domain([a=0,l=1]),t.ticks&&(s=t.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==vy(s)&&s.push(l)),s.forEach(e=>o.stop(u(e),t(e))),o},BH),fW("geoArea",WH,BH),fW("geoBounds",GH,BH),fW("geoCentroid",ZH,BH),fW("geoShape",function(t,e,n){const r=VH(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}},BH),fW("indata",function(t,e,n){const r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i},function(t,e,n,r){"Literal"!==e[0].type&&Xm("First argument to indata must be a string literal."),"Literal"!==e[1].type&&Xm("Second argument to indata must be a string literal.");const i=e[0].value,o=e[1].value,s="@"+o;Qy(s,r)||(r[s]=n.getData(i).indataRef(n,o))}),fW("data",FH,UH),fW("treePath",function(t,e,n){const r=oW(t,this),i=r[e],o=r[n];return i&&o?i.path(o).map(iW):void 0},UH),fW("treeAncestors",function(t,e){const n=oW(t,this)[e];return n?n.ancestors().map(iW):void 0},UH),fW("vlSelectionTest",function(t,e,n){for(var r,i,o,s,a,l=this.context.data[t],u=l?l.values.value:[],c=l?l["index:unit"]&&l["index:unit"].value:void 0,h="intersect"===n,f=u.length,d=0;d<f;++d)if(r=u[d],c&&h){if(-1===(o=(i=i||{})[s=r.unit]||0))continue;if(a=SH(e,r),i[s]=a?-1:++o,a&&1===c.size)return!0;if(!a&&o===c.get(s).count)return!1}else if(h^(a=SH(e,r)))return a;return f&&h},MH),fW("vlSelectionIdTest",function(t,e,n){const r=this.context.data[t],i=r?r.values.value:[],o=r?r["index:unit"]&&r["index:unit"].value:void 0,s="intersect"===n,a=OH(e),l=AH(i,a);if(l===i.length)return!1;if(OH(i[l])!==a)return!1;if(o&&s){if(1===o.size)return!0;if(DH(i,a)-l<o.size)return!1}return!0},MH),fW("vlSelectionResolve",function(t,e,n,r){for(var i,o,s,a,l,u,c,h,f,d,p=this.context.data[t],g=p?p.values.value:[],m={},y={},v={},b=g.length,_=0;_<b;++_){for(a=(i=g[_]).unit,s=i.values,f=0,d=(o=i.fields).length;f<d;++f)c=(u=m[(l=o[f]).field]||(m[l.field]={}))[a]||(u[a]=[]),v[l.field]=h=l.type.charAt(0),u[a]=(0,TH[h+"_union"])(c,$y(s[f]));n&&(c=y[a]||(y[a]=[])).push($y(s).reduce((t,e,n)=>(t[o[n].field]=e,t),{}))}return e=e||"union",Object.keys(m).forEach(t=>{m[t]=Object.keys(m[t]).map(e=>m[t][e]).reduce((n,r)=>void 0===n?r:TH[v[t]+"_"+e](n,r))}),g=Object.keys(y),n&&g.length&&(m[r?"vlPoint":"vlMulti"]="union"===e?{or:g.reduce((t,e)=>(t.push(...y[e]),t),[])}:{and:g.map(t=>({or:y[t]}))}),m},MH),fW("vlSelectionTuples",function(t,e){return t.map(t=>Gy({values:e.fields.map(e=>(e.getter||(e.getter=Km(e.field)))(t.datum))},e))});const pW=xv(["rule"]),gW=xv(["group","image","rect"]);function mW(t){return(t+"").toLowerCase()}function yW(t,e,n){";"!==n[n.length-1]&&(n="return("+n+");");const r=Function(...e.concat(n));return t&&t.functions?r.bind(t.functions):r}var vW={operator:(t,e)=>yW(t,["_"],e.code),parameter:(t,e)=>yW(t,["datum","_"],e.code),event:(t,e)=>yW(t,["event"],e.code),handler:(t,e)=>yW(t,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(e.code,";")),encode:(t,e)=>{const{marktype:n,channels:r}=e;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const t="o["+mv(o)+"]";i+="$=".concat(r[o].code,";if(").concat(t,"!==$)").concat(t,"=$,m=1;")}return i+=function(t,e){let n="";return pW[e]||(t.x2&&(t.x?(gW[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(gW[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),i+="return m;",yW(t,["item","_"],i)},codegen:{get(t){const e="[".concat(t.map(mv).join("]["),"]"),n=Function("_","return _".concat(e,";"));return n.path=e,n},comparator(t,e){let n;const r=Function("a","b","var u, v; return "+t.map((t,r)=>{const i=e[r];let o,s;return t.path?(o="a".concat(t.path),s="b".concat(t.path)):((n=n||{})["f"+r]=t,o="this.f".concat(r,"(a)"),s="this.f".concat(r,"(b)")),function(t,e,n,r){return"((u = ".concat(t,") < (v = ").concat(e,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(o,s,-i,i)}).join("")+"0;");return n?r.bind(n):r}}};function bW(t,e,n){if(!t||!dy(t))return t;for(let r,i=0,o=_W.length;i<o;++i)if(r=_W[i],Qy(t,r.key))return r.parse(t,e,n);return t}var _W=[{key:"$ref",parse:function(t,e){return e.get(t.$ref)||Xm("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=uv(t.$key,t.$flat,e.expr.codegen))}},{key:"$expr",parse:function(t,e,n){t.$params&&e.parseParameters(t.$params,n);const r="e:"+t.$expr.code+"_"+t.$name;return e.fn[r]||(e.fn[r]=Vm(e.parameterExpression(t.$expr),t.$fields,t.$name))}},{key:"$field",parse:function(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Km(t.$field,t.$name,e.expr.codegen))}},{key:"$encode",parse:function(t,e){const n=t.$encode,r={};for(const i in n){const t=n[i];r[i]=Vm(e.encodeExpression(t.$expr),t.$fields),r[i].output=t.$output}return r}},{key:"$compare",parse:function(t,e){const n="c:"+t.$compare+"_"+t.$order,r=$y(t.$compare).map(t=>t&&t.$tupleid?nk:t);return e.fn[n]||(e.fn[n]=Ly(r,t.$order,e.expr.codegen))}},{key:"$context",parse:function(t,e){return e}},{key:"$subflow",parse:function(t,e){const n=t.$subflow;return function(t,r,i){const o=e.fork().parse(n),s=o.get(n.operators[0].id),a=o.signals.parent;return a&&a.set(i),s.detachSubflow=()=>e.detach(o),s}}},{key:"$tupleid",parse:function(){return nk}}];const xW={skip:!0};function wW(t,e,n,r){return new kW(t,e,n,r)}function kW(t,e,n,r){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=r||vW,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function EW(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}function SW(t,e){t&&(null==e?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function OW(t,e){const n=t.globalCursor()?"undefined"!=typeof document&&document.body:t.container();if(n)return null==e?n.style.removeProperty("cursor"):n.style.cursor=e}function CW(t,e){var n=t._runtime.data;return Qy(n,e)||Xm("Unrecognized data set: "+e),n[e]}function AW(t,e){uk(e)||Xm("Second argument to changes must be a changeset.");const n=CW(this,t);return n.modified=!0,this.pulse(n.input,e)}function DW(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function TW(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function MW(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}kW.prototype=EW.prototype={fork(){const t=new EW(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(e=>e!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,r=n.dataflow,i=t.value;if(n.set(t.id,e),"collect"===mW(t.type)&&i&&(i.$ingest?r.ingest(e,i.$ingest,i.$format):i.$request?r.preload(e,i.$request,i.$format):r.pulse(e,r.changeset().insert(i))),t.root&&(n.root=e),t.parent){let i=n.get(t.parent.$ref);i?(r.connect(i,[e]),e.targets().add(i)):(n.unresolved=n.unresolved||[]).push(()=>{i=n.get(t.parent.$ref),r.connect(i,[e]),e.targets().add(i)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const o in t.data){const r=n.data[o]||(n.data[o]={});t.data[o].forEach(t=>r[t]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[mW(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:function(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(t=>e.parseOperator(t)),n.forEach(t=>e.parseOperatorParameters(t)),(t.streams||[]).forEach(t=>e.parseStream(t)),(t.updates||[]).forEach(t=>e.parseUpdate(t)),e.resolve()},parseOperator:function(t){"operator"!==mW(t.type)&&t.type?this.transform(t,t.type):this.operator(t,t.update?this.operatorExpression(t.update):null)},parseOperatorParameters:function(t){const e=this;if(t.params){const n=e.get(t.id);n||Xm("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}},parseParameters:function(t,e){e=e||{};const n=this;for(const r in t){const i=t[r];e[r]=fy(i)?i.map(t=>bW(t,n,e)):bW(i,n,e)}return e},parseStream:function(t){var e,n=this,r=null!=t.filter?n.eventExpression(t.filter):void 0,i=null!=t.stream?n.get(t.stream):void 0;t.source?i=n.events(t.source,t.type,r):t.merge&&(i=(e=t.merge.map(t=>n.get(t)))[0].merge.apply(e[0],e.slice(1))),t.between&&(e=t.between.map(t=>n.get(t)),i=i.between(e[0],e[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&Xm("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),n.stream(t,i)},parseUpdate:function(t){var e,n=dy(n=t.source)?n.$ref:n,r=this.get(n),i=t.update,o=void 0;r||Xm("Source not defined: "+t.source),e=t.target&&t.target.$expr?this.eventExpression(t.target.$expr):this.get(t.target),i&&i.$expr&&(i.$params&&(o=this.parseParameters(i.$params)),i=this.handlerExpression(i.$expr)),this.update(t,r,e,i,o)},getState:function(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(n=>{const i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(n=>{const r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(e=>e.getState(t))),n},setState:function(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(t=>{n.update(e.signals[t],i[t],xW)}),Object.keys(r||{}).forEach(t=>{n.pulse(e.data[t].input,n.changeset().remove(ry).insert(r[t]))}),(t.subcontext||[]).forEach((t,n)=>{const r=e.subcontext[n];r&&r.setState(t)})}};const FW={trap:!1};function jW(t,e,n){const r=t._eventConfig&&t._eventConfig[e];return!(!1===r||dy(r)&&!r[n])||(t.warn("Blocked ".concat(e," ").concat(n," event listener.")),!1)}function PW(t){return t.item}function NW(t){return t.item.mark.source}function RW(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function $W(t,e,n){const r=document.createElement(t);for(const i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r}function IW(t,e,n,r){const i=$W("input");for(const o in n)"signal"!==o&&"element"!==o&&i.setAttribute("input"===o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=t=>i.value=t}function zW(t,e,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=$W("input",i);e.appendChild(o),o.addEventListener("change",()=>t.update(o.checked)),t.elements=[o],t.set=t=>o.checked=!!t||null}function LW(t,e,n,r){const i=$W("select",{name:n.signal}),o=n.labels||[];n.options.forEach((t,e)=>{const n={value:t};qW(t,r)&&(n.selected=!0),i.appendChild($W("option",n,(o[e]||t)+""))}),e.appendChild(i),i.addEventListener("change",()=>{t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=t=>{for(let e=0,r=n.options.length;e<r;++e)if(qW(n.options[e],t))return void(i.selectedIndex=e)}}function UW(t,e,n,r){const i=$W("span",{class:"vega-bind-radio"}),o=n.labels||[];e.appendChild(i),t.elements=n.options.map((e,s)=>{const a={type:"radio",name:n.signal,value:e};qW(e,r)&&(a.checked=!0);const l=$W("input",a);l.addEventListener("change",()=>t.update(e));const u=$W("label",{},(o[s]||e)+"");return u.prepend(l),i.appendChild(u),l}),t.set=e=>{const n=t.elements,r=n.length;for(let t=0;t<r;++t)qW(n[t].value,e)&&(n[t].checked=!0)}}function BW(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||hb(o,i,100),a=$W("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=$W("span",{},+r);e.appendChild(a),e.appendChild(l);const u=()=>{l.textContent=a.value,t.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),t.elements=[a],t.set=t=>{a.value=t,l.textContent=t}}function qW(t,e){return t===e||t+""==e+""}function VW(t,e,n,r,i,o){return(e=e||new r(t.loader())).initialize(n,DW(t),TW(t),MW(t),i,o).background(t.background())}function HW(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function WW(t,e){if("string"==typeof e){if("undefined"==typeof document)return t.error("DOM document instance not found."),null;if(!(e=document.querySelector(e)))return t.error("Signal bind element not found: "+e),null}if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}const GW=t=>+t||0;function ZW(t){return dy(t)?{top:GW(t.top),bottom:GW(t.bottom),left:GW(t.left),right:GW(t.right)}:(t=>({top:t,bottom:t,left:t,right:t}))(GW(t))}async function YW(t,e,n,r){const i=iN(e),o=i&&i.headless;return o||Xm("Unrecognized renderer type: "+e),await t.runAsync(),VW(t,null,null,o,n,r).renderAsync(t._scenegraph.root)}var XW={skip:!0};function QW(t,e){var n=t.autosize(),r=t.padding();return e-(n&&"padding"===n.contains?r.left+r.right:0)}function KW(t,e){var n=t.autosize(),r=t.padding();return e-(n&&"padding"===n.contains?r.top+r.bottom:0)}function JW(t,e){return e.modified&&fy(e.input.value)&&t.indexOf("_:vega:_")}function tG(t,e){return!("parent"===t||e instanceof Pk.proxy)}function eG(t,e,n,r){const i=t.element();i&&i.setAttribute("title",function(t){return null==t?"":fy(t)?nG(t):dy(t)&&!iv(t)?(e=t,Object.keys(e).map(t=>{const n=e[t];return t+": "+(fy(n)?nG(n):rG(n))}).join("\n")):t+"";var e}(r))}function nG(t){return"["+t.map(rG).join(", ")+"]"}function rG(t){return fy(t)?"[\u2026]":dy(t)&&!iv(t)?"{\u2026}":t}function iG(t,e){const n=this;if(e=e||{},Mk.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),null!=e.logLevel&&n.logLevel(e.logLevel),e.locale||t.locale){const r=Gy({},t.locale,e.locale);n.locale(Ww(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||nN.Canvas,n._scenegraph=new Qj;const r=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||eG,n._redraw=!0,n._handler=(new mP).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(t){const e=Gy({defaults:{}},t),n=(t,e)=>{e.forEach(e=>{fy(t[e])&&(t[e]=xv(t[e]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=function(t,e,n){return wW(t,Pk,aW,n).parse(e)}(n,t,e.expr);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(t=>({state:null,param:Gy({},t)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=QW(n,n._width),n._viewHeight=KW(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(t){var e=t._signals,n=e.width,r=e.height,i=e.padding;function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,e=>{t._width=e.size,t._viewWidth=QW(t,e.size),o()},{size:n}),t._resizeHeight=t.add(null,e=>{t._height=e.size,t._viewHeight=KW(t,e.size),o()},{size:r});const s=t.add(null,o,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}(n),function(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}(n),function(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:"default",item:null}));t.on(t.events("view","mousemove"),e,(t,n)=>{const r=e.value,i=r?lv(r)?r:r.user:"default",o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}}),t.add(null,function(e){let n=e.cursor,r=this.value;return lv(n)||(r=n.item,n=n.user),OW(t,n&&"default"!==n?n:r||n),r},{cursor:e})}(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}function oG(t,e){return Qy(t._signals,e)?t._signals[e]:Xm("Unrecognized signal name: "+mv(e))}function sG(t,e){const n=(t._targets||[]).filter(t=>t._update&&t._update.handler===e);return n.length?n[0]:null}function aG(t,e,n,r){let i=sG(n,r);return i||(i=HW(t,()=>r(e,n.value)),i.handler=r,t.on(n,null,i)),t}function lG(t,e,n){const r=sG(e,n);return r&&e._targets.remove(r),t}ev(iG,Mk,{async evaluate(t,e,n){if(await Mk.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,i=MW(r=this),o=DW(r),s=TW(r),r._renderer.background(r.background()),r._renderer.resize(o,s,i),r._handler.origin(i),r._resizeListeners.forEach(t=>{try{t(o,s)}catch(e){r.error(e)}})),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(a){this.error(a)}var r,i,o,s;return n&&Kw(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=null!=t?t+"":null;return e!==this._desc&&SW(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){const r=oG(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",ZW(t)):ZW(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(iN(t)||Xm("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Mk.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(oG(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(t,e,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal("width",n,XW),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal("height",r,XW),s._resizeHeight.skip(!0)),s._viewWidth!==t&&(s._resize=1,s._viewWidth=t),s._viewHeight!==e&&(s._resize=1,s._viewHeight=e),s._origin[0]===i[0]&&s._origin[1]===i[1]||(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(t=>t.resize())},!1,1)},addEventListener(t,e,n){let r=e;return n&&!1===n.trap||(r=HW(this,e),r.raw=e),this._handler.on(t,r),this},removeEventListener(t,e){for(var n,r,i=this._handler.handlers(t),o=i.length;--o>=0;)if(n=i[o].handler,t===(r=i[o].type)&&(e===n||e===n.raw)){this._handler.off(r,n);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return aG(this,t,oG(this,t),e)},removeSignalListener(t,e){return lG(this,oG(this,t),e)},addDataListener(t,e){return aG(this,t,CW(this,t).values,e)},removeDataListener(t,e){return lG(this,CW(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=OW(this,null);this._globalCursor=!!t,e&&OW(this,e)}return this}return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:function(t,e){this._timers.push(function(t,e,n){var r=new RL,i=e;return null==e?(r.restart(t,e,void 0),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?PL():+n,r._restart(function o(s){s+=i,r._restart(o,i+=e,n),t(s)},e,n)},r.restart(t,e,void 0),r)}(function(e){t({timestamp:Date.now(),elapsed:e})},e))},events:function(t,e,n){var r,i=this,o=new yk(n),s=function(n,r){i.runAsync(null,()=>{"view"===t&&function(t,e){var n=t._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}(i,e)&&n.preventDefault(),o.receive(function(t,e,n){var r,i,o=t._renderer,s=o&&o.canvas();return s&&(i=MW(t),(r=iP(e.changedTouches?e.changedTouches[0]:e,s))[0]-=i[0],r[1]-=i[1]),e.dataflow=t,e.item=n,e.vega=function(t,e,n){const r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(t){if(!t)return n;lv(t)&&(t=i(t));const e=n.slice();for(;t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:Hy(t),item:Hy(e||{}),group:i,xy:o,x:t=>o(t)[0],y:t=>o(t)[1]}}(t,n,r),e}(i,n,r))})};if("timer"===t)jW(i,"timer",e)&&i.timer(s,e);else if("view"===t)jW(i,"view",e)&&i.addEventListener(e,s,FW);else if("window"===t?jW(i,"window",e)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&jW(i,"selector",e)&&(r=document.querySelectorAll(t)),r){for(var a=0,l=r.length;a<l;++a)r[a].addEventListener(e,s);i._eventListeners.push({type:e,sources:r,handler:s})}else i.warn("Can not resolve event source: "+t);return o},finalize:function(){var t,e,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(t=i.length;--t>=0;)i[t].stop();for(t=o.length;--t>=0;)for(e=(n=o[t]).sources.length;--e>=0;)n.sources[e].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(t,e){return e=[e||"update",(t=[t||"hover"])[0]],this.on(this.events("view","mouseover",PW),NW,RW(t)),this.on(this.events("view","mouseout",PW),NW,RW(e)),this},data:function(t,e){return arguments.length<2?CW(this,t).values.value:AW.call(this,t,ck().remove(ry).insert(e))},change:AW,insert:function(t,e){return AW.call(this,t,ck().insert(e))},remove:function(t,e){return AW.call(this,t,ck().remove(e))},scale:function(t){var e=this._runtime.scales;return Qy(e,t)||Xm("Unrecognized scale or projection: "+t),e[t].value},initialize:function(t,e){const n=this,r=n._renderType,i=n._eventConfig.bind,o=iN(r);t=n._el=t?WW(n,t):null,function(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),SW(e,t.description()))}(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||mP,a=t?o.renderer:o.headless;return n._renderer=a?VW(n,n._renderer,t,a):null,n._handler=function(t,e,n,r){const i=new r(t.loader(),HW(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,MW(t),t);return e&&e.handlers().forEach(t=>{i.on(t.type,t.handler)}),i}(n,n._handler,t,s),n._redraw=!0,t&&"none"!==i&&(e=e?n._elBind=WW(n,e):t.appendChild($W("form",{class:"vega-bindings"})),n._bind.forEach(t=>{t.param.element&&"container"!==i&&(t.element=WW(n,t.param.element))}),n._bind.forEach(t=>{!function(t,e,n){if(!e)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:e=>{e!==t.signal(r.signal)&&t.runAsync(null,()=>{i.source=!0,t.signal(r.signal,e)})}},r.debounce&&(i.update=Wy(r.debounce,i.update))),function(t,e,n,r){const i=$W("div",{class:"vega-bind"}),o="radio"===n.input?i:i.appendChild($W("label"));o.appendChild($W("span",{class:"vega-bind-name"},n.name||n.signal)),e.appendChild(i);let s=IW;switch(n.input){case"checkbox":s=zW;break;case"select":s=LW;break;case"radio":s=UW;break;case"range":s=BW}s(t,o,n,r)}(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0)}(n,t.element||e,t)})),n},toImageURL:async function(t,e){t!==nN.Canvas&&t!==nN.SVG&&t!==nN.PNG&&Xm("Unrecognized image type: "+t);const n=await YW(this,t,e);return t===nN.SVG?function(t,e){const n=new Blob([t],{type:"image/svg+xml"});return window.URL.createObjectURL(n)}(n.svg()):n.canvas().toDataURL("image/png")},toCanvas:async function(t,e){return(await YW(this,nN.Canvas,t,e)).canvas()},toSVG:async function(t){return(await YW(this,nN.SVG,t)).svg()},getState:function(t){return this._runtime.getState(t||{data:JW,signals:tG,recurse:!0})},setState:function(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},t=>{t._trigger=!0}),this}});const uG=/[[\]{}]/,cG={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let hG,fG;function dG(t,e,n){return hG=e||"view",fG=n||cG,gG(t.trim()).map(mG)}function pG(t,e,n,r,i){const o=t.length;let s,a=0;for(;e<o;++e){if(s=t[e],!a&&s===n)return e;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return e}function gG(t){const e=[],n=t.length;let r=0,i=0;for(;i<n;)i=pG(t,i,",","[{","]}"),e.push(t.substring(r,i).trim()),r=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function mG(t){return"["===t[0]?function(t){const e=t.length;let n,r=1;if(r=pG(t,r,"]","[","]"),r===e)throw"Empty between selector: "+t;if(n=gG(t.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+t;if(">"!==(t=t.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+t;n=n.map(mG);const i=mG(t.slice(1).trim());return i.between?{between:n,stream:i}:(i.between=n,i)}(t):function(t){const e={source:hG},n=[];let r,i,o=[0,0],s=0,a=0,l=t.length,u=0;if("}"===t[l-1]){if(u=t.lastIndexOf("{"),!(u>=0))throw"Unmatched right brace: "+t;try{o=function(t){const e=t.split(",");if(!t.length||e.length>2)throw t;return e.map(e=>{const n=+e;if(n!=n)throw t;return n})}(t.substring(u+1,l-1))}catch(c){throw"Invalid throttle specification: "+t}l=(t=t.slice(0,u).trim()).length,u=0}if(!l)throw t;if("@"===t[0]&&(s=++u),r=pG(t,u,":"),r<l&&(n.push(t.substring(a,r).trim()),a=u=++r),u=pG(t,u,"["),u===l)n.push(t.substring(a,l).trim());else if(n.push(t.substring(a,u).trim()),i=[],a=++u,a===l)throw"Unmatched left bracket: "+t;for(;u<l;){if(u=pG(t,u,"]"),u===l)throw"Unmatched left bracket: "+t;if(i.push(t.substring(a,u).trim()),u<l-1&&"["!==t[++u])throw"Expected left bracket: "+t;a=++u}if(!(l=n.length)||uG.test(n[l-1]))throw"Invalid event selector: "+t;return l>1?(e.type=n[1],s?e.markname=n[0].slice(1):fG[n[0]]?e.marktype=n[0]:e.source=n[0]):e.type=n[0],"!"===e.type.slice(-1)&&(e.consume=!0,e.type=e.type.slice(0,-1)),null!=i&&(e.filter=i),o[0]&&(e.throttle=o[0]),o[1]&&(e.debounce=o[1]),e}(t)}function yG(t){return dy(t)?t:{type:t||"pad"}}const vG=t=>+t||0;function bG(t){return dy(t)?t.signal?t:{top:vG(t.top),bottom:vG(t.bottom),left:vG(t.left),right:vG(t.right)}:{top:e=vG(t),bottom:e,left:e,right:e};var e}const _G=t=>dy(t)&&!fy(t)?Gy({},t):{value:t};function xG(t,e,n,r){return null!=n?(dy(n)&&!fy(n)||fy(n)&&n.length&&dy(n[0])?t.update[e]=n:t[r||"enter"][e]={value:n},1):0}function wG(t,e,n){for(const r in e)xG(t,r,e[r]);for(const r in n)xG(t,r,n[r],"update")}function kG(t,e,n){for(const r in e)n&&Qy(n,r)||(t[r]=Gy(t[r]||{},e[r]));return t}function EG(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}function SG(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const OG=t=>lv(t)?mv(t):t.signal?"(".concat(t.signal,")"):TG(t);function CG(t){if(null!=t.gradient)return function(t){const e=[t.start,t.stop,t.count].map(t=>null==t?null:mv(t));for(;e.length&&null==vy(e);)e.pop();return e.unshift(OG(t.gradient)),"gradient(".concat(e.join(","),")")}(t);let e=t.signal?"(".concat(t.signal,")"):t.color?function(t){return t.c?AG("hcl",t.h,t.c,t.l):t.h||t.s?AG("hsl",t.h,t.s,t.l):t.l||t.a?AG("lab",t.l,t.a,t.b):t.r||t.g||t.b?AG("rgb",t.r,t.g,t.b):null}(t.color):null!=t.field?TG(t.field):void 0!==t.value?mv(t.value):void 0;return null!=t.scale&&(e=function(t,e){const n=OG(t.scale);return null!=t.range?e="lerp(_range(".concat(n,"), ").concat(+t.range,")"):(void 0!==e&&(e="_scale(".concat(n,", ").concat(e,")")),t.band&&(e=(e?e+"+":"")+"_bandwidth(".concat(n,")")+(1==+t.band?"":"*"+DG(t.band)),t.extra&&(e="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(e,")"))),null==e&&(e="0")),e}(t,e)),void 0===e&&(e=null),null!=t.exponent&&(e="pow(".concat(e,",").concat(DG(t.exponent),")")),null!=t.mult&&(e+="*".concat(DG(t.mult))),null!=t.offset&&(e+="+".concat(DG(t.offset))),t.round&&(e="round(".concat(e,")")),e}const AG=(t,e,n,r)=>"(".concat(t,"(").concat([e,n,r].map(CG).join(","),")+'')");function DG(t){return dy(t)?"("+CG(t)+")":t}function TG(t){return MG(dy(t)?t:{datum:t})}function MG(t){let e,n,r;if(t.signal)e="datum",r=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(r=t.parent,e+=".datum"):r=t.group}else t.datum?(e="datum",r=t.datum):Xm("Invalid field reference: "+mv(t));return t.signal||(r=lv(r)?Qm(r).map(mv).join("]["):MG(r)),e+"["+r+"]"}function FG(t,e,n,r,i,o){const s={};(o=o||{}).encoders={$encode:s},t=function(t,e,n,r,i){const o={},s={};let a,l,u,c;for(l in l="lineBreak","text"!==e||null==i[l]||EG(l,t)||SG(o,l,i[l]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c="frame"===n?i.group:"mark"===n?Gy({},i.mark,i[e]):null,c)u=EG(l,t)||("fill"===l||"stroke"===l)&&(EG("fill",t)||EG("stroke",t)),u||SG(o,l,c[l]);for(l in $y(r).forEach(e=>{const n=i.style&&i.style[e];for(const r in n)EG(r,t)||SG(o,r,n[r])}),t=Gy({},t),o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return t.enter=Gy(s,t.enter),a&&(t.update=Gy(a,t.update)),t}(t,e,n,r,i.config);for(const a in t)s[a]=jG(t[a],e,o,i);return o}function jG(t,e,n,r){const i={},o={};for(const a in t)null!=t[a]&&(i[a]=PG(fy(s=t[a])?function(t){let e="";return t.forEach(t=>{const n=CG(t);e+=t.test?"(".concat(t.test,")?").concat(n,":"):n}),":"===vy(e)&&(e+="null"),e}(s):CG(s),r,n,o));var s;return{$expr:{marktype:e,channels:i},$fields:Object.keys(o),$output:Object.keys(t)}}function PG(t,e,n,r){const i=dW(t,e);return i.$fields.forEach(t=>r[t]=1),Gy(n,i.$params),i.$expr}const NG=["value","update","init","react","bind"];function RG(t,e){Xm(t+' for "outer" push: '+mv(e))}function $G(t,e){const n=t.name;if("outer"===t.push)e.signals[n]||RG("No prior signal definition",n),NG.forEach(e=>{void 0!==t[e]&&RG("Invalid property ",e)});else{const r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}}function IG(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function zG(t,e,n,r){return new IG(t,e,n,r)}function LG(t,e){return zG("operator",t,e)}function UG(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function BG(t,e){return e?{$field:t,$name:e}:{$field:t}}const qG=BG("key");function VG(t,e){return{$compare:t,$order:e}}function HG(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}function WG(t){return t&&t.signal}function GG(t){if(WG(t))return!0;if(dy(t))for(const e in t)if(GG(t[e]))return!0;return!1}function ZG(t,e){return null!=t?t:e}function YG(t){return t&&t.signal||t}function XG(t,e){return(t.merge?QG:t.stream?KG:t.type?JG:Xm("Invalid stream specification: "+mv(t)))(t,e)}function QG(t,e){const n=tZ({merge:t.merge.map(t=>XG(t,e))},t,e);return e.addStream(n).id}function KG(t,e){const n=tZ({stream:XG(t.stream,e)},t,e);return e.addStream(n).id}function JG(t,e){let n;var r;"timer"===t.type?(n=e.event("timer",t.throttle),t={between:t.between,filter:t.filter}):n=e.event("scope"===(r=t.source)?"view":r||"view",t.type);const i=tZ({stream:n},t,e);return 1===Object.keys(i).length?n:e.addStream(i).id}function tZ(t,e,n){let r=e.between;return r&&(2!==r.length&&Xm('Stream "between" parameter must have 2 entries: '+mv(e)),t.between=[XG(r[0],n),XG(r[1],n)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(function(t,e,n){const r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}(e.marktype,e.markname,e.markrole)),"scope"===e.source&&r.push("inScope(event.item)"),r.length&&(t.filter=dW("("+r.join(")&&(")+")",n).$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}const eZ={code:"_.$value",ast:{type:"Identifier",value:"value"}};function nZ(t){return{signal:"["+t.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}const rZ=t=>(e,n,r)=>zG(t,n,e||void 0,r),iZ=rZ("aggregate"),oZ=rZ("axisticks"),sZ=rZ("bound"),aZ=rZ("collect"),lZ=rZ("compare"),uZ=rZ("datajoin"),cZ=rZ("encode"),hZ=rZ("expression"),fZ=rZ("facet"),dZ=rZ("field"),pZ=rZ("key"),gZ=rZ("legendentries"),mZ=rZ("load"),yZ=rZ("mark"),vZ=rZ("multiextent"),bZ=rZ("multivalues"),_Z=rZ("overlap"),xZ=rZ("params"),wZ=rZ("prefacet"),kZ=rZ("projection"),EZ=rZ("proxy"),SZ=rZ("relay"),OZ=rZ("render"),CZ=rZ("scale"),AZ=rZ("sieve"),DZ=rZ("sortitems"),TZ=rZ("viewlayout"),MZ=rZ("values");let FZ=0;const jZ={min:"min",max:"max",count:"sum"};function PZ(t,e){const n=e.getScale(t.name).params;let r;var i;for(r in n.domain=IZ(t.domain,t,e),null!=t.range&&(n.range=WZ(t,e,n)),null!=t.interpolate&&function(t,e){e.interpolate=NZ(t.type||t),null!=t.gamma&&(e.interpolateGamma=NZ(t.gamma))}(t.interpolate,n),null!=t.nice&&(n.nice=dy(i=t.nice)?{interval:NZ(i.interval),step:NZ(i.step)}:NZ(i)),null!=t.bins&&(n.bins=function(t,e){return t.signal||fy(t)?RZ(t,e):e.objectProperty(t)}(t.bins,e)),t)Qy(n,r)||"name"===r||(n[r]=NZ(t[r],e))}function NZ(t,e){return dy(t)?t.signal?e.signalRef(t.signal):Xm("Unsupported object: "+mv(t)):t}function RZ(t,e){return t.signal?e.signalRef(t.signal):t.map(t=>NZ(t,e))}function $Z(t){Xm("Can not find data set: "+mv(t))}function IZ(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(fy(t)?zZ:t.fields?UZ:LZ)(t,e,n);null==e.domainMin&&null==e.domainMax||Xm("No scale domain defined for domainMin/domainMax to override.")}function zZ(t,e,n){return t.map(t=>NZ(t,n))}function LZ(t,e,n){const r=n.getData(t.data);return r||$Z(t.data),_T(e.type)?r.valuesRef(n,t.field,qZ(t.sort,!1)):ET(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function UZ(t,e,n){const r=t.data,i=t.fields.reduce((t,e)=>(e=lv(e)?{data:r,field:e}:fy(e)||e.signal?function(t,e){const n="_:vega:_"+FZ++,r=aZ({});if(fy(t))r.value={$ingest:t};else if(t.signal){const i="setdata("+mv(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,AZ({})]),{data:n,field:"data"}}(e,n):e,t.push(e),t),[]);return(_T(e.type)?BZ:ET(e.type)?VZ:HZ)(t,n,i)}function BZ(t,e,n){const r=qZ(t.sort,!0);let i,o;const s=n.map(t=>{const n=e.getData(t.data);return n||$Z(t.data),n.countsRef(e,t.field,r)}),a={groupby:qG,pulse:s};r&&(i=r.op||"count",o=r.field?HG(i,r.field):"count",a.ops=[jZ[i]],a.fields=[e.fieldRef(o)],a.as=[o]),i=e.add(iZ(a));const l=e.add(aZ({pulse:UG(i)}));return o=e.add(MZ({field:qG,sort:e.sortRef(r),pulse:UG(l)})),UG(o)}function qZ(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field&&t.op&&!jZ[t.op]&&Xm("Multiple domain scales can not be sorted using "+t.op):Xm("No field provided for sort aggregate op: "+t.op):dy(t)?t.field="key":t={field:"key"}),t}function VZ(t,e,n){const r=n.map(t=>{const n=e.getData(t.data);return n||$Z(t.data),n.domainRef(e,t.field)});return UG(e.add(bZ({values:r})))}function HZ(t,e,n){const r=n.map(t=>{const n=e.getData(t.data);return n||$Z(t.data),n.extentRef(e,t.field)});return UG(e.add(vZ({extents:r})))}function WZ(t,e,n){const r=e.config.range;let i=t.range;if(i.signal)return e.signalRef(i.signal);if(lv(i)){if(r&&Qy(r,i))return WZ(t=Gy({},t,{range:r[i]}),e,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=_T(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Xm("Unrecognized scale range value: "+mv(i))}else{if(i.scheme)return n.scheme=fy(i.scheme)?RZ(i.scheme,e):NZ(i.scheme,e),i.extent&&(n.schemeExtent=RZ(i.extent,e)),void(i.count&&(n.schemeCount=NZ(i.count,e)));if(i.step)return void(n.rangeStep=NZ(i.step,e));if(_T(t.type)&&!fy(i))return IZ(i,t,e);fy(i)||Xm("Unsupported range type: "+mv(i))}return i.map(t=>(fy(t)?RZ:NZ)(t,e))}function GZ(t,e,n){return fy(t)?t.map(t=>GZ(t,e,n)):dy(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:Xm("Unsupported parameter object: "+mv(t)):t}const ZZ="value",YZ=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],XZ={name:1,style:1,interactive:1},QZ={value:0},KZ={value:1};function JZ(t){return t.type="group",t.interactive=t.interactive||!1,t}function tY(t,e){const n=(n,r)=>ZG(t[n],ZG(e[n],r));return n.isVertical=n=>"vertical"===ZG(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>ZG(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>ZG(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>ZG(t.columns,ZG(e.columns,+n.isVertical(!0))),n}function eY(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function nY(t,e,n){return"item.anchor === '".concat("start","' ? ").concat(t," : item.anchor === '").concat("end","' ? ").concat(e," : ").concat(n)}const rY=nY(mv("left"),mv("right"),mv("center"));function iY(t,e){return e?t?dy(t)?Object.assign({},t,{offset:iY(t.offset,e)}):{value:t,offset:e}:e:t}function oY(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=kG(t.encode,e,XZ)):t.interactive=!1,t}function sY(t,e,n,r){const i=tY(t,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,c,h,f;o?(u=[0,1],c=[0,0],h=s,f=a):(u=[0,0],c=[1,0],h=a,f=s);const d={enter:l={opacity:QZ,x:QZ,y:QZ,width:_G(h),height:_G(f)},update:Gy({},l,{opacity:KZ,fill:{gradient:e,start:u,stop:c}}),exit:{opacity:QZ}};return wG(d,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),oY({type:"rect",role:"legend-gradient",encode:d},r)}function aY(t,e,n,r,i){const o=tY(t,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,h,f,d="";s?(u="y",h="y2",c="x",f="width",d="1-"):(u="x",h="x2",c="y",f="height");const p={opacity:QZ,fill:{scale:e,field:ZZ}};p[u]={signal:d+"datum.perc",mult:l},p[c]=QZ,p[h]={signal:d+"datum.perc2",mult:l},p[f]=_G(a);const g={enter:p,update:Gy({},p,{opacity:KZ}),exit:{opacity:QZ}};return wG(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),oY({type:"rect",role:"legend-band",key:ZZ,from:i,encode:g},r)}const lY="datum.".concat("perc",'<=0?"').concat("left",'":datum.').concat("perc",'>=1?"').concat("right",'":"').concat("center",'"'),uY="datum.".concat("perc",'<=0?"').concat("bottom",'":datum.').concat("perc",'>=1?"').concat("top",'":"').concat("middle",'"');function cY(t,e,n,r){const i=tY(t,e),o=i.isVertical(),s=_G(i.gradientThickness()),a=i.gradientLength();let l,u,c,h,f=i("labelOverlap"),d="";const p={enter:l={opacity:QZ},update:u={opacity:KZ,text:{field:"label"}},exit:{opacity:QZ}};return wG(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ZG(t.labelLimit,e.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=u.baseline={signal:uY},c="y",h="x",d="1-"):(l.align=u.align={signal:lY},l.baseline={value:"top"},c="x",h="y"),l[c]=u[c]={signal:d+"datum.perc",mult:a},l[h]=u[h]=s,s.offset=ZG(t.labelOffset,e.gradientLabelOffset)||0,f=f?{separation:i("labelSeparation"),method:f,order:"datum.index"}:void 0,oY({type:"text",role:"legend-label",style:"guide-label",key:ZZ,from:r,encode:p,overlap:f},n)}function hY(t,e,n,r,i){const o=tY(t,e),s=n.entries,a=!(!s||!s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),h={data:"value"},f="(".concat(i,") ? datum.").concat("offset"," : datum.").concat("size"),d=u?_G(u):{field:"size"},p="datum.".concat("index"),g="max(1, ".concat(i,")");let m,y,v,b,_;d.mult=.5,m={enter:y={opacity:QZ,x:{signal:f,mult:.5,offset:c},y:d},update:v={opacity:KZ,x:y.x,y:y.y},exit:{opacity:QZ}};let x=null,w=null;t.fill||(x=e.symbolBaseFillColor,w=e.symbolBaseStrokeColor),wG(m,{fill:o("symbolFillColor",x),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",w),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),YZ.forEach(e=>{t[e]&&(v[e]=y[e]={scale:t[e],field:ZZ})});const k=oY({type:"symbol",role:"legend-symbol",key:ZZ,from:h,clip:!!u||void 0,encode:m},n.symbols),E=_G(c);E.offset=o("labelOffset"),m={enter:y={opacity:QZ,x:{signal:f,offset:E},y:d},update:v={opacity:KZ,text:{field:"label"},x:y.x,y:y.y},exit:{opacity:QZ}},wG(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const S=oY({type:"text",role:"legend-label",style:"guide-label",key:ZZ,from:h,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:QZ,height:u?_G(u):QZ,opacity:QZ},exit:{opacity:QZ},update:v={opacity:KZ,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b="ceil(item.mark.items.length / ".concat(g,")"),v.row.signal="".concat(p,"%").concat(b),v.column.signal="floor(".concat(p," / ").concat(b,")"),_={field:["row",p]}):(v.row.signal="floor(".concat(p," / ").concat(g,")"),v.column.signal="".concat(p," % ").concat(g),_={field:p}),v.column.signal="(".concat(i,")?").concat(v.column.signal,":").concat(p),JZ({role:"scope",from:r={facet:{data:r,name:"value",groupby:"index"}},encode:kG(m,s,XZ),marks:[k,S],name:l,interactive:a,sort:_})}const fY='item.orient === "left"',dY='item.orient === "right"',pY="(".concat(fY," || ").concat(dY,")"),gY="datum.vgrad && ".concat(pY),mY=nY('"top"','"bottom"','"middle"'),yY=nY('"right"','"left"','"center"'),vY="datum.vgrad && ".concat(dY," ? (").concat(yY,") : (").concat(pY," && !(datum.vgrad && ").concat(fY,')) ? "left" : ').concat(rY),bY="item._anchor || (".concat(pY,' ? "middle" : "start")'),_Y="".concat(gY," ? (").concat(fY," ? -90 : 90) : 0"),xY="".concat(pY," ? (datum.vgrad ? (").concat(dY,' ? "bottom" : "top") : ').concat(mY,') : "top"');function wY(t,e){let n;return dy(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+kY(t.path)+")":t.sphere&&(n="geoShape("+kY(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function kY(t){return dy(t)&&t.signal?t.signal:mv(t)}function EY(t){const e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")&&e.indexOf("title")?"group"===t.type?"scope":e||"mark":e}function SY(t){return{marktype:t.type,name:t.name||void 0,role:t.role||EY(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function OY(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t}function CY(t,e){const n=Nk(t.type);n||Xm("Unrecognized transform type: "+mv(t.type));const r=zG(n.type.toLowerCase(),null,AY(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r}function AY(t,e,n){const r={},i=t.params.length;for(let o=0;o<i;++o){const i=t.params[o];r[i.name]=DY(i,e,n)}return r}function DY(t,e,n){const r=t.type,i=e[t.name];return"index"===r?function(t,e,n){return lv(e.from)||Xm('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}(0,e,n):void 0!==i?"param"===r?function(t,e,n){const r=e[t.name];return t.array?(fy(r)||Xm("Expected an array of sub-parameters. Instead: "+mv(r)),r.map(e=>MY(t,e,n))):MY(t,r,n)}(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!WG(i)?i.map(e=>TY(t,e,n)):TY(t,i,n):void(t.required&&Xm("Missing required "+mv(e.type)+" parameter: "+mv(t.name)))}function TY(t,e,n){const r=t.type;if(WG(e))return NY(r)?Xm("Expression references can not be signals."):RY(r)?n.fieldRef(e):$Y(r)?n.compareRef(e):n.signalRef(e.signal);{const i=t.expr||RY(r);return i&&FY(e)?n.exprRef(e.expr,e.as):i&&jY(e)?BG(e.field,e.as):NY(r)?dW(e,n):PY(r)?UG(n.getData(e).values):RY(r)?BG(e):$Y(r)?n.compareRef(e):e}}function MY(t,e,n){const r=t.params.length;let i;for(let s=0;s<r;++s){i=t.params[s];for(const t in i.key)if(i.key[t]!==e[t]){i=null;break}if(i)break}i||Xm("Unsupported parameter: "+mv(e));const o=Gy(AY(i,e,n),i.key);return UG(n.add(xZ(o)))}const FY=t=>t&&t.expr,jY=t=>t&&t.field,PY=t=>"data"===t,NY=t=>"expr"===t,RY=t=>"field"===t,$Y=t=>"compare"===t;function IY(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:UG(e.getData(t.data).output)}function zY(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}function LY(t){return lv(t)?t:null}function UY(t,e,n){const r=HG(n.op,n.field);let i;if(e.ops){for(let t=0,n=e.as.length;t<n;++t)if(e.as[t]===r)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((i=n.op.signal)?t.signalRef(i):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(r))}function BY(t,e,n,r,i,o,s){const a=e[n]||(e[n]={}),l=function(t){return dy(t)?("descending"===t.order?"-":"+")+HG(t.op,t.field):""}(o);let u,c,h=LY(i);if(null!=h&&(t=e.scope,h+=l?"|"+l:"",u=a[h]),!u){const n=o?{field:qG,pulse:e.countsRef(t,i,o)}:{field:t.fieldRef(i),pulse:UG(e.output)};l&&(n.sort=t.sortRef(o)),c=t.add(zG(r,void 0,n)),s&&(e.index[i]=c),u=UG(c),null!=h&&(a[h]=u)}return u}function qY(t,e,n){const r=t.remove,i=t.insert,o=t.toggle,s=t.modify,a=t.values,l=e.add(LG()),u=dW("if("+t.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(t=>null==t?"null":t).join(",")+"),0)",e);l.update=u.$expr,l.params=u.$params}function VY(t,e){const n=EY(t),r="group"===t.type,i=t.from&&t.from.facet,o=t.overlap;let s,a,l,u,c,h,f,d=t.layout||"scope"===n||"frame"===n;const p="mark"===n||d||i,g=function(t,e,n){let r,i,o,s,a;return t?(r=t.facet)&&(e||Xm("Only group marks can be faceted."),null!=r.field?s=a=IY(r,n):(t.data?a=UG(n.getData(t.data).aggregate):(o=CY(Gy({type:"aggregate",groupby:$y(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=IY(r,n),s=a=UG(n.add(o))),i=n.keyRef(r.groupby,!0))):s=UG(n.add(aZ(null,[{}]))),s||(s=IY(t,n)),{key:i,pulse:s,parent:a}}(t.from,r,e);a=e.add(uZ({key:g.key||(t.key?BG(t.key):void 0),pulse:g.pulse,clean:!r}));const m=UG(a);a=l=e.add(aZ({pulse:m})),a=e.add(yZ({markdef:SY(t),interactive:OY(t.interactive,e),clip:wY(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:UG(a)}));const y=UG(a);a=u=e.add(cZ(FG(t.encode,t.type,n,t.style,e,{mod:!1,pulse:y}))),a.params.parent=e.encode(),t.transform&&t.transform.forEach(t=>{const n=CY(t,e),r=n.metadata;(r.generates||r.changes)&&Xm("Mark transforms should not generate new data."),r.nomod||(u.params.mod=!0),n.params.pulse=UG(a),e.add(a=n)}),t.sort&&(a=e.add(DZ({sort:e.compareRef(t.sort),pulse:UG(a)})));const v=UG(a);(i||d)&&(d=e.add(TZ({layout:e.objectProperty(t.layout),legends:e.legends,mark:y,pulse:v})),h=UG(d));const b=e.add(sZ({mark:y,pulse:h||v}));f=UG(b),r&&(p&&(s=e.operators,s.pop(),d&&s.pop()),e.pushState(v,h||f,m),i?function(t,e,n){const r=t.from.facet,i=r.name,o=IY(r,e);let s;r.name||Xm("Facet must have a name: "+mv(r)),r.data||Xm("Facet must reference a data set: "+mv(r)),r.field?s=e.add(wZ({field:e.fieldRef(r.field),pulse:o})):r.groupby?s=e.add(fZ({key:e.keyRef(r.groupby),group:UG(e.proxy(n.parent)),pulse:o})):Xm("Facet must specify groupby or field: "+mv(r));const a=e.fork(),l=a.add(aZ()),u=a.add(AZ({pulse:UG(l)}));a.addData(i,new zY(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(t).toRuntime()}}(t,e,g):p?function(t,e,n){const r=e.add(wZ({pulse:n.pulse})),i=e.fork();i.add(AZ()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(t).toRuntime()}}(t,e,g):e.parse(t),e.popState(),p&&(d&&s.push(d),s.push(b))),o&&(f=function(t,e,n){const r=t.method,i=t.bound,o=t.separation,s={separation:WG(o)?n.signalRef(o.signal):o,method:WG(r)?n.signalRef(r.signal):r,pulse:e};if(t.order&&(s.sort=n.compareRef({field:t.order})),i){const t=i.tolerance;s.boundTolerance=WG(t)?n.signalRef(t.signal):+t,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return UG(n.add(_Z(s)))}(o,f,e));const _=e.add(OZ({pulse:f})),x=e.add(AZ({pulse:UG(_)},void 0,e.parent()));null!=t.name&&(c=t.name,e.addData(c,new zY(e,l,_,x)),t.on&&t.on.forEach(t=>{(t.insert||t.remove||t.toggle)&&Xm("Marks only support modify triggers."),qY(t,e,c)}))}function HY(t,e,n){const r={enter:{},update:{}};return wG(r,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),r}function WY(t,e,n){return e[t]?'scale("'.concat(e[t],'",datum)'):eY(t,n[0].encode)}zY.fromEntries=function(t,e){const n=e.length,r=e[n-1],i=e[n-2];let o=e[0],s=null,a=1;for(o&&"load"===o.type&&(o=e[1]),t.add(e[0]);a<n;++a)e[a].params.pulse=UG(e[a-1]),t.add(e[a]),"aggregate"===e[a].type&&(s=e[a]);return new zY(t,o,i,r,s)},zY.prototype={countsRef(t,e,n){const r=this.counts||(this.counts={}),i=LY(e);let o,s,a;return null!=i&&(t=this.scope,o=r[i]),o?n&&n.field&&UY(t,o.agg.params,n):(a={groupby:t.fieldRef(e,"key"),pulse:UG(this.output)},n&&n.field&&UY(t,a,n),s=t.add(iZ(a)),o=t.add(aZ({pulse:UG(s)})),o={agg:s,ref:UG(o)},null!=i&&(r[i]=o)),o.ref},tuplesRef(){return UG(this.values)},extentRef(t,e){return BY(t,this,"extent","extent",e,!1)},domainRef(t,e){return BY(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return BY(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return BY(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return BY(t,this,"indata","tupleindex",e,!0,!0)}};const GY='item.orient==="'.concat("left",'"?-90:item.orient==="').concat("right",'"?90:0');function ZY(t,e){const n={enter:{},update:{}};return wG(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:rY},angle:{signal:GY},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),kG(n,e,XZ)}function YY(t){const e=aZ({},t);return e.metadata={source:!0},e}function XY(t,e){return mZ({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const QY=t=>"bottom"===t||"top"===t,KY=(t,e,n)=>WG(t)?iX(t.signal,e,n):"left"===t||"top"===t?e:n,JY=(t,e,n)=>WG(t)?nX(t.signal,e,n):QY(t)?e:n,tX=(t,e,n)=>WG(t)?rX(t.signal,e,n):QY(t)?n:e,eX=(t,e,n)=>WG(t)?oX(t.signal,e,n):"top"===t?{value:e}:{value:n},nX=(t,e,n)=>sX("".concat(t," === '").concat("top","' || ").concat(t," === '").concat("bottom","'"),e,n),rX=(t,e,n)=>sX("".concat(t," !== '").concat("top","' && ").concat(t," !== '").concat("bottom","'"),e,n),iX=(t,e,n)=>lX("".concat(t," === '").concat("left","' || ").concat(t," === '").concat("top","'"),e,n),oX=(t,e,n)=>lX("".concat(t," === '").concat("top","'"),e,n),sX=(t,e,n)=>(e=null!=e?_G(e):e,n=null!=n?_G(n):n,aX(e)&&aX(n)?(e=e?e.signal||mv(e.value):null,n=n?n.signal||mv(n.value):null,{signal:"".concat(t," ? (").concat(e,") : (").concat(n,")")}):[Gy({test:t},e)].concat(n||[])),aX=t=>null==t||1===Object.keys(t).length,lX=(t,e,n)=>({signal:"".concat(t," ? (").concat(uX(e),") : (").concat(uX(n),")")}),uX=t=>WG(t)?t.signal:null==t?null:mv(t),cX=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function hX(t,e,n,r){let i;if(e&&Qy(e,t))return e[t];if(Qy(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return r["guide-title"][i]}if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return r["guide-label"][i]}return null}function fX(t){const e={};for(const n of t)if(n)for(const t in n)e[t]=1;return Object.keys(e)}function dX(t,e){return{scale:t.scale,range:e}}function pX(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}function gX(t,e){const n=function(t,e){var n,r,i,o,s,a,l,u,c=e.config,h=c.style,f=c.axis,d="band"===e.scaleType(t.scale)&&c.axisBand,p=t.orient;if(WG(p)){const t=fX([c.axisX,c.axisY]),e=fX([c.axisTop,c.axisBottom,c.axisLeft,c.axisRight]);for(i of(n={},t))n[i]=JY(p,hX(i,c.axisX,f,h),hX(i,c.axisY,f,h));for(i of(r={},e))r[i]=(o=p.signal,s=hX(i,c.axisTop,f,h),a=hX(i,c.axisBottom,f,h),l=hX(i,c.axisLeft,f,h),u=hX(i,c.axisRight,f,h),{signal:(null!=l?"".concat(o," === '").concat("left","' ? (").concat(uX(l),") : "):"")+(null!=a?"".concat(o," === '").concat("bottom","' ? (").concat(uX(a),") : "):"")+(null!=u?"".concat(o," === '").concat("right","' ? (").concat(uX(u),") : "):"")+(null!=s?"".concat(o," === '").concat("top","' ? (").concat(uX(s),") : "):"")+"(null)"})}else n="top"===p||"bottom"===p?c.axisX:c.axisY,r=c["axis"+p[0].toUpperCase()+p.slice(1)];return n||r||d?Gy({},f,n,r,d):f}(t,e),r=t.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=tY(t,n),u=function(t){const e=t("tickBand");let n,r,i=t("tickOffset");return e?e.signal?(n={signal:"(".concat(e.signal,") === 'extent' ? 1 : 0.5")},r={signal:"(".concat(e.signal,") === 'extent'")},dy(i)||(i={signal:"(".concat(e.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===e?(n=1,r=!0,i=0):(n=.5,r=!1):(n=t("bandPosition"),r=t("tickExtra")),{extra:r,band:n,offset:i}}(l),c={scale:t.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=t.title},h=UG(e.add(aZ({},[c]))),f=UG(e.add(oZ({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),d=[];let p;return c.grid&&d.push(function(t,e,n,r,i){const o=tY(t,e),s=t.orient,a=t.gridScale,l=KY(s,1,-1),u=function(t,e){if(1===e);else if(dy(t)){let n=t=Gy({},t);for(;null!=n.mult;){if(!dy(n.mult))return n.mult=WG(e)?{signal:"(".concat(n.mult,") * (").concat(e.signal,")")}:n.mult*e,t;n=n.mult=Gy({},n.mult)}n.mult=e}else t=WG(e)?{signal:"(".concat(e.signal,") * (").concat(t||0,")")}:e*(t||0);return t}(t.offset,l);let c,h,f;const d={enter:c={opacity:QZ},update:f={opacity:KZ},exit:h={opacity:QZ}};wG(d,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:t.scale,field:ZZ,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=JY(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:Gy(g,{mult:l,offset:u});return c.x=f.x=JY(s,p,m),c.y=f.y=tX(s,p,m),c.x2=f.x2=tX(s,y),c.y2=f.y2=JY(s,y),h.x=JY(s,p),h.y=tX(s,p),oY({type:"rule",role:"axis-grid",key:ZZ,from:r,encode:d},n)}(t,n,r.grid,f,u)),c.ticks&&(p=l("tickSize"),d.push(function(t,e,n,r,i,o){const s=tY(t,e),a=t.orient,l=KY(a,-1,1);let u,c,h;const f={enter:u={opacity:QZ},update:h={opacity:KZ},exit:c={opacity:QZ}};wG(f,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const d=_G(i);d.mult=l;const p={scale:t.scale,field:ZZ,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return h.y=u.y=JY(a,QZ,p),h.y2=u.y2=JY(a,d),c.x=JY(a,p),h.x=u.x=tX(a,QZ,p),h.x2=u.x2=tX(a,d),c.y=tX(a,p),oY({type:"rule",role:"axis-tick",key:ZZ,from:r,encode:f},n)}(t,n,r.ticks,f,p,u))),c.labels&&(p=c.ticks?p:0,d.push(function(t,e,n,r,i,o){const s=tY(t,e),a=t.orient,l=t.scale,u=KY(a,-1,1),c=YG(s("labelFlush")),h=YG(s("labelFlushOffset")),f=s("labelAlign"),d=s("labelBaseline");let p,g=0===c||!!c;const m=_G(i);m.mult=u,m.offset=_G(s("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:ZZ,band:.5,offset:iY(o.offset,s("labelOffset"))},v=JY(a,g?pX(l,c,'"left"','"right"','"center"'):{value:"center"},((t,e,n)=>WG(t)?lX("".concat(t.signal," === '").concat("right","'"),"left","right"):"right"===t?{value:e}:{value:n})(a,"left","right")),b=JY(a,eX(a,"bottom","top"),g?pX(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),_=pX(l,c,"-(".concat(h,")"),h,0);g=g&&h;const x={opacity:QZ,x:JY(a,y,m),y:tX(a,y,m)},w={enter:x,update:p={opacity:KZ,text:{field:"label"},x:x.x,y:x.y,align:v,baseline:b},exit:{opacity:QZ,x:x.x,y:x.y}};wG(w,{dx:!f&&g?JY(a,_):null,dy:!d&&g?tX(a,_):null}),wG(w,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:f,baseline:d});const k=s("labelBound");let E=s("labelOverlap");return E=E||k?{separation:s("labelSeparation"),method:E,order:"datum.index",bound:k?{scale:l,orient:a,tolerance:k}:null}:void 0,p.align!==v&&(p.align=cX(p.align,v)),p.baseline!==b&&(p.baseline=cX(p.baseline,b)),oY({type:"text",role:"axis-label",style:"guide-label",key:ZZ,from:r,encode:w,overlap:E},n)}(t,n,r.labels,f,p,u))),c.domain&&d.push(function(t,e,n,r){const i=tY(t,e),o=t.orient;let s,a;const l={enter:s={opacity:QZ},update:a={opacity:KZ},exit:{opacity:QZ}};wG(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=dX(t,0),c=dX(t,1);return s.x=a.x=JY(o,u,QZ),s.x2=a.x2=JY(o,c),s.y=a.y=tX(o,u,QZ),s.y2=a.y2=tX(o,c),oY({type:"rule",role:"axis-domain",from:r,encode:l},n)}(t,n,r.domain,h)),c.title&&d.push(function(t,e,n,r){const i=tY(t,e),o=t.orient,s=KY(o,-1,1);let a,l;const u={enter:a={opacity:QZ,anchor:_G(i("titleAnchor",null)),align:{signal:rY}},update:l=Gy({},a,{opacity:KZ,text:_G(t.title)}),exit:{opacity:QZ}},c={signal:'lerp(range("'.concat(t.scale,'"), ').concat(nY(0,1,.5),")")};return l.x=JY(o,c),l.y=tX(o,c),a.angle=JY(o,QZ,((t,e)=>WG(t)?{signal:"(".concat(t.signal,") * ").concat(90)}:{value:90*t})(s)),a.baseline=JY(o,eX(o,"bottom","top"),{value:"bottom"}),l.angle=a.angle,l.baseline=a.baseline,wG(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),function(t,e,n,r){const i=(t,e)=>null!=t?(n.update[e]=cX(_G(t),n.update[e]),!1):!EG(e,r),o=i(t("titleX"),"x"),s=i(t("titleY"),"y");n.enter.auto=s===o?_G(s):JY(e,_G(s),_G(o))}(i,o,u,n),u.update.align=cX(u.update.align,a.align),u.update.angle=cX(u.update.angle,a.angle),u.update.baseline=cX(u.update.baseline,a.baseline),oY({type:"text",role:"axis-title",style:"guide-title",from:r,encode:u},n)}(t,n,r.title,h)),VY(JZ({role:"axis",from:h,encode:kG(mX(l,t),i,XZ),marks:d,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),e)}function mX(t,e){const n={enter:{},update:{}};return wG(n,{orient:t("orient"),offset:t("offset")||0,position:ZG(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:'abs(span(range("'.concat(e.scale,'")))')},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function yX(t,e,n){const r=$y(t.signals),i=$y(t.scales);return n||r.forEach(t=>$G(t,e)),$y(t.projections).forEach(t=>function(t,e){const n=e.config.projection||{},r={};for(const i in t)"name"!==i&&(r[i]=GZ(t[i],i,e));for(const i in n)null==r[i]&&(r[i]=GZ(n[i],i,e));e.addProjection(t.name,r)}(t,e)),i.forEach(t=>function(t,e){const n=t.type||"linear";yT(n)||Xm("Unrecognized scale type: "+mv(n)),e.addScale(t.name,{type:n,domain:void 0})}(t,e)),$y(t.data).forEach(t=>function(t,e){const n=[];t.transform&&t.transform.forEach(t=>{n.push(CY(t,e))}),t.on&&t.on.forEach(n=>{qY(n,e,t.name)}),e.addDataPipeline(t.name,function(t,e,n){const r=[];let i,o,s,a,l,u=null,c=!1,h=!1;for(t.values?WG(t.values)||GG(t.format)?(r.push(XY(e,t)),r.push(u=YY())):r.push(u=YY({$ingest:t.values,$format:t.format})):t.url?GG(t.url)||GG(t.format)?(r.push(XY(e,t)),r.push(u=YY())):r.push(u=YY({$request:t.url,$format:t.format})):t.source&&(u=i=$y(t.source).map(t=>UG(e.getData(t).output)),r.push(null)),o=0,s=n.length;o<s;++o)a=n[o],l=a.metadata,u||l.source||r.push(u=YY()),r.push(a),l.generates&&(h=!0),l.modifies&&!h&&(c=!0),l.source?u=a:l.changes&&(u=null);return i&&(s=i.length-1,r[0]=SZ({derive:c,pulse:s?i:i[0]}),(c||s)&&r.splice(1,0,YY())),u||r.push(YY()),r.push(AZ({})),r}(t,e,n))}(t,e)),i.forEach(t=>PZ(t,e)),(n||r).forEach(t=>function(t,e){const n=e.getSignal(t.name);let r=t.update;t.init&&(r?Xm("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=dW(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach(t=>function(t,e,n){const r=t.encode,i={target:n};let o=t.events,s=t.update,a=[];o||Xm("Signal update missing events specification."),lv(o)&&(o=dG(o,e.isSubscope()?"scope":"view")),o=$y(o).filter(t=>t.signal||t.scale?(a.push(t),0):1),a.length>1&&(a=[nZ(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),null!=r&&(s&&Xm("Signal encode and update are mutually exclusive."),s="encode(item(),"+mv(r)+")"),i.update=lv(s)?dW(s,e):null!=s.expr?dW(s.expr,e):null!=s.value?s.value:null!=s.signal?{$expr:eZ,$params:{$value:e.signalRef(s.signal)}}:Xm("Invalid signal update specification."),t.force&&(i.options={force:!0}),a.forEach(t=>e.addUpdate(Gy(function(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):XG(t,e)}}(t,e),i)))}(t,e,n.id))}(t,e)),$y(t.axes).forEach(t=>gX(t,e)),$y(t.marks).forEach(t=>VY(t,e)),$y(t.legends).forEach(t=>function(t,e){const n=e.config.legend,r=t.encode||{},i=tY(t,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let c,h,f,d=0;YZ.forEach(e=>t[e]?(u[e]=t[e],d=d||t[e]):0),d||Xm("Missing valid scale for legend.");const p=function(t,e){let n=t.type||"symbol";return t.type||1!==function(t){return YZ.reduce((e,n)=>e+(t[n]?1:0),0)}(t)||!t.fill&&!t.stroke||(n=bT(e)?"gradient":xT(e)?"discrete":"symbol"),"gradient"!==n?n:xT(e)?"discrete":"gradient"}(t,e.scaleType(d)),g={title:null!=t.title,scales:u,type:p,vgrad:"symbol"!==p&&i.isVertical()},m=UG(e.add(aZ(null,[g]))),y=UG(e.add(gZ(h={type:p,scale:e.scaleRef(d),count:e.objectProperty(i("tickCount")),limit:e.property(i("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return"gradient"===p?(f=[sY(t,d,n,r.gradient),cY(t,n,r.labels,y)],h.count=h.count||e.signalRef("max(2,2*floor((".concat(YG(i.gradientLength()),")/100))"))):"discrete"===p?f=[aY(t,d,n,r.gradient,y),cY(t,n,r.labels,y)]:(c=function(t,e){const n=tY(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(t,n),f=[hY(t,n,r,y,YG(c.columns))],h.size=function(t,e,n){const r=YG(WY("size",t,n)),i=YG(WY("strokeWidth",t,n)),o=YG(function(t,e,n){return eY("fontSize",t)||function(t,e,n){const r=e.config.style["guide-label"];return r&&r.fontSize}(0,e)}(n[1].encode,e));return dW("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(o,")"),e)}(t,e,f[0].marks)),f=[JZ({role:"legend-entry",from:m,encode:{enter:{x:{value:0},y:{value:0}}},marks:f,layout:c,interactive:a})],g.title&&f.push(function(t,e,n,r){const i=tY(t,e),o={enter:{opacity:QZ},update:{opacity:KZ,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:QZ}};return wG(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:bY},angle:{signal:_Y},align:{signal:vY},baseline:{signal:xY},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),oY({type:"text",role:"legend-title",style:"guide-title",from:r,encode:o},n)}(t,n,r.title,m)),VY(JZ({role:"legend",from:m,encode:kG(HY(i,t,n),o,XZ),marks:f,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),e)}(t,e)),t.title&&function(t,e){const n=tY(t=lv(t)?{text:t}:t,e.config.title),r=t.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u=UG(e.add(aZ(null,[{}])));l.push(function(t,e,n,r){const i={value:0},o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return wG(o,{text:t.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),oY({type:"text",role:"title-text",style:"group-title",from:r,encode:o},n)}(t,n,function(t){const e=t.encode;return e&&e.title||Gy({name:t.name,interactive:t.interactive,style:t.style},e)}(t),u)),t.subtitle&&l.push(function(t,e,n,r){const i={value:0},o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return wG(o,{text:t.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),oY({type:"text",role:"title-subtitle",style:"group-subtitle",from:r,encode:o},n)}(t,n,r.subtitle,u)),VY(JZ({role:"title",from:u,encode:ZY(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),e)}(t.title,e),e.parseLambdas(),e}function vX(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function bX(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function _X(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function xX(t){return(fy(t)?wX:kX)(t)}function wX(t){const e=t.length;let n="[";for(let r=0;r<e;++r){const e=t[r];n+=(r>0?",":"")+(dy(e)?e.signal||xX(e):mv(e))}return n+"]"}function kX(t){let e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+mv(e)+":"+(dy(n)?n.signal||xX(n):mv(n));return r+"}"}function EX(t,e,n){return dy(t)||Xm("Input Vega specification must be an object."),function(t,e){const n=e.config,r=UG(e.root=e.add(LG())),i=function(t,e){const n=n=>ZG(t[n],e[n]),r=[vX("background",n("background")),vX("autosize",yG(n("autosize"))),vX("padding",bG(n("padding"))),vX("width",n("width")||0),vX("height",n("height")||0)],i=r.reduce((t,e)=>(t[e.name]=e,t),{}),o={};return $y(t.signals).forEach(t=>{Qy(i,t.name)?t=Gy(i[t.name],t):r.push(t),o[t.name]=t}),$y(e.signals).forEach(t=>{Qy(o,t.name)||Qy(i,t.name)||r.push(t)}),r}(t,n);i.forEach(t=>$G(t,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const o=e.add(aZ()),s=e.add(cZ(FG((t=>kG({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t))(t.encode),"group","frame",t.style,e,{pulse:UG(o)}))),a=e.add(TZ({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:r,pulse:UG(s)}));e.operators.pop(),e.pushState(UG(s),UG(a),null),yX(t,e,i),e.operators.push(a);let l=e.add(sZ({mark:r,pulse:UG(a)}));return l=e.add(OZ({pulse:UG(l)})),l=e.add(AZ({pulse:UG(l)})),e.addData("root",new zY(e,o,o,l)),e}(t,new bX(e=gy({description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},trail:{fill:"#4c78a8",size:2},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}},e,t.config),n)).toRuntime()}bX.prototype=_X.prototype={parse(t){return yX(t,this)},fork(){return new _X(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof IG?UG(t):t;return this.add(EZ({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){let r,i;t&&(r=t.data||(t.data={}),i=r[e]||(r[e]=[]),i.push(n))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const r in e.index)n(e.index[r],t,"index:"+r)}return this},pushState(t,e,n){this._encode.push(UG(this.add(AZ({pulse:t})))),this._parent.push(e),this._lookup.push(n?UG(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return vy(this._parent)},encode(){return vy(this._encode)},lookup(){return vy(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(lv(t))return BG(t,e);t.signal||Xm("Unsupported field reference: "+mv(t));const n=t.signal;let r=this.field[n];if(!r){const t={name:this.signalRef(n)};e&&(t.as=e),this.field[n]=r=UG(this.add(dZ(t)))}return r},compareRef(t){let e=!1;const n=t=>WG(t)?(e=!0,this.signalRef(t.signal)):function(t){return t&&t.expr}(t)?(e=!0,this.exprRef(t.expr)):t,r=$y(t.field).map(n),i=$y(t.order).map(n);return e?UG(this.add(lZ({fields:r,orders:i}))):VG(r,i)},keyRef(t,e){let n=!1;const r=this.signals;return t=$y(t).map(t=>WG(t)?(n=!0,UG(r[t.signal])):t),n?UG(this.add(pZ({fields:t,flat:e}))):function(t,e){const n={$key:t};return e&&(n.$flat=!0),n}(t,e)},sortRef(t){if(!t)return t;const e=HG(t.op,t.field),n=t.order||"ascending";return n.signal?UG(this.add(lZ({fields:e,orders:this.signalRef(n.signal)}))):VG(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},hasOwnSignal(t){return Qy(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&Xm("Duplicate signal name: "+mv(t));const n=e instanceof IG?e:this.add(LG(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||Xm("Unrecognized signal name: "+mv(t)),this.signals[t]},signalRef(t){return this.signals[t]?UG(this.signals[t]):(Qy(this.lambdas,t)||(this.lambdas[t]=this.add(LG(null))),UG(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const n=t[e],r=dW(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return t&&dy(t)?this.signalRef(t.signal||xX(t)):t},exprRef(t,e){const n={expr:dW(t,this)};return e&&(n.expr.$name=e),UG(this.add(hZ(n)))},addBinding(t,e){this.bindings||Xm("Nested signals do not support binding: "+mv(t)),this.bindings.push(Gy({signal:t},e))},addScaleProj(t,e){Qy(this.scales,t)&&Xm("Duplicate scale or projection name: "+mv(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,CZ(e))},addProjection(t,e){this.addScaleProj(t,kZ(e))},getScale(t){return this.scales[t]||Xm("Unrecognized scale name: "+mv(t)),this.scales[t]},scaleRef(t){return UG(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return Qy(this.data,t)&&Xm("Duplicate data set name: "+mv(t)),this.data[t]=e},getData(t){return this.data[t]||Xm("Undefined data set name: "+mv(t)),this.data[t]},addDataPipeline(t,e){return Qy(this.data,t)&&Xm("Duplicate data set name: "+mv(t)),this.addData(t,zY.fromEntries(this,e))}},Gy(Pk,o,a,l,u,c,f,h,d,p,g,m);const SX="5.19.1";var OX=n("qHvB");Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,function(n,r){return Array.isArray(r)?n.push.apply(n,t.call(r,e-1)):n.push(r),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var CX=n("JBAE"),AX=n.n(CX),DX=n("aUsF"),TX=n.n(DX),MX=n("9x6x"),FX=n.n(MX);function jX(t){return!!t.or}function PX(t){return!!t.and}function NX(t){return!!t.not}function RX(t,e){if(NX(t))RX(t.not,e);else if(PX(t))for(const n of t.and)RX(n,e);else if(jX(t))for(const n of t.or)RX(n,e);else e(t)}function $X(t,e){return NX(t)?{not:$X(t.not,e)}:PX(t)?{and:t.and.map(t=>$X(t,e))}:jX(t)?{or:t.or.map(t=>$X(t,e))}:e(t)}const IX=TX.a,zX=AX.a;function LX(t,e){const n={};for(const r of e)Qy(t,r)&&(n[r]=t[r]);return n}function UX(t,e){const n=Object.assign({},t);for(const r of e)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>FX()(t)).join(",")})`};const BX=FX.a;function qX(t){if(sv(t))return t;const e=lv(t)?t:FX()(t);if(e.length<250)return e;let n=0;for(let r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n&=n;return n}function VX(t){return!1===t||null===t}function HX(t,e){return t.includes(e)}function WX(t,e){let n=0;for(const[r,i]of t.entries())if(e(i,r,n++))return!0;return!1}function GX(t,e){let n=0;for(const[r,i]of t.entries())if(!e(i,r,n++))return!1;return!0}function ZX(t,...e){for(const n of e)YX(t,null!=n?n:{});return t}function YX(t,e){for(const n of rQ(e))my(t,n,e[n],!0)}function XX(t,e){const n=[],r={};let i;for(const o of t)i=e(o),i in r||(r[i]=1,n.push(o));return n}function QX(t,e){const n=rQ(t),r=rQ(e);if(n.length!==r.length)return!1;for(const i of n)if(t[i]!==e[i])return!1;return!0}function KX(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function JX(t,e){for(const n of t)if(e.has(n))return!0;return!1}function tQ(t){const e=new Set;for(const n of t){const t=Qm(n).map((t,e)=>0===e?t:`[${t}]`),r=t.map((e,n)=>t.slice(0,n+1).join(""));for(const n of r)e.add(n)}return e}function eQ(t,e){return void 0===t||void 0===e||JX(tQ(t),tQ(e))}function nQ(t){return 0===rQ(t).length}const rQ=Object.keys,iQ=Object.values,oQ=Object.entries;function sQ(t){return!0===t||!1===t}function aQ(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function lQ(t,e){return NX(t)?`!(${lQ(t.not,e)})`:PX(t)?`(${t.and.map(t=>lQ(t,e)).join(") && (")})`:jX(t)?`(${t.or.map(t=>lQ(t,e)).join(") || (")})`:e(t)}function uQ(t,e){if(0===e.length)return!0;const n=e.shift();return n in t&&uQ(t[n],e)&&delete t[n],nQ(t)}function cQ(t){return t.charAt(0).toUpperCase()+t.substr(1)}function hQ(t,e="datum"){const n=Qm(t),r=[];for(let i=1;i<=n.length;i++){const t=`[${n.slice(0,i).map(mv).join("][")}]`;r.push(`${e}${t}`)}return r.join(" && ")}function fQ(t,e="datum"){return`${e}[${mv(Qm(t).join("."))}]`}function dQ(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function pQ(t){return`${Qm(t).map(dQ).join("\\.")}`}function gQ(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function mQ(t){return`${Qm(t).join(".")}`}function yQ(t){return t?Qm(t).length:0}function vQ(...t){for(const e of t)if(void 0!==e)return e}let bQ=42;function _Q(t){const e=++bQ;return t?String(t)+e:e}function xQ(){bQ=42}function wQ(t){return kQ(t)?t:`__${t}`}function kQ(t){return t.startsWith("__")}function EQ(t){if(void 0!==t)return(t%360+360)%360}function SQ(t){return!!sv(t)||!isNaN(t)&&!isNaN(parseFloat(t))}var OQ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const CQ="row",AQ="column",DQ="radius",TQ="theta",MQ="theta2",FQ="color",jQ="fill",PQ="stroke",NQ="shape",RQ={theta:1,theta2:1,radius:1,radius2:1};function $Q(t){return t in RQ}const IQ={longitude:1,longitude2:1,latitude:1,latitude2:1},zQ=rQ(IQ),LQ=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),RQ),IQ),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function UQ(t){return t===FQ||t===jQ||t===PQ}const BQ={row:1,column:1,facet:1},qQ=rQ(BQ),VQ=Object.assign(Object.assign({},LQ),BQ),HQ=rQ(VQ),WQ=OQ(VQ,["order","detail","tooltip"]),GQ=OQ(WQ,["row","column","facet"]);function ZQ(t){return!!VQ[t]}rQ(WQ),rQ(GQ);const YQ=["x2","y2","latitude2","longitude2",MQ,"radius2"];function XQ(t){return QQ(t)!==t}function QQ(t){switch(t){case"x2":return"x";case"y2":return"y";case"latitude2":return"latitude";case"longitude2":return"longitude";case MQ:return TQ;case"radius2":return DQ}return t}function KQ(t){if($Q(t))switch(t){case TQ:return"startAngle";case MQ:return"endAngle";case DQ:return"outerRadius";case"radius2":return"innerRadius"}return t}function JQ(t){switch(t){case"x":return"x2";case"y":return"y2";case"latitude":return"latitude2";case"longitude":return"longitude2";case TQ:return MQ;case DQ:return"radius2"}}function tK(t){switch(t){case"x":case"x2":return"width";case"y":case"y2":return"height"}}rQ(LQ);const eK=OQ(LQ,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),nK=rQ(eK),rK={x:1,y:1},iK=rQ(rK);function oK(t){return t in rK}const sK={theta:1,radius:1},aK=rQ(sK);function lK(t){return"width"===t?"x":"y"}const uK=OQ(eK,["text","tooltip","href","url","description","detail","key","order"]),cK=rQ(uK),hK=Object.assign(Object.assign(Object.assign({},rK),sK),uK),fK=rQ(hK);function dK(t){return!!hK[t]}const pK={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},gK=OQ(pK,["geoshape"]);function mK(t){switch(t){case"x":case"y":case TQ:case DQ:case"size":case"angle":case"strokeWidth":case"opacity":case"fillOpacity":case"strokeOpacity":case"x2":case"y2":case MQ:case"radius2":return;case"facet":case CQ:case AQ:case NQ:case"strokeDash":case"text":case"tooltip":case"href":case"url":case"description":return"discrete";case FQ:case jQ:case PQ:return"flexible";case"latitude":case"longitude":case"latitude2":case"longitude2":case"detail":case"key":case"order":return}}const yK={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},vK={count:1,min:1,max:1};function bK(t){return!!t&&!!t.argmin}function _K(t){return!!t&&!!t.argmax}function xK(t){return lv(t)&&!!yK[t]}rQ(yK);const wK=["count","valid","missing","distinct"];function kK(t){return lv(t)&&HX(wK,t)}const EK=["count","sum","distinct","valid","missing"],SK=xv(["mean","average","median","q1","q3","min","max"]);function OK(t){return rv(t)&&(t=h3(t,void 0)),"bin"+rQ(t).map(e=>TK(t[e])?aQ(`_${e}_${oQ(t[e])}`):aQ(`_${e}_${t[e]}`)).join("")}function CK(t){return!0===t||DK(t)&&!t.binned}function AK(t){return"binned"===t||DK(t)&&!0===t.binned}function DK(t){return dy(t)}function TK(t){return null==t?void 0:t.param}function MK(t){switch(t){case CQ:case AQ:case"size":case FQ:case jQ:case PQ:case"strokeWidth":case"opacity":case"fillOpacity":case"strokeOpacity":case NQ:return 6;case"strokeDash":return 4;default:return 10}}function FK(t){return t&&!!t.expr}function jK(t){const e=rQ(t||{}),n={};for(const r of e)n[r]=VK(t[r]);return n}function PK(t){const{anchor:e,frame:n,offset:r,orient:i,color:o,subtitleColor:s,subtitleFont:a,subtitleFontSize:l,subtitleFontStyle:u,subtitleFontWeight:c,subtitleLineHeight:h,subtitlePadding:f}=t,d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),p=Object.assign(Object.assign({},d),o?{fill:o}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign({},e?{anchor:e}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s?{subtitleColor:s}:{}),a?{subtitleFont:a}:{}),l?{subtitleFontSize:l}:{}),u?{subtitleFontStyle:u}:{}),c?{subtitleFontWeight:c}:{}),h?{subtitleLineHeight:h}:{}),f?{subtitlePadding:f}:{});return{titleMarkConfig:p,subtitleMarkConfig:LX(p,["align","baseline","dx","dy","limit"]),nonMark:g,subtitle:m}}function NK(t){return lv(t)||fy(t)&&lv(t[0])}function RK(t){return t&&!!t.signal}function $K(t){return!!t.step}function IK(t){return!fy(t)&&"field"in t&&"data"in t}const zK=rQ({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),LK={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},UK=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var BK=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function qK(t){const e=fy(t.condition)?t.condition.map(HK):HK(t.condition);return Object.assign(Object.assign({},VK(t)),{condition:e})}function VK(t){if(FK(t)){const{expr:e}=t,n=BK(t,["expr"]);return Object.assign({signal:e},n)}return t}function HK(t){if(FK(t)){const{expr:e}=t,n=BK(t,["expr"]);return Object.assign({signal:e},n)}return t}function WK(t){if(FK(t)){const{expr:e}=t,n=BK(t,["expr"]);return Object.assign({signal:e},n)}return RK(t)?t:void 0!==t?{value:t}:void 0}function GK(t){return RK(t)?t.signal:mv(t.value)}function ZK(t){return RK(t)?t.signal:null==t?null:mv(t)}function YK(t){var e;return[].concat(t.type,null!==(e=t.style)&&void 0!==e?e:[])}function XK(t,e,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&void 0!==e[i]?e[i]:void 0!==e[t]?e[t]:!o||i&&i!==t?QK(t,e,n,r):void 0}function QK(t,e,n,{vgChannel:r}={}){return vQ(r?KK(t,e,n.style):void 0,KK(t,e,n.style),r?n[e.type][r]:void 0,n[e.type][t],r?n.mark[r]:n.mark[t])}function KK(t,e,n){return JK(t,YK(e),n)}function JK(t,e,n){let r;e=$y(e);for(const i of e){const e=n[i];e&&void 0!==e[t]&&(r=e[t])}return r}function tJ(t,e){return $y(t).reduce((t,n)=>{var r;return t.field.push(Q2(n,e)),t.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),t},{field:[],order:[]})}function eJ(t,e){const n=[...t];return e.forEach(t=>{for(const e of n)if(IX(e,t))return;n.push(t)}),n}function nJ(t,e){return IX(t,e)||!e?t:t?[...$y(t),...$y(e)].join(", "):e}function rJ(t,e){const n=t.value,r=e.value;if(null==n||null===r)return{explicit:t.explicit,value:null};if((NK(n)||RK(n))&&(NK(r)||RK(r)))return{explicit:t.explicit,value:nJ(n,r)};if(NK(n)||RK(n))return{explicit:t.explicit,value:n};if(NK(r)||RK(r))return{explicit:t.explicit,value:r};if(!(NK(n)||RK(n)||NK(r)||RK(r)))return{explicit:t.explicit,value:eJ(n,r)};throw new Error("It should never reach here")}function iJ(t){return`Invalid specification ${BX(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const oJ='Autosize "fit" only works for single views and layered views.';function sJ(t){return("width"==t?"Width":"Height")+' "container" only works for single views and layered views.'}function aJ(t){return`${"width"==t?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==t?"x":"y"}".`}function lJ(t){return t?`Dropping "fit-${t}" because spec has discrete ${tK(t)}.`:'Dropping "fit" because spec has discrete size.'}function uJ(t){return`Unknown field for ${t}. Cannot calculate view size.`}function cJ(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function hJ(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function fJ(t){return`The "nearest" transform is not supported for ${t} marks.`}function dJ(t){return`Selection not supported for ${t} yet.`}function pJ(t){return`Cannot find a selection named "${t}".`}const gJ="Scale bindings are currently only supported for scales with unbinned, continuous domains.",mJ="Legend bindings are only supported for selections over an individual field or encoding channel.";function yJ(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function vJ(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}const bJ="The same selection must be used to override scale domains in a layered view.",_J='Interval selections should be initialized using "x" and/or "y" keys.';function xJ(t){return`Unknown repeated value "${t}".`}function wJ(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const kJ="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function EJ(t){return`Unrecognized parse "${t}".`}function SJ(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}const OJ="Attempt to add the same child twice.";function CJ(t){return`Ignoring an invalid transform: ${BX(t)}.`}const AJ='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function DJ(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function TJ(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${BX(e)} is overridden by a child projection ${BX(n)}.`}const MJ="Arc marks uses theta channel rather than angle, replacing angle with theta.";function FJ(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${BX(n)}}.`}function jJ(t){return`Invalid field type "${t}".`}function PJ(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function NJ(t){return`Invalid aggregation operator "${t}".`}function RJ(t,e){return`Missing type for channel "${t}", using "${e}" instead.`}function $J(t,e){const{fill:n,stroke:r}=e;return`Dropping color ${t} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function IJ(t){return`Position range does not support relative band size for ${t}.`}function zJ(t,e){return`Dropping ${BX(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}const LJ="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function UJ(t,e,n){return`${t} dropped as it is incompatible with "${e}"${n?` when ${n}`:""}.`}function BJ(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function qJ(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function VJ(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function HJ(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function WJ(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${"ordinal"===e?"order":"magnitude"}.`}function GJ(t){return`The ${t} for range marks cannot be an expression`}function ZJ(t,e){return`Line mark is for continuous lines and thus cannot be used with ${t&&e?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function YJ(t,e){return`Specified orient "${t}" overridden with "${e}".`}const XJ="Custom domain scale cannot be unioned with default field-based domain.";function QJ(t){return`Cannot use the scale property "${t}" with non-color channel.`}function KJ(t){return`Cannot use the relative band size with ${t} scale.`}function JJ(t){return`Using unaggregated domain with raw field has no effect (${BX(t)}).`}function t0(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function e0(t){return`Unaggregated domain is currently unsupported for log scale (${BX(t)}).`}function n0(t){return`Cannot apply size to non-oriented mark "${t}".`}function r0(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}function i0(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function o0(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function s0(t,e){return`Scale type "${e}" does not work with mark "${t}".`}function a0(t){return`The step for "${t}" is dropped because the ${"width"===t?"x":"y"} is continuous.`}function l0(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${BX(n)} and ${BX(r)}). Using ${BX(n)}.`}function u0(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${BX(n)} and ${BX(r)}). Using the union of the two domains.`}function c0(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function h0(t){return`Dropping sort property ${BX(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const f0="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",d0="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",p0="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",g0="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",m0="Invalid channel for axis.";function y0(t){return`Cannot stack "${t}" if there is already "${t}2".`}function v0(t){return`Cannot stack non-linear scale (${t}).`}function b0(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function _0(t,e){return`Invalid ${t}: ${BX(e)}.`}function x0(t){return`Dropping day from datetime ${BX(t)} as day cannot be combined with other units.`}function w0(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function k0(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}function E0(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function S0(t){return`1D error band does not support ${t}.`}function O0(t){return`Channel ${t} is required for "binned" bin.`}function C0(t){return`Channel ${t} should not be used with "binned" bin.`}function A0(t){return`Domain for ${t} is required for threshold scale.`}const D0=hy(ly);let T0=D0;function M0(...t){T0.warn(...t)}function F0(t){if(t&&dy(t))for(const e of L0)if(e in t)return!0;return!1}new WeakMap;const j0=["january","february","march","april","may","june","july","august","september","october","november","december"],P0=j0.map(t=>t.substr(0,3)),N0=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],R0=N0.map(t=>t.substr(0,3));function $0(t,e){const n=[];if(e&&void 0!==t.day&&rQ(t).length>1&&(M0(v.droppedDay(t)),delete(t=zX(t)).day),n.push(void 0!==t.year?t.year:2012),void 0!==t.month){const r=e?function(t){if(SQ(t)&&(t=+t),sv(t))return t-1;{const e=t.toLowerCase(),n=j0.indexOf(e);if(-1!==n)return n;const r=e.substr(0,3),i=P0.indexOf(r);if(-1!==i)return i;throw new Error(v.invalidTimeUnit("month",t))}}(t.month):t.month;n.push(r)}else if(void 0!==t.quarter){const r=e?function(t){if(SQ(t)&&(t=+t),sv(t))return t>4&&M0(v.invalidTimeUnit("quarter",t)),t-1;throw new Error(v.invalidTimeUnit("quarter",t))}(t.quarter):t.quarter;n.push(sv(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==t.date)n.push(t.date);else if(void 0!==t.day){const r=e?function(t){if(SQ(t)&&(t=+t),sv(t))return t%7;{const e=t.toLowerCase(),n=N0.indexOf(e);if(-1!==n)return n;const r=e.substr(0,3),i=R0.indexOf(r);if(-1!==i)return i;throw new Error(v.invalidTimeUnit("day",t))}}(t.day):t.day;n.push(sv(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const e=t[r];n.push(void 0===e?0:e)}return n}function I0(t){const e=$0(t,!0).join(", ");return t.utc?`utc(${e})`:`datetime(${e})`}const z0={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},L0=rQ(z0);function U0(t){return t.startsWith("utc")}const B0={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function q0(t){return L0.filter(e=>V0(t,e))}function V0(t,e){const n=t.indexOf(e);return!(n<0||n>0&&"seconds"===e&&"i"===t.charAt(n-1)||t.length>n+3&&"day"===e&&"o"===t.charAt(n+3)||n>0&&"year"===e&&"f"===t.charAt(n-1))}function H0(t){if(!t)return;const e=q0(t);return`timeUnitSpecifier(${BX(e)}, ${BX(B0)})`}function W0(t){if(!t)return;let e;return lv(t)?e={unit:t}:dy(t)&&(e=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),U0(e.unit)&&(e.utc=!0,e.unit=e.unit.substr(3)),e}function G0(t){return t&&!!t.field&&void 0!==t.equal}function Z0(t){return t&&!!t.field&&void 0!==t.lt}function Y0(t){return t&&!!t.field&&void 0!==t.lte}function X0(t){return t&&!!t.field&&void 0!==t.gt}function Q0(t){return t&&!!t.field&&void 0!==t.gte}function K0(t){if(t&&t.field){if(fy(t.range)&&2===t.range.length)return!0;if(RK(t.range))return!0}return!1}function J0(t){return t&&!!t.field&&(fy(t.oneOf)||fy(t.in))}function t1(t){return J0(t)||G0(t)||K0(t)||Z0(t)||X0(t)||Y0(t)||Q0(t)}function e1(t,e){return p3(t,{timeUnit:e,wrapTime:!0})}function n1(t,e=!0){var n;const{field:r}=t,i=null===(n=W0(t.timeUnit))||void 0===n?void 0:n.unit,o=i?`time(${function(t,e,{end:n}={end:!1}){const r=hQ(e),i=U0(t)?"utc":"";let o;const s={};for(const l of L0)V0(t,l)&&(s[l]="quarter"===(a=l)?`(${i}quarter(${r})-1)`:`${i}${a}(${r})`,o=l);var a;return n&&(s[o]+="+1"),function(t){const e=$0(t,!1).join(", ");return t.utc?`utc(${e})`:`datetime(${e})`}(s)}(i,r)})`:Q2(t,{expr:"datum"});if(G0(t))return`${o}===${e1(t.equal,i)}`;if(Z0(t))return`${o}<${e1(t.lt,i)}`;if(X0(t))return`${o}>${e1(t.gt,i)}`;if(Y0(t))return`${o}<=${e1(t.lte,i)}`;if(Q0(t))return`${o}>=${e1(t.gte,i)}`;if(J0(t))return`indexof([${function(t,e){return t.map(t=>e1(t,e))}(t.oneOf,i).join(",")}], ${o}) !== -1`;if(function(t){return t&&!!t.field&&void 0!==t.valid}(t))return r1(o,t.valid);if(K0(t)){const{range:n}=t,r=RK(n)?{signal:`${n.signal}[0]`}:n[0],s=RK(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==r&&null!==s&&e)return"inrange("+o+", ["+e1(r,i)+", "+e1(s,i)+"])";const a=[];return null!==r&&a.push(`${o} >= ${e1(r,i)}`),null!==s&&a.push(`${o} <= ${e1(s,i)}`),a.length>0?a.join(" && "):"true"}throw new Error(`Invalid field predicate: ${BX(t)}`)}function r1(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function i1(t){var e;return t1(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:null===(e=W0(t.timeUnit))||void 0===e?void 0:e.unit}):t}const o1={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},s1=o1.quantitative,a1=o1.ordinal,l1=o1.temporal,u1=o1.nominal,c1=o1.geojson;rQ(o1);const h1={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function f1(t,e){const n=h1[t],r=h1[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}rQ(h1);const d1={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function p1(t){return d1[t]}const g1=["linear","log","pow","sqrt","symlog","time","utc"],m1=xv(g1),y1=xv(["linear","log","pow","sqrt","symlog"]),v1=xv(["quantile","quantize","threshold"]),b1=xv(g1.concat(["quantile","quantize","threshold","sequential","identity"])),_1=xv(["ordinal","bin-ordinal","point","band"]);function x1(t){return t in _1}function w1(t){return t in b1}function k1(t){return t in m1}function E1(t){return t in v1}function S1(t){return null==t?void 0:t.param}const O1={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},C1=(rQ(O1),function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(O1,["type","domain","range","rangeMax","rangeMin","scheme"])),A1=rQ(C1);function D1(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return k1(t)||"band"===t||"point"===t;case"padding":case"rangeMin":case"rangeMax":return k1(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return"band"===t;case"domainMax":case"domainMid":case"domainMin":case"clamp":return k1(t);case"nice":return k1(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return w1(t)&&!HX(["log","time","utc","threshold","quantile"],t)}}function T1(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return UQ(t)?void 0:v.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const M1={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},F1=M1.arc,j1=M1.area,P1=M1.bar,N1=M1.image,R1=M1.line,$1=M1.point,I1=M1.rect,z1=M1.rule,L1=M1.text,U1=M1.tick,B1=M1.trail,q1=M1.circle,V1=M1.square,H1=M1.geoshape;function W1(t){return["line","area","trail"].includes(t)}function G1(t){return["rect","bar","image","arc"].includes(t)}const Z1=rQ(M1);function Y1(t){return t.type}xv(Z1);const X1=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],Q1=rQ({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),K1=rQ({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function J1(t){return t&&null!=t.band}const t2={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]};function e2(t){const{channel:e,channelDef:n,markDef:r,scale:i,config:o}=t,s=a2(t);return I2(n)&&!kK(n.aggregate)&&i&&k1(i.get("type"))&&!1===i.get("zero")?n2({fieldDef:n,channel:e,markDef:r,ref:s,config:o}):s}function n2({fieldDef:t,channel:e,markDef:n,ref:r,config:i}){return W1(n.type)||null===XK("invalid",n,i)?r:[r2(t,e),r]}function r2(t,e){const n=i2(t,!0),r=QQ(e);return Object.assign({test:n},"y"===r?{field:{group:"height"}}:{value:0})}function i2(t,e=!0){return r1(lv(t)?t:Q2(t,{expr:"datum"}),!e)}function o2(t,e,n,r){const i={};if(e&&(i.scale=e),L2(t)){const{datum:e}=t;F0(e)?i.signal=I0(e):RK(e)?i.signal=e.signal:FK(e)?i.signal=e.expr:i.value=e}else i.field=Q2(t,n);if(r){const{offset:t,band:e}=r;t&&(i.offset=t),e&&(i.band=e)}return i}function s2({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const s=0<o&&o<1?"datum":void 0,a=Q2(e,{expr:s,suffix:i}),l=void 0!==n?Q2(n,{expr:s}):Q2(e,{suffix:"end",expr:s}),u={};if(0===o||1===o)u.scale=t,u.field=0===o?a:l;else{const e=RK(o)?`${o.signal} * ${a} + (1-${o.signal}) * ${l}`:`${o} * ${a} + ${1-o} * ${l}`;u.signal=`scale("${t}", ${e})`}return r&&(u.offset=r),u}function a2({channel:t,channelDef:e,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){var h;if(e){if(q2(e)){if(V2(e)){null!=c||(c=F2({fieldDef:e,fieldDef2:n,markDef:r,config:i}));const{bin:s,timeUnit:u,type:h}=e;if(CK(s)||c&&u&&h===l1)return a&&a.impute?o2(e,o,{binSuffix:"mid"},{offset:l}):c?s2({scaleName:o,fieldOrDatumDef:e,bandPosition:c,offset:l}):o2(e,o,m3(e,t)?{binSuffix:"range"}:{},{offset:l});if(AK(s)){if(I2(n))return s2({scaleName:o,fieldOrDatumDef:e,fieldOrDatumDef2:n,bandPosition:c,offset:l});M0(v.channelRequiredForBinned("x"===t?"x2":"y2"))}}const u=null==s?void 0:s.get("type");return o2(e,o,x1(u)?{binSuffix:"range"}:{},{offset:l,band:"band"===u?null!==(h=null!=c?c:e.bandPosition)&&void 0!==h?h:.5:void 0})}if(H2(e)){const n=l?{offset:l}:{};return Object.assign(Object.assign({},l2(t,e.value)),n)}}return zy(u)&&(u=u()),u?Object.assign(Object.assign({},u),l?{offset:l}:{}):u}function l2(t,e){return HX(["x","x2"],t)&&"width"===e?{field:{group:"width"}}:HX(["y","y2"],t)&&"height"===e?{field:{group:"height"}}:WK(e)}function u2(t){return t&&"number"!==t&&"time"!==t}function c2(t,e,n){return`${t}(${e}${n?`, ${BX(n)}`:""})`}function h2({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:o}){var s,a;if(u2(n))return d2({fieldOrDatumDef:t,format:e,formatType:n,expr:r,config:o});const l=f2(t,r,i);if(d3(t)){const n=function(t,e,n,r,i){return!e||n?`${i?"utc":"time"}Format(${t}, '${n=lv(n)?n:r}')`:function(t,e,n){if(!t)return;const r=H0(t);return`${n||U0(t)?"utc":"time"}Format(${e}, ${r})`}(e,t,i)}(l,I2(t)?null===(s=W0(t.timeUnit))||void 0===s?void 0:s.unit:void 0,e,o.timeFormat,W2(t)&&"utc"===(null===(a=t.scale)||void 0===a?void 0:a.type));return n?{signal:n}:void 0}return e=m2(z2(t),e,o),I2(t)&&CK(t.bin)?{signal:b2(l,Q2(t,{expr:r,binSuffix:"end"}),e,n,o)}:e||"quantitative"===z2(t)?{signal:`${y2(l,e)}`}:{signal:`isValid(${l}) ? ${l} : ""+${l}`}}function f2(t,e,n){return I2(t)?n?`${Q2(t,{expr:e,suffix:"end"})}-${Q2(t,{expr:e,suffix:"start"})}`:Q2(t,{expr:e}):function(t){const{datum:e}=t;return F0(e)?I0(e):`${BX(e)}`}(t)}function d2({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){return null!=s||(s=f2(t,r,i)),I2(t)&&CK(t.bin)?{signal:b2(s,Q2(t,{expr:r,binSuffix:"end"}),e,n,o)}:{signal:c2(n,s,e)}}function p2(t,e,n,r,i,o){var s;if(!u2(r))return d3(t)?function(t,e,n,r){return t||(e?{signal:H0(e)}:r?void 0:n.timeFormat)}(n,I2(t)?null===(s=W0(t.timeUnit))||void 0===s?void 0:s.unit:void 0,i,o):m2(e,n,i)}function g2(t,e,n){return t&&(RK(t)||"number"===t||"time"===t)?t:d3(e)&&"time"!==n&&"utc"!==n?"time":void 0}function m2(t,e,n){return lv(e)?e:t===s1?n.numberFormat:void 0}function y2(t,e){return`format(${t}, "${e||""}")`}function v2(t,e,n,r){var i;return u2(n)?c2(n,t,e):y2(t,null!==(i=lv(e)?e:void 0)&&void 0!==i?i:r.numberFormat)}function b2(t,e,n,r,i){const o=v2(t,n,r,i),s=v2(e,n,r,i);return`${r1(t,!1)} ? "null" : ${o} + " \u2013 " + ${s}`}const _2="min",x2={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function w2(t){return t in x2}function k2(t){return!!t&&!!t.encoding}function E2(t){return!(!t||"count"!==t.op&&!t.field)}function S2(t){return!!t&&fy(t)}function O2(t){return"row"in t||"column"in t}function C2(t){return!!t&&"header"in t}function A2(t){return"facet"in t}var D2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function T2(t){const{field:e,timeUnit:n,bin:r,aggregate:i}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:e})}function M2(t){return"sort"in t}function F2({fieldDef:t,fieldDef2:e,markDef:n,config:r}){if(q2(t)&&void 0!==t.bandPosition)return t.bandPosition;if(I2(t)){const{timeUnit:i,bin:o}=t;if(i&&!e)return G1(n.type)?0:QK("timeUnitBandPosition",n,r);if(CK(o))return.5}}function j2({channel:t,fieldDef:e,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var a,l,u;const c=tK(t),h=XK(s?"size":c,r,i,{vgChannel:c});if(void 0!==h)return h;if(I2(e)){const{timeUnit:t,bin:s}=e;if(t&&!n)return{band:QK("timeUnitBandSize",r,i)};if(CK(s)&&!x1(o))return{band:1}}return G1(r.type)?o?x1(o)?(null===(a=i[r.type])||void 0===a?void 0:a.discreteBandSize)||{band:1}:null===(l=i[r.type])||void 0===l?void 0:l.continuousBandSize:null===(u=i[r.type])||void 0===u?void 0:u.discreteBandSize:void 0}function P2(t,e,n,r){return!!(CK(t.bin)||t.timeUnit&&V2(t)&&"temporal"===t.type)&&void 0!==F2({fieldDef:t,fieldDef2:e,markDef:n,config:r})}function N2(t){return!!t&&"condition"in t}function R2(t){const e=t&&t.condition;return!!e&&!fy(e)&&I2(e)}function $2(t){const e=t&&t.condition;return!!e&&!fy(e)&&q2(e)}function I2(t){return!(!t||!t.field&&"count"!==t.aggregate)}function z2(t){return t&&t.type}function L2(t){return!!t&&"datum"in t}function U2(t){return V2(t)&&!K2(t)||B2(t)}function B2(t){return L2(t)&&sv(t.datum)}function q2(t){return I2(t)||L2(t)}function V2(t){return!!t&&("field"in t||"count"===t.aggregate)&&"type"in t}function H2(t){return t&&"value"in t&&"value"in t}function W2(t){return!!t&&("scale"in t||"sort"in t)}function G2(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function Z2(t){return!!t&&"legend"in t}function Y2(t){return!!t&&("format"in t||"formatType"in t)}function X2(t){return UX(t,["legend","axis","header","scale"])}function Q2(t,e={}){var n,r,i;let o=t.field;const s=e.prefix;let a=e.suffix,l="";if(function(t){return"count"===t.aggregate}(t))o=wQ("count");else{let s;if(!e.nofn)if(function(t){return"op"in t}(t))s=t.op;else{const{bin:u,aggregate:c,timeUnit:h}=t;CK(u)?(s=OK(u),a=(null!==(n=e.binSuffix)&&void 0!==n?n:"")+(null!==(r=e.suffix)&&void 0!==r?r:"")):c?_K(c)?(l=`["${o}"]`,o=`argmax_${c.argmax}`):bK(c)?(l=`["${o}"]`,o=`argmin_${c.argmin}`):s=String(c):h&&(s=function(t){const e=W0(t),{utc:n}=e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["utc"]);return r.unit?(n?"utc":"")+rQ(r).map(t=>aQ(`${"unit"===t?"":`_${t}_`}${r[t]}`)).join(""):(n?"utc":"")+"timeunit"+rQ(r).map(t=>aQ(`_${t}_${r[t]}`)).join("")}(h),a=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+(null!==(i=e.suffix)&&void 0!==i?i:""))}s&&(o=o?`${s}_${o}`:s)}return a&&(o=`${o}_${a}`),s&&(o=`${s}_${o}`),e.forAs?mQ(o):e.expr?fQ(o,e.expr)+l:pQ(o)+l}function K2(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return I2(t)&&!!t.bin;case"temporal":return!1}throw new Error(v.invalidFieldType(t.type))}const J2=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return function(t){const{aggregate:e,bin:n,timeUnit:r,field:i}=t;if(_K(e))return`${i} for argmax(${e.argmax})`;if(bK(e))return`${i} for argmin(${e.argmin})`;const o=W0(r),s=e||(null==o?void 0:o.unit)||(null==o?void 0:o.maxbins)&&"timeunit"||CK(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}(t);default:return function(t,e){var n;const{field:r,bin:i,timeUnit:o,aggregate:s}=t;if("count"===s)return e.countTitle;if(CK(i))return`${r} (binned)`;if(o){const t=null===(n=W0(o))||void 0===n?void 0:n.unit;if(t)return`${r} (${q0(t).join("-")})`}else if(s)return _K(s)?`${r} for max ${s.argmax}`:bK(s)?`${r} for min ${s.argmin}`:`${cQ(s)} of ${r}`;return r}(t,e)}};let t3=J2;function e3(t){t3=t}function n3(t,e,{allowDisabling:n,includeDefault:r=!0}){var i,o;const s=null===(i=r3(t))||void 0===i?void 0:i.title;if(!I2(t))return s;const a=t,l=r?i3(a,e):void 0;return n?vQ(s,a.title,l):null!==(o=null!=s?s:a.title)&&void 0!==o?o:l}function r3(t){return G2(t)&&t.axis?t.axis:Z2(t)&&t.legend?t.legend:C2(t)&&t.header?t.header:void 0}function i3(t,e){return t3(t,e)}function o3(t){var e;if(Y2(t)){const{format:e,formatType:n}=t;return{format:e,formatType:n}}{const n=null!==(e=r3(t))&&void 0!==e?e:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function s3(t){return I2(t)?t:R2(t)?t.condition:void 0}function a3(t){return q2(t)?t:$2(t)?t.condition:void 0}function l3(t,e,n,r={}){if(lv(t)||sv(t)||rv(t)){const n=lv(t)?"string":sv(t)?"number":"boolean";return M0(v.primitiveChannelDef(e,n,t)),{value:t}}return q2(t)?u3(t,e,n,r):$2(t)?Object.assign(Object.assign({},t),{condition:u3(t.condition,e,n,r)}):t}function u3(t,e,n,r){if(Y2(t)){const{formatType:i}=t,o=D2(t,["format","formatType"]);if(u2(i)&&!n.customFormatTypes)return M0(v.customFormatTypeNotAllowed(e)),u3(o,e,n,r)}else{const i=G2(t)?"axis":Z2(t)?"legend":C2(t)?"header":null;if(i&&t[i]){const o=t[i],{formatType:s}=o,a=D2(o,["format","formatType"]);if(u2(s)&&!n.customFormatTypes)return M0(v.customFormatTypeNotAllowed(e)),u3(Object.assign(Object.assign({},t),{[i]:a}),e,n,r)}}return I2(t)?c3(t,e,r):function(t){let e=t.type;if(e)return t;const{datum:n}=t;return e=sv(n)?"quantitative":lv(n)?"nominal":F0(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:e})}(t)}function c3(t,e,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=t,a=Object.assign({},t);if(n||!r||xK(r)||_K(r)||bK(r)||(M0(v.invalidAggregate(r)),delete a.aggregate),i&&(a.timeUnit=W0(i)),s&&(a.field=`${s}`),CK(o)&&(a.bin=h3(o,e)),AK(o)&&!oK(e)&&M0(v.channelShouldNotBeUsedForBinned(e)),V2(a)){const{type:t}=a,e=function(t){if(t)switch(t=t.toLowerCase()){case"q":case s1:return"quantitative";case"t":case l1:return"temporal";case"o":case a1:return"ordinal";case"n":case u1:return"nominal";case c1:return"geojson"}}(t);t!==e&&(a.type=e),"quantitative"!==t&&kK(r)&&(M0(v.invalidFieldTypeForCountAggregate(t,r)),a.type="quantitative")}else if(!XQ(e)){const t=function(t,e){var n;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(M2(t)&&fy(t.sort))return"ordinal";const{aggregate:r,bin:i,timeUnit:o}=t;if(o)return"temporal";if(i||r&&!_K(r)&&!bK(r))return"quantitative";if(W2(t)&&(null===(n=t.scale)||void 0===n?void 0:n.type))switch(h1[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(a,e);a.type=t}if(V2(a)){const{compatible:t,warning:n}=function(t,e){const n=t.type;if("geojson"===n&&"shape"!==e)return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case CQ:case AQ:case"facet":return K2(t)?f3:{compatible:!1,warning:v.channelShouldBeDiscrete(e)};case"x":case"y":case FQ:case jQ:case PQ:case"text":case"detail":case"key":case"tooltip":case"href":case"url":case"angle":case TQ:case DQ:case"description":return f3;case"longitude":case"longitude2":case"latitude":case"latitude2":return n!==s1?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:f3;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"size":case MQ:case"radius2":case"x2":case"y2":return"nominal"!==n||t.sort?f3:{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`};case NQ:case"strokeDash":return K2(t)||W2(r=t)&&E1(null===(i=r.scale)||void 0===i?void 0:i.type)?f3:{compatible:!1,warning:v.channelShouldBeDiscreteOrDiscretizing(e)};case"order":return"nominal"!==t.type||"sort"in t?f3:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}var r,i}(a,e)||{};!1===t&&M0(n)}if(M2(a)&&lv(a.sort)){const{sort:t}=a;if(w2(t))return Object.assign(Object.assign({},a),{sort:{encoding:t}});const e=t.substr(1);if("-"===t.charAt(0)&&w2(e))return Object.assign(Object.assign({},a),{sort:{encoding:e,order:"descending"}})}if(C2(a)){const{header:t}=a;if(t){const{orient:e}=t,n=D2(t,["orient"]);if(e)return Object.assign(Object.assign({},a),{header:Object.assign(Object.assign({},n),{labelOrient:t.labelOrient||e,titleOrient:t.titleOrient||e})})}}return a}function h3(t,e){return rv(t)?{maxbins:MK(e)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:Object.assign(Object.assign({},t),{maxbins:MK(e)})}const f3={compatible:!0};function d3(t){const{formatType:e}=o3(t);return"time"===e||!e&&(n=t)&&("temporal"===n.type||I2(n)&&!!n.timeUnit);var n}function p3(t,{timeUnit:e,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var o;const s=e&&(null===(o=W0(e))||void 0===o?void 0:o.unit);let a,l=s||"temporal"===n;return FK(t)?a=t.expr:RK(t)?a=t.signal:F0(t)?(l=!0,a=I0(t)):(lv(t)||sv(t))&&l&&(a=`datetime(${BX(t)})`,function(t){return!!z0[t]}(s)&&(sv(t)&&t<1e4||lv(t)&&isNaN(Date.parse(t)))&&(a=I0({[s]:t}))),a?r&&l?`time(${a})`:a:i?void 0:BX(t)}function g3(t,e){const{type:n}=t;return e.map(e=>{const r=p3(e,{timeUnit:I2(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:e})}function m3(t,e){return CK(t.bin)?dK(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}const y3={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function v3(t){return t&&t.condition}const b3=["domain","grid","labels","ticks","title"],_3={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},x3={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},w3=Object.assign(Object.assign({},x3),{style:1,labelExpr:1,encoding:1});function k3(t){return!!w3[t]}rQ(w3);const E3=rQ({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function S3(t){return"mark"in t}class O3{constructor(t,e){this.name=t,this.run=e}hasMatchingType(t){return!!S3(t)&&(Y1(e=t.mark)?e.type:e)===this.name;var e}}function C3(t,e){const n=t&&t[e];return!!n&&(fy(n)?WX(n,t=>!!t.field):I2(n)||R2(n))}function A3(t){return WX(HQ,e=>{if(C3(t,e)){const n=t[e];if(fy(n))return WX(n,t=>!!t.aggregate);{const t=s3(n);return t&&!!t.aggregate}}return!1})}function D3(t,e){const n=[],r=[],i=[],o=[],s={};return M3(t,(a,l)=>{if(I2(a)){const{field:u,aggregate:c,bin:h,timeUnit:f}=a,d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(a,["field","aggregate","bin","timeUnit"]);if(c||f||h){const t=r3(a),p=t&&t.title;let g=Q2(a,{forAs:!0});const m=Object.assign(Object.assign(Object.assign({},p?[]:{title:n3(a,e,{allowDisabling:!0})}),d),{field:g});if(c){let t;if(_K(c)?(t="argmax",g=Q2({op:"argmax",field:c.argmax},{forAs:!0}),m.field=`${g}.${u}`):bK(c)?(t="argmin",g=Q2({op:"argmin",field:c.argmin},{forAs:!0}),m.field=`${g}.${u}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(t=c),t){const e={op:t,as:g};u&&(e.field=u),o.push(e)}}else if(n.push(g),V2(a)&&CK(h))r.push({bin:h,field:u,as:g}),n.push(Q2(a,{binSuffix:"end"})),m3(a,l)&&n.push(Q2(a,{binSuffix:"range"})),oK(l)&&(s[`${l}2`]={field:`${g}_end`}),m.bin="binned",XQ(l)||(m.type=s1);else if(f){i.push({timeUnit:f,field:u,as:g});const t=V2(a)&&a.type!==l1&&"time";t&&("text"===l||"tooltip"===l?m.formatType=t:function(t){return!!eK[t]}(l)?m.legend=Object.assign({formatType:t},m.legend):oK(l)&&(m.axis=Object.assign({formatType:t},m.axis)))}s[l]=m}else n.push(u),s[l]=t[l]}else s[l]=t[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function T3(t,e){const n={};for(const r of rQ(t)){const i=l3(t[r],r,e,{compositeMark:!0});n[r]=i}return n}function M3(t,e,n){if(t)for(const r of rQ(t)){const i=t[r];if(fy(i))for(const t of i)e.call(n,t,r);else e.call(n,i,r)}}function F3(t,e){return rQ(e).reduce((n,r)=>{switch(r){case"x":case"y":case"href":case"description":case"url":case"x2":case"y2":case TQ:case MQ:case DQ:case"radius2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case NQ:case"angle":case"tooltip":return n;case"order":if("line"===t||"trail"===t)return n;case"detail":case"key":{const t=e[r];if(fy(t)||I2(t))for(const e of $y(t))e.aggregate||n.push(Q2(e,{}));return n}case"size":if("trail"===t)return n;case FQ:case jQ:case PQ:case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeDash":case"strokeWidth":{const t=s3(e[r]);return t&&!t.aggregate&&n.push(Q2(t,{})),n}}},[])}var j3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function P3(t,e,n,r=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...t.map(({fieldPrefix:t,titlePrefix:n})=>{const i=r?` of ${N3(e)}`:"";return{field:t+e.field,type:e.type,title:RK(n)?{signal:`${n}"${escape(i)}"`}:n+i}}),...XX(function(t){const e=[];for(const n of rQ(t))if(C3(t,n)){const r=$y(t[n]);for(const t of r)I2(t)?e.push(t):R2(t)&&e.push(t.condition)}return e}(n).map(X2),qX)]}}function N3(t){const{title:e,field:n}=t;return vQ(e,n)}function R3(t,e,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c,extraEncoding:h={}})=>{const f=N3(n);return $3(t,a,i,{mark:l,encoding:Object.assign(Object.assign(Object.assign({[e]:Object.assign(Object.assign(Object.assign({field:`${u}_${n.field}`,type:n.type},void 0!==f?{title:f}:{}),void 0!==o?{scale:o}:{}),void 0!==s?{axis:s}:{})},lv(c)?{[`${e}2`]:{field:`${c}_${n.field}`}}:{}),r),h)})}}function $3(t,e,n,r){const{clip:i,color:o,opacity:s}=t,a=t.type;return t[e]||void 0===t[e]&&n[e]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[e]),i?{clip:i}:{}),o?{color:o}:{}),s?{opacity:s}:{}),Y1(r.mark)?r.mark:{type:r.mark}),{style:`${a}-${e}`}),rv(t[e])?{}:t[e])})]:[]}function I3(t,e,n){const{encoding:r}=t,i="vertical"===e?"y":"x",o=r[`${i}2`],s=r[`${i}Error`],a=r[`${i}Error2`];return{continuousAxisChannelDef:z3(r[i],n),continuousAxisChannelDef2:z3(o,n),continuousAxisChannelDefError:z3(s,n),continuousAxisChannelDefError2:z3(a,n),continuousAxis:i}}function z3(t,e){if(t&&t.aggregate){const{aggregate:n}=t,r=j3(t,["aggregate"]);return n!==e&&M0(v.errorBarContinuousAxisHasCustomizedAggregate(n,e)),r}return t}function L3(t,e){const{mark:n,encoding:r}=t,{x:i,y:o}=r;if(Y1(n)&&n.orient)return n.orient;if(U2(i)){if(U2(o)){const t=I2(i)&&i.aggregate,n=I2(o)&&o.aggregate;if(t||n!==e){if(n||t!==e){if(t===e&&n===e)throw new Error("Both x and y cannot have aggregate");return d3(o)&&!d3(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(U2(o))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}var U3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const B3=new O3("boxplot",V3);function q3(t){return sv(t)?"tukey":t}function V3(t,{config:e}){var n,r;t=Object.assign(Object.assign({},t),{encoding:T3(t.encoding,e)});const{mark:i,params:o}=t,s=U3(t,["mark","encoding","params","projection"]),a=Y1(i)?i:{type:i};o&&M0(v.selectionNotSupported("boxplot"));const l=null!==(n=a.extent)&&void 0!==n?n:e.boxplot.extent,u=XK("size",a,e),c=q3(l),{bins:h,timeUnits:f,transform:d,continuousAxisChannelDef:p,continuousAxis:g,groupby:m,aggregate:y,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:x,customTooltipWithoutAggregatedField:w}=function(t,e,n){const r=L3(t,"boxplot"),{continuousAxisChannelDef:i,continuousAxis:o}=I3(t,r,"boxplot"),s=i.field,a=q3(e),l=[...H3(s),{op:"median",field:s,as:`mid_box_${s}`},{op:"min",field:s,as:("min-max"===a?"lower_whisker_":"min_")+s},{op:"max",field:s,as:("min-max"===a?"upper_whisker_":"max_")+s}],u="min-max"===a||"tukey"===a?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:`iqr_${s}`},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${e}, datum["max_${s}"])`,as:`upper_whisker_${s}`},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${e}, datum["min_${s}"])`,as:`lower_whisker_${s}`}],c=U3(t.encoding,["symbol"==typeof o?o:o+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:f}=function(t){const{tooltip:e}=t,n=j3(t,["tooltip"]);if(!e)return{filteredEncoding:n};let r,i;if(fy(e)){for(const t of e)t.aggregate?(r||(r=[]),r.push(t)):(i||(i=[]),i.push(t));r&&(n.tooltip=r)}else e.aggregate?n.tooltip=e:i=e;return fy(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(c),{bins:d,timeUnits:p,aggregate:g,groupby:m,encoding:y}=D3(f,n),v="vertical"===r?"horizontal":"vertical",b=r;return{bins:d,timeUnits:p,transform:[...d,...p,{aggregate:[...g,...l],groupby:m},...u],groupby:m,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:v,boxOrient:b,customTooltipWithoutAggregatedField:h}}(t,l,e),{color:k,size:E}=b,S=U3(b,["color","size"]),O=t=>R3(a,g,p,t,e.boxplot),C=O(S),A=O(b),D=O(Object.assign(Object.assign({},S),E?{size:E}:{})),T=P3([{fieldPrefix:"min-max"===c?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===c?"lower_whisker_":"min_",titlePrefix:"Min"}],p,b),M={type:"tick",color:"black",opacity:1,orient:_,invalid:null,aria:!1},F="min-max"===c?T:P3([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,b),j=[...C({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:F}),...C({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:F}),...C({partName:"ticks",mark:M,positionPrefix:"lower_whisker",extraEncoding:F}),...C({partName:"ticks",mark:M,positionPrefix:"upper_whisker",extraEncoding:F})],P=[..."tukey"!==c?j:[],...A({partName:"box",mark:Object.assign(Object.assign({type:"bar"},u?{size:u}:{}),{orient:x,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:T}),...D({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},dy(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{}),u?{size:u}:{}),{orient:_,aria:!1}),positionPrefix:"mid_box",extraEncoding:T})];if("min-max"===c)return Object.assign(Object.assign({},s),{transform:(null!==(r=s.transform)&&void 0!==r?r:[]).concat(d),layer:P});const N=`datum["lower_box_${p.field}"]`,R=`datum["upper_box_${p.field}"]`,$=`(${R} - ${N})`,I=`${N} - ${l} * ${$}`,z=`${R} + ${l} * ${$}`,L=`datum["${p.field}"]`,U={joinaggregate:H3(p.field),groupby:m},B={transform:[{filter:`(${I} <= ${L}) && (${L} <= ${z})`},{aggregate:[{op:"min",field:p.field,as:`lower_whisker_${p.field}`},{op:"max",field:p.field,as:`upper_whisker_${p.field}`},{op:"min",field:`lower_box_${p.field}`,as:`lower_box_${p.field}`},{op:"max",field:`upper_box_${p.field}`,as:`upper_box_${p.field}`},...y],groupby:m}],layer:j},q=U3(S,["tooltip"]),{scale:V,axis:H}=p,W=N3(p),G=UX(H,["title"]),Z=$3(a,"outliers",e.boxplot,{transform:[{filter:`(${L} < ${I}) || (${L} > ${z})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[g]:Object.assign(Object.assign(Object.assign({field:p.field,type:p.type},void 0!==W?{title:W}:{}),void 0!==V?{scale:V}:{}),nQ(G)?{}:{axis:G})},q),k?{color:k}:{}),w?{tooltip:w}:{})})[0];let Y;const X=[...h,...f,U];return Z?Y={transform:X,layer:[Z,B]}:(Y=B,Y.transform.unshift(...X)),Object.assign(Object.assign({},s),{layer:[Y,{transform:d,layer:P}]})}function H3(t){return[{op:"q1",field:t,as:`lower_box_${t}`},{op:"q3",field:t,as:`upper_box_${t}`}]}var W3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const G3=new O3("errorbar",Z3);function Z3(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:T3(t.encoding,e)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=Y3(t,"errorbar",e);delete o.size;const c=R3(a,i,r,o,e.errorbar),h=a.thickness,f=a.size,d=Object.assign(Object.assign({type:"tick",orient:s,aria:!1},void 0!==h?{thickness:h}:{}),void 0!==f?{size:f}:{}),p=[...c({partName:"ticks",mark:d,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:d,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},void 0!==h?{size:h}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return Object.assign(Object.assign(Object.assign({},l),{transform:n}),p.length>1?{layer:p}:Object.assign({},p[0]))}function Y3(t,e,n){var r;const{mark:i,encoding:o,params:s}=t,a=W3(t,["mark","encoding","params","projection"]),l=Y1(i)?i:{type:i};s&&M0(v.selectionNotSupported(e));const{orient:u,inputType:c}=function(t,e){const{encoding:n}=t;if(function(t){return(q2(t.x)||q2(t.y))&&!q2(t.x2)&&!q2(t.y2)&&!q2(t.xError)&&!q2(t.xError2)&&!q2(t.yError)&&!q2(t.yError2)}(n))return{orient:L3(t,e),inputType:"raw"};const r=function(t){return q2(t.x2)||q2(t.y2)}(n),i=function(t){return q2(t.xError)||q2(t.xError2)||q2(t.yError)||q2(t.yError2)}(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);const t=n.x2,r=n.y2;if(q2(t)&&q2(r))throw new Error(`${e} cannot have both x2 and y2`);if(q2(t)){if(U2(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}if(q2(r)){if(U2(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}{const t=n.xError,r=n.yError,i=n.yError2;if(q2(n.xError2)&&!q2(t))throw new Error(`${e} cannot have xError2 without xError`);if(q2(i)&&!q2(r))throw new Error(`${e} cannot have yError2 without yError`);if(q2(t)&&q2(r))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(q2(t)){if(U2(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(q2(r)){if(U2(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}(t,e),{continuousAxisChannelDef:h,continuousAxisChannelDef2:f,continuousAxisChannelDefError:d,continuousAxisChannelDefError2:p,continuousAxis:g}=I3(t,u,e),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:b,tooltipTitleWithFieldName:_}=function(t,e,n,r,i,o,s,a){let l=[],u=[];const c=e.field;let h,f=!1;if("raw"===o){const e=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":a.errorbar.center,n=t.extent?t.extent:"mean"===e?"stderr":"iqr";if("median"===e!=("iqr"===n)&&M0(v.errorBarCenterIsUsedWithWrongExtent(e,n,s)),"stderr"===n||"stdev"===n)l=[{op:n,field:c,as:`extent_${c}`},{op:e,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],h=[{fieldPrefix:"center_",titlePrefix:cQ(e)},{fieldPrefix:"upper_",titlePrefix:X3(e,n,"+")},{fieldPrefix:"lower_",titlePrefix:X3(e,n,"-")}],f=!0;else{let t,e,r;"ci"===n?(t="mean",e="ci0",r="ci1"):(t="median",e="q1",r="q3"),l=[{op:e,field:c,as:`lower_${c}`},{op:r,field:c,as:`upper_${c}`},{op:t,field:c,as:`center_${c}`}],h=[{fieldPrefix:"upper_",titlePrefix:n3({field:c,aggregate:r,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:n3({field:c,aggregate:e,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:n3({field:c,aggregate:t,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&M0(v.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),"aggregated-upper-lower"===o?(h=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===o&&(h=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],u.push(i?{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}:{calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const t of u)h.push({fieldPrefix:t.as.substring(0,6),titlePrefix:gQ(gQ(t.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:f}}(l,h,f,d,p,c,e,n),x="x"===g?"x2":"y2",w="x"===g?"xError":"yError",k="x"===g?"xError2":"yError2",E=W3(o,["symbol"==typeof g?g:g+"","symbol"==typeof x?x:x+"","symbol"==typeof w?w:w+"","symbol"==typeof k?k:k+""]),{bins:S,timeUnits:O,aggregate:C,groupby:A,encoding:D}=D3(E,n),T=[...C,...m],M="raw"!==c?[]:A,F=P3(b,h,D,_);return{transform:[...null!==(r=a.transform)&&void 0!==r?r:[],...S,...O,...0===T.length?[]:[{aggregate:T,groupby:M}],...y],groupby:M,continuousAxisChannelDef:h,continuousAxis:g,encodingWithoutContinuousAxis:D,ticksOrient:"vertical"===u?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:F}}function X3(t,e,n){return`${cQ(t)} ${n} ${e}`}const Q3=new O3("errorband",K3);function K3(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:T3(t.encoding,e)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=Y3(t,"errorband",e),u=s,c=R3(u,i,r,o,e.errorband),h=void 0!==t.encoding.x&&void 0!==t.encoding.y;let f={type:h?"area":"rect"},d={type:h?"line":"rule"};const p=Object.assign(Object.assign({},u.interpolate?{interpolate:u.interpolate}:{}),u.tension&&u.interpolate?{tension:u.tension}:{});return h?(f=Object.assign(Object.assign(Object.assign({},f),p),{ariaRoleDescription:"errorband"}),d=Object.assign(Object.assign(Object.assign({},d),p),{aria:!1})):u.interpolate?M0(v.errorBand1DNotSupport("interpolate")):u.tension&&M0(v.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},a),{transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:d,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:d,positionPrefix:"upper",extraEncoding:l})]})}const J3={};function t5(t,e,n){const r=new O3(t,e);J3[t]={normalizer:r,parts:n}}t5("boxplot",V3,["box","median","outliers","rule","ticks"]),t5("errorbar",Z3,["ticks","rule"]),t5("errorband",K3,["band","borders"]);const e5=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],n5={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},r5={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},i5=rQ(n5),o5=rQ(r5),s5=rQ({header:1,headerRow:1,headerColumn:1,headerFacet:1}),a5=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],l5={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},u5=(rQ(l5),{point:{on:"click",fields:["_vgsid_"],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}});function c5(t){return!(!t||"legend"!==t&&!t.legend)}function h5(t){return c5(t)&&dy(t)}function f5(t){return!!t.select}var d5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function p5(t){const e=[];for(const n of t||[]){if(f5(n))continue;const{expr:t,bind:r}=n,i=d5(n,["expr","bind"]);if(r&&t){const n=Object.assign(Object.assign({},i),{bind:r,init:t});e.push(n)}else{const n=Object.assign(Object.assign(Object.assign({},i),t?{update:t}:{}),r?{bind:r}:{});e.push(n)}}return e}function g5(t){return"concat"in t}function m5(t){return"vconcat"in t}function y5(t){return"hconcat"in t}function v5(t){return dy(t)&&void 0!==t.step}function b5(t){return t.view||t.width||t.height}const _5=rQ({align:1,bounds:1,center:1,columns:1,spacing:1});function x5(t,e){var n;return null!==(n=t[e])&&void 0!==n?n:t["width"===e?"continuousWidth":"continuousHeight"]}function w5(t,e){const n=k5(t,e);return v5(n)?n.step:E5}function k5(t,e){var n;return vQ(null!==(n=t[e])&&void 0!==n?n:t["width"===e?"discreteWidth":"discreteHeight"],{step:t.step})}const E5=20,S5={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:E5},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5},rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:u5,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},O5=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],C5={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},A5={blue:O5[0],orange:O5[1],red:O5[2],teal:O5[3],green:O5[4],yellow:O5[5],purple:O5[6],pink:O5[7],brown:O5[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function D5(t){const e=rQ(t||{}),n={};for(const r of e){const e=t[r];n[r]=v3(e)?qK(e):VK(e)}return n}const T5=[...K1,...E3,...s5,"background","padding","legend","lineBreak","scale","style","title","view"];function M5(t={}){const{color:e,font:n,fontSize:r}=t,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["color","font","fontSize"]),o=gy({},S5,n?function(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}(n):{},e?function(t={}){return{signals:[{name:"color",value:dy(t)?Object.assign(Object.assign({},A5),t):A5}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(e):{},r?function(t){return{signals:[{name:"fontSize",value:dy(t)?Object.assign(Object.assign({},C5),t):C5}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},i||{}),s=UX(o,T5);for(const a of["background","lineBreak","padding"])o[a]&&(s[a]=VK(o[a]));for(const a of K1)o[a]&&(s[a]=jK(o[a]));for(const a of E3)o[a]&&(s[a]=D5(o[a]));for(const a of s5)o[a]&&(s[a]=jK(o[a]));return o.legend&&(s.legend=jK(o.legend)),o.scale&&(s.scale=jK(o.scale)),o.style&&(s.style=function(t){const e=rQ(t),n={};for(const r of e)n[r]=D5(t[r]);return n}(o.style)),o.title&&(s.title=jK(o.title)),o.view&&(s.view=jK(o.view)),s}const F5=["view",...Z1],j5=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],P5=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function N5(t,e,n,r){"view"===e&&(n="cell");const i=Object.assign(Object.assign({},r?t[e][r]:t[e]),t.style[null!=n?n:e]);nQ(i)||(t.style[null!=n?n:e]=i),r||delete t[e]}function R5(t){return"layer"in t}class $5{map(t,e){return A2(t)?this.mapFacet(t,e):function(t){return"repeat"in t}(t)?this.mapRepeat(t,e):y5(t)?this.mapHConcat(t,e):m5(t)?this.mapVConcat(t,e):g5(t)?this.mapConcat(t,e):this.mapLayerOrUnit(t,e)}mapLayerOrUnit(t,e){if(R5(t))return this.mapLayer(t,e);if(S3(t))return this.mapUnit(t,e);throw new Error(v.invalidSpec(t))}mapLayer(t,e){return Object.assign(Object.assign({},t),{layer:t.layer.map(t=>this.mapLayerOrUnit(t,e))})}mapHConcat(t,e){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(t=>this.map(t,e))})}mapVConcat(t,e){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(t=>this.map(t,e))})}mapConcat(t,e){const{concat:n}=t,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["concat"]);return Object.assign(Object.assign({},r),{concat:n.map(t=>this.map(t,e))})}mapFacet(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}mapRepeat(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}}const I5={zero:1,center:1,normalize:1},z5=new Set([F1,P1,j1,z1,$1,q1,V1,R1,L1,U1]),L5=new Set([P1,j1,F1]);function U5(t,e){var n,r;const i="x"===e?"y":"radius",o=t[e],s=t[i];if(I2(o)&&I2(s))if("quantitative"===z2(o)&&"quantitative"===z2(s)){if(o.stack)return e;if(s.stack)return i;const t=I2(o)&&!!o.aggregate;if(t!==(I2(s)&&!!s.aggregate))return t?e:i;{const t=null===(n=o.scale)||void 0===n?void 0:n.type,a=null===(r=s.scale)||void 0===r?void 0:r.type;if(t&&"linear"!==t)return i;if(a&&"linear"!==a)return e}}else{if("quantitative"===z2(o))return e;if("quantitative"===z2(s))return i}else{if("quantitative"===z2(o))return e;if("quantitative"===z2(s))return i}}function B5(t,e,n={}){var r,i;const o=Y1(t)?t.type:t;if(!z5.has(o))return null;const s=U5(e,"x")||U5(e,"theta");if(!s)return null;const a=e[s],l=I2(a)?Q2(a,{}):void 0;let u=function(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(s),c=e[u],h=I2(c)?Q2(c,{}):void 0;h===l&&(h=void 0,c=void 0,u=void 0);const f=nK.reduce((t,n)=>{if("tooltip"!==n&&C3(e,n)){const r=e[n];for(const e of $y(r)){const r=s3(e);if(r.aggregate)continue;const i=Q2(r,{});i&&i===h||t.push({channel:n,fieldDef:r})}}return t},[]);let d;if(void 0!==a.stack?d=rv(a.stack)?a.stack?"zero":null:a.stack:L5.has(o)&&(d="zero"),!d||!(d in I5))return null;if(A3(e)&&0===f.length)return null;if((null===(r=null==a?void 0:a.scale)||void 0===r?void 0:r.type)&&"linear"!==(null===(i=null==a?void 0:a.scale)||void 0===i?void 0:i.type)){if(n.disallowNonLinearStack)return null;M0(v.cannotStackNonLinearScale(a.scale.type))}return q2(e[JQ(s)])?(void 0!==a.stack&&M0(v.cannotStackRangedMark(s)),null):(I2(a)&&a.aggregate&&!HX(EK,a.aggregate)&&M0(v.stackNonSummativeAggregate(a.aggregate)),{groupbyChannel:c?u:void 0,groupbyField:h,fieldChannel:s,impute:null!==a.impute&&W1(o),stackBy:f,offset:d})}var q5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function V5(t){const e=q5(t,["point","line"]);return rQ(e).length>1?e:e.type}function H5(t){for(const e of["line","area","rule","trail"])t[e]&&(t=Object.assign(Object.assign({},t),{[e]:UX(t[e],["point","line"])}));return t}function W5(t,e={},n){return"transparent"===t.point?{opacity:0}:t.point?dy(t.point)?t.point:{}:void 0!==t.point?null:e.point||n.shape?dy(e.point)?e.point:{}:void 0}function G5(t,e={}){return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:e.line?!0===e.line?{}:e.line:void 0}class Z5{constructor(){this.name="path-overlay"}hasMatchingType(t,e){if(S3(t)){const{mark:n,encoding:r}=t,i=Y1(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!W5(i,e[i.type],r);case"area":return!!W5(i,e[i.type],r)||!!G5(i,e[i.type])}}return!1}run(t,e,n){const{config:r}=e,{params:i,projection:o,mark:s,encoding:a}=t,l=q5(t,["params","projection","mark","encoding"]),u=T3(a,r),c=Y1(s)?s:{type:s},h=W5(c,r[c.type],u),f="area"===c.type&&G5(c,r[c.type]),d=[Object.assign(Object.assign({},i?{params:i}:{}),{mark:V5(Object.assign(Object.assign({},"area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{}),c)),encoding:UX(u,["shape"])})],p=B5(c,u);let g=u;if(p){const{fieldChannel:t,offset:e}=p;g=Object.assign(Object.assign({},u),{[t]:Object.assign(Object.assign({},u[t]),e?{stack:e}:{})})}return f&&d.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"line"},LX(c,["clip","interpolate","tension","tooltip"])),f),encoding:g})),h&&d.push(Object.assign(Object.assign({},o?{projection:o}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},LX(c,["clip","tooltip"])),h),encoding:g})),n(Object.assign(Object.assign({},l),{layer:d}),Object.assign(Object.assign({},e),{config:H5(r)}))}}function Y5(t,e){return e?O2(t)?e6(t,e):K5(t,e):t}function X5(t,e){return e?e6(t,e):t}function Q5(t,e,n){const r=e[t];return(i=r)&&!lv(i)&&"repeat"in i?r.repeat in n?Object.assign(Object.assign({},e),{[t]:n[r.repeat]}):void M0(v.noSuchRepeatedValue(r.repeat)):e;var i}function K5(t,e){if(void 0!==(t=Q5("field",t,e))){if(null===t)return null;if(M2(t)&&E2(t.sort)){const n=Q5("field",t.sort,e);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function J5(t,e){if(I2(t))return K5(t,e);{const n=Q5("datum",t,e);return n===t||n.type||(n.type="nominal"),n}}function t6(t,e){if(!q2(t)){if($2(t)){const n=J5(t.condition,e);return n?Object.assign(Object.assign({},t),{condition:n}):function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["condition"])}return t}{const n=J5(t,e);if(n)return n;if(N2(t))return{condition:t.condition}}}function e6(t,e){const n={};for(const r in t)if(Qy(t,r)){const i=t[r];if(fy(i))n[r]=i.map(t=>t6(t,e)).filter(t=>t);else{const t=t6(i,e);void 0!==t&&(n[r]=t)}}return n}class n6{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(S3(t)){const{encoding:e,mark:n}=t;if("line"===n||Y1(n)&&"line"===n.type)for(const t of YQ){const n=e[QQ(t)];if(e[t]&&(I2(n)&&!AK(n.bin)||L2(n)))return!0}}return!1}run(t,e,n){const{encoding:r,mark:i}=t;return M0(v.lineWithRange(!!r.x2,!!r.y2)),console.log(i),n(Object.assign(Object.assign({},t),{mark:dy(i)?Object.assign(Object.assign({},i),{type:"rule"}):"rule"}),e)}}var r6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function i6({parentEncoding:t,encoding:e={},layer:n}){let r={};if(t){const i=new Set([...rQ(t),...rQ(e)]);for(const o of i){const i=e[o],s=t[o];if(q2(i)){const t=Object.assign(Object.assign({},s),i);r[o]=t}else $2(i)?r[o]=Object.assign(Object.assign({},i),{condition:Object.assign(Object.assign({},s),i.condition)}):i||null===i?r[o]=i:(n||H2(s)||RK(s)||q2(s)||fy(s))&&(r[o]=s)}}else r=e;return!r||nQ(r)?void 0:r}function o6(t){const{parentProjection:e,projection:n}=t;return e&&n&&M0(v.projectionOverridden({parentProjection:e,projection:n})),null!=n?n:e}function s6(t){return"filter"in t}function a6(t){return"lookup"in t}function l6(t){return"pivot"in t}function u6(t){return"density"in t}function c6(t){return"quantile"in t}function h6(t){return"regression"in t}function f6(t){return"loess"in t}function d6(t){return"sample"in t}function p6(t){return"window"in t}function g6(t){return"joinaggregate"in t}function m6(t){return"flatten"in t}function y6(t){return"calculate"in t}function v6(t){return"bin"in t}function b6(t){return"impute"in t}function _6(t){return"timeUnit"in t}function x6(t){return"aggregate"in t}function w6(t){return"stack"in t}function k6(t){return"fold"in t}var E6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function S6(t,e){const{transform:n}=t,r=E6(t,["transform"]);if(n){const t=n.map(t=>{if(s6(t))return{filter:A6(t,e)};if(v6(t)&&DK(t.bin))return Object.assign(Object.assign({},t),{bin:C6(t.bin)});if(a6(t)){const e=t.from,{selection:n}=e,r=E6(e,["selection"]);return n?Object.assign(Object.assign({},t),{from:Object.assign({param:n},r)}):t}return t});return Object.assign(Object.assign({},r),{transform:t})}return t}function O6(t,e){var n,r;const i=zX(t);if(I2(i)&&DK(i.bin)&&(i.bin=C6(i.bin)),W2(i)&&(null===(r=null===(n=i.scale)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.selection)){const t=i.scale.domain,{selection:e}=t,n=E6(t,["selection"]);i.scale.domain=Object.assign(Object.assign({},n),e?{param:e}:{})}if(N2(i))if(fy(i.condition))i.condition=i.condition.map(t=>{const{param:n}=t,r=E6(t,["selection","param","test"]);return n?t:Object.assign(Object.assign({},r),{test:A6(t,e)})});else{const t=O6(i.condition,e),{param:n}=t,r=E6(t,["selection","param","test"]);i.condition=n?i.condition:Object.assign(Object.assign({},r),{test:A6(i.condition,e)})}return i}function C6(t){const e=t.extent;if(null==e?void 0:e.selection){const{selection:n}=e,r=E6(e,["selection"]);return Object.assign(Object.assign({},t),{extent:Object.assign(Object.assign({},r),{param:n})})}return t}function A6(t,e){const n=t=>$X(t,t=>{var n,r,i;const o={param:t,empty:null===(n=e.emptySelections[t])||void 0===n||n};return null!==(r=(i=e.selectionPredicates)[t])&&void 0!==r||(i[t]=[]),e.selectionPredicates[t].push(o),o});return t.selection?n(t.selection):$X(t.test||t.filter,t=>t.selection?n(t.selection):t)}class D6 extends $5{map(t,e){var n;const r=null!==(n=e.selections)&&void 0!==n?n:[];if(t.params&&!S3(t)){const e=[];for(const n of t.params)f5(n)?r.push(n):e.push(n);t.params=e}return e.selections=r,super.map(t,T6(t,e))}mapUnit(t,e){var n;const r=e.selections;if(!r||!r.length)return t;const i=(null!==(n=e.path)&&void 0!==n?n:[]).concat(t.name),o=[];for(const s of r)if(s.views&&s.views.length)for(const e of s.views)(lv(e)&&(e===t.name||i.indexOf(e)>=0)||fy(e)&&e.map(t=>i.indexOf(t)).every((t,e,n)=>-1!==t&&(0===e||t>n[e-1])))&&o.push(s);else o.push(s);return o.length&&(t.params=o),t}}for(const Set of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=D6.prototype[Set];D6.prototype[Set]=function(e,n){return t.call(this,e,T6(e,n))}}function T6(t,e){var n;return t.name?Object.assign(Object.assign({},e),{path:(null!==(n=e.path)&&void 0!==n?n:[]).concat(t.name)}):e}function M6(t,e){void 0===e&&(e=M5(t.config));const n=function(t,e={}){const n={config:e};return P6.map(F6.map(j6.map(t,n),n),n)}(t,e),{width:r,height:i}=t,o=function(t,e,n){let{width:r,height:i}=e;const o=S3(t)||R5(t),s={};o?"container"==r&&"container"==i?(s.type="fit",s.contains="padding"):"container"==r?(s.type="fit-x",s.contains="padding"):"container"==i&&(s.type="fit-y",s.contains="padding"):("container"==r&&(M0(v.containerSizeNonSingle("width")),r=void 0),"container"==i&&(M0(v.containerSizeNonSingle("height")),i=void 0));const a=Object.assign(Object.assign(Object.assign({type:"pad"},s),n?N6(n.autosize):{}),N6(t.autosize));if("fit"!==a.type||o||(M0(v.FIT_NON_SINGLE),a.type="pad"),"container"==r&&"fit"!=a.type&&"fit-x"!=a.type&&M0(v.containerSizeNotCompatibleWithAutosize("width")),"container"==i&&"fit"!=a.type&&"fit-y"!=a.type&&M0(v.containerSizeNotCompatibleWithAutosize("height")),!IX(a,{type:"pad"}))return a}(n,{width:r,height:i,autosize:t.autosize},e);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const F6=new class extends $5{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[B3,G3,Q3,new Z5,new n6]}map(t,e){if(S3(t)){const n=C3(t.encoding,CQ),r=C3(t.encoding,AQ),i=C3(t.encoding,"facet");if(n||r||i)return this.mapFacetedUnit(t,e)}return super.map(t,e)}mapUnit(t,e){const{parentEncoding:n,parentProjection:r}=e,i=X5(t.encoding,e.repeater),o=Object.assign(Object.assign({},t),i?{encoding:i}:{});if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,e);const s=this.mapLayerOrUnit.bind(this);for(const a of this.nonFacetUnitNormalizers)if(a.hasMatchingType(o,e.config))return a.run(o,e,s);return o}mapRepeat(t,e){return function(t){return!fy(t.repeat)&&t.repeat.layer}(t)?this.mapLayerRepeat(t,e):this.mapNonLayerRepeat(t,e)}mapLayerRepeat(t,e){const{repeat:n,spec:r}=t,i=r6(t,["repeat","spec"]),{row:o,column:s,layer:a}=n,{repeater:l={},repeaterPrefix:u=""}=e;return o||s?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),s?{column:s}:{}),spec:{repeat:{layer:a},spec:r}}),e):Object.assign(Object.assign({},i),{layer:a.map(t=>{const n=Object.assign(Object.assign({},l),{layer:t}),i=`${(r.name||"")+u}child__layer_${aQ(t)}`,o=this.mapLayerOrUnit(r,Object.assign(Object.assign({},e),{repeater:n,repeaterPrefix:i}));return o.name=i,o})})}mapNonLayerRepeat(t,e){var n;const{repeat:r,spec:i,data:o}=t,s=r6(t,["repeat","spec","data"]);!fy(r)&&t.columns&&(t=UX(t,["columns"]),M0(v.columnsNotSupportByRowCol("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=e,c=!fy(r)&&r.row||[l?l.row:null],h=!fy(r)&&r.column||[l?l.column:null],f=fy(r)&&r||[l?l.repeat:null];for(const p of f)for(const t of c)for(const n of h){const o={repeat:p,row:t,column:n,layer:l.layer},s=(i.name||"")+u+"child__"+(fy(r)?`${aQ(p)}`:(r.row?`row_${aQ(t)}`:"")+(r.column?`column_${aQ(n)}`:"")),c=this.map(i,Object.assign(Object.assign({},e),{repeater:o,repeaterPrefix:s}));c.name=s,a.push(UX(c,["data"]))}const d=fy(r)?t.columns:r.column?r.column.length:1;return Object.assign(Object.assign({data:null!==(n=i.data)&&void 0!==n?n:o,align:"all"},s),{columns:d,concat:a})}mapFacet(t,e){const{facet:n}=t;return O2(n)&&t.columns&&(t=UX(t,["columns"]),M0(v.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,e)}mapUnitWithParentEncodingOrProjection(t,e){const{encoding:n,projection:r}=t,{parentEncoding:i,parentProjection:o,config:s}=e,a=o6({parentProjection:o,projection:r}),l=i6({parentEncoding:i,encoding:X5(n,e.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),a?{projection:a}:{}),l?{encoding:l}:{}),{config:s})}mapFacetedUnit(t,e){const n=t.encoding,{row:r,column:i,facet:o}=n,s=r6(n,["row","column","facet"]),{mark:a,width:l,projection:u,height:c,view:h,params:f}=t,d=r6(t,["mark","width","projection","height","view","params","encoding"]),{facetMapping:p,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},e),m=X5(s,e.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},d),g),{facet:p,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{width:l}:{}),c?{height:c}:{}),h?{view:h}:{}),u?{projection:u}:{}),{mark:a,encoding:m}),f?{params:f}:{})}),e)}getFacetMappingAndLayout(t,e){var n;const{row:r,column:i,facet:o}=t;if(r||i){o&&M0(v.facetChannelDropped([...r?[CQ]:[],...i?[AQ]:[]]));const e={},s={};for(const r of[CQ,AQ]){const i=t[r];if(i){const t=r6(i,["align","center","spacing","columns"]);e[r]=t;for(const e of["align","center","spacing"])void 0!==i[e]&&(null!==(n=s[e])&&void 0!==n||(s[e]={}),s[e][r]=i[e])}}return{facetMapping:e,layout:s}}{const{align:t,center:n,spacing:r,columns:i}=o;return{facetMapping:Y5(r6(o,["align","center","spacing","columns"]),e.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},t?{align:t}:{}),n?{center:n}:{}),r?{spacing:r}:{}),i?{columns:i}:{})}}}mapLayer(t,e){var{parentEncoding:n,parentProjection:r}=e,i=r6(e,["parentEncoding","parentProjection"]);const{encoding:o,projection:s}=t,a=r6(t,["encoding","projection"]),l=Object.assign(Object.assign({},i),{parentEncoding:i6({parentEncoding:n,encoding:o,layer:!0}),parentProjection:o6({parentProjection:r,projection:s})});return super.mapLayer(a,l)}},j6=new class extends $5{map(t,e){var n,r;return null!==(n=e.emptySelections)&&void 0!==n||(e.emptySelections={}),null!==(r=e.selectionPredicates)&&void 0!==r||(e.selectionPredicates={}),t=S6(t,e),super.map(t,e)}mapLayerOrUnit(t,e){if((t=S6(t,e)).encoding){const n={};for(const[r,i]of oQ(t.encoding))n[r]=O6(i,e);t=Object.assign(Object.assign({},t),{encoding:n})}return super.mapLayerOrUnit(t,e)}mapUnit(t,e){const n=t,{selection:r}=n,i=E6(n,["selection"]);return r?Object.assign(Object.assign({},i),{params:oQ(r).map(([t,n])=>{var r;const i=n,{init:o,bind:s,empty:a}=i,l=E6(i,["init","bind","empty"]);"single"===l.type?(l.type="point",l.toggle=!1):"multi"===l.type&&(l.type="point"),e.emptySelections[t]="none"!==a;for(const u of iQ(null!==(r=e.selectionPredicates[t])&&void 0!==r?r:{}))u.empty="none"!==a;return{name:t,value:o,select:l,bind:s}})}):t}},P6=new D6;function N6(t){return lv(t)?{type:t}:null!=t?t:{}}const R6=["background","padding"];function $6(t,e){const n={};for(const r of R6)t&&void 0!==t[r]&&(n[r]=VK(t[r]));return e&&(n.params=t.params),n}class I6{constructor(t={},e={}){this.explicit=t,this.implicit=e}clone(){return new I6(zX(this.explicit),zX(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return vQ(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:e,explicit:n}){void 0!==e&&this.set(t,e,n)}set(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this}copyKeyFromSplit(t,{explicit:e,implicit:n}){void 0!==e[t]?this.set(t,e[t],!0):void 0!==n[t]&&this.set(t,n[t],!1)}copyKeyFromObject(t,e){void 0!==e[t]&&this.set(t,e[t],!0)}copyAll(t){for(const e of rQ(t.combine())){const n=t.getWithExplicit(e);this.setWithExplicit(e,n)}}}function z6(t){return{explicit:!0,value:t}}function L6(t){return{explicit:!1,value:t}}function U6(t){return(e,n,r,i)=>{const o=t(e.value,n.value);return o>0?e:o<0?n:B6(e,n,r,i)}}function B6(t,e,n,r){return t.explicit&&e.explicit&&M0(v.mergeConflictingProperty(n,r,t.value,e.value)),t}function q6(t,e,n,r,i=B6){return void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:IX(t.value,e.value)?t:i(t,e,n,r)}class V6 extends I6{constructor(t={},e={},n=!1){super(t,e),this.explicit=t,this.implicit=e,this.parseNothing=n}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function H6(t){return"url"in t}function W6(t){return"values"in t}function G6(t){return"name"in t&&!H6(t)&&!W6(t)&&!Z6(t)}function Z6(t){return t&&(Y6(t)||X6(t)||Q6(t))}function Y6(t){return"sequence"in t}function X6(t){return"sphere"in t}function Q6(t){return"graticule"in t}var K6;!function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup"}(K6||(K6={}));var J6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function t4(t,e=!0,n=ty){if(fy(t)){const r=t.map(t=>t4(t,e,n));return e?`[${r.join(", ")}]`:r}return F0(t)?n(e?I0(t):function(t){const e=$0(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}(t)):e?n(BX(t)):t}function e4(t,e){var n;for(const r of iQ(null!==(n=t.component.selection)&&void 0!==n?n:{})){const n=r.name;let i=`${n}${J4}, `+("global"===r.resolve?"true":`{unit: ${r8(t)}}`);for(const o of n8)o.defined(r)&&(o.signals&&(e=o.signals(t,r,e)),o.modifyExpr&&(i=o.modifyExpr(t,r,i)));e.push({name:n+t8,on:[{events:{signal:r.name+J4},update:`modify(${mv(r.name+K4)}, ${i})`}]})}return r4(e)}function n4(t,e){var n;for(const r of iQ(null!==(n=t.component.selection)&&void 0!==n?n:{}))for(const n of n8)n.defined(r)&&n.marks&&(e=n.marks(t,r,e));return e}function r4(t){return t.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class i4{constructor(t,e){this.debugName=e,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,e){this._children.includes(t)?M0(v.ADD_SAME_CHILD_TWICE):void 0!==e?this._children.splice(e,0,t):this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);return this._children.splice(e,1),e}remove(){let t=this._parent.removeChild(this);for(const e of this._children)e._parent=this._parent,this._parent.addChild(e,t++)}insertAsParentOf(t){const e=t.parent;e.removeChild(this),this.parent=e,t.parent=this}swapWithParent(){const t=this._parent,e=t.parent;for(const n of this._children)n.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=e,t.parent=this}}class o4 extends i4{constructor(t,e,n,r){super(t,e),this.type=n,this.refCounts=r,this._source=this._name=e,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${_Q()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}var s4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class a4 extends i4{constructor(t,e){super(t),this.formula=e}clone(){return new a4(null,zX(this.formula))}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,e)=>{const{field:n,timeUnit:r}=e;if(r){const i=Q2(e,{forAs:!0});t[qX({as:i,field:n,timeUnit:r})]={as:i,field:n,timeUnit:r}}return t},{});return nQ(n)?null:new a4(t,n)}static makeFromTransform(t,e){const n=Object.assign({},e),{timeUnit:r}=n,i=s4(n,["timeUnit"]),o=W0(r),s=Object.assign(Object.assign({},i),{timeUnit:o});return new a4(t,{[qX(s)]:s})}merge(t){this.formula=Object.assign({},this.formula);for(const e in t.formula)this.formula[e]||(this.formula[e]=t.formula[e]);for(const e of t.children)t.removeChild(e),e.parent=this;t.remove()}removeFormulas(t){const e={};for(const[n,r]of oQ(this.formula))t.has(r.as)||(e[n]=r);this.formula=e}producedFields(){return new Set(iQ(this.formula).map(t=>t.as))}dependentFields(){return new Set(iQ(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${qX(this.formula)}`}assemble(){const t=[];for(const e of iQ(this.formula)){const{field:n,as:r,timeUnit:i}=e,o=W0(i),{unit:s,utc:a}=o,l=s4(o,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:pQ(n),type:"timeunit"},s?{units:q0(s)}:{}),a?{timezone:"utc"}:{}),l),{as:[r,`${r}_end`]}))}return t}}class l4{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}var u4={defined:()=>!0,parse:(t,e,n)=>{var r;const i=e.name,o=null!==(r=e.project)&&void 0!==r?r:e.project=new l4,s={},a={},l=new Set,u=(t,e)=>{const n="visual"===e?t.channel:t.field;let r=aQ(`${i}_${n}`);for(let o=1;l.has(r);o++)r=aQ(`${i}_${n}_${o}`);return l.add(r),{[e]:r}},c=e.type,h=t.config.selection[c],f=void 0!==n.value?$y(n.value):null;let{fields:d,encodings:p}=dy(n.select)?n.select:{};if(!d&&!p&&f)for(const g of f)if(dy(g))for(const t of rQ(g))GQ[t]?(p||(p=[])).push(t):"interval"===c?(M0(v.INTERVAL_INITIALIZED_WITH_X_Y),p=h.encodings):(d||(d=[])).push(t);d||p||(p=h.encodings,d=h.fields);for(const g of null!=p?p:[]){const e=t.fieldDef(g);if(e){let n=e.field;if(e.aggregate){M0(v.cannotProjectAggregate(g,e.aggregate));continue}if(!n){M0(v.cannotProjectOnChannelWithoutField(g));continue}if(e.timeUnit){n=t.vgField(g);const r={timeUnit:e.timeUnit,as:n,field:e.field};a[qX(r)]=r}if(!s[n]){let r="E";"interval"===c?w1(t.getScaleComponent(g).get("type"))&&(r="R"):e.bin&&(r="R-RE");const i={field:n,channel:g,type:r};i.signals=Object.assign(Object.assign({},u(i,"data")),u(i,"visual")),o.items.push(s[n]=i),o.hasField[n]=o.hasChannel[g]=s[n]}}else M0(v.cannotProjectOnChannelWithoutField(g))}for(const g of null!=d?d:[]){if(o.hasField[g])continue;const t={type:"E",field:g};t.signals=Object.assign({},u(t,"data")),o.items.push(t),o.hasField[g]=t}f&&(e.init=f.map(t=>o.items.map(e=>dy(t)?void 0!==t[e.channel]?t[e.channel]:t[e.field]:t))),nQ(a)||(o.timeUnit=new a4(null,a))},signals:(t,e,n)=>{const r=e.name+"_tuple_fields";return n.filter(t=>t.name===r).length>0?n:n.concat({name:r,value:e.project.items.map(t=>{const e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["signals","hasLegend"]);return e.field=pQ(e.field),e})})}},c4={defined:t=>"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind,parse:(t,e)=>{const n=e.scales=[];for(const r of e.project.items){const i=r.channel;if(!dK(i))continue;const o=t.getScaleComponent(i),s=o?o.get("type"):void 0;o&&w1(s)?(o.set("selectionExtent",{param:e.name,field:r.field},!0),n.push(r)):M0(v.SCALE_BINDINGS_CONTINUOUS)}},topLevelSignals:(t,e,n)=>{const r=e.scales.filter(t=>0===n.filter(e=>e.name===t.signals.data).length);if(!t.parent||f4(t)||0===r.length)return n;const i=n.filter(t=>t.name===e.name)[0];let o=i.update;if(o.indexOf(e8)>=0)i.update=`{${r.map(t=>`${mv(pQ(t.field))}: ${t.signals.data}`).join(", ")}}`;else{for(const t of r){const e=`${mv(pQ(t.field))}: ${t.signals.data}`;o.includes(e)||(o=`${o.substring(0,o.length-1)}, ${e}}`)}i.update=o}return n.concat(r.map(t=>({name:t.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!f4(t))for(const r of e.scales){const t=n.filter(t=>t.name===r.signals.data)[0];t.push="outer",delete t.value,delete t.update}return n}};function h4(t,e){return`domain(${mv(t.scaleName(e))})`}function f4(t){var e;return t.parent&&j7(t.parent)&&(null!==(e=!t.parent.parent)&&void 0!==e?e:f4(t.parent.parent))}var d4={defined:t=>"interval"===t.type,signals:(t,e,n)=>{const r=e.name,i=r+"_tuple_fields",o=c4.defined(e),s=e.init?e.init[0]:null,a=[],l=[];if(e.translate&&!o){const t=`!event.item || event.item.mark.name !== ${mv(r+"_brush")}`;p4(e,(e,n)=>{var r,i;const o=$y(null!==(r=(i=n.between[0]).filter)&&void 0!==r?r:i.filter=[]);return o.includes(t)||o.push(t),e})}e.project.items.forEach((r,i)=>{const o=r.channel;if("x"!==o&&"y"!==o)return void M0("Interval selections only support x and y encoding channels.");const u=function(t,e,n,r){const i=n.channel,o=n.signals.visual,s=n.signals.data,a=c4.defined(e),l=mv(t.scaleName(i)),u=t.getScaleComponent(i),c=u?u.get("type"):void 0,h=t=>`scale(${l}, ${t})`,f=t.getSizeSignalRef("x"===i?"width":"height").signal,d=`${i}(unit)`,p=p4(e,(t,e)=>[...t,{events:e.between[0],update:`[${d}, ${d}]`},{events:e,update:`[${o}[0], clamp(${d}, 0, ${f})]`}]);return p.push({events:{signal:e.name+"_scale_trigger"},update:w1(c)?`[${h(`${s}[0]`)}, ${h(`${s}[1]`)}]`:"[0, 0]"}),a?[{name:s,on:[]}]:[Object.assign(Object.assign({name:o},r?{init:t4(r,!0,h)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:s},r?{init:t4(r)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${l}, ${o})`}]})]}(t,e,r,s?s[i]:null),c=r.signals.data,h=r.signals.visual,f=mv(t.scaleName(o)),d=w1(t.getScaleComponent(o).get("type"))?"+":"";n.push(...u),a.push(c),l.push({scaleName:t.scaleName(o),expr:`(!isArray(${c}) || (${d}invert(${f}, ${h})[0] === ${d}${c}[0] && ${d}invert(${f}, ${h})[1] === ${d}${c}[1]))`})}),o||n.push({name:r+"_scale_trigger",value:{},on:[{events:l.map(t=>({scale:t.scaleName})),update:`${l.map(t=>t.expr).join(" && ")} ? ${r+"_scale_trigger"} : {}`}]});const u=`unit: ${r8(t)}, fields: ${i}, values`;return n.concat(Object.assign(Object.assign({name:r+J4},s?{init:`{${u}: ${t4(s)}}`}:{}),{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}))},marks:(t,e,n)=>{const r=e.name,{x:i,y:o}=e.project.hasChannel,s=i&&i.signals.visual,a=o&&o.signals.visual,l=`data(${mv(e.name+K4)})`;if(c4.defined(e))return n;const u={x:void 0!==i?{signal:`${s}[0]`}:{value:0},y:void 0!==o?{signal:`${a}[0]`}:{value:0},x2:void 0!==i?{signal:`${s}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${a}[1]`}:{field:{group:"height"}}};if("global"===e.resolve)for(const m of rQ(u))u[m]=[Object.assign({test:`${l}.length && ${l}[0].unit === ${r8(t)}`},u[m]),{value:0}];const c=e.mark,{fill:h,fillOpacity:f,cursor:d}=c,p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(c,["fill","fillOpacity","cursor"]),g=rQ(p).reduce((t,e)=>(t[e]=[{test:[void 0!==i&&`${s}[0] !== ${s}[1]`,void 0!==o&&`${a}[0] !== ${a}[1]`].filter(t=>t).join(" && "),value:p[e]},{value:null}],t),{});return[{name:r+"_brush_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:h},fillOpacity:{value:f}},update:u}},...n,{name:r+"_brush",type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},d?{cursor:{value:d}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},u),g)}}]}};function p4(t,e){return t.events.reduce((t,n)=>n.between?e(t,n):(M0(`${n} is not an ordered event stream for interval selections.`),t),[])}var g4={defined:t=>"point"===t.type,signals:(t,e,n)=>{const r=e.name,i=r+"_tuple_fields",o="(item().isVoronoi ? datum.datum : datum)",s=e.project.items.map(e=>{const n=t.fieldDef(e.channel);return n&&n.bin?`[${o}[${mv(t.vgField(e.channel,{}))}], ${o}[${mv(t.vgField(e.channel,{binSuffix:"end"}))}]]`:`${o}[${mv(e.field)}]`}).join(", "),a=`unit: ${r8(t)}, fields: ${i}, values`,l=e.events;return n.concat([{name:r+J4,on:l?[{events:l,update:`datum && item().mark.marktype !== 'group' ? {${a}: [${s}]} : null`,force:!0}]:[]}])}};function m4(t,e,n,r){const i=N2(e)&&e.condition,o=r(e);return i?{[n]:[...$y(i).map(e=>{const n=r(e);if(function(t){return t.param}(e)){const{param:r,empty:i}=e,o=h8(t,{param:r,empty:i});return Object.assign({test:o},n)}{const r=d8(t,e.test);return Object.assign({test:r},n)}}),...void 0!==o?[o]:[]]}:void 0!==o?{[n]:o}:{}}function y4(t,e="text"){return m4(t,t.encoding[e],e,e=>v4(e,t.config))}function v4(t,e,n="datum"){if(t){if(H2(t))return WK(t.value);if(q2(t)){const{format:r,formatType:i}=o3(t);return h2({fieldOrDatumDef:t,format:r,formatType:i,expr:n,config:e})}}}function b4(t,e={}){const{encoding:n,markDef:r,config:i,stack:o}=t,s=n.tooltip;if(fy(s))return{tooltip:x4({tooltip:s},o,i,e)};{const a=e.reactiveGeom?"datum.datum":"datum";return m4(t,s,"tooltip",t=>{const s=v4(t,i,a);if(s)return s;if(null===t)return;let l=XK("tooltip",r,i);return!0===l&&(l={content:"encoding"}),lv(l)?{value:l}:dy(l)?RK(l)?l:"encoding"===l.content?x4(n,o,i,e):{signal:a}:void 0})}}function _4(t,e,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",s=[];function a(r,a){const l=QQ(a),u=V2(r)?r:Object.assign(Object.assign({},r),{type:t[l].type}),c=$y(u.title||i3(u,n)).join(", ");let h;if(oK(a)){const r="x"===a?"x2":"y2",s=s3(t[r]);if(AK(u.bin)&&s){const t=Q2(u,{expr:o}),e=Q2(s,{expr:o}),{format:a,formatType:l}=o3(u);h=b2(t,e,a,l,n),i[r]=!0}else if(e&&e.fieldChannel===a&&"normalize"===e.offset){const{format:t,formatType:e}=o3(u);h=h2({fieldOrDatumDef:u,format:t,formatType:e,expr:o,config:n,normalizeStack:!0}).signal}}null!=h||(h=v4(u,n,o).signal),s.push({channel:a,key:c,value:h})}M3(t,(t,e)=>{I2(t)?a(t,e):R2(t)&&a(t.condition,e)});const l={};for(const{channel:u,key:c,value:h}of s)i[u]||l[c]||(l[c]=h);return l}function x4(t,e,n,{reactiveGeom:r}={}){const i=_4(t,e,n,{reactiveGeom:r}),o=oQ(i).map(([t,e])=>`"${t}": ${e}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function w4(t,e,n={}){const{markDef:r,encoding:i,config:o}=e,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;return void 0===a&&(null!=l||(l=XK(t,r,o,{vgChannel:s,ignoreVgConfig:!0})),void 0!==l&&(a=WK(l))),m4(e,i[t],null!=s?s:t,n=>a2({channel:t,channelDef:n,markDef:r,config:o,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:a}))}function k4(t,e={filled:void 0}){var n,r,i,o;const{markDef:s,encoding:a,config:l}=t,{type:u}=s,c=null!==(n=e.filled)&&void 0!==n?n:XK("filled",s,l),h=HX(["bar","point","circle","square","geoshape"],u)?"transparent":void 0,f=null!==(i=null!==(r=XK(!0===c?"color":void 0,s,l,{vgChannel:"fill"}))&&void 0!==r?r:l.mark[!0===c&&"color"])&&void 0!==i?i:h,d=null!==(o=XK(!1===c?"color":void 0,s,l,{vgChannel:"stroke"}))&&void 0!==o?o:l.mark[!1===c&&"color"],p=c?"fill":"stroke",g=Object.assign(Object.assign({},f?{fill:WK(f)}:{}),d?{stroke:WK(d)}:{});return s.color&&(c?s.fill:s.stroke)&&M0(v.droppingColor("property",{fill:"fill"in s,stroke:"stroke"in s})),Object.assign(Object.assign(Object.assign(Object.assign({},g),w4("color",t,{vgChannel:p,defaultValue:c?f:d})),w4("fill",t,{defaultValue:a.fill?f:void 0})),w4("stroke",t,{defaultValue:a.stroke?d:void 0}))}function E4(t,e){const n=e[function(t){switch(t){case"x":return"xOffset";case"y":return"yOffset";case"x2":return"x2Offset";case"y2":return"y2Offset";case TQ:return"thetaOffset";case DQ:return"radiusOffset";case MQ:return"theta2Offset";case"radius2":return"radius2Offset"}}(t)];if(n)return n}function S4(t,e,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=e,l=i[t],u=i[JQ(t)],c=e.scaleName(t),h=e.getScaleComponent(t),f=E4(t,o),d=O4({model:e,defaultPos:n,channel:t,scaleName:c,scale:h}),p=!l&&oK(t)&&(i.latitude||i.longitude)?{field:e.getName(t)}:function(t){const{channel:e,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=t;if(q2(n)&&i&&e===i.fieldChannel){if(I2(n)){let t=n.bandPosition;if(void 0!==t||"text"!==s.type||"radius"!==e&&"theta"!==e||(t=.5),void 0!==t)return s2({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:t,offset:o})}return o2(n,r,{suffix:"end"},{offset:o})}return e2(t)}({channel:t,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:h,stack:a,offset:f,defaultRef:d});return p?{[r||t]:p}:void 0}function O4({model:t,defaultPos:e,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=t;return()=>{const a=QQ(n),l=KQ(n),u=XK(n,o,s,{vgChannel:l});if(void 0!==u)return l2(n,u);switch(e){case"zeroOrMin":case"zeroOrMax":if(r)if(HX(["log","time","utc"],i.get("type")));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0};if("zeroOrMin"===e)return"y"===a?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const e=t[tK(n)];return Object.assign(Object.assign({},e),{mult:.5})}}}}const C4={left:"x",center:"xc",right:"x2"},A4={top:"y",middle:"yc",bottom:"y2"};function D4(t,e,n,r="middle"){if("radius"===t||"theta"===t)return KQ(t);const i="x"===t?"align":"baseline",o=XK(i,e,n);let s;return RK(o)?(M0(v.rangeMarkAlignmentCannotBeExpression(i)),s=void 0):s=o,"x"===t?C4[s||("top"===r?"left":"center")]:A4[s||r]}function T4(t,e,{defaultPos:n,defaultPos2:r,range:i}){return i?M4(t,e,{defaultPos:n,defaultPos2:r}):S4(t,e,{defaultPos:n})}function M4(t,e,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=e,s=JQ(t),a=tK(t),l=function(t,e,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=t,l=QQ(n),u=tK(n),c=KQ(n),h=r[l],f=t.scaleName(l),d=t.getScaleComponent(l),p=E4(n in r||n in o?n:l,t.markDef);if(!h&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude))return{[c]:{field:t.getName(n)}};const g=function({channel:t,channelDef:e,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return q2(e)&&a&&t.charAt(0)===a.fieldChannel.charAt(0)?o2(e,o,{suffix:"start"},{offset:l}):e2({channel:t,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}({channel:n,channelDef:h,channel2Def:r[n],markDef:o,config:a,scaleName:f,scale:d,stack:s,offset:p,defaultRef:void 0});return void 0!==g?{[c]:g}:F4(n,o)||F4(n,{[n]:KK(n,o,a.style),[u]:KK(u,o,a.style)})||F4(n,a[i])||F4(n,a.mark)||{[c]:O4({model:t,defaultPos:e,channel:n,scaleName:f,scale:d})()}}(e,r,s),u=l[a]?D4(t,i,o):KQ(t);return Object.assign(Object.assign({},S4(t,e,{defaultPos:n,vgChannel:u})),l)}function F4(t,e){const n=tK(t),r=KQ(t);if(void 0!==e[r])return{[r]:l2(t,e[r])};if(void 0!==e[t])return{[r]:l2(t,e[t])};if(e[n]){const r=e[n];if(!J1(r))return{[n]:l2(t,r)};M0(v.relativeBandSizeNotSupported(n))}}function j4(t,e,n){var r,i,o,s;const{config:a,encoding:l,markDef:u}=t,c=JQ(e),h=tK(e),f=l[e],d=l[c],p=t.getScaleComponent(e),g=p?p.get("type"):void 0,m=t.scaleName(e),y=u.orient,b=null!==(i=null!==(r=l[h])&&void 0!==r?r:l.size)&&void 0!==i?i:XK("size",u,a,{vgChannel:h}),_="bar"===n&&("x"===e?"vertical"===y:"horizontal"===y);if(!I2(f)||!(CK(f.bin)||AK(f.bin)||f.timeUnit&&!d)||b&&!J1(b)||x1(g))return(q2(f)&&x1(g)||_)&&!d?function(t,e,n,r){const{markDef:i,encoding:o,config:s,stack:a}=r,l=i.orient,u=r.scaleName(n),c=r.getScaleComponent(n),h=tK(n),f=JQ(n),d="horizontal"===l&&"y"===n||"vertical"===l&&"x"===n;let p;(o.size||i.size)&&(d?p=w4("size",r,{vgChannel:h,defaultRef:WK(i.size)}):M0(v.cannotApplySizeToNonOrientedMark(i.type)));const g=j2({channel:n,fieldDef:e,markDef:i,config:s,scaleType:null==c?void 0:c.get("type"),useVlSizeChannel:d});p=p||{[h]:P4(h,u,c,s,g)};const m=D4(n,i,s,"band"===(null==c?void 0:c.get("type"))&&"band"in p[h]?"top":"middle"),y="xc"===m||"yc"===m,b=E4(n,i),_=e2({channel:n,channelDef:e,markDef:i,config:s,scaleName:u,scale:c,stack:a,offset:b,defaultRef:O4({model:r,defaultPos:"mid",channel:n,scaleName:u,scale:c}),bandPosition:y?.5:RK(g)?{signal:`(1-${g})/2`}:J1(g)?(1-g.band)/2:0});if(h)return Object.assign({[m]:_},p);{const t=KQ(f),e=p[h],n=b?Object.assign(Object.assign({},e),{offset:b}):e;return{[m]:_,[t]:fy(_)?[_[0],Object.assign(Object.assign({},_[1]),{offset:n})]:Object.assign(Object.assign({},_),{offset:n})}}}(0,f,e,t):M4(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});{const n=j2({channel:e,fieldDef:f,markDef:u,config:a,scaleType:g}),r=null===(o=t.component.axes[e])||void 0===o?void 0:o[0];return function({fieldDef:t,fieldDef2:e,channel:n,bandSize:r,scaleName:i,markDef:o,spacing:s=0,axisTranslate:a,reverse:l,config:u}){const c=JQ(n),h=KQ(n),f=KQ(c),d=E4(n,o),p=RK(r)?{signal:`(1-${r.signal})/2`}:J1(r)?(1-r.band)/2:.5;if(CK(t.bin)||t.timeUnit)return{[f]:R4({channel:n,fieldDef:t,scaleName:i,markDef:o,bandPosition:p,offset:N4(c,s,l,a,d),config:u}),[h]:R4({channel:n,fieldDef:t,scaleName:i,markDef:o,bandPosition:RK(p)?{signal:`1-${p.signal}`}:1-p,offset:N4(n,s,l,a,d),config:u})};if(AK(t.bin)){const r=o2(t,i,{},{offset:N4(c,s,l,a,d)});if(I2(e))return{[f]:r,[h]:o2(e,i,{},{offset:N4(n,s,l,a,d)})};if(DK(t.bin)&&t.bin.step)return{[f]:r,[h]:{signal:`scale("${i}", ${Q2(t,{expr:"datum"})} + ${t.bin.step})`,offset:N4(n,s,l,a,d)}}}M0(v.channelRequiredForBinned(c))}({fieldDef:f,fieldDef2:d,channel:e,markDef:u,scaleName:m,bandSize:n,axisTranslate:null!==(s=null==r?void 0:r.get("translate"))&&void 0!==s?s:.5,spacing:oK(e)?XK("binSpacing",u,a):void 0,reverse:p.get("reverse"),config:a})}}function P4(t,e,n,r,i){if(J1(i)){if(!n)return{mult:i.band,field:{group:t}};{const t=n.get("type");if("band"===t)return{scale:e,band:i.band};1!==i.band&&(M0(v.cannotUseRelativeBandSizeWithNonBandScale(t)),i=void 0)}}else{if(RK(i))return i;if(i)return{value:i}}if(n){const t=n.get("range");if($K(t)&&sv(t.step))return{value:t.step-2}}return{value:w5(r.view,t)-2}}function N4(t,e,n,r,i){if($Q(t))return 0;const o="x"===t||"y2"===t?-e/2:e/2;if(RK(n)||RK(i)||RK(r)){const t=ZK(n),e=ZK(i),s=ZK(r);return{signal:(s?`${s} + `:"")+(t?`(${t} ? -1 : 1) * `:"")+(e?`(${e} + ${o})`:o)}}return i=i||0,r+(n?-i-o:+i+o)}function R4({channel:t,fieldDef:e,scaleName:n,markDef:r,bandPosition:i,offset:o,config:s}){return n2({fieldDef:e,channel:t,markDef:r,ref:s2({scaleName:n,fieldOrDatumDef:e,bandPosition:i,offset:o}),config:s})}const $4=new Set(["aria","width","height"]);function I4(t,e){const{fill:n,stroke:r}="include"===e.color?k4(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(t,e){return zK.reduce((n,r)=>($4.has(r)||void 0===t[r]||"ignore"===e[r]||(n[r]=WK(t[r])),n),{})}(t.markDef,e)),z4(t,"fill",n)),z4(t,"stroke",r)),w4("opacity",t)),w4("fillOpacity",t)),w4("strokeOpacity",t)),w4("strokeWidth",t)),w4("strokeDash",t)),function(t){const{encoding:e,mark:n}=t,r=e.order;return!W1(n)&&H2(r)?m4(t,r,"zindex",t=>WK(t.value)):{}}(t)),b4(t)),y4(t,"href")),function(t){const{markDef:e,config:n}=t,r=XK("aria",e,n);return!1===r?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),function(t){const{mark:e,markDef:n,config:r}=t;if(!1===r.aria)return{};const i=XK("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:e in LK?{}:{ariaRoleDescription:{value:e}}}(t)),function(t){const{encoding:e,markDef:n,config:r,stack:i}=t,o=e.description;if(o)return m4(t,o,"description",e=>v4(e,t.config));const s=XK("description",n,r);if(null!=s)return{description:WK(s)};if(!1===r.aria)return{};const a=_4(e,i,r);return nQ(a)?void 0:{description:{signal:oQ(a).map(([t,e],n)=>`"${n>0?"; ":""}${t}: " + (${e})`).join(" + ")}}}(t))}(t))}function z4(t,e,n){const{config:r,mark:i,markDef:o}=t;if("hide"===XK("invalid",o,r)&&n&&!W1(i)){const r=function(t,{invalid:e=!1,channels:n}){const r=n.reduce((e,n)=>{const r=t.getScaleComponent(n);if(r){const i=r.get("type"),o=t.vgField(n,{expr:"datum"});o&&w1(i)&&(e[o]=!0)}return e},{}),i=rQ(r);if(i.length>0){const t=e?"||":"&&";return i.map(t=>i2(t,e)).join(` ${t} `)}}(t,{invalid:!0,channels:fK});if(r)return{[e]:[{test:r,value:null},...$y(n)]}}return n?{[e]:n}:{}}function L4(t){const{config:e,markDef:n}=t;if(XK("invalid",n,e)){const e=function(t,{invalid:e=!1,channels:n}){const r=n.reduce((e,n)=>{const r=t.getScaleComponent(n);if(r){const i=r.get("type"),o=t.vgField(n,{expr:"datum"});o&&w1(i)&&(e[o]=!0)}return e},{}),i=rQ(r);if(i.length>0){const t=e?"||":"&&";return i.map(t=>i2(t,e)).join(` ${t} `)}}(t,{channels:iK});if(e)return{defined:{signal:e}}}return{}}function U4(t,e){if(void 0!==e)return{[t]:WK(e)}}var B4={defined:t=>"point"===t.type&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName("voronoi")},marks:(t,e,n)=>{const{x:r,y:i}=e.project.hasChannel,o=t.mark;if(W1(o))return M0(v.nearestNotSupportForContinuous(o)),n;const s={name:t.getName("voronoi"),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},b4(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((e,n)=>{var r;const i=null!==(r=e.name)&&void 0!==r?r:"";i===t.component.mark[0].name?a=n:i.indexOf("voronoi")>=0&&(l=!0)}),l||n.splice(a+1,0,s),n}},q4={defined:t=>"point"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind&&!c5(t.bind),parse:(t,e,n)=>o8(e,n),topLevelSignals:(t,e,n)=>{const r=e.name,i=e.project,o=e.bind,s=e.init&&e.init[0],a=B4.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((t,i)=>{var l,u;const c=aQ(`${r}_${t.field}`);n.filter(t=>t.name===c).length||n.unshift(Object.assign(Object.assign({name:c},s?{init:t4(s[i])}:{value:null}),{on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${mv(t.field)}] : null`}]:[],bind:null!==(u=null!==(l=o[t.field])&&void 0!==l?l:o[t.channel])&&void 0!==u?u:o}))}),n},signals:(t,e,n)=>{const r=e.name,i=e.project,o=n.filter(t=>t.name===r+J4)[0],s=r+"_tuple_fields",a=i.items.map(t=>aQ(`${r}_${t.field}`)),l=a.map(t=>`${t} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},V4={defined:t=>"point"===t.type&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+"_toggle",value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+J4,r=e.name+"_toggle";return`${r} ? null : ${n}, `+("global"===e.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${r8(t)}}, `)+`${r} ? ${n} : null`}};const H4={defined:t=>void 0!==t.clear&&!1!==t.clear,parse:(t,e)=>{e.clear&&(e.clear=lv(e.clear)?dG(e.clear,"view"):e.clear)},topLevelSignals:(t,e,n)=>{if(q4.defined(e))for(const r of e.project.items){const t=n.findIndex(t=>t.name===aQ(`${e.name}_${r.field}`));-1!==t&&n[t].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function r(t,r){-1!==t&&n[t].on&&n[t].on.push({events:e.clear,update:r})}if("interval"===e.type)for(const i of e.project.items){const t=n.findIndex(t=>t.name===i.signals.visual);r(t,"[0, 0]"),-1===t&&r(n.findIndex(t=>t.name===i.signals.data),"null")}else{let t=n.findIndex(t=>t.name===e.name+J4);r(t,"null"),V4.defined(e)&&(t=n.findIndex(t=>t.name===e.name+"_toggle"),r(t,"false"))}return n}},W4={defined:t=>{const e="global"===t.resolve&&t.bind&&c5(t.bind),n=1===t.project.items.length&&"_vgsid_"!==t.project.items[0].field;return e&&!n&&M0(v.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),e&&n},parse:(t,e,n)=>{var r;const i=zX(n);if(i.select=lv(i.select)?{type:i.select,toggle:e.toggle}:Object.assign(Object.assign({},i.select),{toggle:e.toggle}),o8(e,i),dy(n.select)&&(n.select.on||n.select.clear)){const t='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of e.events)n.filter=$y(null!==(r=n.filter)&&void 0!==r?r:[]),n.filter.includes(t)||n.filter.push(t)}const o=h5(e.bind)?e.bind.legend:"click",s=lv(o)?dG(o,"view"):$y(o);e.bind={legend:{merge:s}}},topLevelSignals:(t,e,n)=>{const r=e.name,i=h5(e.bind)&&e.bind.legend,o=t=>e=>{const n=zX(e);return n.markname=t,n};for(const s of e.project.items){if(!s.hasLegend)continue;const t=`${aQ(s.field)}_legend`,a=`${r}_${t}`;if(0===n.filter(t=>t.name===a).length){const r=i.merge.map(o(`${t}_symbols`)).concat(i.merge.map(o(`${t}_labels`))).concat(i.merge.map(o(`${t}_entries`)));n.unshift(Object.assign(Object.assign({name:a},e.init?{}:{value:null}),{on:[{events:r,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${a}`,force:!0}]}))}}return n},signals:(t,e,n)=>{const r=e.name,i=e.project,o=n.find(t=>t.name===r+J4),s=r+"_tuple_fields",a=i.items.filter(t=>t.hasLegend).map(t=>aQ(`${r}_${aQ(t.field)}_legend`)),l=`${a.map(t=>`${t} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;e.events&&a.length>0?o.on.push({events:a.map(t=>({signal:t})),update:l}):a.length>0&&(o.update=l,delete o.value,delete o.on);const u=n.find(t=>t.name===r+"_toggle"),c=h5(e.bind)&&e.bind.legend;return u&&(e.events?u.on.push(Object.assign(Object.assign({},u.on[0]),{events:c})):u.on[0].events=c),n}},G4="_translate_delta",Z4={defined:t=>"interval"===t.type&&t.translate,signals:(t,e,n)=>{const r=e.name,i=c4.defined(e),o=r+"_translate_anchor",{x:s,y:a}=e.project.hasChannel;let l=dG(e.translate,"scope");return i||(l=l.map(t=>(t.between[0].markname=r+"_brush",t))),n.push({name:o,value:{},on:[{events:l.map(t=>t.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==s?`, extent_x: ${i?h4(t,"x"):`slice(${s.signals.visual})`}`:"")+(void 0!==a?`, extent_y: ${i?h4(t,"y"):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+G4,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==s&&Y4(t,e,s,"width",n),void 0!==a&&Y4(t,e,a,"height",n),n}};function Y4(t,e,n,r,i){var o,s;const a=e.name,l=a+"_translate_anchor",u=a+G4,c=n.channel,h=c4.defined(e),f=i.filter(t=>t.name===n.signals[h?"data":"visual"])[0],d=t.getSizeSignalRef(r).signal,p=t.getScaleComponent(c),g=p.get("type"),m=p.get("reverse"),y=`${l}.extent_${c}`,v=`${h?"log"===g?"panLog":"symlog"===g?"panSymlog":"pow"===g?"panPow":"panLinear":"panLinear"}(${y}, ${h?"x"===c?m?"":"-":m?"-":"":""}${u}.${c} / ${h?`${d}`:`span(${y})`}${h?"pow"===g?`, ${null!==(o=p.get("exponent"))&&void 0!==o?o:1}`:"symlog"===g?`, ${null!==(s=p.get("constant"))&&void 0!==s?s:1}`:"":""})`;f.on.push({events:{signal:u},update:h?v:`clampRange(${v}, 0, ${d})`})}const X4={defined:t=>"interval"===t.type&&t.zoom,signals:(t,e,n)=>{const r=e.name,i=c4.defined(e),o=r+"_zoom_delta",{x:s,y:a}=e.project.hasChannel,l=mv(t.scaleName("x")),u=mv(t.scaleName("y"));let c=dG(e.zoom,"scope");return i||(c=c.map(t=>(t.markname=r+"_brush",t))),n.push({name:r+"_zoom_anchor",on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(t=>!!t).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&Q4(t,e,s,"width",n),void 0!==a&&Q4(t,e,a,"height",n),n}};function Q4(t,e,n,r,i){var o,s;const a=e.name,l=n.channel,u=c4.defined(e),c=i.filter(t=>t.name===n.signals[u?"data":"visual"])[0],h=t.getSizeSignalRef(r).signal,f=t.getScaleComponent(l),d=f.get("type"),p=u?h4(t,l):c.name,g=a+"_zoom_delta",m=`${u?"log"===d?"zoomLog":"symlog"===d?"zoomSymlog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear"}(${p}, ${a}_zoom_anchor.${l}, ${g}${u?"pow"===d?`, ${null!==(o=f.get("exponent"))&&void 0!==o?o:1}`:"symlog"===d?`, ${null!==(s=f.get("constant"))&&void 0!==s?s:1}`:"":""})`;c.on.push({events:{signal:g},update:u?m:`clampRange(${m}, 0, ${h})`})}const K4="_store",J4="_tuple",t8="_modify",e8="vlSelectionResolve",n8=[g4,d4,u4,V4,q4,c4,W4,H4,Z4,X4,B4];function r8(t,{escape:e}={escape:!0}){let n=e?mv(t.name):t.name;const r=function(t){let e=t.parent;for(;e&&!M7(e);)e=e.parent;return e}(t);if(r){const{facet:t}=r;for(const e of qQ)t[e]&&(n+=` + '__facet_${e}_' + (facet[${mv(r.vgField(e))}])`)}return n}function i8(t){var e;return iQ(null!==(e=t.component.selection)&&void 0!==e?e:{}).reduce((t,e)=>t||e.project.items.some(t=>"_vgsid_"===t.field),!1)}function o8(t,e){!lv(e.select)&&e.select.on||delete t.events,!lv(e.select)&&e.select.clear||delete t.clear,!lv(e.select)&&e.select.toggle||delete t.toggle}function s8(t){const e=[];return"Identifier"===t.type?[t.name]:"Literal"===t.type?[t.value]:("MemberExpression"===t.type&&(e.push(...s8(t.object)),e.push(...s8(t.property))),e)}function a8(t){return"MemberExpression"===t.object.type?a8(t.object):"datum"===t.object.name}function l8(t){const e=gV(t),n=new Set;return e.visit(t=>{"MemberExpression"===t.type&&a8(t)&&n.add(s8(t).slice(1).join("."))}),n}class u8 extends i4{constructor(t,e,n){super(t),this.model=e,this.filter=n,this.expr=d8(this.model,this.filter,this),this._dependentFields=l8(this.expr)}clone(){return new u8(null,this.model,zX(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}var c8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function h8(t,e,n,r="datum"){const i=lv(e)?e:e.param,o=aQ(i),s=mv(o+K4);let a;try{a=t.getSelectionComponent(o,i)}catch(c){return`!!${o}`}if(a.project.timeUnit){const e=null!=n?n:t.component.data.raw,r=a.project.timeUnit.clone();e.parent?r.insertAsParentOf(e):e.parent=r}const l=`vlSelectionTest(${s}, ${r}`+("global"===a.resolve?")":`, ${mv(a.resolve)})`),u=`length(data(${s}))`;return!1===e.empty?`${u} && ${l}`:`!${u} || ${l}`}function f8(t,e,n){const r=aQ(e),i=n.encoding;let o,s=n.field;try{o=t.getSelectionComponent(r,e)}catch(a){return r}if(i||s){if(i&&!s){const t=o.project.items.filter(t=>t.channel===i);!t.length||t.length>1?(s=o.project.items[0].field,M0((t.length?"Multiple ":"No ")+`matching ${mv(i)} encoding found for selection ${mv(n.param)}. `+`Using "field": ${mv(s)}.`)):s=t[0].field}}else s=o.project.items[0].field,o.project.items.length>1&&M0(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${mv(s)}.`);return`${o.name}[${mv(pQ(s))}]`}function d8(t,e,n){return lQ(e,e=>lv(e)?e:function(t){return null==t?void 0:t.param}(e)?h8(t,e,n):n1(e))}var p8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function g8(t,e,n,r){var i,o,s,a,l;null!==(i=t.encode)&&void 0!==i||(t.encode={}),null!==(o=(a=t.encode)[e])&&void 0!==o||(a[e]={}),null!==(s=(l=t.encode[e]).update)&&void 0!==s||(l.update={}),t.encode[e].update[n]=r}function m8(t,e,n,r={header:!1}){var i,o;const s=t.combine(),{disable:a,orient:l,scale:u,labelExpr:c,title:h,zindex:f}=s,d=p8(s,["disable","orient","scale","labelExpr","title","zindex"]);if(!a){for(const t in d){const n=_3[t],r=d[t];if(n&&n!==e&&"both"!==n)delete d[t];else if(v3(r)){const{condition:e}=r,n=p8(r,["condition"]),i=$y(e),o=y3[t];if(o){const{vgProp:e,part:r}=o;g8(d,r,e,[...i.map(t=>{const{test:e}=t,n=p8(t,["test"]);return Object.assign({test:d8(null,e)},n)}),n]),delete d[t]}else if(null===o){const e={signal:i.map(t=>{const{test:e}=t,n=p8(t,["test"]);return`${d8(null,e)} ? ${GK(n)} : `}).join("")+GK(n)};d[t]=e}}else if(RK(r)){const e=y3[t];if(e){const{vgProp:n,part:i}=e;g8(d,i,n,r),delete d[t]}}HX(["labelAlign","labelBaseline"],t)&&null===d[t]&&delete d[t]}if("grid"===e){if(!d.grid)return;if(d.encode){const{grid:t}=d.encode;d.encode=Object.assign({},t?{grid:t}:{}),nQ(d.encode)&&delete d.encode}return Object.assign(Object.assign({scale:u,orient:l},d),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:vQ(f,0)})}{if(!r.header&&t.mainExtracted)return;if(void 0!==c){let t=c;(null===(o=null===(i=d.encode)||void 0===i?void 0:i.labels)||void 0===o?void 0:o.update)&&RK(d.encode.labels.update.text)&&(t=gQ(c,"datum.label",d.encode.labels.update.text.signal)),g8(d,"labels","text",{signal:t})}if(null===d.labelAlign&&delete d.labelAlign,d.encode){for(const e of b3)t.hasAxisPart(e)||delete d.encode[e];nQ(d.encode)&&delete d.encode}const e=function(t,e){if(t)return fy(t)&&!NK(t)?t.map(t=>i3(t,e)).join(", "):t}(h,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:u,orient:l,grid:!1},e?{title:e}:{}),d),!1===n.aria?{aria:!1}:{}),{zindex:vQ(f,0)})}}}function y8(t){const{axes:e}=t.component,n=[];for(const r of iK)if(e[r])for(const i of e[r])if(!i.get("disable")&&!i.get("gridScale")){const e="x"===r?"height":"width",i=t.getSizeSignalRef(e).signal;e!==i&&n.push({name:e,update:i})}return n}function v8(t,e,n,r){return Object.assign.apply(null,[{},...t.map(t=>{if("axisOrient"===t){const t="x"===n?"bottom":"left",i=e["x"===n?"axisBottom":"axisLeft"]||{},o=e["x"===n?"axisTop":"axisRight"]||{},s=new Set([...rQ(i),...rQ(o)]),a={};for(const e of s.values())a[e]={signal:`${r.signal} === "${t}" ? ${ZK(i[e])} : ${ZK(o[e])}`};return a}return e[t]})])}function b8(t,e){var n;const r=[{}];for(const i of t){let t=null===(n=e[i])||void 0===n?void 0:n.style;if(t){t=$y(t);for(const n of t)r.push(e.style[n])}}return Object.assign.apply(null,r)}function _8(t,e,n,r={}){var i;const o=JK(t,n,e);if(void 0!==o)return{configFrom:"style",configValue:o};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==(null===(i=r[s])||void 0===i?void 0:i[t]))return{configFrom:s,configValue:r[s][t]};return{}}const x8={scale:({model:t,channel:e})=>t.scaleName(e),format:({fieldOrDatumDef:t,config:e,axis:n})=>{const{format:r,formatType:i}=n;return p2(t,t.type,r,i,e,!0)},formatType:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:r}=t;return g2(r,e,n)},grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>{var r;return null!==(r=e.grid)&&void 0!==r?r:function(t,e){return!x1(t)&&I2(e)&&!CK(null==e?void 0:e.bin)&&!AK(null==e?void 0:e.bin)}(n,t)},gridScale:({model:t,channel:e})=>function(t,e){const n="x"===e?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelAlign||E8(e,n,r),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelBaseline||k8(e,n,r),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>{var r;return null!==(r=t.labelFlush)&&void 0!==r?r:function(t,e){if("x"===e&&HX(["quantitative","temporal"],t))return!0}(e.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{var r;return null!==(r=t.labelOverlap)&&void 0!==r?r:function(t,e,n,r){if(n&&!dy(r)||"nominal"!==t&&"ordinal"!==t)return"log"!==e&&"symlog"!==e||"greedy"}(e.type,n,I2(e)&&!!e.timeUnit,I2(e)?e.sort:void 0)},orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var o;const s="x"===t?"width":"y"===t?"height":void 0,a=s?e.getSizeSignalRef(s):void 0;return null!==(o=n.tickCount)&&void 0!==o?o:function({fieldOrDatumDef:t,scaleType:e,size:n,values:r}){var i;if(!r&&!x1(e)&&"log"!==e){if(I2(t)){if(CK(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&HX(["month","hours","day","quarter"],null===(i=W0(t.timeUnit))||void 0===i?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},title:({axis:t,model:e,channel:n})=>{if(void 0!==t.title)return t.title;const r=S8(e,n);if(void 0!==r)return r;const i=e.typedFieldDef(n),o=e.fieldDef("x"===n?"x2":"y2");return eJ(i?[T2(i)]:[],I2(o)?[T2(o)]:[])},values:({axis:t,fieldOrDatumDef:e})=>function(t,e){const n=t.values;return fy(n)?g3(e,n):RK(n)?n:void 0}(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>{var r;return null!==(r=t.zindex)&&void 0!==r?r:function(t,e){return"rect"===t&&K2(e)?1:0}(n,e)}};function w8(t){return`(((${t.signal} % 360) + 360) % 360)`}function k8(t,e,n,r){if(void 0!==t){if("x"===n){if(RK(t)){const n=w8(t);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${RK(e)?`(${e.signal} === "top")`:"top"===e} ? "bottom" : "top"`}}return 45<t&&t<135||225<t&&t<315?"middle":RK(e)?{signal:`${e.signal} ${t<=45||315<=t?"===":"!=="} "top" ? "bottom" : "top"`}:(t<=45||315<=t)==("top"===e)?"bottom":"top"}if(RK(t)){const n=w8(t);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${RK(e)?`(${e.signal} === "left")`:"left"===e} ? "top" : "bottom"`}}return t<=45||315<=t||135<=t&&t<=225?r?"middle":null:RK(e)?{signal:`${e.signal} ${45<=t&&t<=135?"===":"!=="} "left" ? "top" : "bottom"`}:(45<=t&&t<=135)==("left"===e)?"top":"bottom"}}function E8(t,e,n){if(void 0===t)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(RK(t)){const n=w8(t);return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${RK(e)?`(${e.signal} === "${o}")`:e===o} ? "left" : "right"`}}return(t+i)%180==0?r?null:"center":RK(e)?{signal:`${e.signal} ${i<t&&t<180+i?"===":"!=="} "${o}" ? "left" : "right"`}:(i<t&&t<180+i)==(e===o)?"left":"right"}function S8(t,e){const n="x"===e?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;return o&&s?nJ(o,s):o||s||(void 0!==o?o:void 0!==s?s:void 0)}class O8 extends i4{constructor(t,e){super(t),this.transform=e,this._dependentFields=l8(this.transform.calculate)}clone(){return new O8(null,zX(this.transform))}static parseAllForSortIndex(t,e){return e.forEachFieldDef((e,n)=>{if(W2(e)&&S2(e.sort)){const{field:r,timeUnit:i}=e,o=e.sort,s=o.map((t,e)=>`${n1({field:r,timeUnit:i,equal:t})} ? ${e} : `).join("")+o.length;t=new O8(t,{calculate:s,as:C8(e,n,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${qX(this.transform)}`}}function C8(t,e,n){return Q2(t,Object.assign({prefix:e,suffix:"sort_index"},null!=n?n:{}))}function A8(t,e){return HX(["top","bottom"],e)?"column":HX(["left","right"],e)||"row"===t?"row":"column"}function D8(t,e,n,r){return vQ((e||{})[t],("row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet)[t],n.header[t])}function T8(t,e,n,r){const i={};for(const o of t){const t=D8(o,e||{},n,r);void 0!==t&&(i[o]=t)}return i}const M8=["row","column"],F8=["header","footer"];function j8(t,e){const n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=T8(["titleAnchor","titleAngle","titleOrient"],i.header,r,e),l=A8(e,a),u=EQ(s);return{name:`${e}-title`,type:"group",role:`${l}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===e?{orient:"left"}:{}),{style:"guide-title"}),N8(u,l)),P8(l,u,o)),B8(r,i,e,i5,n5))}}function P8(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=E8(e,"row"===t?"left":"top","row"===t?"y":"x");return r?{align:r}:{}}function N8(t,e){const n=k8(t,"row"===e?"left":"top","row"===e?"y":"x",!0);return n?{baseline:n}:{}}function R8(t,e){const n=t.component.layoutHeaders[e],r=[];for(const i of F8)if(n[i])for(const o of n[i]){const s=z8(t,e,i,n,o);null!=s&&r.push(s)}return r}function $8(t,e){var n;const{sort:r}=t;return E2(r)?{field:Q2(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:fy(r)?{field:C8(t,e,{expr:"datum"}),order:"ascending"}:{field:Q2(t,{expr:"datum"}),order:null!=r?r:"ascending"}}function I8(t,e,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=T8(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,n,e),u=h2({fieldOrDatumDef:t,format:r,formatType:i,expr:"parent",config:n}).signal,c=A8(e,a);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:l?gQ(gQ(l,"datum.label",u),"datum.value",Q2(t,{expr:"parent"})):u}},"row"===e?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),N8(o,c)),P8(c,o,s)),B8(n,t,e,o5,r5))}function z8(t,e,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=t.config?t.config:void 0;if(s&&i.labels){const{labelOrient:t}=T8(["labelOrient"],s.header,a,e);("row"===e&&!HX(["top","bottom"],t)||"column"===e&&!HX(["left","right"],t))&&(o=I8(s,e,a))}const l=M7(t)&&!O2(t.facet),u=i.axes,c=(null==u?void 0:u.length)>0;if(o||c){const a="row"===e?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`},r.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:$8(s,e)}:{}),c&&l?{from:{data:t.getName(`facet_domain_${e}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[a]:i.sizeSignal}}}:{}),c?{axes:u}:{})}}return null}const L8={column:{start:0,end:1},row:{start:1,end:0}};function U8(t,e){return L8[e][t]}function B8(t,e,n,r,i){const o={};for(const s of r){if(!i[s])continue;const r=D8(s,null==e?void 0:e.header,t,n);void 0!==r&&(o[i[s]]=r)}return o}function q8(t){return[...V8(t,"width"),...V8(t,"height"),...V8(t,"childWidth"),...V8(t,"childHeight")]}function V8(t,e){const n="width"===e?"x":"y",r=t.component.layoutSize.get(e);if(!r||"merged"===r)return[];const i=t.getSizeSignalRef(e).signal;if("step"===r){const e=t.getScaleComponent(n);if(e){const r=e.get("type"),o=e.get("range");if(x1(r)&&$K(o)){const r=t.scaleName(n);return M7(t.parent)&&"independent"===t.parent.component.resolve.scale[n]?[H8(r,o)]:[H8(r,o),{name:i,update:W8(r,e,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const e=i.endsWith("width"),n=e?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${x5(t.config.view,e?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function H8(t,e){return{name:`${t}_step`,value:e.step}}function W8(t,e,n){const r=e.get("type"),i=e.get("padding"),o=vQ(e.get("paddingOuter"),i);let s=e.get("paddingInner");return s="band"===r?void 0!==s?s:i:1,`bandspace(${n}, ${ZK(s)}, ${ZK(o)}) * ${t}_step`}function G8(t){return"childWidth"===t?"width":"childHeight"===t?"height":t}function Z8(t,e){return rQ(t).reduce((n,r)=>{const i=t[r];return Object.assign(Object.assign({},n),m4(e,i,r,t=>WK(t.value)))},{})}function Y8(t,e){if(j7(e)||M7(e))return"shared";if(F7(e))return oK(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function X8(t,e){const n=t.scale[e],r=oK(e)?"axis":"legend";return"independent"===n?("shared"===t[r][e]&&M0(v.independentScaleMeansIndependentGuide(e)),"independent"):t[r][e]||"shared"}const Q8=Object.assign(Object.assign({},l5),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),K8=rQ(Q8);class J8 extends I6{}const t9={symbols:function(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i,legendType:o}){var s,a,l,u,c,h,f,d;if("symbol"!==o)return;const{markDef:p,encoding:g,config:m,mark:y}=n,v=p.filled&&"trail"!==y;let b=Object.assign(Object.assign({},function(t,e,n){for(const r of n){const n=QK(r,e.markDef,e.config);void 0!==n&&(t[r]=WK(n))}return t}({},n,X1)),k4(n,{filled:v}));const _=null!==(s=i.get("symbolOpacity"))&&void 0!==s?s:m.legend.symbolOpacity,x=null!==(a=i.get("symbolFillColor"))&&void 0!==a?a:m.legend.symbolFillColor,w=null!==(l=i.get("symbolStrokeColor"))&&void 0!==l?l:m.legend.symbolStrokeColor,k=void 0===_?null!==(u=e9(g.opacity))&&void 0!==u?u:p.opacity:void 0;if(b.fill)if("fill"===r||v&&r===FQ)delete b.fill;else if(b.fill.field)x?delete b.fill:(b.fill=WK(null!==(c=m.legend.symbolBaseFillColor)&&void 0!==c?c:"black"),b.fillOpacity=WK(null!=k?k:1));else if(fy(b.fill)){const t=null!==(d=null!==(f=n9(null!==(h=g.fill)&&void 0!==h?h:g.color))&&void 0!==f?f:p.fill)&&void 0!==d?d:v&&p.color;t&&(b.fill=WK(t))}if(b.stroke)if("stroke"===r||!v&&r===FQ)delete b.stroke;else if(b.stroke.field||w)delete b.stroke;else if(fy(b.stroke)){const t=vQ(n9(g.stroke||g.color),p.stroke,v?p.color:void 0);t&&(b.stroke={value:t})}if("opacity"!==r){const t=I2(e)&&i9(0,i,e);t?b.opacity=[Object.assign({test:t},WK(null!=k?k:1)),WK(m.legend.unselectedOpacity)]:k&&(b.opacity=WK(k))}return b=Object.assign(Object.assign({},b),t),nQ(b)?void 0:b},gradient:function(t,{model:e,legendType:n,legendCmpt:r}){var i;if("gradient"!==n)return;const{config:o,markDef:s,encoding:a}=e;let l={};const u=void 0===(null!==(i=r.get("gradientOpacity"))&&void 0!==i?i:o.legend.gradientOpacity)?e9(a.opacity)||s.opacity:void 0;return u&&(l.opacity=WK(u)),l=Object.assign(Object.assign({},l),t),nQ(l)?void 0:l},labels:function(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=I2(e)?i9(0,i,e):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o,h=u2(c)?d2({fieldOrDatumDef:e,field:"datum.value",format:u,formatType:c,config:s}):void 0,f=Object.assign(Object.assign(Object.assign({},l?{opacity:l}:{}),h?{text:h}:{}),t);return nQ(f)?void 0:f},entries:function(t,{legendCmpt:e}){const n=e.get("selections");return(null==n?void 0:n.length)?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}};function e9(t){return r9(t,(t,e)=>Math.max(t,e.value))}function n9(t){return r9(t,(t,e)=>vQ(t,e.value))}function r9(t,e){return function(t){const e=t&&t.condition;return!!e&&(fy(e)||H2(e))}(t)?$y(t.condition).reduce(e,t.value):H2(t)?t.value:void 0}function i9(t,e,n){const r=e.get("selections");if(!(null==r?void 0:r.length))return;const i=mv(n.field);return r.map(t=>`(!length(data(${mv(aQ(t)+K4)})) || (${t}[${i}] && indexof(${t}[${i}], datum.value) >= 0))`).join(" || ")}const o9={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:r,formatType:i}=e;return p2(t,t.type,r,i,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:r}=t;return g2(r,e,n)},gradientLength:t=>{var e,n;const{legend:r,legendConfig:i}=t;return null!==(n=null!==(e=r.gradientLength)&&void 0!==e?e:i.gradientLength)&&void 0!==n?n:function({legendConfig:t,model:e,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=t;if(k1(i))return"horizontal"===n?"top"===r||"bottom"===r?a9(e,"width",s,o):s:a9(e,"height",l,a)}(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>{var r,i;return null!==(i=null!==(r=t.labelOverlap)&&void 0!==r?r:e.labelOverlap)&&void 0!==i?i:function(t){if(HX(["quantile","threshold","log","symlog"],t))return"greedy"}(n)},symbolType:({legend:t,markDef:e,channel:n,encoding:r})=>{var i;return null!==(i=t.symbolType)&&void 0!==i?i:function(t,e,n,r){var i;if("shape"!==e){const t=null!==(i=n9(n))&&void 0!==i?i:r;if(t)return t}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(e.type,n,r.shape,e.shape)},title:({fieldOrDatumDef:t,config:e})=>n3(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if(UQ(n)&&k1(e)){if("gradient"===t)return}else if("symbol"===t)return;return t},values:({fieldOrDatumDef:t,legend:e})=>function(t,e){const n=t.values;return fy(n)?g3(e,n):RK(n)?n:void 0}(e,t)};function s9({legendConfig:t,legendType:e,orient:n,legend:r}){var i,o;return null!==(o=null!==(i=r.direction)&&void 0!==i?i:t[e?"gradientDirection":"symbolDirection"])&&void 0!==o?o:function(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===e?"horizontal":void 0}}(n,e)}function a9(t,e,n,r){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${n}, ${r})`}}function l9(t){const e=T7(t)?function(t){const{encoding:e}=t,n={};for(const r of[FQ,...a5]){const i=a3(e[r]);i&&t.getScaleComponent(r)&&(r===NQ&&I2(i)&&i.type===c1||(n[r]=c9(t,r)))}return n}(t):function(t){const{legends:e,resolve:n}=t.component;for(const r of t.children){l9(r);for(const i of rQ(r.component.legends))n.legend[i]=X8(t.component.resolve,i),"shared"===n.legend[i]&&(e[i]=h9(e[i],r.component.legends[i]),e[i]||(n.legend[i]="independent",delete e[i]))}for(const r of rQ(e))for(const e of t.children)e.component.legends[r]&&"shared"===n.legend[r]&&delete e.component.legends[r];return e}(t);return t.component.legends=e,e}function u9(t,e,n,r){switch(e){case"disable":return void 0!==n;case"values":return!!(null==n?void 0:n.values);case"title":if("title"===e&&t===(null==r?void 0:r.title))return!0}return t===(n||{})[e]}function c9(t,e){var n,r,i;let o=t.legend(e);const{markDef:s,encoding:a,config:l}=t,u=l.legend,c=new J8({},function(t,e){const n=t.scaleName(e);if("trail"===t.mark){if("color"===e)return{stroke:n};if("size"===e)return{strokeWidth:n}}return"color"===e?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}(t,e));!function(t,e,n){var r,i,o,s;const a=null===(r=t.fieldDef(e))||void 0===r?void 0:r.field;for(const l of iQ(null!==(i=t.component.selection)&&void 0!==i?i:{})){const t=null!==(o=l.project.hasField[a])&&void 0!==o?o:l.project.hasChannel[e];if(t&&W4.defined(l)){const e=null!==(s=n.get("selections"))&&void 0!==s?s:[];e.push(l.name),n.set("selections",e,!1),t.hasLegend=!0}}}(t,e,c);const h=void 0!==o?!o:u.disable;if(c.set("disable",h,void 0!==o),h)return c;o=o||{};const f=t.getScaleComponent(e).get("type"),d=a3(a[e]),p=I2(d)?null===(n=W0(d.timeUnit))||void 0===n?void 0:n.unit:void 0,g=o.orient||l.legend.orient||"right",m=function(t){const{legend:e}=t;return vQ(e.type,function({channel:t,timeUnit:e,scaleType:n}){if(UQ(t)){if(HX(["quarter","month","day"],e))return"symbol";if(k1(n))return"gradient"}return"symbol"}(t))}({legend:o,channel:e,timeUnit:p,scaleType:f}),y={legend:o,channel:e,model:t,markDef:s,encoding:a,fieldOrDatumDef:d,legendConfig:u,config:l,scaleType:f,orient:g,legendType:m,direction:s9({legend:o,legendType:m,orient:g,legendConfig:u})};for(const w of K8){if("gradient"===m&&w.startsWith("symbol")||"symbol"===m&&w.startsWith("gradient"))continue;const n=w in o9?o9[w](y):o[w];if(void 0!==n){const r=u9(n,w,o,t.fieldDef(e));(r||void 0===l.legend[w])&&c.set(w,n,r)}}const v=null!==(r=null==o?void 0:o.encoding)&&void 0!==r?r:{},b=c.get("selections"),_={},x={fieldOrDatumDef:d,model:t,channel:e,legendCmpt:c,legendType:m};for(const w of["labels","legend","title","symbols","gradient","entries"]){const e=Z8(null!==(i=v[w])&&void 0!==i?i:{},t),n=w in t9?t9[w](e,x):e;void 0===n||nQ(n)||(_[w]=Object.assign(Object.assign(Object.assign({},(null==b?void 0:b.length)&&I2(d)?{name:`${aQ(d.field)}_legend_${w}`}:{}),(null==b?void 0:b.length)?{interactive:!!b}:{}),{update:n}))}return nQ(_)||c.set("encode",_,!!(null==o?void 0:o.encoding)),c}function h9(t,e){var n,r,i,o;if(!t)return e.clone();const s=t.getWithExplicit("orient"),a=e.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;let l=!1;for(const u of K8){const n=q6(t.getWithExplicit(u),e.getWithExplicit(u),u,"legend",(t,e)=>{switch(u){case"symbolType":return"circle"===(n=e).value?n:t;case"title":return rJ(t,e);case"type":return l=!0,L6("symbol")}var n;return B6(t,e,u,"legend")});t.setWithExplicit(u,n)}return l&&((null===(r=null===(n=t.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&uQ(t.implicit,["encode","gradient"]),(null===(o=null===(i=t.explicit)||void 0===i?void 0:i.encode)||void 0===o?void 0:o.gradient)&&uQ(t.explicit,["encode","gradient"])),t}function f9(t){const e=t.component.legends,n={};for(const r of rQ(e)){const i=t.getScaleComponent(r),o=BX(i.get("domains"));if(n[o])for(const t of n[o])h9(t,e[r])||n[o].push(e[r]);else n[o]=[e[r].clone()]}return iQ(n).flat().map(e=>function(t,e){var n,r,i;const o=t.combine(),{disable:s,labelExpr:a}=o,l=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(o,["disable","labelExpr","selections"]);if(!s){if(!1===e.aria&&null==l.aria&&(l.aria=!1),null===(n=l.encode)||void 0===n?void 0:n.symbols){const t=l.encode.symbols.update;!t.fill||"transparent"===t.fill.value||t.stroke||l.stroke||(t.stroke={value:"transparent"});for(const e of a5)l[e]&&delete t[e]}if(l.title||delete l.title,void 0!==a){let t=a;(null===(i=null===(r=l.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&RK(l.encode.labels.update.text)&&(t=gQ(a,"datum.label",l.encode.labels.update.text.signal)),function(t,e,n,r){var i,o,s,a,l;null!==(i=t.encode)&&void 0!==i||(t.encode={}),null!==(o=(a=t.encode)[e])&&void 0!==o||(a[e]={}),null!==(s=(l=t.encode[e]).update)&&void 0!==s||(l.update={}),t.encode[e].update.text=r}(l,"labels",0,{signal:t})}return l}}(e,t.config)).filter(t=>void 0!==t)}function d9(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:r}=n;if(e.data){const i={signal:`[${e.size.map(t=>t.signal).join(", ")}]`},o=e.data.reduce((e,n)=>{const r=RK(n)?n.signal:`data('${t.lookupDataSource(n)}')`;return HX(e,r)||e.push(r),e},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const p9=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class g9 extends I6{constructor(t,e,n,r){super(Object.assign({},e),{name:t}),this.specifiedProjection=e,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function m9(t){t.component.projection=T7(t)?function(t){var e;if(t.hasProjection){const n=jK(t.specifiedProjection),r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,o=r?function(t){const e=[],{encoding:n}=t;for(const r of[["longitude","latitude"],["longitude2","latitude2"]])(a3(n[r[0]])||a3(n[r[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(NQ)&&t.typedFieldDef(NQ).type===c1&&e.push({signal:t.getName(`geojson_${e.length}`)}),0===e.length&&e.push(t.requestDataName(K6.Main)),e}(t):void 0,s=new g9(t.projectionName(!0),Object.assign(Object.assign({},null!==(e=jK(t.config.projection))&&void 0!==e?e:{}),null!=n?n:{}),i,o);return s.get("type")||s.set("type","equalEarth",!1),s}}(t):function(t){if(0===t.children.length)return;let e;for(const r of t.children)m9(r);const n=GX(t.children,t=>{const n=t.component.projection;if(n){if(e){const t=function(t,e){const n=GX(p9,n=>!Qy(t.explicit,n)&&!Qy(e.explicit,n)||!!(Qy(t.explicit,n)&&Qy(e.explicit,n)&&IX(t.get(n),e.get(n))));if(IX(t.size,e.size)){if(n)return t;if(IX(t.explicit,{}))return e;if(IX(e.explicit,{}))return t}return null}(e,n);return t&&(e=t),!!t}return e=n,!0}return!0});if(e&&n){const n=t.projectionName(!0),r=new g9(n,e.specifiedProjection,e.size,zX(e.data));for(const e of t.children){const t=e.component.projection;t&&(t.isFit&&r.data.push(...e.component.projection.data),e.renameProjection(t.get("name"),n),t.merged=!0)}return r}}(t)}function y9(t,e){return`${OK(t)}_${e}`}function v9(t,e,n){var r;const i=y9(null!==(r=h3(n,void 0))&&void 0!==r?r:{},e);return t.getName(`${i}_bins`)}function b9(t,e,n){let r,i;r=function(t){return"as"in t}(t)?lv(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:[Q2(t,{forAs:!0}),Q2(t,{binSuffix:"end",forAs:!0})];const o=Object.assign({},h3(e,void 0)),s=y9(o,t.field),{signal:a,extentSignal:l}=function(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}(n,s);if(TK(o.extent)){const t=o.extent;i=f8(n,t.param,t),delete o.extent}return{key:s,binComponent:Object.assign(Object.assign(Object.assign({bin:o,field:t.field,as:[r]},a?{signal:a}:{}),l?{extentSignal:l}:{}),i?{span:i}:{})}}class _9 extends i4{constructor(t,e){super(t),this.bins=e}clone(){return new _9(null,zX(this.bins))}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,n,r)=>{if(V2(n)&&CK(n.bin)){const{key:i,binComponent:o}=b9(n,n.bin,e);t[i]=Object.assign(Object.assign(Object.assign({},o),t[i]),function(t,e,n,r){var i,o;if(m3(e,n)){const s=T7(t)&&null!==(o=null!==(i=t.axis(n))&&void 0!==i?i:t.legend(n))&&void 0!==o?o:{},a=Q2(e,{expr:"datum"}),l=Q2(e,{expr:"datum",binSuffix:"end"});return{formulaAs:Q2(e,{binSuffix:"range",forAs:!0}),formula:b2(a,l,s.format,s.formatType,r)}}return{}}(e,n,r,e.config))}return t},{});return nQ(n)?null:new _9(t,n)}static makeFromTransform(t,e,n){const{key:r,binComponent:i}=b9(e,e.bin,n);return new _9(t,{[r]:i})}merge(t,e){for(const n of rQ(t.bins))n in this.bins?(e(t.bins[n].signal,this.bins[n].signal),this.bins[n].as=XX([...this.bins[n].as,...t.bins[n].as],qX)):this.bins[n]=t.bins[n];for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}producedFields(){return new Set(iQ(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(iQ(this.bins).map(t=>t.field))}hash(){return`Bin ${qX(this.bins)}`}assemble(){return iQ(this.bins).flatMap(t=>{const e=[],[n,...r]=t.as,i=t.bin,{extent:o}=i,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(i,["extent"]),a=Object.assign(Object.assign(Object.assign({type:"bin",field:pQ(t.field),as:n,signal:t.signal},TK(o)?{extent:null}:{extent:o}),t.span?{span:{signal:`span(${t.span})`}}:{}),s);!o&&t.extentSignal&&(e.push({type:"extent",field:pQ(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),e.push(a);for(const l of r)for(let t=0;t<2;t++)e.push({type:"formula",expr:Q2({field:n[t]},{expr:"datum"}),as:l[t]});return t.formula&&e.push({type:"formula",expr:t.formula,as:t.formulaAs}),e})}}class x9 extends i4{constructor(t,e,n){super(t),this.dimensions=e,this.measures=n}clone(){return new x9(null,new Set(this.dimensions),zX(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,e){let n=!1;e.forEachFieldDef(t=>{t.aggregate&&(n=!0)});const r={},i=new Set;return n?(e.forEachFieldDef((t,n)=>{var o,s,a,l;const{aggregate:u,field:c}=t;if(u)if("count"===u)null!==(o=r["*"])&&void 0!==o||(r["*"]={}),r["*"].count=new Set([Q2(t,{forAs:!0})]);else{if(bK(u)||_K(u)){const t=bK(u)?"argmin":"argmax",e=u[t];null!==(s=r[e])&&void 0!==s||(r[e]={}),r[e][t]=new Set([Q2({op:t,field:e},{forAs:!0})])}else null!==(a=r[c])&&void 0!==a||(r[c]={}),r[c][u]=new Set([Q2(t,{forAs:!0})]);dK(n)&&"unaggregated"===e.scaleDomain(n)&&(null!==(l=r[c])&&void 0!==l||(r[c]={}),r[c].min=new Set([Q2({field:c,aggregate:"min"},{forAs:!0})]),r[c].max=new Set([Q2({field:c,aggregate:"max"},{forAs:!0})]))}else!function(t,e,n,r){const i=T7(r)?r.encoding[JQ(e)]:void 0;if(V2(n)&&T7(r)&&P2(n,i,r.markDef,r.config))t.add(Q2(n,{})),t.add(Q2(n,{suffix:"end"})),n.bin&&m3(n,e)&&t.add(Q2(n,{binSuffix:"range"}));else if(e in IQ){const n=function(t){switch(t){case"latitude":return"y";case"latitude2":return"y2";case"longitude":return"x";case"longitude2":return"x2"}}(e);t.add(r.getName(n))}else t.add(Q2(n))}(i,n,t,e)}),i.size+rQ(r).length===0?null:new x9(t,i,r)):null}static makeFromTransform(t,e){var n,r,i;const o=new Set,s={};for(const a of e.aggregate){const{op:t,field:e,as:i}=a;t&&("count"===t?(null!==(n=s["*"])&&void 0!==n||(s["*"]={}),s["*"].count=new Set([i||Q2(a,{forAs:!0})])):(null!==(r=s[e])&&void 0!==r||(s[e]={}),s[e][t]=new Set([i||Q2(a,{forAs:!0})])))}for(const a of null!==(i=e.groupby)&&void 0!==i?i:[])o.add(a);return o.size+rQ(s).length===0?null:new x9(t,o,s)}merge(t){return KX(this.dimensions,t.dimensions)?(function(t,e){var n;for(const r of rQ(e)){const i=e[r];for(const e of rQ(i))r in t?t[r][e]=new Set([...null!==(n=t[r][e])&&void 0!==n?n:[],...i[e]]):t[r]={[e]:i[e]}}}(this.measures,t.measures),!0):(T0.debug("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...rQ(this.measures)])}producedFields(){const t=new Set;for(const e of rQ(this.measures))for(const n of rQ(this.measures[e])){const r=this.measures[e][n];0===r.size?t.add(`${n}_${e}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${qX({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],e=[],n=[];for(const r of rQ(this.measures))for(const i of rQ(this.measures[r]))for(const o of this.measures[r][i])n.push(o),t.push(i),e.push("*"===r?null:pQ(r));return{type:"aggregate",groupby:[...this.dimensions].map(pQ),ops:t,fields:e,as:n}}}class w9 extends i4{constructor(t,e,n,r){super(t),this.model=e,this.name=n,this.data=r;for(const i of qQ){const t=e.facet[i];if(t){const{bin:n,sort:r}=t;this[i]=Object.assign({name:e.getName(`${i}_domain`),fields:[Q2(t),...CK(n)?[Q2(t,{binSuffix:"end"})]:[]]},E2(r)?{sortField:r}:fy(r)?{sortIndexField:C8(t,i)}:{})}}this.childModel=e.child}hash(){let t="Facet";for(const e of qQ)this[e]&&(t+=` ${e.charAt(0)}:${qX(this[e])}`);return t}get fields(){var t;const e=[];for(const n of qQ)(null===(t=this[n])||void 0===t?void 0:t.fields)&&e.push(...this[n].fields);return e}dependentFields(){const t=new Set(this.fields);for(const e of qQ)this[e]&&(this[e].sortField&&t.add(this[e].sortField.field),this[e].sortIndexField&&t.add(this[e].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const e of iK){const n=this.childModel.component.scales[e];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(x1(r)&&$K(i)){const n=h7(f7(this.childModel,e));n?t[e]=n:M0(v.unknownField(e))}}}return t}assembleRowColumnHeaderData(t,e,n){const r={row:"y",column:"x",facet:void 0}[t],i=[],o=[],s=[];r&&n&&n[r]&&(e?(i.push(`distinct_${n[r]}`),o.push("max")):(i.push(n[r]),o.push("distinct")),s.push(`distinct_${n[r]}`));const{sortField:a,sortIndexField:l}=this[t];if(a){const{op:t=_2,field:e}=a;i.push(e),o.push(t),s.push(Q2(a,{forAs:!0}))}else l&&(i.push(l),o.push("max"),s.push(l));return{name:this[t].name,source:null!=e?e:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},i.length?{fields:i,ops:o,as:s}:{})]}}assembleFacetHeaderData(t){var e,n;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,o=[],s={};for(const u of M8){for(const t of F8){const r=null!==(e=i[u]&&i[u][t])&&void 0!==e?e:[];for(const t of r)if((null===(n=t.axes)||void 0===n?void 0:n.length)>0){s[u]=!0;break}}if(s[u]){const t=`length(data("${this.facet.name}"))`;o.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:"row"===u?r?{signal:`ceil(${t} / ${r})`}:1:r?{signal:`min(${t}, ${r})`}:{signal:t}}]})}}const{row:a,column:l}=s;return(a||l)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,t)),o}assemble(){var t,e;const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:o,row:s,facet:a}=this;if(o&&s&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(null!==(t=i.x)&&void 0!==t?t:[],null!==(e=i.y)&&void 0!==e?e:[]),s=o.map(()=>"distinct");n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:s}]})}for(const l of[AQ,CQ])this[l]&&n.push(this.assembleRowColumnHeaderData(l,r,i));if(a){const t=this.assembleFacetHeaderData(i);t&&n.push(...t)}return n}}function k9(t){return"'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]?t.slice(1,-1):t}function E9(t){const e={};return RX(t.filter,t=>{var n;if(t1(t)){let r=null;G0(t)?r=VK(t.equal):Y0(t)?r=VK(t.lte):Z0(t)?r=VK(t.lt):X0(t)?r=VK(t.gt):Q0(t)?r=VK(t.gte):K0(t)?r=t.range[0]:J0(t)&&(r=(null!==(n=t.oneOf)&&void 0!==n?n:t.in)[0]),r&&(F0(r)?e[t.field]="date":sv(r)?e[t.field]="number":lv(r)&&(e[t.field]="string")),t.timeUnit&&(e[t.field]="date")}}),e}class S9 extends i4{constructor(t,e){super(t),this._parse=e}clone(){return new S9(null,zX(this._parse))}hash(){return`Parse ${qX(this._parse)}`}static makeExplicit(t,e,n){let r={};const i=e.data;return!Z6(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(t,r,{},n)}static makeWithAncestors(t,e,n,r){for(const s of rQ(n)){const t=r.getWithExplicit(s);void 0!==t.value&&(t.explicit||t.value===n[s]||"derived"===t.value||"flatten"===n[s]?delete n[s]:M0(v.differentParse(s,n[s],t.value)))}for(const s of rQ(e)){const t=r.get(s);void 0!==t&&(t===e[s]?delete e[s]:M0(v.differentParse(s,e[s],t)))}const i=new I6(e,n);r.copyAll(i);const o={};for(const s of rQ(i.combine())){const t=i.get(s);null!==t&&(o[s]=t)}return 0===rQ(o).length||r.parseNothing?null:new S9(t,o)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const e of rQ(this._parse)){const n=this._parse[e];1===yQ(e)&&(t[e]=n)}return t}producedFields(){return new Set(rQ(this._parse))}dependentFields(){return new Set(rQ(this._parse))}assembleTransforms(t=!1){return rQ(this._parse).filter(e=>!t||yQ(e)>1).map(t=>{const e=function(t,e){const n=hQ(t);return"number"===e?`toNumber(${n})`:"boolean"===e?`toBoolean(${n})`:"string"===e?`toString(${n})`:"date"===e?`toDate(${n})`:"flatten"===e?n:e.startsWith("date:")?`timeParse(${n},'${k9(e.slice(5,e.length))}')`:e.startsWith("utc:")?`utcParse(${n},'${k9(e.slice(4,e.length))}')`:(M0(v.unrecognizedParse(e)),null)}(t,this._parse[t]);return e?{type:"formula",expr:e,as:mQ(t)}:null}).filter(t=>null!==t)}}class O9 extends i4{clone(){return new O9(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set(["_vgsid_"])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:"_vgsid_"}}}class C9 extends i4{constructor(t,e){super(t),this.params=e}clone(){return new C9(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${qX(this.params)}`}assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}class A9 extends i4{constructor(t,e){super(t),this.params=e}clone(){return new A9(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([null!==(t=this.params.as)&&void 0!==t?t:"data"])}hash(){return`Hash ${qX(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class D9 extends i4{constructor(t){let e;if(super(null),null!=t||(t={name:"source"}),Z6(t)||(e=t.format?Object.assign({},UX(t.format,["parse"])):{}),W6(t))this._data={values:t.values};else if(H6(t)){if(this._data={url:t.url},!e.type){let n=/(?:\.([^.]+))?$/.exec(t.url)[1];HX(["json","csv","tsv","dsv","topojson"],n)||(n="json"),e.type=n}}else X6(t)?this._data={values:[{type:"Sphere"}]}:(G6(t)||Z6(t))&&(this._data={});this._generator=Z6(t),t.name&&(this._name=t.name),e&&!nQ(e)&&(this._data.format=e)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var T9,M9=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n};function F9(t){return t instanceof D9||t instanceof C9||t instanceof A9}class j9{constructor(){T9.set(this,void 0),M9(this,T9,!1)}setModified(){M9(this,T9,!0)}get modifiedFlag(){return function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(this,T9)}}T9=new WeakMap;class P9 extends j9{getNodeDepths(t,e,n){n.set(t,e);for(const r of t.children)this.getNodeDepths(r,e+1,n);return n}optimize(t){const e=[...this.getNodeDepths(t,0,new Map).entries()].sort((t,e)=>e[1]-t[1]);for(const n of e)this.run(n[0]);return this.modifiedFlag}}class N9 extends j9{optimize(t){this.run(t);for(const e of t.children)this.optimize(e);return this.modifiedFlag}}class R9 extends N9{mergeNodes(t,e){const n=e.shift();for(const r of e)t.removeChild(r),r.parent=n,r.remove()}run(t){const e=t.children.map(t=>t.hash()),n={};for(let r=0;r<e.length;r++)void 0===n[e[r]]?n[e[r]]=[t.children[r]]:n[e[r]].push(t.children[r]);for(const r of rQ(n))n[r].length>1&&(this.setModified(),this.mergeNodes(t,n[r]))}}class $9 extends N9{constructor(t){super(),this.requiresSelectionId=t&&i8(t)}run(t){t instanceof O9&&(this.requiresSelectionId&&(F9(t.parent)||t.parent instanceof x9||t.parent instanceof S9)||(this.setModified(),t.remove()))}}class I9 extends j9{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,e){let n=new Set;t instanceof a4&&(n=t.producedFields(),JX(n,e)&&(this.setModified(),t.removeFormulas(e),0===t.producedFields.length&&t.remove()));for(const r of t.children)this.run(r,new Set([...e,...n]))}}class z9 extends N9{constructor(){super()}run(t){t instanceof o4&&!t.isRequired()&&(this.setModified(),t.remove())}}class L9 extends P9{run(t){if(!(F9(t)||t.numChildren()>1))for(const e of t.children)if(e instanceof S9)if(t instanceof S9)this.setModified(),t.merge(e);else{if(eQ(t.producedFields(),e.dependentFields()))continue;this.setModified(),e.swapWithParent()}}}class U9 extends P9{run(t){const e=[...t.children],n=t.children.filter(t=>t instanceof S9);if(t.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const t of n){const e=t.parse;for(const t of rQ(e))t in r?r[t]!==e[t]&&i.add(t):r[t]=e[t]}for(const t of i)delete r[t];if(!nQ(r)){this.setModified();const n=new S9(t,r);for(const i of e){if(i instanceof S9)for(const t of rQ(r))delete i.parse[t];t.removeChild(i),i.parent=n,i instanceof S9&&0===rQ(i.parse).length&&i.remove()}}}}}class B9 extends P9{run(t){t instanceof o4||t.numChildren()>0||t instanceof w9||t instanceof D9||(this.setModified(),t.remove())}}class q9 extends P9{run(t){const e=t.children.filter(t=>t instanceof a4),n=e.pop();for(const r of e)this.setModified(),n.merge(r)}}class V9 extends P9{run(t){const e=t.children.filter(t=>t instanceof x9),n={};for(const r of e){const t=qX(r.groupBy);t in n||(n[t]=[]),n[t].push(r)}for(const r of rQ(n)){const e=n[r];if(e.length>1){const n=e.pop();for(const r of e)n.merge(r)&&(t.removeChild(r),r.parent=n,r.remove(),this.setModified())}}}}class H9 extends P9{constructor(t){super(),this.model=t}run(t){const e=!(F9(t)||t instanceof u8||t instanceof S9||t instanceof O9),n=[],r=[];for(const i of t.children)i instanceof _9&&(e&&!eQ(t.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const e=n.pop();for(const t of n)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof _9?t.merge(e,this.model.renameSignal.bind(this.model)):e.swapWithParent()}if(r.length>1){const t=r.pop();for(const e of r)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified()}}}class W9 extends P9{run(t){const e=[...t.children];if(!WX(e,t=>t instanceof o4)||t.numChildren()<=1)return;const n=[];let r;for(const i of e)if(i instanceof o4){let e=i;for(;1===e.numChildren();){const[t]=e.children;if(!(t instanceof o4))break;e=t}n.push(...e.children),r?(t.removeChild(i),i.parent=r.parent,r.parent.removeChild(r),r.parent=e,this.setModified()):r=e}else n.push(i);if(n.length){this.setModified();for(const t of n)t.parent.removeChild(t),t.parent=r}}}class G9 extends i4{constructor(t,e){super(t),this.transform=e}clone(){return new G9(null,zX(this.transform))}addDimensions(t){this.transform.groupby=XX(this.transform.groupby.concat(t),t=>t)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(t=>t.field).filter(t=>void 0!==t).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:Q2(t)}hash(){return`JoinAggregateTransform ${qX(this.transform)}`}assemble(){const t=[],e=[],n=[];for(const i of this.transform.joinaggregate)e.push(i.op),n.push(this.getDefaultName(i)),t.push(void 0===i.field?null:i.field);const r=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:e,fields:t},void 0!==r?{groupby:r}:{})}}class Z9 extends i4{constructor(t,e){super(t),this._stack=e}clone(){return new Z9(null,zX(this._stack))}static makeFromTransform(t,e){const{stack:n,groupby:r,as:i,offset:o="zero"}=e,s=[],a=[];if(void 0!==e.sort)for(const c of e.sort)s.push(c.field),a.push(vQ(c.order,"ascending"));const l={field:s,order:a};let u;return u=function(t){return fy(t)&&t.every(t=>lv(t))&&t.length>1}(i)?i:lv(i)?[i,`${i}_end`]:[`${e.stack}_start`,`${e.stack}_end`],new Z9(t,{stackField:n,groupby:r,offset:o,sort:l,facetby:[],as:u})}static makeFromEncoding(t,e){const n=e.stack,{encoding:r}=e;if(!n)return null;const{groupbyChannel:i,fieldChannel:o,offset:s,impute:a}=n;let l;i&&(l=s3(r[i]));const u=function(t){return t.stack.stackBy.reduce((t,e)=>{const n=Q2(e.fieldDef);return n&&t.push(n),t},[])}(e),c=e.encoding.order;let h;return h=fy(c)||I2(c)?tJ(c):u.reduce((t,e)=>(t.field.push(e),t.order.push("y"===o?"descending":"ascending"),t),{field:[],order:[]}),new Z9(t,{dimensionFieldDef:l,stackField:e.vgField(o),facetby:[],stackby:u,sort:h,offset:s,impute:a,as:[e.vgField(o,{suffix:"start",forAs:!0}),e.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${qX(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:t,impute:e,groupby:n}=this._stack;return t?t.bin?e?[Q2(t,{binSuffix:"mid"})]:[Q2(t,{}),Q2(t,{binSuffix:"end"})]:[Q2(t)]:null!=n?n:[]}assemble(){const t=[],{facetby:e,dimensionFieldDef:n,stackField:r,stackby:i,sort:o,offset:s,impute:a,as:l}=this._stack;if(a&&n){const{bandPosition:o=.5,bin:s}=n;s&&t.push({type:"formula",expr:`${o}*`+Q2(n,{expr:"datum"})+`+${1-o}*`+Q2(n,{expr:"datum",binSuffix:"end"}),as:Q2(n,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:r,groupby:[...i,...e],key:Q2(n,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...e],field:r,sort:o,as:l,offset:s}),t}}class Y9 extends i4{constructor(t,e){super(t),this.transform=e}clone(){return new Y9(null,zX(this.transform))}addDimensions(t){this.transform.groupby=XX(this.transform.groupby.concat(t),t=>t)}dependentFields(){var t,e;const n=new Set;return(null!==(t=this.transform.groupby)&&void 0!==t?t:[]).forEach(n.add,n),(null!==(e=this.transform.sort)&&void 0!==e?e:[]).forEach(t=>n.add(t.field)),this.transform.window.map(t=>t.field).filter(t=>void 0!==t).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:Q2(t)}hash(){return`WindowTransform ${qX(this.transform)}`}assemble(){var t;const e=[],n=[],r=[],i=[];for(const c of this.transform.window)n.push(c.op),r.push(this.getDefaultName(c)),i.push(void 0===c.param?null:c.param),e.push(void 0===c.field?null:c.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&null===o[0]&&null===o[1]&&n.every(t=>xK(t)))return Object.assign({type:"joinaggregate",as:r,ops:n,fields:e},void 0!==s?{groupby:s}:{});const a=[],l=[];if(void 0!==this.transform.sort)for(const c of this.transform.sort)a.push(c.field),l.push(null!==(t=c.order)&&void 0!==t?t:"ascending");const u=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:i,as:r,ops:n,fields:e,sort:{field:a,order:l}},void 0!==u?{ignorePeers:u}:{}),void 0!==s?{groupby:s}:{}),void 0!==o?{frame:o}:{})}}function X9(t){if(t instanceof w9)if(1!==t.numChildren()||t.children[0]instanceof o4){const n=t.model.component.data.main;Q9(n);const r=(e=t,function t(n){if(!(n instanceof w9)){const r=n.clone();if(r instanceof o4){const t=K9+r.getSource();r.setSource(t),e.model.component.data.outputNodes[t]=r}else(r instanceof x9||r instanceof Z9||r instanceof Y9||r instanceof G9)&&r.addDimensions(e.fields);for(const e of n.children.flatMap(t))e.parent=r;return[r]}return n.children.flatMap(t)}),i=t.children.map(r).flat();for(const t of i)t.parent=n}else{const e=t.children[0];(e instanceof x9||e instanceof Z9||e instanceof Y9||e instanceof G9)&&e.addDimensions(t.fields),e.swapWithParent(),X9(t)}else t.children.map(X9);var e}function Q9(t){if(t instanceof o4&&t.type===K6.Main&&1===t.numChildren()){const e=t.children[0];e instanceof w9||(e.swapWithParent(),Q9(t))}}const K9="scale_";function J9(t){for(const e of t){for(const t of e.children)if(t.parent!==e)return!1;if(!J9(e.children))return!1}return!0}function t7(t,e){let n=!1;for(const r of e)n=t.optimize(r)||n;return n}function e7(t,e,n){let r=t.sources,i=!1;return i=t7(new z9,r)||i,i=t7(new $9(e),r)||i,r=r.filter(t=>t.numChildren()>0),i=t7(new B9,r)||i,r=r.filter(t=>t.numChildren()>0),n||(i=t7(new L9,r)||i,i=t7(new H9(e),r)||i,i=t7(new I9,r)||i,i=t7(new U9,r)||i,i=t7(new V9,r)||i,i=t7(new q9,r)||i,i=t7(new R9,r)||i,i=t7(new W9,r)||i),t.sources=r,i}class n7{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,e){return new n7(()=>t(e))}}function r7(t){T7(t)?function(t){const e=t.component.scales;for(const n of rQ(e)){const r=i7(t,n);if(e[n].setWithExplicit("domains",r),l7(t,n),t.component.data.isFaceted){let e=t;for(;!M7(e)&&e.parent;)e=e.parent;if("shared"===e.component.resolve.scale[n])for(const t of r.value)IK(t)&&(t.data=K9+t.data.replace(K9,""))}}}(t):function(t){for(const n of t.children)r7(n);const e=t.component.scales;for(const n of rQ(e)){let r,i=null;for(const e of t.children){const t=e.component.scales[n];if(t){r=void 0===r?t.getWithExplicit("domains"):q6(r,t.getWithExplicit("domains"),"domains","scale",c7);const e=t.get("selectionExtent");i&&e&&i.param!==e.param&&M0(v.NEEDS_SAME_SELECTION),i=e}}e[n].setWithExplicit("domains",r),i&&e[n].set("selectionExtent",i,!0)}}(t)}function i7(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:r}=t,i=function(t,e,n,r){if("unaggregated"===t){const{valid:t,reason:r}=u7(e,n);if(!t)return void M0(r)}else if(void 0===t&&r.useUnaggregatedDomain){const{valid:t}=u7(e,n);if(t)return"unaggregated"}return t}(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return i!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign(Object.assign({},t.specifiedScales[e]),{domain:i})),"x"===e&&a3(r.x2)?a3(r.x)?q6(s7(n,i,t,"x"),s7(n,i,t,"x2"),"domain","scale",c7):s7(n,i,t,"x2"):"y"===e&&a3(r.y2)?a3(r.y)?q6(s7(n,i,t,"y"),s7(n,i,t,"y2"),"domain","scale",c7):s7(n,i,t,"y2"):s7(n,i,t,e)}function o7(t,e,n){var r;const i=null===(r=W0(n))||void 0===r?void 0:r.unit;return"temporal"===e||i?function(t,e,n){return t.map(t=>({signal:`{data: ${p3(t,{timeUnit:n,type:e})}}`}))}(t,e,i):[t]}function s7(t,e,n,r){const{encoding:i}=n,o=a3(i[r]),{type:s}=o,a=o.timeUnit;if(function(t){return t&&t.unionWith}(e)){const i=s7(t,void 0,n,r),o=o7(e.unionWith,s,a);return z6([...i.value,...o])}if(RK(e))return z6([e]);if(e&&"unaggregated"!==e&&!S1(e))return z6(o7(e,s,a));const l=n.stack;if(l&&r===l.fieldChannel){if("normalize"===l.offset)return L6([[0,1]]);const t=n.requestDataName(K6.Main);return L6([{data:t,field:n.vgField(r,{suffix:"start"})},{data:t,field:n.vgField(r,{suffix:"end"})}])}const u=dK(r)&&I2(o)?function(t,e,n){if(!x1(n))return;const r=t.fieldDef(e),i=r.sort;if(S2(i))return{op:"min",field:C8(r,e),order:"ascending"};const{stack:o}=t,s=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map(t=>t.fieldDef.field)]:void 0;if(E2(i))return a7(i,o&&!HX(s,i.field));if(k2(i)){const{encoding:e,order:n}=i,r=t.fieldDef(e),{aggregate:a,field:l}=r,u=o&&!HX(s,l);if(bK(a)||_K(a))return a7({field:Q2(r),order:n},u);if(xK(a)||!a)return a7({op:a,field:l,order:n},u)}else{if("descending"===i)return{op:"min",field:t.vgField(e),order:"descending"};if(HX(["ascending",void 0],i))return!0}}(n,r,t):void 0;if(L2(o))return L6(o7([o.datum],s,a));const c=o;if("unaggregated"===e){const t=n.requestDataName(K6.Main),{field:e}=o;return L6([{data:t,field:Q2({field:e,aggregate:"min"})},{data:t,field:Q2({field:e,aggregate:"max"})}])}if(CK(c.bin)){if(x1(t))return L6("bin-ordinal"===t?[]:[{data:sQ(u)?n.requestDataName(K6.Main):n.requestDataName(K6.Raw),field:n.vgField(r,m3(c,r)?{binSuffix:"range"}:{}),sort:!0!==u&&dy(u)?u:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:t}=c;if(CK(t)){const e=v9(n,c.field,t);return L6([new n7(()=>{const t=n.getSignalName(e);return`[${t}.start, ${t}.stop]`})])}return L6([{data:n.requestDataName(K6.Main),field:n.vgField(r,{})}])}}if(c.timeUnit&&HX(["time","utc"],t)&&P2(c,T7(n)?n.encoding[JQ(r)]:void 0,n.markDef,n.config)){const t=n.requestDataName(K6.Main);return L6([{data:t,field:n.vgField(r)},{data:t,field:n.vgField(r,{suffix:"end"})}])}return L6(u?[{data:sQ(u)?n.requestDataName(K6.Main):n.requestDataName(K6.Raw),field:n.vgField(r),sort:u}]:[{data:n.requestDataName(K6.Main),field:n.vgField(r)}])}function a7(t,e){const{op:n,field:r,order:i}=t;return Object.assign(Object.assign({op:null!=n?n:e?"sum":_2},r?{field:pQ(r)}:{}),i?{order:i}:{})}function l7(t,e){var n;const r=t.component.scales[e],i=t.specifiedScales[e].domain,o=null===(n=t.fieldDef(e))||void 0===n?void 0:n.bin,s=S1(i)&&i,a=DK(o)&&TK(o.extent)&&o.extent;(s||a)&&r.set("selectionExtent",null!=s?s:a,!0)}function u7(t,e){const{aggregate:n,type:r}=t;return n?lv(n)&&!SK[n]?{valid:!1,reason:v.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===e?{valid:!1,reason:v.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:v.unaggregateDomainHasNoEffectForRawField(t)}}function c7(t,e,n,r){return t.explicit&&e.explicit&&M0(v.mergeConflictingDomainProperty(n,r,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function h7(t){if(IK(t)&&lv(t.field))return t.field;if(function(t){return!fy(t)&&"fields"in t&&!("data"in t)}(t)){let e;for(const n of t.fields)if(IK(n)&&lv(n.field))if(e){if(e!==n.field)return M0(v.FACETED_INDEPENDENT_DIFFERENT_SOURCES),e}else e=n.field;return M0(v.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),e}if(function(t){return!fy(t)&&"fields"in t&&"data"in t}(t)){M0(v.FACETED_INDEPENDENT_SAME_SOURCE);const e=t.fields[0];return lv(e)?e:void 0}}function f7(t,e){return function(t){const e=XX(t.map(t=>IK(t)?function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["sort"]):t),qX),n=XX(t.map(t=>{if(IK(t)){const e=t.sort;return void 0===e||sQ(e)||("op"in e&&"count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}}).filter(t=>void 0!==t),qX);if(0===e.length)return;if(1===e.length){const e=t[0];if(IK(e)&&n.length>0){let t=n[0];return n.length>1?(M0(v.MORE_THAN_ONE_SORT),t=!0):dy(t)&&"field"in t&&e.field===t.field&&(t=!t.order||{order:t.order}),Object.assign(Object.assign({},e),{sort:t})}return e}const r=XX(n.map(t=>sQ(t)||!("op"in t)||lv(t.op)&&t.op in vK?t:(M0(v.domainSortDropped(t)),!0)),qX);let i;1===r.length?i=r[0]:r.length>1&&(M0(v.MORE_THAN_ONE_SORT),i=!0);const o=XX(t.map(t=>IK(t)?t.data:null),t=>t);return Object.assign(1===o.length&&null!==o[0]?{data:o[0],fields:e.map(t=>t.field)}:{fields:e},i?{sort:i}:{})}(t.component.scales[e].get("domains").map(e=>(IK(e)&&(e.data=t.lookupDataSource(e.data)),e)))}function d7(t){return j7(t)||F7(t)?t.children.reduce((t,e)=>t.concat(d7(e)),p7(t)):p7(t)}function p7(t){return rQ(t.component.scales).reduce((e,n)=>{const r=t.component.scales[n];if(r.merged)return e;const i=r.combine(),{name:o,type:s,selectionExtent:a,reverse:l}=i,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(i,["name","type","selectionExtent","domains","range","reverse"]),c=function(t,e,n,r){if(oK(n)){if($K(t))return{step:{signal:`${e}_step`}}}else if(dy(t)&&IK(t))return Object.assign(Object.assign({},t),{data:r.lookupDataSource(t.data)});return t}(i.range,o,n,t),h=f7(t,n),f=a?function(t,e,n,r){const i=f8(t,e.param,e);return{signal:w1(n.get("type"))&&fy(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(t,a,r,h):null;return e.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:s},h?{domain:h}:{}),f?{domainRaw:f}:{}),{range:c}),void 0!==l?{reverse:l}:{}),u)),e},[])}class g7 extends I6{constructor(t,e){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",e)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||WX(this.get("domains"),t=>fy(t)&&2===t.length&&t[0]<=0&&t[1]>=0)}}const m7=["range","scheme"];function y7(t){return"x"===t?"width":"y"===t?"height":void 0}function v7(t,e){const n=t.fieldDef(e);if(null==n?void 0:n.bin){const{bin:r,field:i}=n,o=y7(e),s=t.getName(o);if(dy(r)&&r.binned&&void 0!==r.step)return new n7(()=>{const n=t.scaleName(e),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${t.getSignalName(s)} / (${i})`});if(CK(r)){const e=v9(t,i,r);return new n7(()=>{const n=t.getSignalName(e),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${t.getSignalName(s)} / (${r})`})}}}function b7(t,e){const n=e.specifiedScales[t],{size:r}=e,i=e.getScaleComponent(t).get("type");for(const u of m7)if(void 0!==n[u]){const r=D1(i,u),s=T1(t,u);if(r)if(s)M0(s);else switch(u){case"range":{const r=n.range;if(fy(r)){if(oK(t))return z6(r.map(t=>{if("width"===t||"height"===t){const n=e.getName(t),r=e.getSignalName.bind(e);return n7.fromName(r,n)}return t}))}else if(dy(r))return z6({data:e.requestDataName(K6.Main),field:r.field,sort:{op:"min",field:e.vgField(t)}});return z6(r)}case"scheme":return z6(function(t){return!lv(t)&&!!t.name}(o=n[u])?Object.assign({scheme:o.name},UX(o,["name"])):{scheme:o})}else M0(v.scalePropertyNotWorkWithScaleType(i,u,t))}var o;if("x"===t||"y"===t){const e="x"===t?"width":"height",n=r[e];if(v5(n)){if(x1(i))return z6({step:n.step});M0(v.stepDropped(e))}}const{rangeMin:s,rangeMax:a}=n,l=function(t,e){const{size:n,config:r,mark:i,encoding:o}=e,s=e.getSignalName.bind(e),{type:a}=a3(o[t]),l=e.getScaleComponent(t).get("type"),{domain:u,domainMid:c}=e.specifiedScales[t];switch(t){case"x":case"y":{if(HX(["point","band"],l))if("x"!==t||n.width){if("y"===t&&!n.height){const t=k5(r.view,"height");if(v5(t))return t}}else{const t=k5(r.view,"width");if(v5(t))return t}const i=y7(t),o=e.getName(i);return"y"===t&&w1(l)?[n7.fromName(s,o),0]:[0,n7.fromName(s,o)]}case"size":{const o=_7(i,e.component.scales[t].get("zero"),r),s=function(t,e,n,r){const i={x:v7(n,"x"),y:v7(n,"y")};switch(t){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const t=x7(e,i,r.view);return sv(t)?t-1:new n7(()=>`${t.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const t=x7(e,i,r.view);return sv(t)?Math.pow(.95*t,2):new n7(()=>`pow(0.95 * ${t.signal}, 2)`)}}throw new Error(v.incompatibleChannel("size",t))}(i,n,e,r);return E1(l)?function(t,e,n){const r=()=>{const r=ZK(e),i=ZK(t),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return RK(e)?new n7(r):{signal:r()}}(o,s,function(t,e,n,r){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return void 0!==n&&fy(n)?n.length+1:(M0(v.domainRequiredForThresholdScale(r)),3)}}(l,r,u,t)):[o,s]}case TQ:return[0,2*Math.PI];case"angle":return[0,360];case DQ:return[0,new n7(()=>`min(${e.getSignalName("width")},${e.getSignalName("height")})/2`)];case"strokeWidth":return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case"strokeDash":return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case NQ:return"symbol";case FQ:case jQ:case PQ:return"ordinal"===l?"nominal"===a?"category":"ordinal":void 0!==c?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case"opacity":case"fillOpacity":case"strokeOpacity":return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${t}`)}(t,e);return(void 0!==s||void 0!==a)&&D1(i,"rangeMin")&&fy(l)&&2===l.length?z6([null!=s?s:l[0],null!=a?a:l[1]]):L6(l)}function _7(t,e,n){if(e)return RK(e)?{signal:`${e.signal} ? 0 : ${_7(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(v.incompatibleChannel("size",t))}function x7(t,e,n){const r=v5(t.width)?t.width.step:w5(n,"width"),i=v5(t.height)?t.height.step:w5(n,"height");return e.x||e.y?new n7(()=>`min(${[e.x?e.x.signal:r,e.y?e.y.signal:i].join(", ")})`):Math.min(r,i)}function w7(t,e){T7(t)?function(t,e){const n=t.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=t;for(const a of rQ(n)){const l=s[a],u=n[a],c=t.getScaleComponent(a),h=a3(i[a]),f=l[e],d=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=D1(d,e),y=T1(a,e);if(void 0!==f&&(m?y&&M0(y):M0(v.scalePropertyNotWorkWithScaleType(d,e,a))),m&&void 0===y)if(void 0!==f){const t=h.timeUnit,n=h.type;switch(e){case"domainMax":case"domainMin":F0(l[e])||"temporal"===n||t?u.set(e,{signal:p3(l[e],{type:n,timeUnit:t})},!0):u.set(e,l[e],!0);break;default:u.copyKeyFromObject(e,l)}}else{const n=e in k7?k7[e]({model:t,channel:a,fieldOrDatumDef:h,scaleType:d,scalePadding:p,scalePaddingInner:g,domain:l.domain,markDef:o,config:r}):r.scale[e];void 0!==n&&u.set(e,n,!1)}}}(t,e):S7(t,e)}const k7={bins:({model:t,fieldOrDatumDef:e})=>I2(e)?function(t,e){const n=e.bin;if(CK(n)){const r=v9(t,e.field,n);return new n7(()=>t.getSignalName(r))}if(AK(n)&&DK(n)&&void 0!==n.step)return{step:n.step}}(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>function(t,e){if(HX([FQ,jQ,PQ],t)&&"nominal"!==e)return"hcl"}(t,e.type),nice:({scaleType:t,channel:e,domain:n,fieldOrDatumDef:r})=>function(t,e,n,r){var i;if(!((null===(i=s3(r))||void 0===i?void 0:i.bin)||fy(n)||HX(["time","utc"],t)))return e in rK||void 0}(t,e,n,r),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:r,config:i})=>function(t,e,n,r,i,o){if(t in rK){if(k1(e)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:e,orient:s}=i;if("bar"===e&&(!I2(r)||!r.bin&&!r.timeUnit)&&("vertical"===s&&"x"===t||"horizontal"===s&&"y"===t))return o.continuousBandSize}if("point"===e)return n.pointPadding}}(t,e,i.scale,n,r,i.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,config:r})=>function(t,e,n,r){if(void 0===t&&e in rK){const{bandPaddingInner:t,barBandPaddingInner:e,rectBandPaddingInner:i}=r;return vQ(t,"bar"===n?e:i)}}(t,e,n.type,r.scale),paddingOuter:({scalePadding:t,channel:e,scaleType:n,scalePaddingInner:r,config:i})=>function(t,e,n,r,i,o){if(void 0===t&&e in rK&&"band"===n){const{bandPaddingOuter:t}=o;return vQ(t,RK(i)?{signal:`${i.signal}/2`}:i/2)}}(t,e,n,0,r,i.scale),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:r})=>function(t,e,n,r){return"x"===n&&void 0!==r.xReverse?w1(t)&&"descending"===e?RK(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse:!(!w1(t)||"descending"!==e)||void 0}(e,I2(t)?t.sort:void 0,n,r.scale),zero:({channel:t,fieldOrDatumDef:e,domain:n,markDef:r,scaleType:i})=>function(t,e,n,r,i){if(n&&"unaggregated"!==n&&w1(i)){if(fy(n)){const t=n[n.length-1];if(n[0]<=0&&t>=0)return!0}return!1}if("size"===t&&"quantitative"===e.type&&!E1(i))return!0;if((!I2(e)||!e.bin)&&HX([...iK,...aK],t)){const{orient:e,type:n}=r;return!HX(["bar","area","line","trail"],n)||!("horizontal"===e&&"y"===t||"vertical"===e&&"x"===t)}return!1}(t,e,n,r,i)};function E7(t){T7(t)?function(t){const e=t.component.scales;for(const n of fK){const r=e[n];if(!r)continue;const i=b7(n,t);r.setWithExplicit("range",i)}}(t):S7(t,"range")}function S7(t,e){const n=t.component.scales;for(const r of t.children)"range"===e?E7(r):w7(r,e);for(const r of rQ(n)){let i;for(const n of t.children){const t=n.component.scales[r];t&&(i=q6(i,t.getWithExplicit(e),e,"scale",U6((t,n)=>{switch(e){case"range":return t.step&&n.step?t.step-n.step:0}return 0})))}n[r].setWithExplicit(e,i)}}function O7(t){t.component.scales=T7(t)?function(t){const{encoding:e,mark:n,markDef:r}=t;return fK.reduce((i,o)=>{const s=a3(e[o]);if(s&&n===H1&&o===NQ&&s.type===c1)return i;let a=s&&s.scale;if(s&&null!==a&&!1!==a){null!=a||(a={});const e=function(t,e,n,r){const i=function(t,e,n){var r;switch(e.type){case"nominal":case"ordinal":if(UQ(t)||"discrete"===mK(t))return"shape"===t&&"ordinal"===e.type&&M0(v.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(t in rK){if(HX(["rect","bar","image","rule"],n.type))return"band"}else if("arc"===n.type&&t in sK)return"band";return J1(n[tK(t)])||G2(e)&&(null===(r=e.axis)||void 0===r?void 0:r.tickBand)?"band":"point";case"temporal":return UQ(t)?"time":"discrete"===mK(t)?(M0(v.discreteChannelCannotEncode(t,"temporal")),"ordinal"):I2(e)&&e.timeUnit&&W0(e.timeUnit).utc?"utc":"time";case"quantitative":return UQ(t)?I2(e)&&CK(e.bin)?"bin-ordinal":"linear":"discrete"===mK(t)?(M0(v.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(v.invalidFieldType(e.type))}(e,n,r),{type:o}=t;return dK(e)?void 0!==o?function(t,e){if(!dK(t))return!1;switch(t){case"x":case"y":case TQ:case DQ:return k1(e)||HX(["band","point"],e);case"size":case"strokeWidth":case"opacity":case"fillOpacity":case"strokeOpacity":case"angle":return k1(e)||E1(e)||HX(["band","point","ordinal"],e);case FQ:case jQ:case PQ:return"band"!==e;case"strokeDash":case NQ:return"ordinal"===e||E1(e)}}(e,o)?I2(n)&&(s=o,!(HX([a1,u1],a=n.type)?void 0===s||x1(s):a===l1?HX(["time","utc",void 0],s):a!==s1||HX(["log","pow","sqrt","symlog","quantile","quantize","threshold","linear",void 0],s)))?(M0(v.scaleTypeNotWorkWithFieldDef(o,i)),i):o:(M0(v.scaleTypeNotWorkWithChannel(e,o,i)),i):i:null;var s,a}(a,o,s,r);i[o]=new g7(t.scaleName(`${o}`,!0),{value:e,explicit:a.type===e})}return i},{})}(t):function(t){var e,n;const r=t.component.scales={},i={},o=t.component.resolve;for(const s of t.children){O7(s);for(const r of rQ(s.component.scales))if(null!==(e=(n=o.scale)[r])&&void 0!==e||(n[r]=Y8(r,t)),"shared"===o.scale[r]){const t=i[r],e=s.component.scales[r].getWithExplicit("type");t?f1(t.value,e.value)?i[r]=q6(t,e,"type","scale",C7):(o.scale[r]="independent",delete i[r]):i[r]=e}}for(const s of rQ(i)){const e=t.scaleName(s,!0);r[s]=new g7(e,i[s]);for(const n of t.children){const t=n.component.scales[s];t&&(n.renameScale(t.get("name"),e),t.merged=!0)}}return r}(t)}const C7=U6((t,e)=>p1(t)-p1(e));var A7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class D7{constructor(){this.nameMap={}}rename(t,e){this.nameMap[t]=e}has(t){return void 0!==this.nameMap[t]}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function T7(t){return"unit"===(null==t?void 0:t.type)}function M7(t){return"facet"===(null==t?void 0:t.type)}function F7(t){return"concat"===(null==t?void 0:t.type)}function j7(t){return"layer"===(null==t?void 0:t.type)}class P7{constructor(t,e,n,r,i,o,s){var a,l;this.type=e,this.parent=n,this.config=i,this.correctDataNames=t=>(t.from&&t.from.data&&(t.from.data=this.lookupDataSource(t.from.data)),t.from&&t.from.facet&&t.from.facet.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t),this.parent=n,this.config=i,this.view=jK(s),this.name=null!==(a=t.name)&&void 0!==a?a:r,this.title=NK(t.title)?{text:t.title}:t.title?jK(t.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new D7,this.projectionNameMap=n?n.projectionNameMap:new D7,this.signalNameMap=n?n.signalNameMap:new D7,this.data=t.data,this.description=t.description,this.transforms=(null!==(l=t.transform)&&void 0!==l?l:[]).map(t=>s6(t)?{filter:$X(t.filter,i1)}:t),this.layout="layer"===e||"unit"===e?{}:function(t,e,n){var r,i;const o=n[e],s={},{spacing:a,columns:l}=o;void 0!==a&&(s.spacing=a),void 0!==l&&(A2(t)&&!O2(t.facet)||g5(t))&&(s.columns=l),m5(t)&&(s.columns=1);for(const u of _5)if(void 0!==t[u])if("spacing"===u){const e=t[u];s[u]=sv(e)?e:{row:null!==(r=e.row)&&void 0!==r?r:a,column:null!==(i=e.column)&&void 0!==i?i:a}}else s[u]=t[u];return s}(t,e,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:A2(t)||n&&n.component.data.isFaceted&&void 0===t.data},layoutSize:new I6,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?zX(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(t,{ignoreRange:e}={}){O7(t),r7(t);for(const n of A1)w7(t,n);e||E7(t)}(this)}parseProjection(){m9(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){l9(this)}assembleGroupStyle(){var t,e;if("unit"===this.type||"layer"===this.type)return null!==(e=null===(t=this.view)||void 0===t?void 0:t.style)&&void 0!==e?e:"cell"}assembleEncodeFromView(t){const e=A7(t,["style"]),n={};for(const r of rQ(e)){const t=e[r];void 0!==t&&(n[r]=WK(t))}return n}assembleGroupEncodeEntry(t){let e={};return this.view&&(e=this.assembleEncodeFromView(this.view)),t||(this.description&&(e.description=WK(this.description)),"unit"!==this.type&&"layer"!==this.type)?nQ(e)?void 0:e:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!=e?e:{})}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:e}=t,n=A7(t,["spacing"]),{component:r,config:i}=this,o=function(t,e){const n={};for(const r of qQ){const i=t[r];if(null==i?void 0:i.facetFieldDef){const{titleAnchor:t,titleOrient:o}=T8(["titleAnchor","titleOrient"],i.facetFieldDef.header,e,r),s=A8(r,o),a=U8(t,s);void 0!==a&&(n[s]=a)}}return nQ(n)?void 0:n}(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:e},this.assembleDefaultLayout()),n),o?{titleBand:o}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let e=[];for(const n of qQ)t[n].title&&e.push(j8(this,n));for(const n of M8)e=e.concat(R8(this,n));return e}assembleAxes(){return function(t,e){const{x:n=[],y:r=[]}=t;return[...n.map(t=>m8(t,"grid",e)),...r.map(t=>m8(t,"grid",e)),...n.map(t=>m8(t,"main",e)),...r.map(t=>m8(t,"main",e))].filter(t=>t)}(this.component.axes,this.config)}assembleLegends(){return f9(this)}assembleProjections(){return j7(this)||F7(this)?function(t){return t.children.reduce((t,e)=>t.concat(e.assembleProjections()),d9(t))}(this):d9(this)}assembleTitle(){var t,e,n;const r=null!==(t=this.title)&&void 0!==t?t:{},{encoding:i}=r,o=A7(r,["encoding"]),s=Object.assign(Object.assign(Object.assign({},PK(this.config.title).nonMark),o),i?{encode:{update:i}}:{});if(s.text)return HX(["unit","layer"],this.type)?HX(["middle",void 0],s.anchor)&&(null!==(e=s.frame)&&void 0!==e||(s.frame="group")):null!==(n=s.anchor)&&void 0!==n||(s.anchor="start"),nQ(s)?void 0:s}assembleGroup(t=[]){const e={};(t=t.concat(this.assembleSignals())).length>0&&(e.signals=t);const n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||M7(this.parent)?d7(this):[];r.length>0&&(e.scales=r);const i=this.assembleAxes();i.length>0&&(e.axes=i);const o=this.assembleLegends();return o.length>0&&(e.legends=o),e}getName(t){return aQ((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(K6[t].toLowerCase())}requestDataName(t){const e=this.getDataName(t),n=this.component.data.outputNodeRefCounts;return n[e]=(n[e]||0)+1,e}getSizeSignalRef(t){if(M7(this.parent)){const e=lK(G8(t)),n=this.component.scales[e];if(n&&!n.merged){const t=n.get("type"),r=n.get("range");if(x1(t)&&$K(r)){const t=n.get("name"),r=h7(f7(this,e));return r?{signal:W8(t,n,Q2({aggregate:"distinct",field:r},{expr:"datum"}))}:(M0(v.unknownField(e)),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const e=this.component.data.outputNodes[t];return e?e.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,e){this.signalNameMap.rename(t,e)}renameScale(t,e){this.scaleNameMap.rename(t,e)}renameProjection(t,e){this.projectionNameMap.rename(t,e)}scaleName(t,e){return e?this.getName(t):ZQ(t)&&dK(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,e){let n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error(v.selectionNotFound(e));return n}hasAxisOrientSignalRef(){var t,e;return(null===(t=this.component.axes.x)||void 0===t?void 0:t.some(t=>t.hasOrientSignalRef()))||(null===(e=this.component.axes.y)||void 0===e?void 0:e.some(t=>t.hasOrientSignalRef()))}}class N7 extends P7{vgField(t,e={}){const n=this.fieldDef(t);if(n)return Q2(n,e)}reduceFieldDef(t,e){return function(t,e,n,r){return t?rQ(t).reduce((n,r)=>{const i=t[r];return fy(i)?i.reduce((t,n)=>e.call(void 0,t,n,r),n):e.call(void 0,n,i,r)},n):n}(this.getMapping(),(e,n,r)=>{const i=s3(n);return i?t(e,i,r):e},e)}forEachFieldDef(t,e){M3(this.getMapping(),(e,n)=>{const r=s3(e);r&&t(r,n)},e)}}class R7 extends i4{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=zX(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"value",null!==(i=o[1])&&void 0!==i?i:"density"]}clone(){return new R7(null,zX(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${qX(this.transform)}`}assemble(){const t=this.transform,{density:e}=t,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["density"]);return Object.assign({type:"kde",field:e},n)}}class $7 extends i4{constructor(t,e){super(t),this.filter=e}clone(){return new $7(null,Object.assign({},this.filter))}static make(t,e){const{config:n,mark:r,markDef:i}=e;if("filter"!==XK("invalid",i,n))return null;const o=e.reduceFieldDef((t,n,i)=>{const o=dK(i)&&e.getScaleComponent(i);return o&&w1(o.get("type"))&&"count"!==n.aggregate&&!W1(r)&&(t[n.field]=n),t},{});return rQ(o).length?new $7(t,o):null}dependentFields(){return new Set(rQ(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${qX(this.filter)}`}assemble(){const t=rQ(this.filter).reduce((t,e)=>{const n=this.filter[e],r=Q2(n,{expr:"datum"});return null!==n&&("temporal"===n.type?t.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(t.push(`isValid(${r})`),t.push(`isFinite(+${r})`))),t},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class I7 extends i4{constructor(t,e){super(t),this.transform=e,this.transform=zX(e);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map((t,e)=>{var n;return null!==(n=r[e])&&void 0!==n?n:t})}clone(){return new I7(this.parent,zX(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${qX(this.transform)}`}assemble(){const{flatten:t,as:e}=this.transform;return{type:"flatten",fields:t,as:e}}}class z7 extends i4{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=zX(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"key",null!==(i=o[1])&&void 0!==i?i:"value"]}clone(){return new z7(null,zX(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${qX(this.transform)}`}assemble(){const{fold:t,as:e}=this.transform;return{type:"fold",fields:t,as:e}}}class L7 extends i4{constructor(t,e,n,r){super(t),this.fields=e,this.geojson=n,this.signal=r}clone(){return new L7(null,zX(this.fields),this.geojson,this.signal)}static parseAll(t,e){if(e.component.projection&&!e.component.projection.isFit)return t;let n=0;for(const r of[["longitude","latitude"],["longitude2","latitude2"]]){const i=r.map(t=>{const n=a3(e.encoding[t]);return I2(n)?n.field:L2(n)?{expr:`${n.datum}`}:H2(n)?{expr:`${n.value}`}:void 0});(i[0]||i[1])&&(t=new L7(t,i,null,e.getName("geojson_"+n++)))}if(e.channelHasField(NQ)){const r=e.typedFieldDef(NQ);r.type===c1&&(t=new L7(t,null,r.field,e.getName("geojson_"+n++)))}return t}dependentFields(){var t;const e=(null!==(t=this.fields)&&void 0!==t?t:[]).filter(lv);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${qX(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class U7 extends i4{constructor(t,e,n,r){super(t),this.projection=e,this.fields=n,this.as=r}clone(){return new U7(null,this.projection,zX(this.fields),zX(this.as))}static parseAll(t,e){if(!e.projectionName())return t;for(const n of[["longitude","latitude"],["longitude2","latitude2"]]){const r=n.map(t=>{const n=a3(e.encoding[t]);return I2(n)?n.field:L2(n)?{expr:`${n.datum}`}:H2(n)?{expr:`${n.value}`}:void 0}),i="longitude2"===n[0]?"2":"";(r[0]||r[1])&&(t=new U7(t,e.projectionName(),r,[e.getName(`x${i}`),e.getName(`y${i}`)]))}return t}dependentFields(){return new Set(this.fields.filter(lv))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${qX(this.fields)} ${qX(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class B7 extends i4{constructor(t,e){super(t),this.transform=e}clone(){return new B7(null,zX(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:e=0,stop:n,step:r}=t;return{signal:`sequence(${[e,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,e){return new B7(t,e)}static makeFromEncoding(t,e){const n=e.encoding,r=n.x,i=n.y;if(I2(r)&&I2(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const s=r.impute?i:i.impute?r:void 0,{method:a,value:l,frame:u,keyvals:c}=o.impute,h=F3(e.mark,n);return new B7(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:s.field},a?{method:a}:{}),void 0!==l?{value:l}:{}),u?{frame:u}:{}),void 0!==c?{keyvals:c}:{}),h.length?{groupby:h}:{}))}return null}hash(){return`Impute ${qX(this.transform)}`}assemble(){const{impute:t,key:e,keyvals:n,method:r,groupby:i,value:o,frame:s=[null,null]}=this.transform,a=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:e},n?{keyvals:(l=n,void 0!==(null==l?void 0:l.stop)?this.processSequence(n):n)}:{}),{method:"value"}),i?{groupby:i}:{}),{value:r&&"value"!==r?null:o});var l;return r&&"value"!==r?[a,Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:s,ignorePeers:!1},i?{groupby:i}:{}),{type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t}]:[a]}}class q7 extends i4{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=zX(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:e.on,null!==(i=o[1])&&void 0!==i?i:e.loess]}clone(){return new q7(null,zX(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${qX(this.transform)}`}assemble(){const t=this.transform,{loess:e,on:n}=t,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["loess","on"]);return Object.assign({type:"loess",x:n,y:e},r)}}class V7 extends i4{constructor(t,e,n){super(t),this.transform=e,this.secondary=n}clone(){return new V7(null,zX(this.transform),this.secondary)}static make(t,e,n,r){const i=e.component.data.sources,{from:o}=n;let s=null;if(function(t){return"data"in t}(o)){let t=itt(o.data,i);t||(t=new D9(o.data),i.push(t));const n=e.getName(`lookup_${r}`);s=new o4(t,n,K6.Lookup,e.component.data.outputNodeRefCounts),e.component.data.outputNodes[n]=s}else if(function(t){return"param"in t}(o)){const t=o.param;let r;n=Object.assign({as:t},n);try{r=e.getSelectionComponent(aQ(t),t)}catch(a){throw new Error(v.cannotLookupVariableParameter(t))}if(s=r.materialized,!s)throw new Error(v.noSameUnitLookup(t))}return new V7(t,n,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?$y(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${qX({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:$y(this.transform.as)}:{});else{let e=this.transform.as;lv(e)||(M0(v.NO_FIELDS_NEEDS_AS),e="_lookup"),t={as:[e]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}class H7 extends i4{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=zX(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"prob",null!==(i=o[1])&&void 0!==i?i:"value"]}clone(){return new H7(null,zX(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${qX(this.transform)}`}assemble(){const t=this.transform,{quantile:e}=t,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["quantile"]);return Object.assign({type:"quantile",field:e},n)}}class W7 extends i4{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=zX(e);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:e.on,null!==(i=o[1])&&void 0!==i?i:e.regression]}clone(){return new W7(null,zX(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${qX(this.transform)}`}assemble(){const t=this.transform,{regression:e,on:n}=t,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["regression","on"]);return Object.assign({type:"regression",x:n,y:e},r)}}class G7 extends i4{constructor(t,e){super(t),this.transform=e}clone(){return new G7(null,zX(this.transform))}addDimensions(t){var e;this.transform.groupby=XX((null!==(e=this.transform.groupby)&&void 0!==e?e:[]).concat(t),t=>t)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}hash(){return`PivotTransform ${qX(this.transform)}`}assemble(){const{pivot:t,value:e,groupby:n,limit:r,op:i}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:e},void 0!==r?{limit:r}:{}),void 0!==i?{op:i}:{}),void 0!==n?{groupby:n}:{})}}class Z7 extends i4{constructor(t,e){super(t),this.transform=e}clone(){return new Z7(null,zX(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${qX(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Y7(t){let e=0;return function n(r,i){var o;if(r instanceof D9&&!r.isGenerator&&!H6(r.data)&&(t.push(i),i={name:null,source:i.name,transform:[]}),r instanceof S9&&(r.parent instanceof D9&&!i.source?(i.format=Object.assign(Object.assign({},null!==(o=i.format)&&void 0!==o?o:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof w9)return i.name||(i.name="data_"+e++),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source,void t.push(...r.assemble());switch((r instanceof C9||r instanceof A9||r instanceof $7||r instanceof u8||r instanceof O8||r instanceof U7||r instanceof x9||r instanceof V7||r instanceof Y9||r instanceof G9||r instanceof z7||r instanceof I7||r instanceof R7||r instanceof q7||r instanceof H7||r instanceof W7||r instanceof O9||r instanceof Z7||r instanceof G7)&&i.transform.push(r.assemble()),(r instanceof _9||r instanceof a4||r instanceof B7||r instanceof Z9||r instanceof L7)&&i.transform.push(...r.assemble()),r instanceof o4&&(i.source&&0===i.transform.length?r.setSource(i.source):r.parent instanceof o4?r.setSource(i.name):(i.name||(i.name="data_"+e++),r.setSource(i.name),1===r.numChildren()&&(t.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof o4&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+e++);let o=i.name;!i.source||i.transform.length>0?t.push(i):o=i.source;for(const t of r.children)n(t,{name:null,source:o,transform:[]});break}}}}function X7(t,e){var n;const{facet:r,config:i,child:o,component:s}=t;if(t.channelHasField(e)){const a=r[e],l=D8("title",null,i,e);let u=n3(a,i,{allowDisabling:!0,includeDefault:void 0===l||!!l});o.component.layoutHeaders[e].title&&(u=fy(u)?u.join(", "):u,u+=` / ${o.component.layoutHeaders[e].title}`,o.component.layoutHeaders[e].title=null);const c=D8("labelOrient",a.header,i,e),h=null!==a.header&&vQ(null===(n=a.header)||void 0===n?void 0:n.labels,i.header.labels,!0),f=HX(["bottom","right"],c)?"footer":"header";s.layoutHeaders[e]={title:null!==a.header?u:null,facetFieldDef:a,[f]:"facet"===e?[]:[Q7(t,e,h)]}}}function Q7(t,e,n){const r="row"===e?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function K7(t,e){var n;const{child:r}=t;if(r.component.axes[e]){const{layoutHeaders:o,resolve:s}=t.component;if(s.axis[e]=X8(s,e),"shared"===s.axis[e]){const s="x"===e?"column":"row",a=o[s];for(const o of r.component.axes[e]){const e="top"===(i=o.get("orient"))||"left"===i||RK(i)?"header":"footer";null!==(n=a[e])&&void 0!==n||(a[e]=[Q7(t,s,!1)]);const r=m8(o,"main",t.config,{header:!0});r&&a[e][0].axes.push(r),o.mainExtracted=!0}}}var i}function J7(t){for(const e of t.children)e.parseLayoutSize()}function ttt(t,e){var n;const r=G8(e),i=lK(r),o=t.component.resolve,s=t.component.layoutSize;let a;for(const l of t.children){const e=l.component.layoutSize.getWithExplicit(r),s=null!==(n=o.scale[i])&&void 0!==n?n:Y8(i,t);if("independent"===s&&"step"===e.value){a=void 0;break}if(a){if("independent"===s&&a.value!==e.value){a=void 0;break}a=q6(a,e,r,"")}else a=e}if(a){for(const n of t.children)t.renameSignal(n.getName(r),t.getName(e)),n.component.layoutSize.set(r,"merged",!1);s.setWithExplicit(e,a)}else s.setWithExplicit(e,{explicit:!1,value:void 0})}function ett(t,e){const n=t.config,r=t.getScaleComponent("width"===e?"x":"y");if(r){const t=r.get("type"),i=r.get("range");if(x1(t)){const t=k5(n.view,e);return $K(i)||v5(t)?"step":t}return x5(n.view,e)}if(t.hasProjection||"arc"===t.mark)return x5(n.view,e);{const t=k5(n.view,e);return v5(t)?t.step:t}}function ntt(t,e,n){return Q2(e,Object.assign({suffix:`by_${Q2(t)}`},null!=n?n:{}))}class rtt extends N7{constructor(t,e,n,r){super(t,"facet",e,n,r,t.resolve),this.child=wtt(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!O2(t))return{facet:this.initFacetFieldDef(t,"facet")};const e=rQ(t),n={};for(const r of e){if(![CQ,AQ].includes(r)){M0(v.incompatibleChannel(r,"facet"));break}const e=t[r];if(void 0===e.field){M0(v.emptyFieldDef(e,r));break}n[r]=this.initFacetFieldDef(e,r)}return n}initFacetFieldDef(t,e){const n=c3(t,e);return n.header?n.header=jK(n.header):null===n.header&&(n.header=null),n}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=ott(this),this.child.parseData()}parseLayoutSize(){J7(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(t){for(const e of qQ)X7(t,e);K7(t,"x"),K7(t,"y")}(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,e,n;const r={};for(const i of qQ)for(const o of F8){const s=this.component.layoutHeaders[i],a=s[o],{facetFieldDef:l}=s;if(l){const e=D8("titleOrient",l.header,this.config,i);if(["right","bottom"].includes(e)){const n=A8(i,e);null!==(t=r.titleAnchor)&&void 0!==t||(r.titleAnchor={}),r.titleAnchor[n]="end"}}if(null==a?void 0:a[0]){const t="row"===i?"height":"width",a="header"===o?"headerBand":"footerBand";"facet"===i||this.child.component.layoutSize.get(t)||(null!==(e=r[a])&&void 0!==e||(r[a]={}),r[a][i]=.5),s.title&&(null!==(n=r.offset)&&void 0!==n||(r.offset={}),r.offset["row"===i?"rowTitle":"columnTitle"]=10)}}return r}assembleDefaultLayout(){const{column:t,row:e}=this.facet,n=t?this.columnDistinctSignal():e?1:void 0;let r="all";return(e||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(r="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),n?{columns:n}:{}),{bounds:"full",align:r})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof rtt))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroup(t){return this.parent&&this.parent instanceof rtt?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:Q2(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],e=[],n=[];if(this.child instanceof rtt){if(this.child.channelHasField("column")){const r=Q2(this.child.facet.column);t.push(r),e.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of iK){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(x1(o)&&$K(s)){const i=h7(f7(this.child,r));i?(t.push(i),e.push("distinct"),n.push(`distinct_${i}`)):M0(v.unknownField(r))}}}return{fields:t,ops:e,as:n}}assembleFacet(){const{name:t,data:e}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:s}=this.getCardinalityAggregateForChild(),a=[];for(const u of qQ){const t=this.facet[u];if(t){a.push(Q2(t));const{bin:e,sort:l}=t;if(CK(e)&&a.push(Q2(t,{binSuffix:"end"})),E2(l)){const{field:e,op:a=_2}=l,u=ntt(t,l);n&&r?(i.push(u),o.push("max"),s.push(u)):(i.push(e),o.push(a),s.push(u))}else if(fy(l)){const e=C8(t,u);i.push(e),o.push("max"),s.push(e)}}}const l=!!n&&!!r;return Object.assign({name:t,data:e,groupby:a},l||i.length>0?{aggregate:Object.assign(Object.assign({},l?{cross:l}:{}),i.length?{fields:i,ops:o,as:s}:{})}:{})}facetSortFields(t){const{facet:e}=this,n=e[t];return n?E2(n.sort)?[ntt(n,n.sort,{expr:"datum"})]:fy(n.sort)?[C8(n,t,{expr:"datum"})]:[Q2(n,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:e}=this,n=e[t];if(n){const{sort:t}=n;return[(E2(t)?t.order:!fy(t)&&t)||"ascending"]}return[]}assembleLabelTitle(){var t;const{facet:e,config:n}=this;if(e.facet)return I8(e.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of M8)if(e[i]){const o=D8("labelOrient",null===(t=e[i])||void 0===t?void 0:t.header,n,i);if(r[i].includes(o))return I8(e[i],i,n)}}assembleMarks(){const{child:t}=this,e=function(t){const e=[],n=Y7(e);for(const r of t.children)n(r,{source:t.name,name:null,transform:[]});return e}(this.component.data.facetRoot),n=t.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||t.assembleTitle(),i=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},r?{title:r}:{}),i?{style:i}:{}),{from:{facet:this.assembleFacet()},sort:{field:qQ.map(t=>this.facetSortFields(t)).flat(),order:qQ.map(t=>this.facetSortOrder(t)).flat()}}),e.length>0?{data:e}:{}),n?{encode:{update:n}}:{}),t.assembleGroup(function(t,e){if(t.component.selection&&rQ(t.component.selection).length){const n=mv(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:dG("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return r4(e)}(this,[])))]}getMapping(){return this.facet}}function itt(t,e){var n,r,i,o;for(const s of e){const e=s.data;if(t.name&&s.hasName()&&t.name!==s.dataName)continue;const a=null===(n=t.format)||void 0===n?void 0:n.mesh,l=null===(r=e.format)||void 0===r?void 0:r.feature;if(a&&l)continue;const u=null===(i=t.format)||void 0===i?void 0:i.feature;if((u||l)&&u!==l)continue;const c=null===(o=e.format)||void 0===o?void 0:o.mesh;if(!a&&!c||a===c)if(W6(t)&&W6(e)){if(IX(t.values,e.values))return s}else if(H6(t)&&H6(e)){if(t.url===e.url)return s}else if(G6(t)&&t.name===s.dataName)return s}return null}function ott(t){var e,n,r,i,o,s,a,l,u,c;let h=function(t,e){if(t.data||!t.parent){if(null===t.data){const t=new D9({values:[]});return e.push(t),t}const n=itt(t.data,e);if(n)return Z6(t.data)||(n.data.format=ZX({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const n=new D9(t.data);return e.push(n),n}}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}(t,t.component.data.sources);const{outputNodes:f,outputNodeRefCounts:d}=t.component.data,p=t.parent?t.parent.component.data.ancestorParse.clone():new V6,g=t.data;Z6(g)?(Y6(g)?h=new A9(h,g.sequence):Q6(g)&&(h=new C9(h,g.graticule)),p.parseNothing=!0):null===(null===(e=null==g?void 0:g.format)||void 0===e?void 0:e.parse)&&(p.parseNothing=!0),h=null!==(n=S9.makeExplicit(h,t,p))&&void 0!==n?n:h,h=new O9(h);const m=t.parent&&j7(t.parent);(T7(t)||M7(t))&&m&&(h=null!==(r=_9.makeFromEncoding(h,t))&&void 0!==r?r:h),t.transforms.length>0&&(h=function(t,e,n){var r,i;let o=0;for(const s of e.transforms){let a,l;if(y6(s))l=t=new O8(t,s),a="derived";else if(s6(s)){const i=E9(s);l=t=null!==(r=S9.makeWithAncestors(t,{},i,n))&&void 0!==r?r:t,t=new u8(t,e,s.filter)}else if(v6(s))l=t=_9.makeFromTransform(t,s,e),a="number";else if(_6(s))a="date",void 0===n.getWithExplicit(s.field).value&&(t=new S9(t,{[s.field]:a}),n.set(s.field,a,!1)),l=t=a4.makeFromTransform(t,s);else if(x6(s))l=t=x9.makeFromTransform(t,s),a="number",i8(e)&&(t=new O9(t));else if(a6(s))l=t=V7.make(t,e,s,o++),a="derived";else if(p6(s))l=t=new Y9(t,s),a="number";else if(g6(s))l=t=new G9(t,s),a="number";else if(w6(s))l=t=Z9.makeFromTransform(t,s),a="derived";else if(k6(s))l=t=new z7(t,s),a="derived";else if(m6(s))l=t=new I7(t,s),a="derived";else if(l6(s))l=t=new G7(t,s),a="derived";else if(d6(s))t=new Z7(t,s);else if(b6(s))l=t=B7.makeFromTransform(t,s),a="derived";else if(u6(s))l=t=new R7(t,s),a="derived";else if(c6(s))l=t=new H7(t,s),a="derived";else if(h6(s))l=t=new W7(t,s),a="derived";else{if(!f6(s)){M0(v.invalidTransformIgnored(s));continue}l=t=new q7(t,s),a="derived"}if(l&&void 0!==a)for(const t of null!==(i=l.producedFields())&&void 0!==i?i:[])n.set(t,a,!1)}return t}(h,t,p));const y=function(t){const e={};if(T7(t)&&t.component.selection)for(const n of rQ(t.component.selection)){const r=t.component.selection[n];for(const t of r.project.items)!t.channel&&yQ(t.field)>1&&(e[t.field]="flatten")}return e}(t),b=function(t){const e={};function n(t){var n;d3(t)?e[t.field]="date":"quantitative"===t.type&&lv(n=t.aggregate)&&HX(["min","max"],n)?e[t.field]="number":yQ(t.field)>1?t.field in e||(e[t.field]="flatten"):W2(t)&&E2(t.sort)&&yQ(t.sort.field)>1&&(t.sort.field in e||(e[t.sort.field]="flatten"))}if((T7(t)||M7(t))&&t.forEachFieldDef((e,r)=>{if(V2(e))n(e);else{const i=QQ(r),o=t.fieldDef(i);n(Object.assign(Object.assign({},e),{type:o.type}))}}),T7(t)){const{mark:n,markDef:r,encoding:i}=t;if(W1(n)&&!t.encoding.order){const t=i["horizontal"===r.orient?"y":"x"];I2(t)&&"quantitative"===t.type&&!(t.field in e)&&(e[t.field]="number")}}return e}(t);h=null!==(i=S9.makeWithAncestors(h,{},Object.assign(Object.assign({},y),b),p))&&void 0!==i?i:h,T7(t)&&(h=L7.parseAll(h,t),h=U7.parseAll(h,t)),(T7(t)||M7(t))&&(m||(h=null!==(o=_9.makeFromEncoding(h,t))&&void 0!==o?o:h),h=null!==(s=a4.makeFromEncoding(h,t))&&void 0!==s?s:h,h=O8.parseAllForSortIndex(h,t));const _=t.getDataName(K6.Raw),x=new o4(h,_,K6.Raw,d);if(f[_]=x,h=x,T7(t)){const e=x9.makeFromEncoding(h,t);e&&(h=e,i8(t)&&(h=new O9(h))),h=null!==(a=B7.makeFromEncoding(h,t))&&void 0!==a?a:h,h=null!==(l=Z9.makeFromEncoding(h,t))&&void 0!==l?l:h}T7(t)&&(h=null!==(u=$7.make(h,t))&&void 0!==u?u:h);const w=t.getDataName(K6.Main),k=new o4(h,w,K6.Main,d);f[w]=k,h=k,T7(t)&&function(t,e){var n;for(const[r,i]of oQ(null!==(n=t.component.selection)&&void 0!==n?n:{})){const n=t.getName(`lookup_${r}`);t.component.data.outputNodes[n]=i.materialized=new o4(new u8(e,t,{param:r}),n,K6.Lookup,t.component.data.outputNodeRefCounts)}}(t,k);let E=null;if(M7(t)){const e=t.getName("facet");h=null!==(c=function(t,e){const{row:n,column:r}=e;if(n&&r){let e=null;for(const i of[n,r])if(E2(i.sort)){const{field:n,op:r=_2}=i.sort;t=e=new G9(t,{joinaggregate:[{op:r,field:n,as:ntt(i,i.sort,{forAs:!0})}],groupby:[Q2(i)]})}return e}return null}(h,t.facet))&&void 0!==c?c:h,E=new w9(h,t,e,k.getSource()),f[e]=E}return Object.assign(Object.assign({},t.component.data),{outputNodes:f,outputNodeRefCounts:d,raw:x,main:k,facetRoot:E,ancestorParse:p})}class stt extends P7{constructor(t,e,n,r){var i,o,s,a;super(t,"concat",e,n,r,t.resolve),"shared"!==(null===(o=null===(i=t.resolve)||void 0===i?void 0:i.axis)||void 0===o?void 0:o.x)&&"shared"!==(null===(a=null===(s=t.resolve)||void 0===s?void 0:s.axis)||void 0===a?void 0:a.y)||M0(v.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((t,e)=>wtt(t,this,this.getName(`concat_${e}`),void 0,r))}parseData(){this.component.data=ott(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of rQ(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return m5(t)?t.vconcat:y5(t)?t.hconcat:t.concat}parseLayoutSize(){!function(t){J7(t);const e=void 0===t.layout.columns?"height":"childHeight";ttt(t,1===t.layout.columns?"width":"childWidth"),ttt(t,e)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=q8(this);for(const e of this.children)t.push(...e.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleMarks(){return this.children.map(t=>{const e=t.assembleTitle(),n=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},e?{title:e}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())})}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},null!=t?{columns:t}:{}),{bounds:"full",align:"each"})}}const att=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},x3),{labelExpr:1,encode:1}),ltt=rQ(att);class utt extends I6{constructor(t={},e={},n=!1){super(),this.explicit=t,this.implicit=e,this.mainExtracted=n}clone(){return new utt(zX(this.explicit),zX(this.implicit),this.mainExtracted)}hasAxisPart(t){return!("axis"!==t&&("grid"===t||"title"===t?!this.get(t):!1===(e=this.get(t))||null===e));var e}hasOrientSignalRef(){return RK(this.explicit.orient)}}const ctt={bottom:"top",top:"bottom",left:"right",right:"left"};function htt(t,e){if(!t)return e.map(t=>t.clone());{if(t.length!==e.length)return;const n=t.length;for(let r=0;r<n;r++){const n=t[r],i=e[r];if(!!n!=!!i)return;if(n&&i){const e=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(e.explicit&&o.explicit&&e.value!==o.value)return;t[r]=ftt(n,i)}}}return t}function ftt(t,e){for(const n of ltt){const r=q6(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(t,e)=>{switch(n){case"title":return rJ(t,e);case"gridScale":return{explicit:t.explicit,value:vQ(t.value,e.value)}}return B6(t,e,n,"axis")});t.setWithExplicit(n,r)}return t}function dtt(t,e,n,r,i){if("disable"===e)return void 0!==n;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(RK(n.labelAngle)?n.labelAngle:EQ(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===S8(r,i))return!0}return t===n[e]}const ptt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function gtt(t,e){var n,r,i;let o=e.axis(t);const s=new utt,a=a3(e.encoding[t]),{mark:l,config:u}=e,c=(null==o?void 0:o.orient)||(null===(n=u["x"===t?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=u.axis)||void 0===r?void 0:r.orient)||function(t){return"x"===t?"bottom":"left"}(t),h=e.getScaleComponent(t).get("type"),f=function(t,e,n,r){const i="band"===e?["axisDiscrete","axisBand"]:"point"===e?["axisDiscrete","axisPoint"]:e in y1?["axisQuantitative"]:"time"===e||"utc"===e?["axisTemporal"]:[],o="x"===t?"axisX":"axisY",s=RK(n)?"axisOrient":`axis${cQ(n)}`,a=[...i,...i.map(t=>o+t.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:v8(a,r,t,n),vgAxisConfig:v8(l,r,t,n),axisConfigStyle:b8([...l,...a],r)}}(t,h,c,e.config),d=void 0!==o?!o:_8("disable",u.style,null==o?void 0:o.style,f).configValue;if(s.set("disable",d,void 0!==o),d)return s;o=o||{};const p=function(t,e,n,r,i){const o=null==e?void 0:e.labelAngle;if(void 0!==o)return RK(o)?o:EQ(o);{const{configValue:o}=_8("labelAngle",r,null==e?void 0:e.style,i);return void 0!==o?EQ(o):"x"!==n||!HX([u1,a1],t.type)||I2(t)&&t.timeUnit?void 0:270}}(a,o,t,u.style,f),g={fieldOrDatumDef:a,axis:o,channel:t,model:e,scaleType:h,orient:c,labelAngle:p,mark:l,config:u};for(const v of ltt){const n=v in x8?x8[v](g):k3(v)?o[v]:void 0,r=void 0!==n,i=dtt(n,v,o,e,t);if(r&&i)s.set(v,n,i);else{const{configValue:t,configFrom:e}=k3(v)&&"values"!==v?_8(v,u.style,o.style,f):{},a=void 0!==t;r&&!a?s.set(v,n,i):("vgAxisConfig"!==e||ptt.has(v)&&a||v3(t)||RK(t))&&s.set(v,t,!1)}}const m=null!==(i=o.encoding)&&void 0!==i?i:{},y=b3.reduce((n,r)=>{var i;if(!s.hasAxisPart(r))return n;const o=Z8(null!==(i=m[r])&&void 0!==i?i:{},e),a="labels"===r?function(t,e,n){var r;const{encoding:i,config:o}=t,s=null!==(r=a3(i[e]))&&void 0!==r?r:a3(i[JQ(e)]),a=t.axis(e)||{},{format:l,formatType:u}=a;return u2(u)?Object.assign({text:d2({fieldOrDatumDef:s,field:"datum.value",format:l,formatType:u,config:o})},n):n}(e,t,o):o;return void 0===a||nQ(a)||(n[r]={update:a}),n},{});return nQ(y)||s.set("encode",y,!!o.encoding||void 0!==o.labelAngle),s}function mtt(t,e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),S4("x",t,{defaultPos:"mid"})),S4("y",t,{defaultPos:"mid"})),w4("size",t)),w4("angle",t)),function(t,e,n){return n?{shape:{value:n}}:w4("shape",t)}(t,0,e))}function ytt(t){var e;const{config:n,markDef:r}=t,{orient:i}=r,o="horizontal"===i?"width":"height",s=t.getScaleComponent("horizontal"===i?"x":"y"),a=null!==(e=XK("size",r,n,{vgChannel:o}))&&void 0!==e?e:n.tick.bandSize;if(void 0!==a)return a;{const t=s?s.get("range"):void 0;return t&&$K(t)&&sv(t.step)?3*t.step/4:3*w5(n.view,o)/4}}const vtt={arc:{vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),S4("x",t,{defaultPos:"mid"})),S4("y",t,{defaultPos:"mid"})),j4(t,"radius","arc")),j4(t,"theta","arc"))},area:{vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),T4("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===t.markDef.orient})),T4("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===t.markDef.orient})),L4(t))},bar:{vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),j4(t,"x","bar")),j4(t,"y","bar"))},circle:{vgMark:"symbol",encodeEntry:t=>mtt(t,"circle")},geoshape:{vgMark:"shape",encodeEntry:t=>Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},n&&I2(n)&&n.type===c1?{field:Q2(n,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),j4(t,"x","image")),j4(t,"y","image")),y4(t,"url"))},line:{vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),S4("x",t,{defaultPos:"mid"})),S4("y",t,{defaultPos:"mid"})),w4("size",t,{vgChannel:"strokeWidth"})),L4(t))},point:{vgMark:"symbol",encodeEntry:t=>mtt(t)},rect:{vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),j4(t,"x","rect")),j4(t,"y","rect"))},rule:{vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),T4("x",t,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n})),T4("y",t,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n})),w4("size",t,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:t=>mtt(t,"square")},text:{vgMark:"text",encodeEntry:t=>{const{config:e}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},I4(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),S4("x",t,{defaultPos:"mid"})),S4("y",t,{defaultPos:"mid"})),y4(t)),w4("size",t,{vgChannel:"fontSize"})),w4("angle",t)),U4("align",function(t,e,n){if(void 0===XK("align",t,n))return"center"}(t.markDef,0,e))),U4("baseline",function(t,e,n){if(void 0===XK("baseline",t,n))return"middle"}(t.markDef,0,e))),S4("radius",t,{defaultPos:null})),S4("theta",t,{defaultPos:null}))}},tick:{vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),S4("x",t,{defaultPos:"mid",vgChannel:"xc"})),S4("y",t,{defaultPos:"mid",vgChannel:"yc"})),w4("size",t,{defaultValue:ytt(t),vgChannel:i})),{[o]:WK(XK("thickness",n,e))})}},trail:{vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},I4(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),S4("x",t,{defaultPos:"mid"})),S4("y",t,{defaultPos:"mid"})),w4("size",t)),L4(t))}};function btt(t,e={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=t,s=vQ(r.clip,function(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!!(e&&e.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}(t),function(t){const e=t.component.projection;return!(!e||e.isFit)||void 0}(t)),a=YK(r),l=i.key,u=function(t){const{encoding:e,stack:n,mark:r,markDef:i,config:o}=t,s=e.order;if(!(!fy(s)&&H2(s)&&VX(s.value)||!s&&VX(XK("order",i,o)))){if((fy(s)||I2(s))&&!n)return tJ(s,{expr:"datum"});if(W1(r)){const n="horizontal"===i.orient?"y":"x",r=e[n];if(I2(r)){const e=r.sort;return fy(e)?{field:Q2(r,{prefix:n,suffix:"sort_index",expr:"datum"})}:E2(e)?{field:Q2({aggregate:A3(t.encoding)?e.op:void 0,field:e.field},{expr:"datum"})}:k2(e)?{field:Q2(t.fieldDef(e.encoding),{expr:"datum"}),order:e.order}:null===e?void 0:{field:Q2(r,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}}}}(t),c=function(t){if(!t.component.selection)return null;const e=rQ(t.component.selection).length;let n=e,r=t.parent;for(;r&&0===n;)n=rQ(r.component.selection).length,r=r.parent;return n?{interactive:e>0||!!t.encoding.tooltip}:null}(t),h=XK("aria",r,o),f=vtt[n].postEncodingTransform?vtt[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:vtt[n].vgMark},s?{clip:!0}:{}),a?{style:a}:{}),l?{key:l.field}:{}),u?{sort:u}:{}),c||{}),!1===h?{aria:h}:{}),{from:{data:e.fromPrefix+t.requestDataName(K6.Main)},encode:{update:vtt[n].encodeEntry(t)}}),f?{transform:f}:{})]}class _tt extends N7{constructor(t,e,n,r={},i){var o;super(t,"unit",e,n,i,void 0,b5(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=Y1(t.mark)?Object.assign({},t.mark):{type:t.mark},a=s.type;void 0===s.filled&&(s.filled=function(t,e,{graticule:n}){if(n)return!1;const r=QK("filled",t,e),i=t.type;return vQ(r,i!==$1&&i!==R1&&i!==z1)}(s,i,{graticule:t.data&&Q6(t.data)}));const l=this.encoding=function(t,e,n,r){return rQ(t).reduce((i,o)=>{if(!ZQ(o))return M0(v.invalidEncodingChannel(o)),i;const s=t[o];if("angle"!==o||"arc"!==e||t.theta||(M0(v.REPLACE_ANGLE_WITH_THETA),o=TQ),!function(t,e,n){const r=function(t,e){return function(t){switch(t){case FQ:case jQ:case PQ:case"description":case"detail":case"key":case"tooltip":case"href":case"order":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"facet":case CQ:case AQ:return pK;case"x":case"y":case"latitude":case"longitude":return gK;case"x2":case"y2":case"latitude2":case"longitude2":return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case"size":return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case"strokeDash":return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case NQ:return{point:"always",geoshape:"always"};case"text":return{text:"always"};case"angle":return{point:"always",square:"always",text:"always"};case"url":return{image:"always"};case TQ:case DQ:return{text:"always",arc:"always"};case MQ:case"radius2":return{arc:"always"}}}(t)[e]}(e,n);if(!r)return!1;if("binned"===r){const n=t["x2"===e?"x":"y"];return!!(I2(n)&&I2(t[e])&&AK(n.bin))}return!0}(t,o,e))return M0(v.incompatibleChannel(o,e)),i;if("size"===o&&"line"===e){const e=s3(t[o]);if(null==e?void 0:e.aggregate)return M0(v.LINE_WITH_VARYING_SIZE),i}if(o===FQ&&(n?"fill"in t:"stroke"in t))return M0(v.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),i;if("detail"===o||"order"===o&&!fy(s)&&!H2(s)||"tooltip"===o&&fy(s))s&&(i[o]=$y(s).reduce((t,e)=>(I2(e)?t.push(c3(e,o)):M0(v.emptyFieldDef(e,o)),t),[]));else{if("tooltip"===o&&null===s)i[o]=null;else if(!(I2(s)||L2(s)||H2(s)||N2(s)||RK(s)))return M0(v.emptyFieldDef(s,o)),i;i[o]=l3(s,o,r)}return i},{})}(t.encoding||{},a,s.filled,i);this.markDef=function(t,e,n){const r=jK(t),i=XK("orient",r,n);if(r.orient=function(t,e,n){switch(t){case $1:case q1:case V1:case L1:case I1:case N1:return}const{x:r,y:i,x2:o,y2:s}=e;switch(t){case P1:if(I2(r)&&(AK(r.bin)||I2(i)&&i.aggregate&&!r.aggregate))return"vertical";if(I2(i)&&(AK(i.bin)||I2(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o&&(I2(r)&&r.type===s1&&!CK(r.bin)||B2(r)))return"horizontal";if(!s&&(I2(i)&&i.type===s1&&!CK(i.bin)||B2(i)))return"vertical"}case z1:if(o&&(!I2(r)||!AK(r.bin))&&s&&(!I2(i)||!AK(i.bin)))return;case j1:if(s)return I2(i)&&AK(i.bin)?"horizontal":"vertical";if(o)return I2(r)&&AK(r.bin)?"vertical":"horizontal";if(t===z1){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case R1:case U1:{const e=U2(r),o=U2(i);if(n)return n;if(e&&!o)return"tick"!==t?"horizontal":"vertical";if(!e&&o)return"tick"!==t?"vertical":"horizontal";if(e&&o){const e=r,n=i,o=e.type===l1,s=n.type===l1;return o&&!s?"tick"!==t?"vertical":"horizontal":!o&&s?"tick"!==t?"horizontal":"vertical":!e.aggregate&&n.aggregate?"tick"!==t?"vertical":"horizontal":e.aggregate&&!n.aggregate&&"tick"!==t?"horizontal":"vertical"}return}}return"vertical"}(r.type,e,i),void 0!==i&&i!==r.orient&&M0(v.orientOverridden(r.orient,i)),"bar"===r.type&&r.orient){const t=XK("cornerRadiusEnd",r,n);if(void 0!==t){const n="horizontal"===r.orient&&e.x2||"vertical"===r.orient&&e.y2?["cornerRadius"]:t2[r.orient];for(const e of n)r[e]=t;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}return void 0===XK("opacity",r,n)&&(r.opacity=function(t,e){if(HX([$1,U1,q1,V1],t)&&!A3(e))return.7}(r.type,e)),void 0===XK("cursor",r,n)&&(r.cursor=function(t,e,n){return e.href||t.href||XK("href",t,n)?"pointer":t.cursor}(r,e,n)),r}(s,l,i),this.size=function({encoding:t,size:e}){for(const n of iK){const r=tK(n);v5(e[r])&&U2(t[n])&&(delete e[r],M0(v.stepDropped(r)))}return e}({encoding:l,size:b5(t)?Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):r}),this.stack=B5(a,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(null!==(o=t.params)&&void 0!==o?o:[]).filter(t=>f5(t))}get hasProjection(){const{encoding:t}=this,e=this.mark===H1,n=t&&zQ.some(e=>q2(t[e]));return e||n}scaleDomain(t){const e=this.specifiedScales[t];return e?e.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,e){return fK.reduce((t,n)=>{var r;const i=a3(e[n]);return i&&(t[n]=this.initScale(null!==(r=i.scale)&&void 0!==r?r:{})),t},{})}initScale(t){const{domain:e,range:n}=t,r=jK(t);return fy(e)&&(r.domain=e.map(VK)),fy(n)&&(r.range=n.map(VK)),r}initAxes(t){return iK.reduce((e,n)=>{const r=t[n];if(q2(r)||"x"===n&&q2(t.x2)||"y"===n&&q2(t.y2)){const t=q2(r)?r.axis:void 0;e[n]=t?this.initAxis(Object.assign({},t)):t}return e},{})}initAxis(t){const e=rQ(t),n={};for(const r of e){const e=t[r];n[r]=v3(e)?qK(e):VK(e)}return n}initLegends(t){return cK.reduce((e,n)=>{const r=a3(t[n]);if(r&&function(t){switch(t){case FQ:case jQ:case PQ:case"size":case NQ:case"opacity":case"strokeWidth":case"strokeDash":return!0;case"fillOpacity":case"strokeOpacity":case"angle":return!1}}(n)){const t=r.legend;e[n]=t?jK(t):t}return e},{})}parseData(){this.component.data=ott(this)}parseLayoutSize(){!function(t){const{size:e,component:n}=t;for(const r of iK){const i=tK(r);if(e[i]){const t=e[i];n.layoutSize.set(i,v5(t)?"step":t,!0)}else{const e=ett(t,i);n.layoutSize.set(i,e,!1)}}}(this)}parseSelections(){this.component.selection=function(t,e){var n;const r={},i=t.config.selection;if(!e||!e.length)return r;for(const o of e){const e=aQ(o.name),s=o.select,a=lv(s)?s:s.type,l=dy(s)?zX(s):{type:a},u=c8(i[a],["fields","encodings"]);for(const t in u)"mark"===t&&(l[t]=Object.assign(Object.assign({},u[t]),l[t])),void 0!==l[t]&&!0!==l[t]||(l[t]=null!==(n=u[t])&&void 0!==n?n:l[t]);const c=r[e]=Object.assign(Object.assign({},l),{name:e,type:a,init:o.value,bind:o.bind,events:lv(l.on)?dG(l.on,"scope"):$y(zX(l.on))});for(const n of n8)n.defined(c)&&n.parse&&n.parse(t,c,o)}return r}(this,this.selection)}parseMarkGroup(){this.component.mark=function(t){if(HX([R1,j1,B1],t.mark)){const e=F3(t.mark,t.encoding);if(e.length>0)return function(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:"faceted_path_"+t.requestDataName(K6.Main),data:t.requestDataName(K6.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:btt(t,{fromPrefix:"faceted_path_"})}]}(t,e)}else if(t.mark===P1){const e=UK.some(e=>XK(e,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return function(t){const[e]=btt(t,{fromPrefix:"stack_group_"}),n=t.scaleName(t.stack.fieldChannel),r=(e={})=>t.vgField(t.stack.fieldChannel,e),i=(t,e)=>`${t}(${[r({prefix:"min",suffix:"start",expr:e}),r({prefix:"max",suffix:"start",expr:e}),r({prefix:"min",suffix:"end",expr:e}),r({prefix:"max",suffix:"end",expr:e})].map(t=>`scale('${n}',${t})`).join(",")})`;let o,s;"x"===t.stack.fieldChannel?(o=Object.assign(Object.assign({},LX(e.encode.update,["y","yc","y2","height",...UK])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update=Object.assign(Object.assign({},UX(e.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(o=Object.assign(Object.assign({},LX(e.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update=Object.assign(Object.assign({},UX(e.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const l of UK){const n=QK(l,t.markDef,t.config);e.encode.update[l]?(o[l]=e.encode.update[l],delete e.encode.update[l]):n&&(o[l]=WK(n)),n&&(e.encode.update[l]={value:0})}const a=[];if(t.stack.groupbyChannel){const e=t.fieldDef(t.stack.groupbyChannel),n=Q2(e);n&&a.push(n),((null==e?void 0:e.bin)||(null==e?void 0:e.timeUnit))&&a.push(Q2(e,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((n,r)=>{if(e.encode.update[r])return Object.assign(Object.assign({},n),{[r]:e.encode.update[r]});{const e=QK(r,t.markDef,t.config);return void 0!==e?Object.assign(Object.assign({},n),{[r]:WK(e)}):n}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(K6.Main),name:"stack_group_"+t.requestDataName(K6.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[e]}]}]}(t)}return btt(t)}(this)}parseAxesAndHeaders(){var t;this.component.axes=(t=this,iK.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[gtt(n,t)]),e),{}))}assembleSelectionTopLevelSignals(t){return function(t,e){var n;let r=!1;for(const i of iQ(null!==(n=t.component.selection)&&void 0!==n?n:{})){const n=i.name,o=mv(n+K4);if(0===e.filter(t=>t.name===n).length){const t="point"===i.type?", true, true)":")";e.push({name:i.name,update:`${e8}(${o}, ${mv("global"===i.resolve?"union":i.resolve)}${t}`})}r=!0;for(const r of n8)r.defined(i)&&r.topLevelSignals&&(e=r.topLevelSignals(t,i,e))}return r&&0===e.filter(t=>"unit"===t.name).length&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),r4(e)}(this,t)}assembleSignals(){return[...y8(this),...e4(this,[])]}assembleSelectionData(t){return function(t,e){var n;const r=[...e];for(const i of iQ(null!==(n=t.component.selection)&&void 0!==n?n:{})){const e={name:i.name+K4};if(i.init){const n=i.project.items.map(t=>J6(t,["signals"]));e.values=i.init.map(e=>({unit:r8(t,{escape:!1}),fields:n,values:t4(e,!1)}))}r.filter(t=>t.name===i.name+K4).length||r.push(e)}return r}(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return q8(this)}assembleMarks(){var t;let e=null!==(t=this.component.mark)&&void 0!==t?t:[];return this.parent&&j7(this.parent)||(e=n4(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return C3(this.encoding,t)}fieldDef(t){return s3(this.encoding[t])}typedFieldDef(t){const e=this.fieldDef(t);return V2(e)?e:null}}class xtt extends P7{constructor(t,e,n,r,i){super(t,"layer",e,n,i,t.resolve,t.view);const o=Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((t,e)=>{if(R5(t))return new xtt(t,this,this.getName(`layer_${e}`),o,i);if(S3(t))return new _tt(t,this,this.getName(`layer_${e}`),o,i);throw new Error(v.invalidSpec(t))})}parseData(){this.component.data=ott(this);for(const t of this.children)t.parseData()}parseLayoutSize(){J7(this),ttt(this,"width"),ttt(this,"height")}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of rQ(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){!function(t){var e;const{axes:n,resolve:r}=t.component,i={top:0,bottom:0,right:0,left:0};for(const o of t.children){o.parseAxesAndHeaders();for(const e of rQ(o.component.axes))r.axis[e]=X8(t.component.resolve,e),"shared"===r.axis[e]&&(n[e]=htt(n[e],o.component.axes[e]),n[e]||(r.axis[e]="independent",delete n[e]))}for(const o of iK){for(const s of t.children)if(s.component.axes[o]){if("independent"===r.axis[o]){n[o]=(null!==(e=n[o])&&void 0!==e?e:[]).concat(s.component.axes[o]);for(const t of s.component.axes[o]){const{value:e,explicit:n}=t.getWithExplicit("orient");if(!RK(e)){if(i[e]>0&&!n){const n=ctt[e];i[e]>i[n]&&t.set("orient",n,!1)}i[e]++}}}delete s.component.axes[o]}if("independent"===r.axis[o]&&n[o]&&n[o].length>1)for(const t of n[o])t.get("grid")&&!t.explicit.grid&&(t.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleSignals()),y8(this))}assembleLayoutSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleLayoutSignals()),q8(this))}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const e of this.children)if(t=e.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return function(t,e){for(const n of t.children)T7(n)&&(e=n4(n,e));return e}(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,e)=>t.concat(e.assembleLegends()),f9(this))}}function wtt(t,e,n,r,i){if(A2(t))return new rtt(t,e,n,i);if(R5(t))return new xtt(t,e,n,r,i);if(S3(t))return new _tt(t,e,n,r,i);if(function(t){return m5(t)||y5(t)||g5(t)}(t))return new stt(t,e,n,i);throw new Error(v.invalidSpec(t))}function ktt(t,e={}){e.logger&&(T0=e.logger),e.fieldTitle&&e3(e.fieldTitle);try{const n=M5(gy(e.config,t.config)),r=M6(t,n),i=wtt(r,null,"",void 0,n);return i.parse(),function(t,e){J9(t.sources);let n=0,r=0;for(let i=0;i<5&&e7(t,e,!0);i++)n++;t.sources.map(X9);for(let i=0;i<5&&e7(t,e,!1);i++)r++;J9(t.sources),5===Math.max(n,r)&&M0("Maximum optimization runs(5) reached.")}(i.component.data,i),{spec:function(t,e,n={},r){const i=t.config?function(t){t=zX(t);for(const e of j5)delete t[e];if(t.axis)for(const e in t.axis)v3(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of e5)delete t.legend[e];if(t.mark){for(const e of Q1)delete t.mark[e];t.mark.tooltip&&dy(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(p5(t.params)),delete t.params);for(const e of F5){for(const r of Q1)delete t[e][r];const n=P5[e];if(n)for(const r of n)delete t[e][r];N5(t,e)}for(const e of rQ(J3))delete t[e];!function(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:r}=PK(t.title);nQ(e)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),e)),nQ(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),nQ(r)?delete t.title:t.title=r}(t);for(const e in t)dy(t[e])&&nQ(t[e])&&delete t[e];return nQ(t)?void 0:t}(t.config):void 0,o=[].concat(t.assembleSelectionData([]),function(t,e){var n,r;const i=[],o=Y7(i);let s=0;for(const l of t.sources){l.hasName()||(l.dataName="source_"+s++);const t=l.assemble();o(l,t)}for(const l of i)0===l.transform.length&&delete l.transform;let a=0;for(const[l,u]of i.entries())0!==(null!==(n=u.transform)&&void 0!==n?n:[]).length||u.source||i.splice(a++,0,i.splice(l,1)[0]);for(const l of i)for(const e of null!==(r=l.transform)&&void 0!==r?r:[])"lookup"===e.type&&(e.from=t.outputNodes[e.from].getSource());for(const l of i)l.name in e&&(l.values=e[l.name]);return i}(t.component.data,n)),s=t.assembleProjections(),a=t.assembleTitle(),l=t.assembleGroupStyle(),u=t.assembleGroupEncodeEntry(!0);let c=t.assembleLayoutSignals();c=c.filter(t=>"width"!==t.name&&"height"!==t.name||void 0===t.value||(e[t.name]=+t.value,!1));const{params:h}=e,f=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),f),a?{title:a}:{}),l?{style:l}:{}),u?{encode:{update:u}}:{}),{data:o}),s.length>0?{projections:s}:{}),t.assembleGroup([...c,...t.assembleSelectionTopLevelSignals([]),...p5(h)])),i?{config:i}:{}),r?{usermeta:r}:{})}(i,function(t,e,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(void 0===e?(e={type:"pad"},r.hasAxisOrientSignalRef()&&(e.resize=!0)):lv(e)&&(e={type:e}),i&&o&&("fit"===(s=e.type)||"fit-x"===s||"fit-y"===s))if("step"===i&&"step"===o)M0(v.droppingFit()),e.type="pad";else if("step"===i||"step"===o){const t="step"===i?"width":"height";M0(v.droppingFit(lK(t))),e.type=function(t){return t?`fit-${lK(t)}`:"fit"}("width"===t?"height":"width")}var s;return Object.assign(Object.assign(Object.assign({},1===rQ(e).length&&e.type?"pad"===e.type?{}:{autosize:e.type}:{autosize:e}),$6(n,!1)),$6(t,!0))}(t,r.autosize,n,i),t.datasets,t.usermeta),normalized:r}}finally{e.logger&&(T0=D0),e.fieldTitle&&e3(J2)}}const Ett=OX.version;var Stt=function(t){const[e,n]=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:n}};const Ott={background:"#333",title:{color:"#fff",subtitleColor:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},Ctt={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Att={arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},bar:{binSpacing:2,fill:"#30a2da",stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Dtt={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Ttt="Benton Gothic Bold, sans-serif",Mtt={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Ftt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Ttt,fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:Ttt,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:Ttt,titleFontSize:13,titleFontWeight:"normal"},range:{category:Mtt["category-6"],diverging:Mtt["fireandice-6"],heatmap:Mtt["fire-7"],ordinal:Mtt["fire-7"],ramp:Mtt["fire-7"]}},jtt={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ptt={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ntt={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Rtt={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Ntt["six-groups-cat-1"],diverging:Ntt["diverging-colors"],heatmap:Ntt["diverging-colors"],ordinal:Ntt["six-groups-seq"],ramp:Ntt["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:"#1696d2",stroke:null}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}},$tt={arc:{fill:"#3366CC"},area:{fill:"#3366CC"},path:{stroke:"#3366CC"},rect:{fill:"#3366CC"},shape:{stroke:"#3366CC"},symbol:{stroke:"#3366CC"},circle:{fill:"#3366CC"},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:"Arial, sans-serif",fontSize:12},"guide-title":{font:"Arial, sans-serif",fontSize:12},"group-title":{font:"Arial, sans-serif",fontSize:12}},title:{font:"Arial, sans-serif",fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Itt="2.10.0",ztt="vg-tooltip-element",Ltt={offsetX:10,offsetY:10,id:ztt,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function Utt(t,e){return JSON.stringify(t,function(t){const e=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}(e))}class Btt{constructor(t){this.options=Object.assign(Object.assign({},Ltt),t);const e=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const t=document.createElement("style");t.setAttribute("id",this.options.styleId),t.innerHTML=function(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace(ztt,t)}(e);const n=document.head;n.childNodes.length>0?n.insertBefore(t,n.childNodes[0]):n.appendChild(t)}}tooltipHandler(t,e,n,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=function(t,e,n){if(fy(t))return`[${t.map(t=>e(lv(t)?t:Utt(t,n))).join(", ")}]`;if(dy(t)){let r="";const i=t,{title:o,image:s}=i,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(i,["title","image"]);o&&(r+=`<h2>${e(o)}</h2>`),s&&(r+=`<img src="${e(s)}">`);const l=Object.keys(a);if(l.length>0){r+="<table>";for(const t of l){let i=a[t];void 0!==i&&(dy(i)&&(i=Utt(i,n)),r+=`<tr><td class="key">${e(t)}:</td><td class="value">${e(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return e(t)}(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:i,y:o}=function(t,e,n,r){let i=t.clientX+n;i+e.width>window.innerWidth&&(i=+t.clientX-n-e.width);let o=t.clientY+r;return o+e.height>window.innerHeight&&(o=+t.clientY-r-e.height),{x:i,y:o}}(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}function qtt(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}l((r=r.apply(t,e||[])).next())})}var Vtt;function Htt(t,...e){for(const n of e)Wtt(t,n);return t}function Wtt(t,e){for(const n of Object.keys(e))my(t,n,e[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});const Gtt=y;let Ztt=b;const Ytt="undefined"!=typeof window?window:void 0;void 0===Ztt&&(null===(Vtt=null==Ytt?void 0:Ytt.vl)||void 0===Vtt?void 0:Vtt.compile)&&(Ztt=Ytt.vl);const Xtt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Qtt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Ktt={vega:"Vega","vega-lite":"Vega-Lite"},Jtt={vega:Gtt.version,"vega-lite":Ztt?Ztt.version:"not available"},tet={vega:t=>t,"vega-lite":(t,e)=>Ztt.compile(t,{config:e}).spec};function eet(t,e,n,r){const i=`<html><head>${e}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+t+o),s.document.title=`${Ktt[r]} JSON Source`}function net(t){return(e=t)&&"load"in e?t:Gtt.loader(t);var e}function ret(t){var e;return null!==(e=t.usermeta&&t.usermeta.embedOptions)&&void 0!==e?e:{}}function iet(t,e){var n;return qtt(this,void 0,void 0,function*(){const r=lv(t.config)?JSON.parse(yield e.load(t.config)):null!==(n=t.config)&&void 0!==n?n:{},i=lv(t.patch)?JSON.parse(yield e.load(t.patch)):t.patch;return Object.assign(Object.assign(Object.assign({},t),i?{patch:i}:{}),r?{config:r}:{})})}function oet(t){return e=>e.lift(new set(t))}class set{constructor(t){this.notifier=t}call(t,e){const n=new aet(t),r=rt(this.notifier,new et(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class aet extends nt{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function uet(t=-1){return e=>e.lift(new cet(t,e))}class cet{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new het(t,this.count,this.source))}}class het extends F{constructor(t,e,n){super(t),this.count=e,this.source=n}error(t){if(!this.isStopped){const{source:e,count:n}=this;if(0===n)return super.error(t);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}}}let fet=(()=>{class t{constructor(t){this.httpClient=t,this.RPKI_API="https://a314e36a-1f9d-4e75-bd5e-0ee22211cb34.mock.pstmn.io",this.RPKI_API_M="https://sdpimageapi.azurewebsites.net/",this.RPKI_API_J="http://sdp2.cse.uconn.edu:8080"}handleError(t){let e="Unknown Error!";return e=t.error instanceof ErrorEvent?`Error: ${t.error.message}`:`Error Code: ${t.status}\nMessage: ${t.message}`,window.alert(e),function(t,e){return new R(e=>e.error(t))}(e)}getImages(){return this.httpClient.post(this.RPKI_API_M+"findimages",{pid:"",tags:"x-ray"}).pipe(uet(3),Gf(this.handleError))}getNLImageQuery(t){return this.httpClient.post(this.RPKI_API_M+"processquery",{query:t.query}).pipe(uet(3),Gf(this.handleError))}getGraphData(){return this.httpClient.get(this.RPKI_API+"/hijack_time_summary").pipe(uet(3),Gf(this.handleError))}getTableData(){return this.httpClient.get(this.RPKI_API+"/get_hijacks").pipe(uet(3),Gf(this.handleError))}getTokenization(){return this.httpClient.get(this.RPKI_API_J+"/process").pipe(uet(3),Gf(this.handleError))}sendTokenization(){return(new kc).set("Content-Type","application/json; charset=utf-8"),this.httpClient.post(this.RPKI_API_J+"/process",{PID:"P88",Comments:"I prescribed 3 doses of Advil to John because of severe pain. He should take 1 capsule every 3 days"}).pipe(uet(3),Gf(this.handleError))}getQuery(){return this.httpClient.get(this.RPKI_API_J+"/processQuery").pipe(uet(3),Gf(this.handleError))}}return t.\u0275fac=function(e){return new(e||t)(vr($c))},t.\u0275prov=At({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function det(t,e){1&t&&(Xo(0,"table",18),Xo(1,"thead"),Xo(2,"tr"),Xo(3,"th"),vs(4,"Query"),Qo(),Xo(5,"th"),vs(6,"Result"),Qo(),Qo(),Qo(),Xo(7,"tbody"),Xo(8,"tr"),Xo(9,"td"),vs(10,"Percentage of patients who have more than 5 cavities"),Qo(),Xo(11,"td"),vs(12,"15.6%"),Qo(),Qo(),Qo(),Qo())}function pet(t,e){if(1&t&&(Xo(0,"div",13),Xo(1,"h3",14),vs(2,"Query Result:"),Qo(),Xo(3,"p",15),vs(4,"Tables related to your search:"),Qo(),Xo(5,"div",16),Xo(6,"div",1),Ho(7,det,13,0,"table",17),Qo(),Qo(),Qo()),2&t){const t=as();bi(7),Zo("ngIf",t.activate)}}function get(t,e){1&t&&(Xo(0,"div",13),Xo(1,"h3",14),vs(2,"Associated Chart:"),Qo(),Xo(3,"p",15),vs(4,"Charts we calculated that may be related to your search:"),Qo(),Xo(5,"div",1),Ko(6,"div",19),Qo(),Qo())}function met(t,e){1&t&&Ko(0,"div")}function yet(t,e){1&t&&Ko(0,"div")}function vet(t,e){if(1&t&&(Xo(0,"div"),Ko(1,"img",26),Qo()),2&t){const t=as().index,e=as(2);bi(1),Zo("src",e.getimageurl+e.images[t],Dr)}}function bet(t,e){if(1&t&&(Xo(0,"div"),Jo(1,23),Ho(2,met,1,0,"div",24),Ho(3,yet,1,0,"div",24),Ho(4,vet,2,1,"div",25),ts(),Qo()),2&t){const t=e.index;bi(1),Zo("ngSwitch",!0),bi(1),Zo("ngSwitchCase",(t+1)%3==0&&t>0),bi(1),Zo("ngSwitchCase",(t+1)%3%2==0&&t>0)}}function _et(t,e){1&t&&Ko(0,"div")}function xet(t,e){if(1&t&&(Xo(0,"div"),Ko(1,"img",26),Qo()),2&t){const t=as().index,e=as(2);bi(1),Zo("src",e.getimageurl+e.images[t],Dr)}}function wet(t,e){1&t&&Ko(0,"div")}function ket(t,e){if(1&t&&(Xo(0,"div"),Jo(1,23),Ho(2,_et,1,0,"div",24),Ho(3,xet,2,1,"div",24),Ho(4,wet,1,0,"div",25),ts(),Qo()),2&t){const t=e.index;bi(1),Zo("ngSwitch",!0),bi(1),Zo("ngSwitchCase",(t+1)%3==0&&t>0),bi(1),Zo("ngSwitchCase",(t+1)%3%2==0&&t>0&&(t+1)%3>0)}}function Eet(t,e){if(1&t&&(Xo(0,"div"),Ko(1,"img",26),Qo()),2&t){const t=as().index,e=as(2);bi(1),Zo("src",e.getimageurl+e.images[t],Dr)}}function Oet(t,e){1&t&&Ko(0,"div")}function Cet(t,e){1&t&&Ko(0,"div")}function Aet(t,e){if(1&t&&(Xo(0,"div"),Jo(1,23),Ho(2,Eet,2,1,"div",24),Ho(3,Oet,1,0,"div",24),Ho(4,Cet,1,0,"div",25),ts(),Qo()),2&t){const t=e.index;bi(1),Zo("ngSwitch",!0),bi(1),Zo("ngSwitchCase",(t+1)%3==0&&t>0),bi(1),Zo("ngSwitchCase",(t+1)%3%2==0&&t>0)}}function Det(t,e){if(1&t&&(Xo(0,"div",13),Xo(1,"h3",14),vs(2,"Associated Images"),Qo(),Xo(3,"p",15),vs(4,"Images we found associated to your search:"),Qo(),Xo(5,"div",20),Xo(6,"div",21),Ho(7,bet,5,3,"div",22),Qo(),Xo(8,"div",21),Ho(9,ket,5,3,"div",22),Qo(),Xo(10,"div",21),Ho(11,Aet,5,3,"div",22),Qo(),Qo(),Qo()),2&t){const t=as();bi(7),Zo("ngForOf",t.images),bi(2),Zo("ngForOf",t.images),bi(2),Zo("ngForOf",t.images)}}let Tet=(()=>{class t{constructor(t,e,n){this.http=t,this.formBuilder=e,this.dataService=n,this.destroy$=new U,this.activate=!1,this.images=[],this.getimageurl="http://sdpimageapi.azurewebsites.net/file/",this.formGroup=this.formBuilder.group({query:""})}createChart(){this.dataService.getGraphData().pipe(oet(this.destroy$)).subscribe(t=>{console.log(t)})}findImages(t){this.dataService.getNLImageQuery(t).pipe(oet(this.destroy$)).subscribe(t=>{this.images=[],console.log(t);for(var e=0;e<t.length;e++)this.images.push(t[e])})}onSubmit(t){this.http.get("http://localhost:5000/graph",{params:{query:t.query}}).subscribe(t=>{let e=t[0];console.log(e),function(t,e,n={}){var r,i,o;qtt(this,void 0,void 0,function*(){let s,a;lv(e)?(a=net(n.loader),s=JSON.parse(yield a.load(e))):s=e;const l=ret(s).loader;a&&!l||(a=net(null!==(r=n.loader)&&void 0!==r?r:l));const u=yield iet(ret(s),a),c=yield iet(n,a),h=Object.assign(Object.assign({},Htt(c,u)),{config:gy(null!==(i=c.config)&&void 0!==i?i:{},null!==(o=u.config)&&void 0!==o?o:{})});return yield function(t,e,n={},r){var i,o,s,a,l,u;return qtt(this,void 0,void 0,function*(){const c=n.theme?gy(_[n.theme],null!==(i=n.config)&&void 0!==i?i:{}):n.config,h=rv(n.actions)?n.actions:Htt({},Xtt,null!==(o=n.actions)&&void 0!==o?o:{}),f=Object.assign(Object.assign({},Qtt),n.i18n),d=null!==(s=n.renderer)&&void 0!==s?s:"canvas",p=null!==(a=n.logLevel)&&void 0!==a?a:Gtt.Warn,g=null!==(l=n.downloadFileName)&&void 0!==l?l:"visualization",m="string"==typeof t?document.querySelector(t):t;if(!m)throw new Error(`${t} does not exist`);if(!1!==n.defaultStyle){const t="vega-embed-style",{root:e,rootContainer:r}=function(t){var e;const n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(e=document.head)&&void 0!==e?e:document.body}}(m);if(!e.getElementById(t)){const e=document.createElement("style");e.id=t,e.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?'.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper {\n    width: 100%;\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n'.toString():n.defaultStyle,r.appendChild(e)}}const y=function(t,e){var n;if(t.$schema){const r=Stt(t.$schema);e&&e!==r.library&&console.warn(`The given visualization spec is written in ${Ktt[r.library]}, but mode argument sets ${null!==(n=Ktt[e])&&void 0!==n?n:e}.`);const i=r.library;return Object(qm.satisfies)(Jtt[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${Ktt[i]} ${r.version}, but the current version of ${Ktt[i]} is v${Jtt[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":null!=e?e:"vega"}(e,n.mode);let v=tet[y](e,c);if("vega-lite"===y&&v.$schema){const t=Stt(v.$schema);Object(qm.satisfies)(Jtt.vega,`^${t.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${t.version}, but current version is v${Jtt.vega}.`)}m.classList.add("vega-embed"),h&&m.classList.add("has-actions"),m.innerHTML="";let b=m;if(h){const t=document.createElement("div");t.classList.add("chart-wrapper"),m.appendChild(t),b=t}const x=n.patch;x&&(v=x instanceof Function?x(v):Am(v,x,!0,!1).newDocument),n.formatLocale&&Gtt.formatLocale(n.formatLocale),n.timeFormatLocale&&Gtt.timeFormatLocale(n.timeFormatLocale);const{ast:w}=n,k=Gtt.parse(v,"vega-lite"===y?{}:c,{ast:w}),E=new Gtt.View(k,Object.assign({loader:r,logLevel:p,renderer:d},w?{expr:Gtt.expressionInterpreter}:{}));if(!1!==n.tooltip){let t;t="function"==typeof n.tooltip?n.tooltip:new Btt(!0===n.tooltip?{}:n.tooltip).call,E.tooltip(t)}let S,{hover:O}=n;if(void 0===O&&(O="vega"===y),O){const{hoverSet:t,updateSet:e}="boolean"==typeof O?{}:O;E.hover(t,e)}if(n&&(null!=n.width&&E.width(n.width),null!=n.height&&E.height(n.height),null!=n.padding&&E.padding(n.padding)),yield E.initialize(b,n.bind).runAsync(),!1!==h){let t=m;if(!1!==n.defaultStyle){const e=document.createElement("details");e.title=f.CLICK_TO_VIEW_ACTIONS,m.append(e),t=e;const n=document.createElement("summary");n.innerHTML='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',e.append(n),S=t=>{e.contains(t.target)||e.removeAttribute("open")},document.addEventListener("click",S)}const r=document.createElement("div");if(t.append(r),r.classList.add("vega-actions"),!0===h||!1!==h.export)for(const e of["svg","png"])if(!0===h||!0===h.export||h.export[e]){const t=f[`${e.toUpperCase()}_ACTION`],i=document.createElement("a");i.text=t,i.href="#",i.target="_blank",i.download=`${g}.${e}`,i.addEventListener("mousedown",function(t){return qtt(this,void 0,void 0,function*(){t.preventDefault();const r=yield E.toImageURL(e,n.scaleFactor);this.href=r})}),r.append(i)}if(!0===h||!1!==h.source){const t=document.createElement("a");t.text=f.SOURCE_ACTION,t.href="#",t.addEventListener("click",function(t){var r,i;eet(Bm()(e),null!==(r=n.sourceHeader)&&void 0!==r?r:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",y),t.preventDefault()}),r.append(t)}if("vega-lite"===y&&(!0===h||!1!==h.compiled)){const t=document.createElement("a");t.text=f.COMPILED_ACTION,t.href="#",t.addEventListener("click",function(t){var e,r;eet(Bm()(v),null!==(e=n.sourceHeader)&&void 0!==e?e:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),t.preventDefault()}),r.append(t)}if(!0===h||!1!==h.editor){const t=null!==(u=n.editorUrl)&&void 0!==u?u:"https://vega.github.io/editor/",i=document.createElement("a");i.text=f.EDITOR_ACTION,i.href="#",i.addEventListener("click",function(n){!function(t,e,n){const r=t.open(e),{origin:i}=new URL(e);let o=40;t.addEventListener("message",function e(n){n.source===r&&(o=0,t.removeEventListener("message",e,!1))},!1),setTimeout(function t(){o<=0||(r.postMessage(n,i),setTimeout(t,250),o-=1)},250)}(window,t,{config:c,mode:y,renderer:d,spec:Bm()(e)}),n.preventDefault()}),r.append(i)}}return{view:E,spec:e,vgSpec:v,finalize:function(){S&&document.removeEventListener("click",S),E.finalize()}}})}(t,s,h,a)})}("#vis",e,{actions:!1})})}ngOnInit(){}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Go($c),Go(wf),Go(fet))},t.\u0275cmp=oe({type:t,selectors:[["app-assisted-query"]],decls:20,vars:4,consts:[[1,"jumbotron","text-center"],[1,"row","justify-content-center"],[1,"container","mt-5"],[1,"col-12","col-md-10","col-lg-8"],["autocomplete","off",1,"card","card-sm",3,"formGroup","ngSubmit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"card-body","row","no-gutters","align-items-center"],[1,"col-auto"],[1,"fas","fa-search","h4","text-body"],[1,"col"],["type","text","id","query","formControlName","query","spellcheck","false",1,"form-control","form-control-lg","form-control-borderless"],["type","submit",1,"btn","btn-lg","btn-success",3,"click"],["class","container-lg m-5","style","background:#F9F9F9",4,"ngIf"],[1,"container-lg","m-5",2,"background","#F9F9F9"],[1,"text-left","pt-3"],[1,"text-left","pb-1"],[1,"container"],["class","styled-table",4,"ngIf"],[1,"styled-table"],["id","vis",1,"border","rounded","m-4"],[1,"row"],[1,"column"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"src"]],template:function(t,e){1&t&&(Xo(0,"div",0),Xo(1,"h1",1),vs(2,"Enter Query Below:"),Qo(),Xo(3,"div",2),Xo(4,"div",1),Xo(5,"div",3),Xo(6,"form",4),is("ngSubmit",function(){return e.onSubmit(e.formGroup.value)}),Ko(7,"input",5),Xo(8,"div",6),Xo(9,"div",7),Ko(10,"i",8),Qo(),Xo(11,"div",9),Ko(12,"input",10),Qo(),Xo(13,"div",7),Xo(14,"button",11),is("click",function(){return e.findImages(e.formGroup.value),e.activate=!0}),vs(15,"Search"),Qo(),Qo(),Qo(),Qo(),Qo(),Qo(),Ko(16,"br"),Qo(),Qo(),Ho(17,pet,8,1,"div",12),Ho(18,get,7,0,"div",12),Ho(19,Det,12,3,"div",12)),2&t&&(bi(6),Zo("formGroup",e.formGroup),bi(11),Zo("ngIf",e.activate),bi(1),Zo("ngIf",e.activate),bi(1),Zo("ngIf",e.images.length>0))},directives:[gf,Ah,vf,oh,Ch,_f,Mu,Du,Nu,Ru,$u],styles:['.form-control-borderless[_ngcontent-%COMP%]{border:none}.form-control-borderless[_ngcontent-%COMP%]:active, .form-control-borderless[_ngcontent-%COMP%]:focus, .form-control-borderless[_ngcontent-%COMP%]:hover{border:none;outline:none;box-shadow:none}.styled-table[_ngcontent-%COMP%]{border-collapse:collapse;margin:25px 0;font-size:.9em;font-family:sans-serif;min-width:400px;box-shadow:0 0 20px rgba(0,0,0,.15)}.styled-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#009879;color:#fff;text-align:left}.styled-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .styled-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 15px}.styled-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.styled-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(2n){background-color:#f3f3f3}.styled-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:2px solid #009879}*[_ngcontent-%COMP%]{box-sizing:border-box}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.column[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{padding:0 4px}.column[_ngcontent-%COMP%]{flex:33.33%;max-width:33.33%}.column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:8px;vertical-align:middle;width:100%}@media screen and (max-width:800px){.column[_ngcontent-%COMP%]{flex:50%;max-width:50%}}@media screen and (max-width:600px){.column[_ngcontent-%COMP%]{flex:100%;max-width:100%}}.column[_ngcontent-%COMP%]{float:left;width:33.33%;padding:5px}.row[_ngcontent-%COMP%]:after{content:"";clear:both;display:table}']}),t})();class Met extends D{constructor(t,e){super()}schedule(t,e=0){return this}}class Fet extends Met{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let jet=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Pet extends jet{constructor(t,e=jet.now){super(t,()=>Pet.delegate&&Pet.delegate!==this?Pet.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Pet.delegate&&Pet.delegate!==this?Pet.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Net=new Pet(Fet);class Ret{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new $et(t,this.dueTime,this.scheduler))}}class $et extends F{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Iet,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Iet(t){t.debouncedNext()}class zet{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Let(t,this.compare,this.keySelector))}}class Let extends F{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}const Uet=/[|\\{}()[\]^$+*?.]/g;class Bet extends RegExp{}const qet=new Map;let Vet=(()=>{class t{filterSuggestions(t,e,n){const r=this.outersect(t,e,t=>t.name);if(r&&n){let e=n||"*";e=e.endsWith("*")?e:e+"*",e=e.startsWith("*")?e:"*"+e;const i=r.filter(t=>{return n=t,function(t,e,n){const r=Object.assign({caseSensitive:!1},void 0),i=t+true+JSON.stringify(r);if(qet.has(i))return qet.get(i);const o="!"===t[0];o&&(t=t.slice(1)),t=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(Uet,"\\$&")}(t).replace(/\\\*/g,".*"),o&&(t=`(?!${t})`);const s=new Bet(`^${t}$`,r.caseSensitive?"":"i");return s.negated=o,qet.set(i,s),s}(e).test(n);var n});return t.filter(t=>-1!==i.indexOf(t.name))}return[]}outersect(t,e,n){return t.map(n).filter(t=>-1===e.map(n).indexOf(t))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();class Het{}function Wet(t,e=null){return{type:4,styles:e,timings:t}}function Get(t,e=null){return{type:2,steps:t,options:e}}function Zet(t){return{type:6,styles:t,offset:null}}function Yet(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Xet(t){Promise.resolve(null).then(t)}class Qet{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Xet(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Ket{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Xet(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}let Jet=(()=>{class t{constructor(){this.closed=new Va,this.deleteState="none"}ngOnInit(){}onTagClicked(){this.deleteState="prepare"}onDeleteAnimationDone(t,e){"prepare"===t.toState&&this.closed.emit(e)}}var e,n,r;return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["app-tag"]],inputs:{tag:"tag"},outputs:{closed:"closed"},decls:2,vars:6,consts:[[1,"app-tag",3,"click"]],template:function(t,e){1&t&&(Xo(0,"div",0),is("@deleteAnimation.done",function(t){return e.onDeleteAnimationDone(t,e.tag)})("click",function(){return e.onTagClicked()}),vs(1),Qo()),2&t&&(hs("background-color",e.tag.backgroundColor)("color",e.tag.color),Zo("@deleteAnimation",e.deleteState),bi(1),bs(e.tag.name))},styles:['@charset "UTF-8";.app-tag[_ngcontent-%COMP%]{display:inline-block;font-size:75%;padding:.25em .4em;font-weight:700;white-space:nowrap;vertical-align:middle;border-radius:.25rem;margin-right:.25em;margin-bottom:.25em;cursor:pointer;transition:opacity .3s;text-align:center;opacity:.85;color:#333}.app-tag[_ngcontent-%COMP%]:hover{opacity:1}.app-tag[_ngcontent-%COMP%]:after{display:"block";content:"\xd7";padding-left:.4em;opacity:.5;transition:opacity .3s}.app-tag[_ngcontent-%COMP%]:hover:after{opacity:1}@media (max-width:425px){.app-tag[_ngcontent-%COMP%]{position:relative;text-align:left;overflow:hidden;text-overflow:ellipsis;padding-right:20px}.app-tag[_ngcontent-%COMP%]:after{position:absolute;right:.4em;top:50%;transform:translateY(-50%)}}'],data:{animation:[(n="deleteAnimation",r=[(e=Zet({transform:"scale(0)",opacity:"0"}),{type:0,name:"prepare",styles:e,options:void 0}),Yet("none => prepare",Wet(200))],{type:7,name:n,definitions:r,options:{}})]}}),t})(),tnt=(()=>{class t{constructor(){this.closed=new Va}ngOnInit(){}onSuggestionClicked(t){this.closed.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["app-suggestion"]],inputs:{suggestion:"suggestion"},outputs:{closed:"closed"},decls:2,vars:5,consts:[[1,"app-suggestion",3,"click"]],template:function(t,e){1&t&&(Xo(0,"div",0),is("click",function(){return e.onSuggestionClicked(e.suggestion)}),vs(1),Qo()),2&t&&(hs("background-color",e.suggestion.backgroundColor)("color",e.suggestion.color),bi(1),bs(e.suggestion.name))},styles:[".app-suggestion[_ngcontent-%COMP%]{display:inline-block;font-size:75%;padding:.25em .4em;font-weight:700;white-space:nowrap;vertical-align:middle;border-radius:.25rem;margin-right:.25em;margin-bottom:.25em;cursor:pointer;opacity:.85;transition:opacity .3s;text-align:center;color:#333}.app-suggestion[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width:425px){.app-suggestion[_ngcontent-%COMP%]{position:relative;text-align:left;overflow:hidden;text-overflow:ellipsis;padding-right:20px}}"]}),t})(),ent=(()=>{class t{constructor(t){this.tagService=t}transform(t,e,n){return this.tagService.filterSuggestions(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Go(Vet))},t.\u0275pipe={type:(e={name:"tagFilter",type:t,pure:!0}).type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null},t;var e})();const nnt=["tagInput"];function rnt(t,e){if(1&t){const t=es();Xo(0,"app-tag",10),is("closed",function(e){return We(t),as().tagRemoved.emit(e)}),Qo()}2&t&&Zo("tag",e.$implicit)}function int(t,e){if(1&t){const t=es();Xo(0,"app-suggestion",13),is("closed",function(e){return We(t),as(2).tagAdded.emit(e)}),Qo()}2&t&&Zo("suggestion",e.$implicit)}function ont(t,e){if(1&t&&(yn(),Be.lFrame.currentNamespace=null,Xo(0,"div",11),Ho(1,int,1,1,"app-suggestion",12),Ba(2,"tagFilter"),Qo()),2&t){const t=as();bi(1),Zo("ngForOf",qa(2,1,t.suggestions,t.tags,t.debouncedText))}}let snt=(()=>{class t{constructor(t){this.tagService=t,this.tagAdded=new Va,this.tagRemoved=new Va,this.expanded=!0,this.tagInputText="",this.debouncedText=""}ngOnInit(){this.changesSub=this.tagInput.valueChanges.pipe(function(t,e=Net){return n=>n.lift(new Ret(t,e))}(300),t=>t.lift(new zet(void 0,void 0))).subscribe(t=>{this.debouncedText=t})}ngOnDestroy(){this.changesSub&&this.changesSub.unsubscribe()}onKeyUp(t){if("Enter"===t.key)if(t.shiftKey){const t=this.tagService.filterSuggestions(this.suggestions,this.tags,this.debouncedText);t.length>0&&this.tagAdded.emit(t[0])}else this.tagAdded.emit({name:this.tagInputText,backgroundColor:"#868E96",color:"#FFFFFF"}),this.tagInput.reset()}onAdd(){this.tagAdded.emit({name:this.tagInputText,backgroundColor:"#868E96",color:"#FFFFFF"}),this.tagInput.reset()}onExpand(){this.expanded=!this.expanded}}return t.\u0275fac=function(e){return new(e||t)(Go(Vet))},t.\u0275cmp=oe({type:t,selectors:[["app-tags"]],viewQuery:function(t,e){if(1&t&&function(t,e,n){const r=He();r.firstCreatePass&&sl(r,new Ya(t,1,void 0),-1),ol(r,Ve(),1)}(nnt),2&t){let t;nl(t=il())&&(e.tagInput=t.first)}},inputs:{tags:"tags",suggestions:"suggestions"},outputs:{tagAdded:"tagAdded",tagRemoved:"tagRemoved"},decls:11,vars:9,consts:[[1,"app-tags-container"],[1,"app-tags",3,"click"],[3,"tag","closed",4,"ngFor","ngForOf"],[1,"app-tag-input-wrapper"],["type","text","placeholder","Add tag ...",3,"ngModel","ngModelChange","keyup"],["tagInput","ngModel"],[1,"add-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 32 32"],["d","M16 0C7.2 0 0 7.2 0 16s7.2 16 16 16 16-7.2 16-16S24.8 0 16 0zm7 17h-6v6h-2v-6H9v-2h6V9h2v6h6v2z","fill","#0091dc"],["class","app-tag-suggestions",4,"ngIf"],[3,"tag","closed"],[1,"app-tag-suggestions"],[3,"suggestion","closed",4,"ngFor","ngForOf"],[3,"suggestion","closed"]],template:function(t,e){1&t&&(Xo(0,"div",0),Xo(1,"div",1),is("click",function(){return e.onExpand()}),Ho(2,rnt,1,1,"app-tag",2),Qo(),Xo(3,"div",3),Xo(4,"input",4,5),is("ngModelChange",function(t){return e.tagInputText=t})("keyup",function(t){return e.onKeyUp(t)}),Qo(),Xo(6,"div",6),is("click",function(){return e.onAdd()}),yn(),Xo(7,"svg",7),Ko(8,"path",8),Qo(),Qo(),Ho(9,ont,3,5,"div",9),Ba(10,"tagFilter"),Qo(),Qo()),2&t&&(bi(1),fs("expanded",e.expanded),bi(1),Zo("ngForOf",e.tags),bi(2),Zo("ngModel",e.tagInputText),bi(5),Zo("ngIf",qa(10,5,e.suggestions,e.tags,e.debouncedText).length>0))},directives:[Du,oh,Ch,pf,Mu,Jet,tnt],pipes:[ent],styles:[".app-tags-container[_ngcontent-%COMP%]{padding:.25em .4em;border:1px solid #ccc;border-radius:4px}.app-tags-container[_ngcontent-%COMP%]   .app-tags[_ngcontent-%COMP%]{display:inline-block}.app-tags-container[_ngcontent-%COMP%]   .app-tag-input-wrapper[_ngcontent-%COMP%]{margin-right:.25em;display:inline-block;border-bottom:1px solid #ccc;position:relative}.app-tags-container[_ngcontent-%COMP%]   .app-tag-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.35em .4em;border:none;outline:none;font-weight:700;font-size:75%;vertical-align:middle}.app-tags-container[_ngcontent-%COMP%]   .app-tag-input-wrapper[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{position:absolute;right:0;top:2px;width:20px;height:20px;cursor:pointer;opacity:1;transition:opacity .3s}.app-tags-container[_ngcontent-%COMP%]   .app-tag-input-wrapper[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]:hover{opacity:.8}.app-tags-container[_ngcontent-%COMP%]   .app-tag-input-wrapper[_ngcontent-%COMP%]   .app-tag-suggestions[_ngcontent-%COMP%]{position:absolute;left:0;right:0;padding:.35em .4em;background-color:rgba(215,218,224,.8);border-bottom-left-radius:4px;border-bottom-right-radius:4px;box-shadow:0 2px 4px 0 rgba(0,0,0,.1)}@media (max-width:425px){.app-tags-container[_ngcontent-%COMP%]{position:relative;padding-top:35px}.app-tags-container[_ngcontent-%COMP%]   .app-tags[_ngcontent-%COMP%]{position:relative;cursor:pointer}.app-tags-container[_ngcontent-%COMP%]   .app-tag-input-wrapper[_ngcontent-%COMP%]{display:block;position:absolute;top:.35em;left:.4em;right:.4em}.app-tags-container[_ngcontent-%COMP%]   .app-tag-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}"]}),t})();function ant(t,e){if(1&t){const t=es();Xo(0,"div",35),Xo(1,"div",36),Xo(2,"input",37,38),is("change",function(e){return We(t),as().onFileChanged(e)}),Qo(),Xo(4,"button",39),is("click",function(){return We(t),Wo(3).click()}),vs(5,"Select Image"),Qo(),Qo(),Qo()}}function lnt(t,e){if(1&t){const t=es();Xo(0,"div"),Xo(1,"div",40),Ko(2,"img",41),Qo(),Xo(3,"div",42),Xo(4,"span",43),Xo(5,"button",44),is("click",function(){return We(t),as().onUpload()}),vs(6,"Analyze Image"),Qo(),Qo(),Xo(7,"span",43),Xo(8,"button",45),is("click",function(){We(t);const e=as();return e.selectedFile=null,e.tags=null}),vs(9,"Clear Image"),Qo(),Qo(),Qo(),Xo(10,"h4",46),vs(11,"Image Descriptors and Tags"),Qo(),Xo(12,"app-tags",47),is("tagAdded",function(e){return We(t),as().onTagAdded(e)})("tagRemoved",function(e){return We(t),as().onTagRemoved(e)}),Qo(),Qo()}if(2&t){const t=as();bi(2),Zo("src",t.imageURL,Dr)("alt",t.selectedFile.name),bi(10),Zo("tags",t.tags)("suggestions",t.suggestions)}}function unt(t,e){if(1&t&&(Xo(0,"div"),vs(1),Qo()),2&t){const t=as();bi(1),_s(" ",t.str," ")}}const cnt=[{path:"home",component:sm},{path:"about",component:am},{path:"contact",component:lm},{path:"sql-query",component:um},{path:"assisted-query",component:Tet},{path:"upload-data",component:(()=>{class t{constructor(t,e){this.http=t,this.dataService=e,this.selectedFile=null,this.destroy$=new U,this.activate=!1,this.str="",this.tags=[],this.suggestions=[{name:"Ember",backgroundColor:"#868E96",color:"#FFFFFF"},{name:"Aurelia",backgroundColor:"#868E96",color:"#FFFFFF"},{name:"AngularJS",backgroundColor:"#868E96",color:"#FFFFFF"},{name:"Mithril",backgroundColor:"#868E96",color:"#FFFFFF"},{name:"jQuery",backgroundColor:"#868E96",color:"#FFFFFF"},{name:"knockout",backgroundColor:"#868E96",color:"#FFFFFF"},{name:"inferno",backgroundColor:"#868E96",color:"#FFFFFF"}]}ngOnInit(){}sendToken(){this.dataService.sendTokenization().pipe(oet(this.destroy$)).subscribe(t=>{console.log(t),this.str=JSON.stringify(t)})}onFileChanged(t){this.selectedFile=t.target.files[0];const e=new FileReader;e.onload=()=>{this.imageURL=e.result},e.readAsDataURL(this.selectedFile)}onUpload(){const t=new FormData;t.append("image",this.selectedFile,this.selectedFile.name),this.tags.push({name:"Angular",backgroundColor:"#868E96",color:"#FFFFFF"}),console.log(this.tags),this.http.post("http://127.0.0.1:5000/classify",t).subscribe(t=>{console.log(t);for(var e=0;e<t.length;e++){let n={};n.name=t[e],n.backgroundColor="#0275d8",n.color="#FFFFFF",this.tags.push(n)}})}onTagRemoved(t){const e=this.tags.findIndex(e=>e.name.toLowerCase()===t.name.toLowerCase());-1!==e&&(this.tags=[...this.tags.slice(0,e),...this.tags.slice(e+1)])}onTagAdded(t){-1===this.tags.findIndex(e=>e.name.toLowerCase()===t.name.toLowerCase())&&(this.tags=[...this.tags,t])}}return t.\u0275fac=function(e){return new(e||t)(Go($c),Go(fet))},t.\u0275cmp=oe({type:t,selectors:[["app-upload-data"]],decls:67,vars:3,consts:[[1,"container-lg","mt-5"],[1,"container-lg","m-5",2,"background","#F9F9F9"],[1,"text-center","p-3"],["novalidate","",1,"needs-validation"],[1,"form-row"],[1,"col-md-4","mb-3"],["for","validationCustom01"],["type","text","id","validationCustom01","placeholder","First name","value","Mark","required","",1,"form-control"],[1,"valid-feedback"],["for","validationCustom02"],["type","text","id","validationCustom02","placeholder","Last name","value","Otto","required","",1,"form-control"],["for","validationCustomUsername"],[1,"input-group"],[1,"input-group-prepend"],["id","inputGroupPrepend",1,"input-group-text"],["type","text","id","validationCustomUsername","placeholder","Patient ID","aria-describedby","inputGroupPrepend","required","",1,"form-control"],[1,"invalid-feedback"],[1,"col-md-6","mb-3"],["for","validationCustom03"],["type","text","id","validationCustom03","placeholder","City","required","",1,"form-control"],[1,"col-md-3","mb-3"],["for","validationCustom04"],["type","text","id","validationCustom04","placeholder","State","required","",1,"form-control"],["for","validationCustom05"],["type","text","id","validationCustom05","placeholder","Zip","required","",1,"form-control"],["type","submit",1,"btn","btn-primary","mb-3"],["class","row pb-3",4,"ngIf"],[4,"ngIf"],["action","http://sdp2.cse.uconn.edu:8080/process","method","post"],[1,"form-group"],["for","fname"],["rows","10",1,"form-control"],["type","submit","value","Submit",2,"display","none",3,"click"],["dataInput",""],[1,"btn","btn-info","m-3",3,"click"],[1,"row","pb-3"],[1,"col","text-left"],["type","file",2,"display","none",3,"change"],["fileInput",""],[1,"btn","btn-info",3,"click"],[1,"col","text-center","p-3"],[2,"width","30%",3,"src","alt"],[1,"col","text-center"],[1,"px-1"],[1,"btn","btn-primary","px-2",3,"click"],[1,"btn","btn-info","px-2",3,"click"],[1,"text-left","mt-3","p-1"],[3,"tags","suggestions","tagAdded","tagRemoved"]],template:function(t,e){if(1&t){const t=es();Xo(0,"div",0),Xo(1,"div",1),Xo(2,"h3",2),vs(3,"Patient Information"),Qo(),Xo(4,"form",3),Xo(5,"div",4),Xo(6,"div",5),Xo(7,"label",6),vs(8,"First name"),Qo(),Ko(9,"input",7),Xo(10,"div",8),vs(11," Looks good! "),Qo(),Qo(),Xo(12,"div",5),Xo(13,"label",9),vs(14,"Last name"),Qo(),Ko(15,"input",10),Xo(16,"div",8),vs(17," Looks good! "),Qo(),Qo(),Xo(18,"div",5),Xo(19,"label",11),vs(20,"Patient ID"),Qo(),Xo(21,"div",12),Xo(22,"div",13),Xo(23,"span",14),vs(24,"@"),Qo(),Qo(),Ko(25,"input",15),Xo(26,"div",16),vs(27," Please choose a username. "),Qo(),Qo(),Qo(),Qo(),Xo(28,"div",4),Xo(29,"div",17),Xo(30,"label",18),vs(31,"City"),Qo(),Ko(32,"input",19),Xo(33,"div",16),vs(34," Please provide a valid city. "),Qo(),Qo(),Xo(35,"div",20),Xo(36,"label",21),vs(37,"State"),Qo(),Ko(38,"input",22),Xo(39,"div",16),vs(40," Please provide a valid state. "),Qo(),Qo(),Xo(41,"div",20),Xo(42,"label",23),vs(43,"Zip"),Qo(),Ko(44,"input",24),Xo(45,"div",16),vs(46," Please provide a valid zip. "),Qo(),Qo(),Qo(),Xo(47,"button",25),vs(48,"Submit form"),Qo(),Qo(),Qo(),Xo(49,"div",1),Xo(50,"h3",2),vs(51,"Medical Image Upload"),Qo(),Ho(52,ant,6,0,"div",26),Ho(53,lnt,13,4,"div",27),Qo(),Xo(54,"div",1),Xo(55,"h3",2),vs(56,"Clinical Data"),Qo(),Xo(57,"form",28),Xo(58,"div",29),Xo(59,"label",30),vs(60,"Enter Data:"),Qo(),Ko(61,"textarea",31),Xo(62,"input",32,33),is("click",function(){return e.sendToken(),e.activate=!e.activate}),Qo(),Xo(64,"button",34),is("click",function(){return We(t),Wo(63).click()}),vs(65,"Submit"),Qo(),Qo(),Qo(),Ho(66,unt,2,1,"div",27),Qo(),Qo()}2&t&&(bi(52),Zo("ngIf",!e.selectedFile),bi(1),Zo("ngIf",e.selectedFile),bi(13),Zo("ngIf",e.activate))},directives:[gf,Ah,hf,Mu,snt],styles:[""]}),t})()}];let hnt=(()=>{class t{}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)},imports:[[Qg.forRoot(cnt)],Qg]}),t})(),fnt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["app-login"]],decls:38,vars:0,consts:[["data-toggle","modal","data-target","#myModal",1,"button"],["id","myModal","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],[1,"modal-body"],[1,"container"],["action","/action_page.php",1,"form-horizontal"],[1,"form-group"],["for","email",1,"control-label","col-sm-2"],[1,"col-sm-10"],["type","email","id","email","placeholder","Enter email","name","email",1,"form-control"],["for","pwd",1,"control-label","col-sm-2"],["type","password","id","pwd","placeholder","Enter password","name","pwd",1,"form-control"],[1,"col-sm-offset-2","col-sm-10"],[1,"checkbox"],["type","checkbox","name","remember"],["type","submit",1,"btn","btn-default"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-default"]],template:function(t,e){1&t&&(Xo(0,"button",0),vs(1,"Login"),Qo(),Xo(2,"div",1),Xo(3,"div",2),Xo(4,"div",3),Xo(5,"div",4),Xo(6,"button",5),vs(7,"\xd7"),Qo(),Xo(8,"h4",6),vs(9,"Modal Header"),Qo(),Qo(),Xo(10,"div",7),Xo(11,"div",8),Xo(12,"h2"),vs(13,"Horizontal form"),Qo(),Xo(14,"form",9),Xo(15,"div",10),Xo(16,"label",11),vs(17,"Email:"),Qo(),Xo(18,"div",12),Ko(19,"input",13),Qo(),Qo(),Xo(20,"div",10),Xo(21,"label",14),vs(22,"Password:"),Qo(),Xo(23,"div",12),Ko(24,"input",15),Qo(),Qo(),Xo(25,"div",10),Xo(26,"div",16),Xo(27,"div",17),Xo(28,"label"),Ko(29,"input",18),vs(30," Remember me"),Qo(),Qo(),Qo(),Qo(),Xo(31,"div",10),Xo(32,"div",16),Xo(33,"button",19),vs(34,"Submit"),Qo(),Qo(),Qo(),Qo(),Qo(),Qo(),Xo(35,"div",20),Xo(36,"button",21),vs(37,"Close"),Qo(),Qo(),Qo(),Qo(),Qo())},directives:[gf,Ah,hf],styles:[".button[_ngcontent-%COMP%]{background-color:#00f;border:none;color:#fff;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;position:relative;float:right}"]}),t})(),dnt=(()=>{class t{constructor(){this.title="Senior Design"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=oe({type:t,selectors:[["app-root"]],decls:25,vars:0,consts:[[1,"row","justify-content-center"],["width","40%","src","https://www.open-emr.org/wiki/skins/openemr/images/logo-full-con.png","alt","OpenEMR logo",1,"pt-5","pb-5"],["routerLink","/home","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],["routerLink","/sql-query","routerLinkActive","active"],["routerLink","/assisted-query","routerLinkActive","active"],["routerLink","/upload-data","routerLinkActive","active"]],template:function(t,e){1&t&&(Xo(0,"div",0),Ko(1,"img",1),Qo(),Ko(2,"app-login"),Xo(3,"nav"),Xo(4,"ul"),Xo(5,"li"),Xo(6,"a",2),vs(7,"Home"),Qo(),Qo(),Xo(8,"li"),Xo(9,"a",3),vs(10,"About"),Qo(),Qo(),Xo(11,"li"),Xo(12,"a",4),vs(13,"Contact"),Qo(),Qo(),Xo(14,"li"),Xo(15,"a",5),vs(16,"SQL Query"),Qo(),Qo(),Xo(17,"li"),Xo(18,"a",6),vs(19,"Assisted Query"),Qo(),Qo(),Xo(20,"li"),Xo(21,"a",7),vs(22,"Upload Data"),Qo(),Qo(),Qo(),Qo(),Ko(23,"router-outlet"),vs(24," `\n"))},directives:[fnt,Ig,Lg,Ug],styles:["h1[_ngcontent-%COMP%]{font-size:250%;text-align:center}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#444;font-weight:lighter}body[_ngcontent-%COMP%]{margin:2em}body[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{color:#333;font-family:Cambria,Georgia}*[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#333}li[_ngcontent-%COMP%]{float:left}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-align:center;padding:16px;text-decoration:none}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#111}"]}),t})();function pnt(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function gnt(t){switch(t.length){case 0:return new Qet;case 1:return t[0];default:return new Ket(t)}}function mnt(t,e,n,r,i={},o={}){const s=[],a=[];let l=-1,u=null;if(r.forEach(t=>{const n=t.offset,r=n==l,c=r&&u||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}c[r]=a}),r||a.push(c),u=c,l=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function ynt(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&vnt(n,"start",t)));break;case"done":t.onDone(()=>r(n&&vnt(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&vnt(n,"destroy",t)))}}function vnt(t,e,n){const r=n.totalTime,i=bnt(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function bnt(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function _nt(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function xnt(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let wnt=(t,e)=>!1,knt=(t,e)=>!1,Ent=(t,e,n)=>[];const Snt=pnt();(Snt||"undefined"!=typeof Element)&&(wnt=(t,e)=>t.contains(e),knt=(()=>{if(Snt||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):knt}})(),Ent=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let Ont=null,Cnt=!1;function Ant(t){Ont||(Ont=("undefined"!=typeof document?document.body:null)||{},Cnt=!!Ont.style&&"WebkitAppearance"in Ont.style);let e=!0;return Ont.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Ont.style,!e&&Cnt)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Ont.style),e}const Dnt=knt,Tnt=wnt,Mnt=Ent;function Fnt(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let jnt=(()=>{class t{validateStyleProperty(t){return Ant(t)}matchesElement(t,e){return Dnt(t,e)}containsElement(t,e){return Tnt(t,e)}query(t,e,n){return Mnt(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new Qet(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})(),Pnt=(()=>{class t{}return t.NOOP=new jnt,t})();function Nnt(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Rnt(parseFloat(e[1]),e[2])}function Rnt(t,e){switch(e){case"s":return 1e3*t;default:return t}}function $nt(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Rnt(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Rnt(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function Int(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function znt(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Int(t,n);return n}function Lnt(t,e,n){return n?e+":"+n+";":""}function Unt(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Lnt(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Lnt(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Bnt(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Xnt(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),pnt()&&Unt(t))}function qnt(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Xnt(e);t.style[n]=""}),pnt()&&Unt(t))}function Vnt(t){return Array.isArray(t)?1==t.length?t[0]:Get(t):t}const Hnt=new RegExp("{{\\s*(.+?)\\s*}}","g");function Wnt(t){let e=[];if("string"==typeof t){let n;for(;n=Hnt.exec(t);)e.push(n[1]);Hnt.lastIndex=0}return e}function Gnt(t,e,n){const r=t.toString(),i=r.replace(Hnt,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Znt(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Ynt=/-+([a-z0-9])/g;function Xnt(t){return t.replace(Ynt,(...t)=>t[1].toUpperCase())}function Qnt(t,e){return 0===t||0===e}function Knt(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=trt(t,e)})}}return e}function Jnt(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function trt(t,e){return window.getComputedStyle(t)[e]}function ert(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(irt(i,s)),"<"!=o[0]||"*"==i&&"*"==s||e.push(irt(s,i))}(t,n,e)):n.push(t),n}const nrt=new Set(["true","1"]),rrt=new Set(["false","0"]);function irt(t,e){const n=nrt.has(t)||rrt.has(t),r=nrt.has(e)||rrt.has(e);return(i,o)=>{let s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?nrt.has(t):rrt.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?nrt.has(e):rrt.has(e)),s&&a}}const ort=new RegExp("s*:selfs*,?","g");function srt(t,e,n){return new art(t).build(e,n)}class art{constructor(t){this._driver=t}build(t,e){const n=new lrt(e);return this._resetContextStyleTimingState(n),Jnt(this,Vnt(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(urt(t)){const e=t;Object.keys(e).forEach(t=>{Wnt(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Znt(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Jnt(this,Vnt(t.animation),e);return{type:1,matchers:ert(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:crt(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Jnt(this,t,e)),options:crt(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Jnt(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:crt(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return hrt($nt(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=hrt(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||$nt(r,e),hrt(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Zet({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=Zet(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(urt(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Wnt(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(urt(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(urt(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=l&&(r++,u=n.offset=l),s=s||u<0||u>1,o=o||u<a,a=u,i.push(u),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let c=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(u-1));const h=u-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return l.forEach((t,r)=>{const o=c>0?r==h?1:c*r:i[r],s=o*p;e.currentTime=f+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Jnt(this,Vnt(t.animation),e),options:crt(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:crt(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:crt(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(ort,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,_nt(e.collectedStyles,e.currentQuerySelector,{});const s=Jnt(this,Vnt(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:crt(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:$nt(t.timings,e.errors,!0);return{type:12,animation:Jnt(this,Vnt(t.animation),e),timings:n,options:null}}}class lrt{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function urt(t){return!Array.isArray(t)&&"object"==typeof t}function crt(t){var e;return t?(t=Int(t)).params&&(t.params=(e=t.params)?Int(e):null):t={},t}function hrt(t,e,n){return{duration:t,delay:e,easing:n}}function frt(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class drt{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const prt=new RegExp(":enter","g"),grt=new RegExp(":leave","g");function mrt(t,e,n,r,i,o={},s={},a,l,u=[]){return(new yrt).buildKeyframes(t,e,n,r,i,o,s,a,l,u)}class yrt{buildKeyframes(t,e,n,r,i,o,s,a,l,u=[]){l=l||new drt;const c=new brt(t,e,l,r,i,u,[]);c.options=a,c.currentTimeline.setStyles([o],null,c.errors,a),Jnt(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,c.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[frt(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Nnt(n.duration):null,o=null!=n.delay?Nnt(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Jnt(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=vrt);const t=Nnt(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Jnt(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Nnt(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),Jnt(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return $nt(e.params?Gnt(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Nnt(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=vrt);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),Jnt(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const u=l.currentTime;Jnt(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const vrt={};class brt{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vrt,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new _rt(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Nnt(n.duration)),null!=n.delay&&(r.delay=Nnt(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Gnt(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new brt(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=vrt,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new xrt(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(prt,"."+this._enterClassName)).replace(grt,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class _rt{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new _rt(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):znt(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Gnt(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=znt(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?Znt(t.values()):[],o=e.size?Znt(e.values()):[];if(n){const t=r[0],e=Int(t);t.offset=0,e.offset=1,r=[t,e]}return frt(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class xrt extends _rt{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=znt(t[0],!1);a.offset=0,i.push(a);const l=znt(t[0],!1);l.offset=wrt(s),i.push(l);const u=t.length-1;for(let r=1;r<=u;r++){let s=znt(t[r],!1);s.offset=wrt((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return frt(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function wrt(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class krt{}class Ert extends krt{normalizePropertyName(t,e){return Xnt(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(Srt[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const Srt=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ort(t,e,n,r,i,o,s,a,l,u,c,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:f}}const Crt={};class Art{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,l,u){const c=[],h=this.ast.options&&this.ast.options.params||Crt,f=this.buildStyles(n,s&&s.params||Crt,c),d=a&&a.params||Crt,p=this.buildStyles(r,d,c),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),d)},_=u?[]:mrt(t,e,this.ast.animation,i,o,f,p,b,l,c);let x=0;if(_.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),c.length)return Ort(e,this._triggerName,n,r,v,f,p,[],[],m,y,x,c);_.forEach(t=>{const n=t.element,r=_nt(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=_nt(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const w=Znt(g.values());return Ort(e,this._triggerName,n,r,v,f,p,_,w,m,y,x)}}class Drt{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Int(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=Gnt(o,r,e)),n[t]=o})}}),n}}class Trt{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Drt(t.style,t.options&&t.options.params||{})}),Mrt(this.states,"true","1"),Mrt(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Art(t,e,this.states))}),this.fallbackTransition=new Art(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Mrt(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Frt=new drt;class jrt{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=srt(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=mnt(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=mrt(this._driver,e,i,"ng-enter","ng-leave",{},{},n,Frt,r),o.forEach(t=>{const e=_nt(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=gnt(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=bnt(e,"","","");return ynt(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Prt=[],Nrt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Rrt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class $rt{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Int(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Irt=new $rt("void");class zrt{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Wrt(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=_nt(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=_nt(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Wrt(t,"ng-trigger"),Wrt(t,"ng-trigger-"+e),a[e]=Irt),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new Urt(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Wrt(t,"ng-trigger"),Wrt(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const l=new $rt(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),s[e]=l,a||(a=Irt),"void"!==l.value&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,l.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{qnt(t,n),Bnt(t,r)})}return}const u=_nt(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=i.matchTransition(a.value,l.value,t,l.params),h=!1;if(!c){if(!r)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:l,player:o,isFallbackTransition:h}),h||(Wrt(t,"ng-animate-queued"),o.onStart(()=>{Grt(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),u.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&gnt(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||Irt,a=new $rt("void"),l=new Urt(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Nrt||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Wrt(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=bnt(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,ynt(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Lrt{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new zrt(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Brt(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Brt(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Wrt(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Grt(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(Brt(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Brt(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return gnt(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Nrt,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Wrt(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?gnt(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new drt,r=[],i=new Map,o=[],s=new Map,a=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(t=>{u.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)u.add(e[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Hrt(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n="ng-enter"+p++;d.set(e,n),t.forEach(t=>Wrt(t,n))});const g=[],m=new Set,y=new Set;for(let T=0;T<this.collectedLeaveElements.length;T++){const t=this.collectedLeaveElements[T],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=Hrt(h,Array.from(m));b.forEach((t,e)=>{const n="ng-leave"+p++;v.set(e,n),t.forEach(t=>Wrt(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>Grt(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Grt(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const _=[],x=[];for(let T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const u=!c||!this.driver.containsElement(c,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,u);if(p.errors&&p.errors.length)x.push(p);else{if(u)return e.onStart(()=>qnt(i,p.fromStyles)),e.onDestroy(()=>Bnt(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>qnt(i,p.fromStyles)),e.onDestroy(()=>Bnt(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>_nt(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=l.get(e);r||l.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(x.length){const t=[];x.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const w=new Map,k=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(k.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,w))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{_nt(w,e,[]).push(t),t.destroy()})});const E=g.filter(t=>Xrt(t,a,l)),S=new Map;Vrt(S,this.driver,y,l,"*").forEach(t=>{Xrt(t,a,l)&&E.push(t)});const O=new Map;f.forEach((t,e)=>{Vrt(O,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=S.get(t),n=O.get(t);S.set(t,Object.assign(Object.assign({},e),n))});const C=[],A=[],D={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(u.has(e))return o.onDestroy(()=>Bnt(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=D;if(k.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=k.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>k.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,w,i,O,S);if(o.setRealPlayer(n),t===D)C.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=gnt(e)),r.push(o)}}else qnt(e,s.fromStyles),o.onDestroy(()=>Bnt(e,s.toStyles)),A.push(o),u.has(e)&&r.push(o)}),A.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=gnt(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let T=0;T<g.length;T++){const t=g[T],e=t.__ng_removed;if(Grt(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Zrt(this,t,r):this.processLeaveNode(t)}return g.length=0,C.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),C}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,l=_nt(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}qnt(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,l=[],u=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;u.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new Qet(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return Yrt(t,e),e}((n.get(h)||Prt).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=mnt(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&c.add(h),d){const e=new Urt(t,s,h);e.setRealPlayer(v),l.push(e)}return v});l.forEach(t=>{_nt(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),u.forEach(t=>Wrt(t,"ng-animating"));const f=gnt(h);return f.onDestroy(()=>{u.forEach(t=>Grt(t,"ng-animating")),Bnt(a,e.toStyles)}),c.forEach(t=>{_nt(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Qet(t.duration,t.delay)}}class Urt{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Qet,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>ynt(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){_nt(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Brt(t){return t&&1===t.nodeType}function qrt(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Vrt(t,e,n,r,i){const o=[];n.forEach(t=>o.push(qrt(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Rrt,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>qrt(t,o[a++])),s}function Hrt(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function Wrt(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Grt(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Zrt(t,e,n){gnt(n).onDone(()=>t.processLeaveNode(e))}function Yrt(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Ket?Yrt(r.players,e):e.push(r)}}function Xrt(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Qrt{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Lrt(t,e,n),this._timelineEngine=new jrt(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=srt(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new Trt(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=xnt(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=xnt(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Krt(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=tit(e[0]),e.length>1&&(r=tit(e[e.length-1]))):e&&(n=tit(e)),n||r?new Jrt(t,n,r):null}let Jrt=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Bnt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bnt(this._element,this._initialStyles),this._endStyles&&(Bnt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(qnt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(qnt(this._element,this._endStyles),this._endStyles=null),Bnt(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function tit(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];eit(i)&&(e=e||{},e[i]=t[i])}return e}function eit(t){return"display"===t||"position"===t}class nit{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=lit(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),ait(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),sit(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){rit(this._element,this._name,"paused")}resume(){rit(this._element,this._name,"running")}setPosition(t){const e=iit(this._element,this._name);this._position=t*this._duration,ait(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),sit(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=lit(t,"").split(","),r=oit(n,e);r>=0&&(n.splice(r,1),ait(t,"",n.join(",")))}(this._element,this._name))}}function rit(t,e,n){ait(t,"PlayState",n,iit(t,e))}function iit(t,e){const n=lit(t,"");return n.indexOf(",")>0?oit(n.split(","),e):oit([n],e)}function oit(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function sit(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function ait(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function lit(t,e){return t.style["animation"+e]||""}class uit{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new nit(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:trt(this.element,n))})}this.currentSnapshot=t}}class cit extends Qet{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Fnt(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class hit{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return Ant(t)}matchesElement(t,e){return Dnt(t,e)}containsElement(t,e){return Tnt(t,e)}query(t,e,n){return Mnt(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Fnt(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof uit),l={};Qnt(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Knt(t,e,l));if(0==n)return new cit(t,u);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);const f=Krt(t,e),d=new uit(t,e,c,n,r,i,u,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}}class fit{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:trt(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class dit{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(pit().toString()),this._cssKeyframesDriver=new hit}validateStyleProperty(t){return Ant(t)}matchesElement(t,e){return Dnt(t,e)}containsElement(t,e){return Tnt(t,e)}query(t,e,n){return Mnt(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const l={},u=o.filter(t=>t instanceof fit);Qnt(n,r)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=Krt(t,e=Knt(t,e=e.map(t=>znt(t,!1)),l));return new fit(t,e,a,c)}}function pit(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let git=(()=>{class t extends Het{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:qt.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Get(t):t;return vit(this._renderer,null,e,"register",[n]),new mit(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(vr(Vs),vr(su))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();class mit extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new yit(this._id,t,e||{},this._renderer)}}class yit{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return vit(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function vit(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let bit=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new _it("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new xit(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(vr(Vs),vr(Qrt),vr(Dl))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();class _it{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class xit extends _it{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let wit=(()=>{class t extends Qrt{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(vr(su),vr(Pnt),vr(krt))},t.\u0275prov=At({token:t,factory:t.\u0275fac}),t})();const kit=[{provide:Pnt,useFactory:function(){return"function"==typeof pit()?new dit:new hit}},{provide:new nr("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:Het,useClass:git},{provide:krt,useFactory:function(){return new Ert}},{provide:Qrt,useClass:wit},{provide:Vs,useFactory:function(t,e,n){return new bit(t,e,n)},deps:[rc,Qrt,Dl]}];let Eit=(()=>{class t{}return t.\u0275mod=ue({type:t}),t.\u0275inj=Dt({factory:function(e){return new(e||t)},providers:kit,imports:[gc]}),t})(),Sit=(()=>{class t{}return t.\u0275mod=ue({type:t,bootstrap:[dnt,fnt]}),t.\u0275inj=Dt({factory:function(e){return new(e||t)},providers:[Vet],imports:[[gc,hnt,Kc,kf,Ef,Eit]]}),t})();dc().bootstrapModule(Sit).then(t=>{window.ngRef&&window.ngRef.destroy(),window.ngRef=t}).catch(t=>console.error(t))},zhAb:function(t,e,n){var r=n("aagx"),i=n("aCFj"),o=n("w2a5")(!1),s=n("YTvA")("IE_PROTO");t.exports=function(t,e){var n,a=i(t),l=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);for(;e.length>l;)r(a,n=e[l++])&&(~o(u,n)||u.push(n));return u}},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},"zq+C":function(t,e,n){var r=n("N6cJ"),i=n("y3w9"),o=r.key,s=r.map,a=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=s(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var l=a.get(e);return l.delete(n),!!l.size||a.delete(e)}})},zv5s:function(t,e,n){const r=n("ex/Z");t.exports=(t,e)=>{try{return new r(t,e).range||"*"}catch(n){return null}}}},[[0,0]]]);